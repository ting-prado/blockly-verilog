/*! For license information please see 859.bundle.js.LICENSE.txt */
(()=>{var t={72316:(t,e,n)=>{var r,i,o;o="object"==typeof self&&self.self===self&&self||"object"==typeof n.g&&n.g.global===n.g&&n.g,r=[n(13469),n(9983),e],i=function(t,e,n){o.Backbone=function(t,e,n,r){var i=t.Backbone,o=Array.prototype.slice;e.VERSION="1.4.1",e.$=r,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s,a=e.Events={},u=/\s+/,c=function(t,e,r,i,o){var s,a=0;if(r&&"object"==typeof r){void 0!==i&&"context"in o&&void 0===o.context&&(o.context=i);for(s=n.keys(r);a<s.length;a++)e=c(t,e,s[a],r[s[a]],o)}else if(r&&u.test(r))for(s=r.split(u);a<s.length;a++)e=t(e,s[a],i,o);else e=t(e,r,i,o);return e};a.on=function(t,e,n){return this._events=c(l,this._events||{},t,e,{context:n,ctx:this,listening:s}),s&&((this._listeners||(this._listeners={}))[s.id]=s,s.interop=!1),this},a.listenTo=function(t,e,r){if(!t)return this;var i=t._listenId||(t._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=s=o[i];a||(this._listenId||(this._listenId=n.uniqueId("l")),a=s=o[i]=new v(this,t));var u=h(t,e,r,this);if(s=void 0,u)throw u;return a.interop&&a.on(e,r),this};var l=function(t,e,n,r){if(n){var i=t[e]||(t[e]=[]),o=r.context,s=r.ctx,a=r.listening;a&&a.count++,i.push({callback:n,context:o,ctx:o||s,listening:a})}return t},h=function(t,e,n,r){try{t.on(e,n,r)}catch(t){return t}};a.off=function(t,e,n){return this._events?(this._events=c(f,this._events,t,e,{context:n,listeners:this._listeners}),this):this},a.stopListening=function(t,e,r){var i=this._listeningTo;if(!i)return this;for(var o=t?[t._listenId]:n.keys(i),s=0;s<o.length;s++){var a=i[o[s]];if(!a)break;a.obj.off(e,r,this),a.interop&&a.off(e,r)}return n.isEmpty(i)&&(this._listeningTo=void 0),this};var f=function(t,e,r,i){if(t){var o,s=i.context,a=i.listeners,u=0;if(e||s||r){for(o=e?[e]:n.keys(t);u<o.length;u++){var c=t[e=o[u]];if(!c)break;for(var l=[],h=0;h<c.length;h++){var f=c[h];if(r&&r!==f.callback&&r!==f.callback._callback||s&&s!==f.context)l.push(f);else{var d=f.listening;d&&d.off(e,r)}}l.length?t[e]=l:delete t[e]}return t}for(o=n.keys(a);u<o.length;u++)a[o[u]].cleanup()}};a.once=function(t,e,n){var r=c(d,{},t,e,this.off.bind(this));return"string"==typeof t&&null==n&&(e=void 0),this.on(r,e,n)},a.listenToOnce=function(t,e,n){var r=c(d,{},e,n,this.stopListening.bind(this,t));return this.listenTo(t,r)};var d=function(t,e,r,i){if(r){var o=t[e]=n.once((function(){i(e,o),r.apply(this,arguments)}));o._callback=r}return t};a.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),r=0;r<e;r++)n[r]=arguments[r+1];return c(p,this._events,t,void 0,n),this};var p=function(t,e,n,r){if(t){var i=t[e],o=t.all;i&&o&&(o=o.slice()),i&&g(i,r),o&&g(o,[e].concat(r))}return t},g=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}},v=function(t,e){this.id=t._listenId,this.listener=t,this.obj=e,this.interop=!0,this.count=0,this._events=void 0};v.prototype.on=a.on,v.prototype.off=function(t,e){var n;this.interop?(this._events=c(f,this._events,t,e,{context:void 0,listeners:void 0}),n=!this._events):(this.count--,n=0===this.count),n&&this.cleanup()},v.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},a.bind=a.on,a.unbind=a.off,n.extend(e,a);var m=e.Model=function(t,e){var r=t||{};e||(e={}),this.preinitialize.apply(this,arguments),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{});var i=n.result(this,"defaults");r=n.defaults(n.extend({},i,r),i),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(m.prototype,a,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,r){if(null==t)return this;var i;if("object"==typeof t?(i=t,r=e):(i={})[t]=e,r||(r={}),!this._validate(i,r))return!1;var o=r.unset,s=r.silent,a=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={});var c=this.attributes,l=this.changed,h=this._previousAttributes;for(var f in i)e=i[f],n.isEqual(c[f],e)||a.push(f),n.isEqual(h[f],e)?delete l[f]:l[f]=e,o?delete c[f]:c[f]=e;if(this.idAttribute in i){var d=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,d,r)}if(!s){a.length&&(this._pending=r);for(var p=0;p<a.length;p++)this.trigger("change:"+a[p],this,c[a[p]],r)}if(u)return this;if(!s)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e,r=this._changing?this._previousAttributes:this.attributes,i={};for(var o in t){var s=t[o];n.isEqual(r[o],s)||(i[o]=s,e=!0)}return!!e&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,r=t.success;return t.success=function(n){var i=t.parse?e.parse(n,t):n;if(!e.set(i,t))return!1;r&&r.call(t.context,e,n,t),e.trigger("sync",e,n,t)},q(this,t),this.sync("read",this,t)},save:function(t,e,r){var i;null==t||"object"==typeof t?(i=t,r=e):(i={})[t]=e;var o=(r=n.extend({validate:!0,parse:!0},r)).wait;if(i&&!o){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var s=this,a=r.success,u=this.attributes;r.success=function(t){s.attributes=u;var e=r.parse?s.parse(t,r):t;if(o&&(e=n.extend({},i,e)),e&&!s.set(e,r))return!1;a&&a.call(r.context,s,t,r),s.trigger("sync",s,t,r)},q(this,r),i&&o&&(this.attributes=n.extend({},u,i));var c=this.isNew()?"create":r.patch?"patch":"update";"patch"!==c||r.attrs||(r.attrs=i);var l=this.sync(c,this,r);return this.attributes=u,l},destroy:function(t){t=t?n.clone(t):{};var e=this,r=t.success,i=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){i&&o(),r&&r.call(t.context,e,n,t),e.isNew()||e.trigger("sync",e,n,t)};var s=!1;return this.isNew()?n.defer(t.success):(q(this,t),s=this.sync("delete",this,t)),i||o(),s},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||G();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;return!r||(this.trigger("invalid",this,r,n.extend(e,{validationError:r})),!1)}});var y=e.Collection=function(t,e){e||(e={}),this.preinitialize.apply(this,arguments),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},b={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},w=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var r,i=Array(t.length-n),o=e.length;for(r=0;r<i.length;r++)i[r]=t[r+n];for(r=0;r<o;r++)t[r+n]=e[r];for(r=0;r<i.length;r++)t[r+o+n]=i[r]};n.extend(y.prototype,a,{model:m,preinitialize:function(){},initialize:function(){},toJSON:function(t){return this.map((function(e){return e.toJSON(t)}))},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,x))},remove:function(t,e){e=n.extend({},e);var r=!n.isArray(t);t=r?[t]:t.slice();var i=this._removeModels(t,e);return!e.silent&&i.length&&(e.changes={added:[],merged:[],removed:i},this.trigger("update",this,e)),r?i[0]:i},set:function(t,e){if(null!=t){(e=n.extend({},b,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var r=!n.isArray(t);t=r?[t]:t.slice();var i=e.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var o,s,a=[],u=[],c=[],l=[],h={},f=e.add,d=e.merge,p=e.remove,g=!1,v=this.comparator&&null==i&&!1!==e.sort,m=n.isString(this.comparator)?this.comparator:null;for(s=0;s<t.length;s++){o=t[s];var y=this.get(o);if(y){if(d&&o!==y){var x=this._isModel(o)?o.attributes:o;e.parse&&(x=y.parse(x,e)),y.set(x,e),c.push(y),v&&!g&&(g=y.hasChanged(m))}h[y.cid]||(h[y.cid]=!0,a.push(y)),t[s]=y}else f&&(o=t[s]=this._prepareModel(o,e))&&(u.push(o),this._addReference(o,e),h[o.cid]=!0,a.push(o))}if(p){for(s=0;s<this.length;s++)h[(o=this.models[s]).cid]||l.push(o);l.length&&this._removeModels(l,e)}var _=!1,A=!v&&f&&p;if(a.length&&A?(_=this.length!==a.length||n.some(this.models,(function(t,e){return t!==a[e]})),this.models.length=0,w(this.models,a,0),this.length=this.models.length):u.length&&(v&&(g=!0),w(this.models,u,null==i?this.length:i),this.length=this.models.length),g&&this.sort({silent:!0}),!e.silent){for(s=0;s<u.length;s++)null!=i&&(e.index=i+s),(o=u[s]).trigger("add",o,this,e);(g||_)&&this.trigger("sort",this,e),(u.length||l.length||c.length)&&(e.changes={added:u,removed:l,merged:c},this.trigger("update",this,e))}return r?t[0]:t}},reset:function(t,e){e=e?n.clone(e):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(this._isModel(t)?t.attributes:t,t.idAttribute)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var r=e.length;return n.isFunction(e)&&(e=e.bind(this)),1===r||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){var e=(t=n.extend({parse:!0},t)).success,r=this;return t.success=function(n){var i=t.reset?"reset":"set";r[i](n,t),e&&e.call(t.context,r,n,t),r.trigger("sync",r,n,t)},q(this,t),this.sync("read",this,t)},create:function(t,e){var r=(e=e?n.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;r||this.add(t,e);var i=this,o=e.success;return e.success=function(t,e,n){r&&i.add(t,n),o&&o.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t,e){return t[e||this.model.prototype.idAttribute||"id"]},values:function(){return new A(this,k)},keys:function(){return new A(this,S)},entries:function(){return new A(this,E)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){return this._isModel(t)?(t.collection||(t.collection=this),t):((e=e?n.clone(e):{}).collection=this,(r=this.model.prototype?new this.model(t,e):this.model(t,e)).validationError?(this.trigger("invalid",this,r.validationError,e),!1):r);var r},_removeModels:function(t,e){for(var n=[],r=0;r<t.length;r++){var i=this.get(t[r]);if(i){var o=this.indexOf(i);this.models.splice(o,1),this.length--,delete this._byId[i.cid];var s=this.modelId(i.attributes,i.idAttribute);null!=s&&delete this._byId[s],e.silent||(e.index=o,i.trigger("remove",i,this,e)),n.push(i),this._removeReference(i,e)}}return n},_isModel:function(t){return t instanceof m},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes,t.idAttribute);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes,t.idAttribute);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){if(e){if(("add"===t||"remove"===t)&&n!==this)return;if("destroy"===t&&this.remove(e,r),"changeId"===t){var i=this.modelId(e.previousAttributes(),e.idAttribute),o=this.modelId(e.attributes,e.idAttribute);null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=e)}}this.trigger.apply(this,arguments)}});var _="function"==typeof Symbol&&Symbol.iterator;_&&(y.prototype[_]=y.prototype.values);var A=function(t,e){this._collection=t,this._kind=e,this._index=0},k=1,S=2,E=3;_&&(A.prototype[_]=function(){return this}),A.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var t,e=this._collection.at(this._index);if(this._index++,this._kind===k)t=e;else{var n=this._collection.modelId(e.attributes,e.idAttribute);t=this._kind===S?n:[n,e]}return{value:t,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var P=e.View=function(t){this.cid=n.uniqueId("view"),this.preinitialize.apply(this,arguments),n.extend(this,n.pick(t,T)),this._ensureElement(),this.initialize.apply(this,arguments)},C=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];n.extend(P.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;for(var e in this.undelegateEvents(),t){var r=t[e];if(n.isFunction(r)||(r=this[r]),r){var i=e.match(C);this.delegate(i[1],i[2],r.bind(this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}});var N=function(t,e,r,i){n.each(r,(function(n,r){e[r]&&(t.prototype[r]=function(t,e,n,r){switch(e){case 1:return function(){return t[n](this[r])};case 2:return function(e){return t[n](this[r],e)};case 3:return function(e,i){return t[n](this[r],L(e,this),i)};case 4:return function(e,i,o){return t[n](this[r],L(e,this),i,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[r]),t[n].apply(t,e)}}}(e,n,r,i))}))},L=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?M(t):n.isString(t)?function(e){return e.get(t)}:t},M=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}};n.each([[y,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[m,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],(function(t){var e=t[0],r=t[1],i=t[2];e.mixin=function(t){var r=n.reduce(n.functions(t),(function(t,e){return t[e]=0,t}),{});N(e,t,r,i)},N(e,n,r,i)})),e.sync=function(t,r,i){var o=O[t];n.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:o,dataType:"json"};if(i.url||(s.url=n.result(r,"url")||G()),null!=i.data||!r||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",i.emulateJSON&&(s.data._method=o);var a=i.beforeSend;i.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),a)return a.apply(this,arguments)}}"GET"===s.type||i.emulateJSON||(s.processData=!1);var u=i.error;i.error=function(t,e,n){i.textStatus=e,i.errorThrown=n,u&&u.call(i.context,t,e,n)};var c=i.xhr=e.ajax(n.extend(s,i));return r.trigger("request",r,c,i),c};var O={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var I=e.Router=function(t){t||(t={}),this.preinitialize.apply(this,arguments),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},R=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,D=/\*\w+/g,j=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(I.prototype,a,{preinitialize:function(){},initialize:function(){},route:function(t,r,i){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return e.history.route(t,(function(n){var s=o._extractParameters(t,n);!1!==o.execute(i,s,r)&&(o.trigger.apply(o,["route:"+r].concat(s)),o.trigger("route",r,s),e.history.trigger("route",o,r,s))})),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(j,"\\$&").replace(R,"(?:$1)?").replace(B,(function(t,e){return e?t:"([^/?]+)"})).replace(D,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return n.map(r,(function(t,e){return e===r.length-1?t||null:t?decodeURIComponent(t):null}))}});var V=e.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,z=/^\/+|\/+$/g,U=/#.*$/;V.started=!1,n.extend(V.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(F,"")},start:function(t){if(V.started)throw new Error("Backbone.history has already been started");if(V.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(z,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),V.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),n.some(this.handlers,(function(e){if(e.route.test(t))return e.callback(t),!0})))},navigate:function(t,e){if(!V.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;""!==t&&"?"!==t.charAt(0)||(n=n.slice(0,-1)||"/");var r=n+t;t=t.replace(U,"");var i=this.decodeFragment(t);if(this.fragment!==i){if(this.fragment=i,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;e.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),e.history=new V;m.extend=y.extend=I.extend=P.extend=V.extend=function(t,e){var r,i=this;return r=t&&n.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,e),r.prototype=n.create(i.prototype,t),r.prototype.constructor=r,r.__super__=i.prototype,r};var G=function(){throw new Error('A "url" property or function must be specified')},q=function(t,e){var n=e.error;e.error=function(r){n&&n.call(e.context,t,r,e),t.trigger("error",t,r,e)}};return e}(o,n,t,e)}.apply(e,r),void 0===i||(t.exports=i)},70681:(t,e,n)=>{t.exports={graphlib:n(70574),layout:n(98123),debug:n(27570),util:{time:n(11138).time,notime:n(11138).notime},version:n(88177)}},92188:(t,e,n)=>{"use strict";var r=n(38436),i=n(74079);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?i(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},i={};return r.forEach(t.nodes(),(function o(s){r.has(i,s)||(i[s]=!0,n[s]=!0,r.forEach(t.outEdges(s),(function(t){r.has(n,t.w)?e.push(t):o(t.w)})),delete n[s])})),e}(t);r.forEach(e,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))}))},undo:function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}}},61133:(t,e,n)=>{var r=n(38436),i=n(11138);function o(t,e,n,r,o,s){var a={width:0,height:0,rank:s,borderType:e},u=o[e][s-1],c=i.addDummyNode(t,"border",a,n);o[e][s]=c,t.setParent(c,r),u&&t.setEdge(u,c,{weight:1})}t.exports=function(t){r.forEach(t.children(),(function e(n){var i=t.children(n),s=t.node(n);if(i.length&&r.forEach(i,e),r.has(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(var a=s.minRank,u=s.maxRank+1;a<u;++a)o(t,"borderLeft","_bl",n,s,a),o(t,"borderRight","_br",n,s,a)}}))}},53258:(t,e,n)=>{"use strict";var r=n(38436);function i(t){r.forEach(t.nodes(),(function(e){o(t.node(e))})),r.forEach(t.edges(),(function(e){o(t.edge(e))}))}function o(t){var e=t.width;t.width=t.height,t.height=e}function s(t){t.y=-t.y}function a(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||i(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){r.forEach(t.nodes(),(function(e){s(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,s),r.has(n,"y")&&s(n)}))}(t),"lr"!==e&&"rl"!==e||(function(t){r.forEach(t.nodes(),(function(e){a(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,a),r.has(n,"x")&&a(n)}))}(t),i(t))}}},77822:t=>{function e(){var t={};t._next=t._prev=t,this._sentinel=t}function n(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function r(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=e,e.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return n(e),e},e.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&n(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},e.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,r)),n=n._prev;return"["+t.join(", ")+"]"}},27570:(t,e,n)=>{var r=n(38436),i=n(11138),o=n(70574).Graph;t.exports={debugOrdering:function(t){var e=i.buildLayerMatrix(t),n=new o({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),(function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)})),r.forEach(t.edges(),(function(t){n.setEdge(t.v,t.w,{},t.name)})),r.forEach(e,(function(t,e){var i="layer"+e;n.setNode(i,{rank:"same"}),r.reduce(t,(function(t,e){return n.setEdge(t,e,{style:"invis"}),e}))})),n}}},70574:(t,e,n)=>{var r;try{r=n(28282)}catch(t){}r||(r=window.graphlib),t.exports=r},74079:(t,e,n)=>{var r=n(38436),i=n(70574).Graph,o=n(77822);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new i,s=0,a=0;r.forEach(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),r.forEach(t.edges(),(function(t){var r=n.edge(t.v,t.w)||0,i=e(t),o=r+i;n.setEdge(t.v,t.w,o),a=Math.max(a,n.node(t.v).out+=i),s=Math.max(s,n.node(t.w).in+=i)}));var c=r.range(a+s+3).map((function(){return new o})),l=s+1;return r.forEach(n.nodes(),(function(t){u(c,l,n.node(t))})),{graph:n,buckets:c,zeroIdx:l}}(t,e||s),c=function(t,e,n){for(var r,i=[],o=e[e.length-1],s=e[0];t.nodeCount();){for(;r=s.dequeue();)a(t,e,n,r);for(;r=o.dequeue();)a(t,e,n,r);if(t.nodeCount())for(var u=e.length-2;u>0;--u)if(r=e[u].dequeue()){i=i.concat(a(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(c,(function(e){return t.outEdges(e.v,e.w)})),!0)};var s=r.constant(1);function a(t,e,n,i,o){var s=o?[]:void 0;return r.forEach(t.inEdges(i.v),(function(r){var i=t.edge(r),a=t.node(r.v);o&&s.push({v:r.v,w:r.w}),a.out-=i,u(e,n,a)})),r.forEach(t.outEdges(i.v),(function(r){var i=t.edge(r),o=r.w,s=t.node(o);s.in-=i,u(e,n,s)})),t.removeNode(i.v),s}function u(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},98123:(t,e,n)=>{"use strict";var r=n(38436),i=n(92188),o=n(45995),s=n(78093),a=n(11138).normalizeRanks,u=n(24219),c=n(11138).removeEmptyRanks,l=n(72981),h=n(61133),f=n(53258),d=n(53408),p=n(17873),g=n(11138),v=n(70574).Graph;t.exports=function(t,e){var n=e&&e.debugTiming?g.time:g.notime;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return function(t){var e=new v({multigraph:!0,compound:!0}),n=E(t.graph());return e.setGraph(r.merge({},y,S(n,m),r.pick(n,b))),r.forEach(t.nodes(),(function(n){var i=E(t.node(n));e.setNode(n,r.defaults(S(i,x),w)),e.setParent(n,t.parent(n))})),r.forEach(t.edges(),(function(n){var i=E(t.edge(n));e.setEdge(n,r.merge({},A,S(i,_),r.pick(i,k)))})),e}(t)}));n("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),(function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){r.forEach(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){i.run(t)})),e("    nestingGraph.run",(function(){l.run(t)})),e("    rank",(function(){s(g.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e};g.addDummyNode(t,"edge-proxy",i,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){c(t)})),e("    nestingGraph.cleanup",(function(){l.cleanup(t)})),e("    normalizeRanks",(function(){a(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;r.forEach(t.nodes(),(function(n){var i=t.node(n);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=r.max(e,i.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){o.run(t)})),e("    parentDummyChains",(function(){u(t)})),e("    addBorderSegments",(function(){h(t)})),e("    order",(function(){d(t)})),e("    insertSelfEdges",(function(){!function(t){var e=g.buildLayerMatrix(t);r.forEach(e,(function(e){var n=0;r.forEach(e,(function(e,i){var o=t.node(e);o.order=i+n,r.forEach(o.selfEdges,(function(e){g.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:i+ ++n,e:e.e,label:e.label},"_se")})),delete o.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){f.adjust(t)})),e("    position",(function(){p(t)})),e("    positionSelfEdges",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,s=n.x-i,a=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*s/3,y:o-a},{x:i+5*s/6,y:o-a},{x:i+s,y:o},{x:i+5*s/6,y:o+a},{x:i+2*s/3,y:o+a}],n.label.x=n.x,n.label.y=n.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){r.forEach(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),i=t.node(n.borderTop),o=t.node(n.borderBottom),s=t.node(r.last(n.borderLeft)),a=t.node(r.last(n.borderRight));n.width=Math.abs(a.x-s.x),n.height=Math.abs(o.y-i.y),n.x=s.x+n.width/2,n.y=i.y+n.height/2}})),r.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){o.undo(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){f.undo(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,i=Number.POSITIVE_INFINITY,o=0,s=t.graph(),a=s.marginx||0,u=s.marginy||0;function c(t){var r=t.x,s=t.y,a=t.width,u=t.height;e=Math.min(e,r-a/2),n=Math.max(n,r+a/2),i=Math.min(i,s-u/2),o=Math.max(o,s+u/2)}r.forEach(t.nodes(),(function(e){c(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.has(n,"x")&&c(n)})),e-=a,i-=u,r.forEach(t.nodes(),(function(n){var r=t.node(n);r.x-=e,r.y-=i})),r.forEach(t.edges(),(function(n){var o=t.edge(n);r.forEach(o.points,(function(t){t.x-=e,t.y-=i})),r.has(o,"x")&&(o.x-=e),r.has(o,"y")&&(o.y-=i)})),s.width=n-e+a,s.height=o-i+u}(t)})),e("    assignNodeIntersects",(function(){!function(t){r.forEach(t.edges(),(function(e){var n,r,i=t.edge(e),o=t.node(e.v),s=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=s,r=o),i.points.unshift(g.intersectRect(o,n)),i.points.push(g.intersectRect(s,r))}))}(t)})),e("    reversePoints",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){i.undo(t)}))}(e,n)})),n("  updateInputGraph",(function(){!function(t,e){r.forEach(t.nodes(),(function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))})),r.forEach(t.edges(),(function(n){var i=t.edge(n),o=e.edge(n);i.points=o.points,r.has(o,"x")&&(i.x=o.x,i.y=o.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))};var m=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],x=["width","height"],w={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],A={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},k=["labelpos"];function S(t,e){return r.mapValues(r.pick(t,e),Number)}function E(t){var e={};return r.forEach(t,(function(t,n){e[n.toLowerCase()]=t})),e}},38436:(t,e,n)=>{var r;try{r={cloneDeep:n(50361),constant:n(75703),defaults:n(91747),each:n(66073),filter:n(63105),find:n(13311),flatten:n(85564),forEach:n(84486),forIn:n(62620),has:n(18721),isUndefined:n(52353),last:n(10928),map:n(35161),mapValues:n(66604),max:n(6162),merge:n(82492),min:n(53632),minBy:n(22762),now:n(7771),pick:n(78718),range:n(96026),reduce:n(54061),sortBy:n(89734),uniqueId:n(73955),values:n(52628),zipObject:n(7287)}}catch(t){}r||(r=window._),t.exports=r},72981:(t,e,n)=>{var r=n(38436),i=n(11138);function o(t,e,n,s,a,u,c){var l=t.children(c);if(l.length){var h=i.addBorderNode(t,"_bt"),f=i.addBorderNode(t,"_bb"),d=t.node(c);t.setParent(h,c),d.borderTop=h,t.setParent(f,c),d.borderBottom=f,r.forEach(l,(function(r){o(t,e,n,s,a,u,r);var i=t.node(r),l=i.borderTop?i.borderTop:r,d=i.borderBottom?i.borderBottom:r,p=i.borderTop?s:2*s,g=l!==d?1:a-u[c]+1;t.setEdge(h,l,{weight:p,minlen:g,nestingEdge:!0}),t.setEdge(d,f,{weight:p,minlen:g,nestingEdge:!0})})),t.parent(c)||t.setEdge(e,h,{weight:0,minlen:a+u[c]})}else c!==e&&t.setEdge(e,c,{weight:0,minlen:n})}t.exports={run:function(t){var e=i.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};function n(i,o){var s=t.children(i);s&&s.length&&r.forEach(s,(function(t){n(t,o+1)})),e[i]=o}return r.forEach(t.children(),(function(t){n(t,1)})),e}(t),s=r.max(r.values(n))-1,a=2*s+1;t.graph().nestingRoot=e,r.forEach(t.edges(),(function(e){t.edge(e).minlen*=a}));var u=function(t){return r.reduce(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}(t)+1;r.forEach(t.children(),(function(r){o(t,e,a,u,s,n,r)})),t.graph().nodeRankFactor=a},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}}},45995:(t,e,n)=>{"use strict";var r=n(38436),i=n(11138);t.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),(function(e){!function(t,e){var n,r,o,s=e.v,a=t.node(s).rank,u=e.w,c=t.node(u).rank,l=e.name,h=t.edge(e),f=h.labelRank;if(c!==a+1){for(t.removeEdge(e),o=0,++a;a<c;++o,++a)h.points=[],r={width:0,height:0,edgeLabel:h,edgeObj:e,rank:a},n=i.addDummyNode(t,"edge",r,"_d"),a===f&&(r.width=h.width,r.height=h.height,r.dummy="edge-label",r.labelpos=h.labelpos),t.setEdge(s,n,{weight:h.weight},l),0===o&&t.graph().dummyChains.push(n),s=n;t.setEdge(s,u,{weight:h.weight},l)}}(t,e)}))},undo:function(t){r.forEach(t.graph().dummyChains,(function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)}))}}},55093:(t,e,n)=>{var r=n(38436);t.exports=function(t,e,n){var i,o={};r.forEach(n,(function(n){for(var r,s,a=t.parent(n);a;){if((r=t.parent(a))?(s=o[r],o[r]=a):(s=i,i=a),s&&s!==a)return void e.setEdge(s,a);a=r}}))}},35439:(t,e,n)=>{var r=n(38436);t.exports=function(t,e){return r.map(e,(function(e){var n=t.inEdges(e);if(n.length){var i=r.reduce(n,(function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}}),{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}return{v:e}}))}},23128:(t,e,n)=>{var r=n(38436),i=n(70574).Graph;t.exports=function(t,e,n){var o=function(t){for(var e;t.hasNode(e=r.uniqueId("_root")););return e}(t),s=new i({compound:!0}).setGraph({root:o}).setDefaultNodeLabel((function(e){return t.node(e)}));return r.forEach(t.nodes(),(function(i){var a=t.node(i),u=t.parent(i);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(s.setNode(i),s.setParent(i,u||o),r.forEach(t[n](i),(function(e){var n=e.v===i?e.w:e.v,o=s.edge(n,i),a=r.isUndefined(o)?0:o.weight;s.setEdge(n,i,{weight:t.edge(e).weight+a})})),r.has(a,"minRank")&&s.setNode(i,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))})),s}},56630:(t,e,n)=>{"use strict";var r=n(38436);function i(t,e,n){for(var i=r.zipObject(n,r.map(n,(function(t,e){return e}))),o=r.flatten(r.map(e,(function(e){return r.sortBy(r.map(t.outEdges(e),(function(e){return{pos:i[e.w],weight:t.edge(e).weight}})),"pos")})),!0),s=1;s<n.length;)s<<=1;var a=2*s-1;s-=1;var u=r.map(new Array(a),(function(){return 0})),c=0;return r.forEach(o.forEach((function(t){var e=t.pos+s;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),u[e=e-1>>1]+=t.weight;c+=t.weight*n}))),c}t.exports=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=i(t,e[r-1],e[r]);return n}},53408:(t,e,n)=>{"use strict";var r=n(38436),i=n(2588),o=n(56630),s=n(61026),a=n(23128),u=n(55093),c=n(70574).Graph,l=n(11138);function h(t,e,n){return r.map(e,(function(e){return a(t,e,n)}))}function f(t,e){var n=new c;r.forEach(t,(function(t){var i=t.graph().root,o=s(t,i,n,e);r.forEach(o.vs,(function(e,n){t.node(e).order=n})),u(t,n,o.vs)}))}function d(t,e){r.forEach(e,(function(e){r.forEach(e,(function(e,n){t.node(e).order=n}))}))}t.exports=function(t){var e=l.maxRank(t),n=h(t,r.range(1,e+1),"inEdges"),s=h(t,r.range(e-1,-1,-1),"outEdges"),a=i(t);d(t,a);for(var u,c=Number.POSITIVE_INFINITY,p=0,g=0;g<4;++p,++g){f(p%2?n:s,p%4>=2),a=l.buildLayerMatrix(t);var v=o(t,a);v<c&&(g=0,u=r.cloneDeep(a),c=v)}d(t,u)}},2588:(t,e,n)=>{"use strict";var r=n(38436);t.exports=function(t){var e={},n=r.filter(t.nodes(),(function(e){return!t.children(e).length})),i=r.max(r.map(n,(function(e){return t.node(e).rank}))),o=r.map(r.range(i+1),(function(){return[]})),s=r.sortBy(n,(function(e){return t.node(e).rank}));return r.forEach(s,(function n(i){if(!r.has(e,i)){e[i]=!0;var s=t.node(i);o[s.rank].push(i),r.forEach(t.successors(i),n)}})),o}},83678:(t,e,n)=>{"use strict";var r=n(38436);t.exports=function(t,e){var n={};return r.forEach(t,(function(t,e){var i=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(i.barycenter=t.barycenter,i.weight=t.weight)})),r.forEach(e.edges(),(function(t){var e=n[t.v],i=n[t.w];r.isUndefined(e)||r.isUndefined(i)||(i.indegree++,e.out.push(n[t.w]))})),function(t){var e=[];function n(t){return function(e){var n,i,o,s;e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&(i=e,o=0,s=0,(n=t).weight&&(o+=n.barycenter*n.weight,s+=n.weight),i.weight&&(o+=i.barycenter*i.weight,s+=i.weight),n.vs=i.vs.concat(n.vs),n.barycenter=o/s,n.weight=s,n.i=Math.min(i.i,n.i),i.merged=!0)}}function i(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var o=t.pop();e.push(o),r.forEach(o.in.reverse(),n(o)),r.forEach(o.out,i(o))}return r.map(r.filter(e,(function(t){return!t.merged})),(function(t){return r.pick(t,["vs","i","barycenter","weight"])}))}(r.filter(n,(function(t){return!t.indegree})))}},61026:(t,e,n)=>{var r=n(38436),i=n(35439),o=n(83678),s=n(87304);t.exports=function t(e,n,a,u){var c=e.children(n),l=e.node(n),h=l?l.borderLeft:void 0,f=l?l.borderRight:void 0,d={};h&&(c=r.filter(c,(function(t){return t!==h&&t!==f})));var p=i(e,c);r.forEach(p,(function(n){if(e.children(n.v).length){var i=t(e,n.v,a,u);d[n.v]=i,r.has(i,"barycenter")&&(o=n,s=i,r.isUndefined(o.barycenter)?(o.barycenter=s.barycenter,o.weight=s.weight):(o.barycenter=(o.barycenter*o.weight+s.barycenter*s.weight)/(o.weight+s.weight),o.weight+=s.weight))}var o,s}));var g=o(p,a);!function(t,e){r.forEach(t,(function(t){t.vs=r.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(g,d);var v=s(g,u);if(h&&(v.vs=r.flatten([h,v.vs,f],!0),e.predecessors(h).length)){var m=e.node(e.predecessors(h)[0]),y=e.node(e.predecessors(f)[0]);r.has(v,"barycenter")||(v.barycenter=0,v.weight=0),v.barycenter=(v.barycenter*v.weight+m.order+y.order)/(v.weight+2),v.weight+=2}return v}},87304:(t,e,n)=>{var r=n(38436),i=n(11138);function o(t,e,n){for(var i;e.length&&(i=r.last(e)).i<=n;)e.pop(),t.push(i.vs),n++;return n}t.exports=function(t,e){var n,s=i.partition(t,(function(t){return r.has(t,"barycenter")})),a=s.lhs,u=r.sortBy(s.rhs,(function(t){return-t.i})),c=[],l=0,h=0,f=0;a.sort((n=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:n?e.i-t.i:t.i-e.i})),f=o(c,u,f),r.forEach(a,(function(t){f+=t.vs.length,c.push(t.vs),l+=t.barycenter*t.weight,h+=t.weight,f=o(c,u,f)}));var d={vs:r.flatten(c,!0)};return h&&(d.barycenter=l/h,d.weight=h),d}},24219:(t,e,n)=>{var r=n(38436);t.exports=function(t){var e=function(t){var e={},n=0;return r.forEach(t.children(),(function i(o){var s=n;r.forEach(t.children(o),i),e[o]={low:s,lim:n++}})),e}(t);r.forEach(t.graph().dummyChains,(function(n){for(var r=t.node(n),i=r.edgeObj,o=function(t,e,n,r){var i,o,s=[],a=[],u=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),s.push(i)}while(i&&(e[i].low>u||c>e[i].lim));for(o=i,i=r;(i=t.parent(i))!==o;)a.push(i);return{path:s.concat(a.reverse()),lca:o}}(t,e,i.v,i.w),s=o.path,a=o.lca,u=0,c=s[u],l=!0;n!==i.w;){if(r=t.node(n),l){for(;(c=s[u])!==a&&t.node(c).maxRank<r.rank;)u++;c===a&&(l=!1)}if(!l){for(;u<s.length-1&&t.node(c=s[u+1]).minRank<=r.rank;)u++;c=s[u]}t.setParent(n,c),n=t.successors(n)[0]}}))}},3573:(t,e,n)=>{"use strict";var r=n(38436),i=n(70574).Graph,o=n(11138);function s(t,e){var n={};return r.reduce(e,(function(e,i){var o=0,s=0,a=e.length,c=r.last(i);return r.forEach(i,(function(e,l){var h=function(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),f=h?t.node(h).order:a;(h||e===c)&&(r.forEach(i.slice(s,l+1),(function(e){r.forEach(t.predecessors(e),(function(r){var i=t.node(r),s=i.order;!(s<o||f<s)||i.dummy&&t.node(e).dummy||u(n,r,e)}))})),s=l+1,o=f)})),i})),n}function a(t,e){var n={};function i(e,i,o,s,a){var c;r.forEach(r.range(i,o),(function(i){c=e[i],t.node(c).dummy&&r.forEach(t.predecessors(c),(function(e){var r=t.node(e);r.dummy&&(r.order<s||r.order>a)&&u(n,e,c)}))}))}return r.reduce(e,(function(e,n){var o,s=-1,a=0;return r.forEach(n,(function(r,u){if("border"===t.node(r).dummy){var c=t.predecessors(r);c.length&&(o=t.node(c[0]).order,i(n,a,u,s,o),a=u,s=o)}i(n,a,n.length,o,e.length)})),n})),n}function u(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function c(t,e,n){if(e>n){var i=e;e=n,n=i}return r.has(t[e],n)}function l(t,e,n,i){var o={},s={},a={};return r.forEach(e,(function(t){r.forEach(t,(function(t,e){o[t]=t,s[t]=t,a[t]=e}))})),r.forEach(e,(function(t){var e=-1;r.forEach(t,(function(t){var u=i(t);if(u.length){u=r.sortBy(u,(function(t){return a[t]}));for(var l=(u.length-1)/2,h=Math.floor(l),f=Math.ceil(l);h<=f;++h){var d=u[h];s[t]===t&&e<a[d]&&!c(n,t,d)&&(s[d]=t,s[t]=o[t]=o[d],e=a[d])}}}))})),{root:o,align:s}}function h(t,e,n,o,s){var a={},u=function(t,e,n,o){var s=new i,a=t.graph(),u=function(t,e,n){return function(i,o,s){var a,u=i.node(o),c=i.node(s),l=0;if(l+=u.width/2,r.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":a=-u.width/2;break;case"r":a=u.width/2}if(a&&(l+=n?a:-a),a=0,l+=(u.dummy?e:t)/2,l+=(c.dummy?e:t)/2,l+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":a=c.width/2;break;case"r":a=-c.width/2}return a&&(l+=n?a:-a),a=0,l}}(a.nodesep,a.edgesep,o);return r.forEach(e,(function(e){var i;r.forEach(e,(function(e){var r=n[e];if(s.setNode(r),i){var o=n[i],a=s.edge(o,r);s.setEdge(o,r,Math.max(u(t,e,i),a||0))}i=e}))})),s}(t,e,n,s),c=s?"borderLeft":"borderRight";function l(t,e){for(var n=u.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return l((function(t){a[t]=u.inEdges(t).reduce((function(t,e){return Math.max(t,a[e.v]+u.edge(e))}),0)}),u.predecessors.bind(u)),l((function(e){var n=u.outEdges(e).reduce((function(t,e){return Math.min(t,a[e.w]-u.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(a[e]=Math.max(a[e],n))}),u.successors.bind(u)),r.forEach(o,(function(t){a[t]=a[n[t]]})),a}function f(t,e){return r.minBy(r.values(e),(function(e){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return r.forIn(e,(function(e,r){var o=function(t,e){return t.node(e).width}(t,r)/2;n=Math.max(e+o,n),i=Math.min(e-o,i)})),n-i}))}function d(t,e){var n=r.values(e),i=r.min(n),o=r.max(n);r.forEach(["u","d"],(function(n){r.forEach(["l","r"],(function(s){var a,u=n+s,c=t[u];if(c!==e){var l=r.values(c);(a="l"===s?i-r.min(l):o-r.max(l))&&(t[u]=r.mapValues(c,(function(t){return t+a})))}}))}))}function p(t,e){return r.mapValues(t.ul,(function(n,i){if(e)return t[e.toLowerCase()][i];var o=r.sortBy(r.map(t,i));return(o[1]+o[2])/2}))}t.exports={positionX:function(t){var e,n=o.buildLayerMatrix(t),i=r.merge(s(t,n),a(t,n)),u={};r.forEach(["u","d"],(function(o){e="u"===o?n:r.values(n).reverse(),r.forEach(["l","r"],(function(n){"r"===n&&(e=r.map(e,(function(t){return r.values(t).reverse()})));var s=("u"===o?t.predecessors:t.successors).bind(t),a=l(0,e,i,s),c=h(t,e,a.root,a.align,"r"===n);"r"===n&&(c=r.mapValues(c,(function(t){return-t}))),u[o+n]=c}))}));var c=f(t,u);return d(u,c),p(u,t.graph().align)},findType1Conflicts:s,findType2Conflicts:a,addConflict:u,hasConflict:c,verticalAlignment:l,horizontalCompaction:h,alignCoordinates:d,findSmallestWidthAlignment:f,balance:p}},17873:(t,e,n)=>{"use strict";var r=n(38436),i=n(11138),o=n(3573).positionX;t.exports=function(t){(function(t){var e=i.buildLayerMatrix(t),n=t.graph().ranksep,o=0;r.forEach(e,(function(e){var i=r.max(r.map(e,(function(e){return t.node(e).height})));r.forEach(e,(function(e){t.node(e).y=o+i/2})),o+=i+n}))})(t=i.asNonCompoundGraph(t)),r.forEach(o(t),(function(e,n){t.node(n).x=e}))}},20300:(t,e,n)=>{"use strict";var r=n(38436),i=n(70574).Graph,o=n(76681).slack;function s(t,e){return r.forEach(t.nodes(),(function n(i){r.forEach(e.nodeEdges(i),(function(r){var s=r.v,a=i===s?r.w:s;t.hasNode(a)||o(e,r)||(t.setNode(a,{}),t.setEdge(i,a,{}),n(a))}))})),t.nodeCount()}function a(t,e){return r.minBy(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return o(e,n)}))}function u(t,e,n){r.forEach(t.nodes(),(function(t){e.node(t).rank+=n}))}t.exports=function(t){var e,n,r=new i({directed:!1}),c=t.nodes()[0],l=t.nodeCount();for(r.setNode(c,{});s(r,t)<l;)e=a(r,t),n=r.hasNode(e.v)?o(t,e):-o(t,e),u(r,t,n);return r}},78093:(t,e,n)=>{"use strict";var r=n(76681).longestPath,i=n(20300),o=n(42472);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":default:!function(t){o(t)}(t);break;case"tight-tree":!function(t){r(t),i(t)}(t);break;case"longest-path":s(t)}};var s=r},42472:(t,e,n)=>{"use strict";var r=n(38436),i=n(20300),o=n(76681).slack,s=n(76681).longestPath,a=n(70574).alg.preorder,u=n(70574).alg.postorder,c=n(11138).simplify;function l(t){t=c(t),s(t);var e,n=i(t);for(d(n),h(n,t);e=g(n);)m(n,t,e,v(n,t,e))}function h(t,e){var n=u(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=f(t,e,n)}(t,e,n)}))}function f(t,e,n){var i=t.node(n).parent,o=!0,s=e.edge(n,i),a=0;return s||(o=!1,s=e.edge(i,n)),a=s.weight,r.forEach(e.nodeEdges(n),(function(r){var s,u,c=r.v===n,l=c?r.w:r.v;if(l!==i){var h=c===o,f=e.edge(r).weight;if(a+=h?f:-f,s=n,u=l,t.hasEdge(s,u)){var d=t.edge(n,l).cutvalue;a+=h?-d:d}}})),a}function d(t,e){arguments.length<2&&(e=t.nodes()[0]),p(t,{},1,e)}function p(t,e,n,i,o){var s=n,a=t.node(i);return e[i]=!0,r.forEach(t.neighbors(i),(function(o){r.has(e,o)||(n=p(t,e,n,o,i))})),a.low=s,a.lim=n++,o?a.parent=o:delete a.parent,n}function g(t){return r.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function v(t,e,n){var i=n.v,s=n.w;e.hasEdge(i,s)||(i=n.w,s=n.v);var a=t.node(i),u=t.node(s),c=a,l=!1;a.lim>u.lim&&(c=u,l=!0);var h=r.filter(e.edges(),(function(e){return l===y(0,t.node(e.v),c)&&l!==y(0,t.node(e.w),c)}));return r.minBy(h,(function(t){return o(e,t)}))}function m(t,e,n,i){var o=n.v,s=n.w;t.removeEdge(o,s),t.setEdge(i.v,i.w,{}),d(t),h(t,e),function(t,e){var n=r.find(t.nodes(),(function(t){return!e.node(t).parent})),i=a(t,n);i=i.slice(1),r.forEach(i,(function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)}))}(t,e)}function y(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=l,l.initLowLimValues=d,l.initCutValues=h,l.calcCutValue=f,l.leaveEdge=g,l.enterEdge=v,l.exchangeEdges=m},76681:(t,e,n)=>{"use strict";var r=n(38436);t.exports={longestPath:function(t){var e={};r.forEach(t.sources(),(function n(i){var o=t.node(i);if(r.has(e,i))return o.rank;e[i]=!0;var s=r.min(r.map(t.outEdges(i),(function(e){return n(e.w)-t.edge(e).minlen})));return s!==Number.POSITIVE_INFINITY&&null!=s||(s=0),o.rank=s}))},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},11138:(t,e,n)=>{"use strict";var r=n(38436),i=n(70574).Graph;function o(t,e,n,i){var o;do{o=r.uniqueId(i)}while(t.hasNode(o));return n.dummy=e,t.setNode(o,n),o}function s(t){return r.max(r.map(t.nodes(),(function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n})))}t.exports={addDummyNode:o,simplify:function(t){var e=(new i).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),e},asNonCompoundGraph:function(t){var e=new i({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e},successorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.outEdges(e),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.inEdges(e),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,o=t.y,s=e.x-i,a=e.y-o,u=t.width/2,c=t.height/2;if(!s&&!a)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(a)*u>Math.abs(s)*c?(a<0&&(c=-c),n=c*s/a,r=c):(s<0&&(u=-u),n=u,r=u*a/s),{x:i+n,y:o+r}},buildLayerMatrix:function(t){var e=r.map(r.range(s(t)+1),(function(){return[]}));return r.forEach(t.nodes(),(function(n){var i=t.node(n),o=i.rank;r.isUndefined(o)||(e[o][i.order]=n)})),e},normalizeRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank})));r.forEach(t.nodes(),(function(n){var i=t.node(n);r.has(i,"rank")&&(i.rank-=e)}))},removeEmptyRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[];r.forEach(t.nodes(),(function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)}));var i=0,o=t.graph().nodeRankFactor;r.forEach(n,(function(e,n){r.isUndefined(e)&&n%o!=0?--i:i&&r.forEach(e,(function(e){t.node(e).rank+=i}))}))},addBorderNode:function(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),o(t,"border",i,e)},maxRank:s,partition:function(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n},time:function(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}},notime:function(t,e){return e()}}},88177:t=>{t.exports="0.8.5"},96315:function(t,e){"use strict";var n,r=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},i=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};function o(t,e,n){return e.map(((e,r)=>t(e,n[r])))}function s(t,e,n,r,i){return e.map(((e,o)=>t(e,n[o],r[o],i[o])))}function a(t,e,n,r){if(0==e.length)return 1==r?1:0;let i=e[e.length-1];1==r?i|=~n:i&=n;for(let n=0;n<e.length-1;n++)i=t(i,e[n]);return i=t(i,i>>>16),i=t(i,i>>>8),i=t(i,i>>>4),i=t(i,i>>>2),i=t(i,i>>>1),1&i}function u(t){return 31&t}function c(t,e,n,r,i){const o=t>0&&!(r[e]&1<<t-1)&&i[e]&1<<t-1;o&&u(t)&&(i[e]|=-1<<t),o&&e+1<n&&i.fill(-1,e+1)}function l(t,e){const n={};return function r(i,o){if(n[i]=o,!(i.length*t>=e)){for(let e=0;e<1<<t;e+=1)r(i+e.toString(1<<t),o<<t|e|e<<16);r(i+"x",o<<t|(1<<t)-1)}}("",0),Object.seal(n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.Display3vl=e.Display3vlOct=e.Display3vlBin=e.Display3vlHex=e.Display3vlWithRegex=e.Mem3vl=e.Vector3vl=e.Error3vl=void 0;const h=l(1,8),f=l(3,3),d=l(4,8);function p(t,e,n,r){const i=[];let o=0,s=t;for(;o<e;){const t="00000000"+n[s].toString(16),a=n[s]^r[s];s++;for(let n=0;n<8&&o<e;n++,o+=4)a&15<<4*n?i.push("x"):i.push(t[t.length-1-n])}return i.reverse().join("")}function g(t,e,n,r){const i=[];let o=0,s=t;for(;o<e;){const t="00000000000000000000000000000000"+n[s].toString(2),a=n[s]^r[s];s++;for(let n=0;n<32&&o<e;n++,o++)a&1<<n?i.push("x"):i.push(t[t.length-1-n])}return i.reverse().join("")}function v(t,e,n,r,i){const o=n+31>>>5;let s=0,a=-1+e;for(let e=t.length;e>0;){const n=t.slice(Math.max(0,e-2),e);e-=n.length;const o=d[n];0==u(s)&&a++;const c=(1<<4*n.length)-1;r[a]|=(o>>>16&c)<<s,i[a]|=(o&c)<<s,s+=4*n.length}s<n&&c(s,a,o,r,i)}function m(t,e,n,r,i){const o=n+31>>>5;let s=0,a=-1+e;for(let e=t.length;e>0;){const n=t.slice(Math.max(0,e-8),e);e-=n.length;const o=h[n];0==u(s)&&a++;const c=(1<<1*n.length)-1;r[a]|=(o>>>16&c)<<s,i[a]|=(o&c)<<s,s+=1*n.length}s<n&&c(s,a,o,r,i)}class y extends Error{constructor(t){super(t),Object.setPrototypeOf(this,y.prototype)}}function b(t,e){if(!t)throw new y("Assertion failed: "+e)}e.Error3vl=y;class x{constructor(t,e,n){this._bits=t,this._avec=e,this._bvec=n}static make(t,e){let n,r;switch(t|=0,e){case!0:case"1":case 1:n=r=-1;break;case!1:case"0":case-1:case void 0:n=r=0;break;case"x":case 0:n=0,r=-1;break;default:b(!1,"Vector3vl.make() called with invalid initializer")}const i=(t+31)/32|0;return new x(t,new Uint32Array(i).fill(n),new Uint32Array(i).fill(r))}static zeros(t){return x.make(t,-1)}static ones(t){return x.make(t,1)}static xes(t){return x.make(t,0)}static fromBool(t,e=1){return x.make(e,t?1:-1)}static concat(...t){const e=t.reduce(((t,e)=>e.bits+t),0)+31>>>5;let n=0,r=-1,i=new Uint32Array(e),o=new Uint32Array(e);for(const s of t)if(s.normalize(),0==u(n))i.set(s._avec,r+1),o.set(s._bvec,r+1),n+=s._bits,r+=s._bits+31>>>5;else{for(const t in s._avec){if(i[r]|=s._avec[t]<<n,o[r]|=s._bvec[t]<<n,r++,r==e)break;i[r]=s._avec[t]>>>-n,o[r]=s._bvec[t]>>>-n}n+=s._bits,r+1>n+31>>>5&&r--}return new x(n,i,o)}static fromIterator(t,e,n){return 0==(e&e-1)?x.fromIteratorPow2(t,e,n):x.fromIteratorAnySkip(t,e,n)}static fromIteratorAnySkip(t,e,n){const r=n+31>>>5;let i=0,o=-1,s=new Uint32Array(r),a=new Uint32Array(r);const l=(1<<e)-1;for(const n of t)0==u(i)&&o++,s[o]|=(n>>>e&l)<<i,a[o]|=(n&l)<<i,l<<i>>>i!=l&&(o++,s[o]=(n>>>e&l)>>>-i,a[o]=(n&l)>>>-i),i+=e;return i<n&&c(i,o,r,s,a),new x(n,s,a)}static fromIteratorPow2(t,e,n){const r=n+31>>>5;let i=0,o=-1,s=new Uint32Array(r),a=new Uint32Array(r);const l=(1<<e)-1;for(const n of t)0==u(i)&&o++,s[o]|=(n>>>e&l)<<i,a[o]|=(n&l)<<i,i+=e;return i<n&&c(i,o,r,s,a),new x(n,s,a)}static fromArray(t){const e=t.length,n=e+31>>>5;let r=0,i=-1,o=new Uint32Array(n),s=new Uint32Array(n);for(const e of t){const t=e+1+Number(e>0);0==u(r)&&i++,o[i]|=(t>>>1&1)<<r,s[i]|=(1&t)<<r,r+=1}return r<e&&c(r,i,n,o,s),new x(e,o,s)}static fromBin(t,e){void 0===e&&(e=t.length);const n=e+31>>>5,r=new Uint32Array(n),i=new Uint32Array(n);return m(t,0,e,r,i),new x(e,r,i)}static fromOct(t,e){void 0===e&&(e=3*t.length);const n=e+31>>>5;let r=0,i=-1,o=new Uint32Array(n),s=new Uint32Array(n);for(let e=t.length-1;e>=0;e--){const n=f[t[e]];0==u(r)&&i++,o[i]|=(n>>>16&7)<<r,s[i]|=(7&n)<<r,7<<r>>>r!=7&&(i++,o[i]=(n>>>16&7)>>>-r,s[i]=(7&n)>>>-r),r+=3}return r<e&&c(r,i,n,o,s),new x(e,o,s)}static fromHex(t,e){void 0===e&&(e=4*t.length);const n=e+31>>>5,r=new Uint32Array(n),i=new Uint32Array(n);return v(t,0,e,r,i),new x(e,r,i)}static fromString(t){const e=/^([0-9]*)'?(b[01x]*|o[0-7x]*|h[0-9a-fx]*|d[0-9]*)$/.exec(t);b(null!=e,"Vector3vl.fromString() Invalid string");const n=e[1].length?Number(e[1]):void 0,r=e[2].slice(1);switch(e[2][0]){case"b":return x.fromBin(r,n);case"o":return x.fromOct(r,n);case"h":return x.fromHex(r,n);case"d":return x.fromNumber(BigInt(r),n)}}static fromClonable(t){return new x(t._bits,t._avec,t._bvec)}static fromNumber(t,e){const n=void 0===e?0:e,r=BigInt(t);if(r>=BigInt(0)){let t=r.toString(2);return x.fromBin("0".repeat(Math.max(0,n-t.length))+t,e)}{const t=(-r).toString(2).length;let i=(r+(BigInt(1)<<BigInt(t))).toString(2);return x.fromBin("1".repeat(Math.max(1,n-t))+"0".repeat(t-i.length)+i,e)}}get bits(){return this._bits}get msb(){return this.get(this._bits-1)}get lsb(){return this.get(0)}get(t){const e=u(t),n=function(t){return t>>5}(t);return(this._avec[n]>>>e&1)+(this._bvec[n]>>>e&1)-1}get isHigh(){if(0==this._bits)return!0;const t=this._lastmask,e=e=>e.slice(0,e.length-1).every((t=>0==~t))&&(e[e.length-1]&t)==t;return e(this._avec)&&e(this._bvec)}get isLow(){if(0==this._bits)return!0;const t=this._lastmask,e=e=>e.slice(0,e.length-1).every((t=>0==t))&&0==(e[e.length-1]&t);return e(this._avec)&&e(this._bvec)}get isDefined(){if(0==this._bits)return!1;const t=o(((t,e)=>t^e),this._avec,this._bvec);return t[t.length-1]|=~this._lastmask,!t.every((t=>0==~t))}get isFullyDefined(){if(0==this._bits)return!0;const t=o(((t,e)=>t^e),this._avec,this._bvec);return t[t.length-1]&=this._lastmask,!t.some((t=>Boolean(t)))}and(t){return b(t._bits==this._bits,"Vector3vl.and() called with vectors of different sizes"),new x(this._bits,o(((t,e)=>t&e),t._avec,this._avec),o(((t,e)=>t&e),t._bvec,this._bvec))}or(t){return b(t._bits==this._bits,"Vector3vl.or() called with vectors of different sizes"),new x(this._bits,o(((t,e)=>t|e),t._avec,this._avec),o(((t,e)=>t|e),t._bvec,this._bvec))}xor(t){return b(t._bits==this._bits,"Vector3vl.xor() called with vectors of different sizes"),new x(this._bits,s(((t,e,n,r)=>(t|n)&(e^r)),t._avec,t._bvec,this._avec,this._bvec),s(((t,e,n,r)=>t&n^(e|r)),t._avec,t._bvec,this._avec,this._bvec))}nand(t){return b(t._bits==this._bits,"Vector3vl.nand() called with vectors of different sizes"),new x(this._bits,o(((t,e)=>~(t&e)),t._bvec,this._bvec),o(((t,e)=>~(t&e)),t._avec,this._avec))}nor(t){return b(t._bits==this._bits,"Vector3vl.nor() called with vectors of different sizes"),new x(this._bits,o(((t,e)=>~(t|e)),t._bvec,this._bvec),o(((t,e)=>~(t|e)),t._avec,this._avec))}xnor(t){return b(t._bits==this._bits,"Vector3vl.xnor() called with vectors of different sizes"),new x(this._bits,s(((t,e,n,r)=>~(t&n^(e|r))),t._avec,t._bvec,this._avec,this._bvec),s(((t,e,n,r)=>~((t|n)&(e^r))),t._avec,t._bvec,this._avec,this._bvec))}not(){return new x(this._bits,this._bvec.map((t=>~t)),this._avec.map((t=>~t)))}xmask(){const t=o(((t,e)=>t^e),this._avec,this._bvec);return new x(this._bits,t,t)}reduceAnd(){return new x(1,Uint32Array.of(a(((t,e)=>t&e),this._avec,this._lastmask,1)),Uint32Array.of(a(((t,e)=>t&e),this._bvec,this._lastmask,1)))}reduceOr(){return new x(1,Uint32Array.of(a(((t,e)=>t|e),this._avec,this._lastmask,0)),Uint32Array.of(a(((t,e)=>t|e),this._bvec,this._lastmask,0)))}reduceNand(){return new x(1,Uint32Array.of(~a(((t,e)=>t&e),this._bvec,this._lastmask,1)),Uint32Array.of(~a(((t,e)=>t&e),this._avec,this._lastmask,1)))}reduceNor(){return new x(1,Uint32Array.of(~a(((t,e)=>t|e),this._bvec,this._lastmask,0)),Uint32Array.of(~a(((t,e)=>t|e),this._avec,this._lastmask,0)))}reduceXor(){const t=a(((t,e)=>t|e),o(((t,e)=>~t&e),this._avec,this._bvec),this._lastmask,0),e=a(((t,e)=>t^e),this._avec,this._lastmask,0);return new x(1,Uint32Array.of(e&~t),Uint32Array.of(e|t))}reduceXnor(){return this.reduceXor().not()}concat(...t){return x.concat(this,...t)}slice(t,e){if(void 0===t&&(t=0),void 0===e&&(e=this._bits),e>this.bits&&(e=this.bits),t>e&&(e=t),0==u(t)){const n=this._avec.slice(t>>>5,e+31>>>5),r=this._bvec.slice(t>>>5,e+31>>>5);return new x(e-t,n,r)}{const n=e-t+31>>>5,r=new Uint32Array(n),i=new Uint32Array(n);let o=0;r[o]=this._avec[t>>5]>>>t,i[o]=this._bvec[t>>5]>>>t;for(let s=1+(t>>5);s<=e>>>5&&(r[o]|=this._avec[s]<<-t,i[o]|=this._bvec[s]<<-t,o++,o!=n);s++)r[o]=this._avec[s]>>>t,i[o]=this._bvec[s]>>>t;return new x(e-t,r,i)}}toIterator(t){return 0==(t&t-1)?this.toIteratorPow2(t):this.toIteratorAnySkip(t)}*toIteratorAnySkip(t){this.normalize();const e=(1<<t)-1;let n=0,r=0,i=e;for(;n<this._bits;){let o=(this._avec[r]&i)>>>n,s=(this._bvec[r]&i)>>>n;if(i>>>n!=e&&r+1!=this._avec.length){const t=e>>-n;o|=(this._avec[r+1]&t)<<-n,s|=(this._bvec[r+1]&t)<<-n}yield o<<t|s,i<<=t,n+=t,0==i&&(r++,i=e<<n)}}*toIteratorPow2(t){this.normalize();const e=(1<<t)-1;let n=0,r=0,i=e;for(;n<this._bits;){const o=(this._avec[r]&i)>>>n,s=(this._bvec[r]&i)>>>n;yield o<<t|s,i<<=t,n+=t,0==i&&(r++,i=e)}}toArray(){this.normalize();let t=0,e=0,n=1,r=[];for(;t<this._bits;){const i=(this._avec[e]&n)>>>t<<1|(this._bvec[e]&n)>>>t;r.push(i-1-Number(i>1)),n<<=1,t+=1,0==n&&(e++,n=1)}return r}toBin(){return g(0,this._bits,this._avec,this._bvec)}toOct(){this.normalize();let t=0,e=0,n=7,r=[];for(;t<this._bits;){let i=(this._avec[e]&n)>>>t,o=(this._bvec[e]&n)>>>t;if(n>>>t!=7&&e+1!=this._avec.length){const n=7>>-t;i|=(this._avec[e+1]&n)<<-t,o|=(this._bvec[e+1]&n)<<-t}const s=i<<3|o;7&s&~(s>>3)?r.push("x"):r.push((s>>3).toString()),n<<=3,t+=3,0==n&&(e++,n=7<<t)}return r.reverse().join("")}toHex(){return this.normalize(),p(0,this._bits,this._avec,this._bvec)}toString(){return"Vector3vl "+this.toBin()}toClonable(){return{_bits:this._bits,_avec:this._avec,_bvec:this._bvec}}toNumber(t=!1){return t?this.toNumberSigned():(b(this.isFullyDefined,"Vector3vl.toNumber() called on a not fully defined vector"),b(this._bits<32,"Vector3vl.toNumber() called on a too wide vector"),0==this._bits?0:Number.parseInt(this.toHex(),16))}toNumberSigned(){return b(this.isFullyDefined,"Vector3vl.toNumberSigned() called on a not fully defined vector"),b(this._bits<32,"Vector3vl.toNumberSigned() called on a too wide vector"),b(this._bits>0,"Vector3vl.toNumberSigned() called on an empty vector"),1==this.msb?Number.parseInt(this.toHex(),16)-(1<<this._bits):Number.parseInt(this.toHex(),16)}toBigInt(t=!1){return t?this.toBigIntSigned():(b(this.isFullyDefined,"Vector3vl.toBigInt() called on a not fully defined vector"),0==this._bits?BigInt(0):BigInt("0x"+this.toHex()))}toBigIntSigned(){return b(this.isFullyDefined,"Vector3vl.toBigIntSigned() called on a not fully defined vector"),b(this._bits>0,"Vector3vl.toBigIntSigned() called on an empty vector"),1==this.msb?BigInt("0x"+this.toHex())-(BigInt(1)<<BigInt(this._bits)):BigInt("0x"+this.toHex())}eq(t){if(t._bits!=this._bits)return!1;this.normalize(),t.normalize();for(const e in this._avec){if(this._avec[e]!=t._avec[e])return!1;if(this._bvec[e]!=t._bvec[e])return!1}return!0}normalize(){const t=this._lastmask;this._avec[this._avec.length-1]&=t,this._bvec[this._bvec.length-1]&=t}get _lastmask(){return-1>>>-this.bits}}e.Vector3vl=x,x.empty=x.zeros(0),x.one=x.ones(1),x.zero=x.zeros(1),x.x=x.xes(1);class w{constructor(t,e,n){void 0===n&&(n=0),this._bits=0|t,this._size=0|e,this._wpc=(t+31)/32|0,this._avec=new Uint32Array(e*this._wpc).fill(n>0?-1:0),this._bvec=new Uint32Array(e*this._wpc).fill(n>=0?-1:0),this._size&&this.set(this._size-1,this.get(this._size-1))}static fromData(t){if(0==t.length)return new w(0,0);const e=new w(t[0].bits,t.length);for(const n in t){t[n].normalize(),b(t[n].bits==e._bits,"Mem3vl.fromData() called with vectors of different sizes");for(let r=0;r<e._wpc;r++){const i=Number(n)*e._wpc+r;e._avec[i]=t[n]._avec[r],e._bvec[i]=t[n]._bvec[r]}}return e}get bits(){return this._bits}get words(){return this._size}get(t){const e=this._wpc*t;return new x(this._bits,this._avec.slice(e,e+this._wpc),this._bvec.slice(e,e+this._wpc))}set(t,e){b(e.bits==this._bits,"Mem3vl.set() called with a vector with different bit width than the memory"),e.normalize();for(let n=0;n<this._wpc;n++)this._avec[t*this._wpc+n]=e._avec[n],this._bvec[t*this._wpc+n]=e._bvec[n]}toJSON(){const t=[];let e,n=[],r=0;const i=()=>{if(0!=n.length){if(n.reduce(((t,e)=>t+e.length),0)==this._bits){const e=n.pop();n.length>0&&t.push(n.join("")),t.push(e)}else t.push(n.join(""));n=[]}},o=()=>{0!=r&&(1==r?e.length==this._bits?(i(),t.push(e)):n.push(e):(i(),t.push(r),t.push(e)),e=void 0,r=0)},s=t=>{e==t?r++:(o(),e=t,r=1)};for(let t=0;t<this._size;t++){const e=()=>{for(let e=0;e<this._wpc;e++){const n=this._avec[t*this._wpc+e]^this._bvec[t*this._wpc+e];for(let t=0;t<4;t++){const e=255<<16*t,r=n&e;if(r!=e||0!=r)return!1}}return!0};this._bits>0&&e()?s(p(t*this._wpc,this._bits,this._avec,this._bvec)):s(g(t*this._wpc,this._bits,this._avec,this._bvec))}return o(),i(),t}static fromJSON(t,e){const n=Math.ceil(t/4);let r=0;const i=e=>e.length==t||e.length==n?1:e.length/n;for(let t=0;t<e.length;t++)"string"==typeof e[t]?r+=i(e[t]):"number"==typeof e[t]&&(r+=e[t]*i(e[t+1]),t++);const o=new w(t,r,-1);let s=0;const a=e=>{if(e.length==t)m(e,s,t,o._avec,o._bvec),s+=o._wpc;else if(e.length==n)v(e,s,t,o._avec,o._bvec),s+=o._wpc;else for(let r=0;r<e.length/n;r++)v(e.slice(r*n,(r+1)*n),s,t,o._avec,o._bvec),s+=o._wpc};for(let t=0;t<e.length;t++)if("string"==typeof e[t])a(e[t]);else if("number"==typeof e[t]){for(const n of Array(e[t]).keys())a(e[t+1]);t++}return o}toArray(){return Array(this._size).fill(0).map(((t,e)=>this.get(e)))}toHex(){return this.toArray().map((t=>t.toHex()))}eq(t){if(t._bits!=this._bits||t._size!=this._size)return!1;for(let e=0;e<this._size;e++)if(!t.get(e).eq(this.get(e)))return!1;return!0}}e.Mem3vl=w;class _{constructor(t){n.set(this,void 0),this.pattern=t,r(this,n,RegExp("^(?:"+this.pattern+")$"))}validate(t,e){return i(this,n).test(t)}}e.Display3vlWithRegex=_,n=new WeakMap;class A extends _{constructor(){super("[0-9a-fx]*"),this.name="hex",this.sort=0}can(t,e){return!0}read(t,e){return x.fromHex(t,e)}show(t){return t.toHex()}size(t){return Math.ceil(t/4)}}e.Display3vlHex=A;class k extends _{constructor(){super("[01x]*"),this.name="bin",this.sort=0}can(t,e){return!0}read(t,e){return x.fromBin(t,e)}show(t){return t.toBin()}size(t){return t}}e.Display3vlBin=k;class S extends _{constructor(){super("[0-7x]*"),this.name="oct",this.sort=0}can(t,e){return!0}read(t,e){return x.fromOct(t,e)}show(t){return t.toOct()}size(t){return Math.ceil(t/3)}}e.Display3vlOct=S;class E extends _{constructor(){super("[0-9]*|x")}get name(){return"dec"}get sort(){return 0}can(t,e){return!0}read(t,e){return"x"==t?x.xes(e):x.fromNumber(BigInt(t),e)}show(t){return t.isFullyDefined?t.toBigInt().toString():"x"}size(t){return Math.max(1,Math.ceil(t/Math.log2(10)))}}class P extends _{constructor(){super("-?[0-9]*|x")}get name(){return"dec2c"}get sort(){return 0}can(t,e){return e>0}read(t,e){return"x"==t?x.xes(e):x.fromNumber(BigInt(t),e)}show(t){return t.isFullyDefined?t.toBigIntSigned().toString():"x"}size(t){return 1+Math.ceil(t/Math.log2(10))}}e.Display3vl=class{constructor(){this.displays={},this.addDisplay(new A),this.addDisplay(new k),this.addDisplay(new S),this.addDisplay(new E),this.addDisplay(new P)}addDisplay(t){this.displays[t.name]=t}usableDisplays(t,e){const n=[];for(let r of Object.values(this.displays))r.can(t,e)&&n.push(r);return n.sort(((t,e)=>t.sort-e.sort?t.sort-e.sort:t.name.localeCompare(e.name))).map((t=>t.name))}show(t,e){return this.displays[t].show(e)}read(t,e,n){return this.displays[t].read(e,n)}pattern(t){return this.displays[t].pattern}validate(t,e,n){return this.displays[t].validate(e,n)}size(t,e){return this.displays[t].size(e)}}},9983:(t,e,n)=>{var r=n(19755),i=n(27672);void 0===i.$&&(i.$=r),t.exports=r},27672:(t,e,n)=>{"use strict";t.exports=function(){if("object"==typeof globalThis)return globalThis;var t;try{t=this||new Function("return this")()}catch(t){if("object"==typeof window)return window;if("object"==typeof self)return self;if(void 0!==n.g)return n.g}return t}()},21187:t=>{"use strict";var e=function(t,e){return t<e};function n(t){if(!(this instanceof n))return new n(t);this.array=[],this.size=0,this.compare=t||e}n.prototype.clone=function(){var t=new n(this.compare);return t.size=this.size,t.array=this.array.slice(0,this.size),t},n.prototype.add=function(t){var e,n,r=this.size;for(this.array[this.size]=t,this.size+=1;r>0&&(e=r-1>>1,n=this.array[e],this.compare(t,n));)this.array[r]=n,r=e;this.array[r]=t},n.prototype.heapify=function(t){var e;for(this.array=t,this.size=t.length,e=this.size>>1;e>=0;e--)this._percolateDown(e)},n.prototype._percolateUp=function(t,e){for(var n,r,i=this.array[t];t>0&&(n=t-1>>1,r=this.array[n],e||this.compare(i,r));)this.array[t]=r,t=n;this.array[t]=i},n.prototype._percolateDown=function(t){for(var e,n,r,i=this.size,o=this.size>>>1,s=this.array[t];t<o&&(n=1+(e=1+(t<<1)),r=this.array[e],n<i&&this.compare(this.array[n],r)&&(e=n,r=this.array[n]),this.compare(r,s));)this.array[t]=r,t=e;this.array[t]=s},n.prototype._removeAt=function(t){if(!(t>this.size-1||t<0))return this._percolateUp(t,!0),this.poll()},n.prototype.remove=function(t){for(var e=0;e<this.size;e++)if(!this.compare(this.array[e],t)&&!this.compare(t,this.array[e]))return this._removeAt(e),!0;return!1},n.prototype.removeOne=function(t){if("function"==typeof t)for(var e=0;e<this.size;e++)if(t(this.array[e]))return this._removeAt(e)},n.prototype.removeMany=function(t,e){if("function"!=typeof t||this.size<1)return[];e=e?Math.min(e,this.size):this.size;for(var n=0,r=new Array(e),i=0,o=new Array(this.size);n<e&&!this.isEmpty();){var s=this.poll();t(s)?r[n++]=s:o[i++]=s}r.length=n;for(var a=0;a<i;)this.add(o[a++]);return r},n.prototype.peek=function(){if(0!=this.size)return this.array[0]},n.prototype.poll=function(){if(0!=this.size){var t=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,t}},n.prototype.replaceTop=function(t){if(0!=this.size){var e=this.array[0];return this.array[0]=t,this._percolateDown(0),e}},n.prototype.trim=function(){this.array=this.array.slice(0,this.size)},n.prototype.isEmpty=function(){return 0===this.size},n.prototype.forEach=function(t){if(!this.isEmpty()&&"function"==typeof t)for(var e=0,n=this.clone();!n.isEmpty();)t(n.poll(),e++)},n.prototype.kSmallest=function(t){if(0==this.size)return[];t=Math.min(this.size,t);var e=new n(this.compare);const r=Math.min((t>0?Math.pow(2,t-1):0)+1,this.size);e.size=r,e.array=this.array.slice(0,r);for(var i=new Array(t),o=0;o<t;o++)i[o]=e.poll();return i},t.exports=n},28282:(t,e,n)=>{var r=n(82354);t.exports={Graph:r.Graph,json:n(28974),alg:n(12440),version:r.version}},2842:(t,e,n)=>{var r=n(89126);t.exports=function(t){var e,n={},i=[];function o(i){r.has(n,i)||(n[i]=!0,e.push(i),r.each(t.successors(i),o),r.each(t.predecessors(i),o))}return r.each(t.nodes(),(function(t){e=[],o(t),e.length&&i.push(e)})),i}},53984:(t,e,n)=>{var r=n(89126);function i(t,e,n,o,s,a){r.has(o,e)||(o[e]=!0,n||a.push(e),r.each(s(e),(function(e){i(t,e,n,o,s,a)})),n&&a.push(e))}t.exports=function(t,e,n){r.isArray(e)||(e=[e]);var o=(t.isDirected()?t.successors:t.neighbors).bind(t),s=[],a={};return r.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);i(t,e,"post"===n,a,o,s)})),s}},84847:(t,e,n)=>{var r=n(63763),i=n(89126);t.exports=function(t,e,n){return i.transform(t.nodes(),(function(i,o){i[o]=r(t,o,e,n)}),{})}},63763:(t,e,n)=>{var r=n(89126),i=n(75639);t.exports=function(t,e,n,r){return function(t,e,n,r){var o,s,a={},u=new i,c=function(t){var e=t.v!==o?t.v:t.w,r=a[e],i=n(t),c=s.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);c<r.distance&&(r.distance=c,r.predecessor=o,u.decrease(e,c))};for(t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:n},u.add(t,n)}));u.size()>0&&(o=u.removeMin(),(s=a[o]).distance!==Number.POSITIVE_INFINITY);)r(o).forEach(c);return a}(t,String(e),n||o,r||function(e){return t.outEdges(e)})};var o=r.constant(1)},9096:(t,e,n)=>{var r=n(89126),i=n(5023);t.exports=function(t){return r.filter(i(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))}},38924:(t,e,n)=>{var r=n(89126);t.exports=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach((function(t){r[t]={},r[t][t]={distance:0},i.forEach((function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}}))})),i.forEach((function(t){var e=r[t];i.forEach((function(n){var o=r[n];i.forEach((function(n){var r=o[t],i=e[n],s=o[n],a=r.distance+i.distance;a<s.distance&&(s.distance=a,s.predecessor=i.predecessor)}))}))})),r}(t,e||i,n||function(e){return t.outEdges(e)})};var i=r.constant(1)},12440:(t,e,n)=>{t.exports={components:n(2842),dijkstra:n(63763),dijkstraAll:n(84847),findCycles:n(9096),floydWarshall:n(38924),isAcyclic:n(62707),postorder:n(58828),preorder:n(92648),prim:n(80514),tarjan:n(5023),topsort:n(2166)}},62707:(t,e,n)=>{var r=n(2166);t.exports=function(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},58828:(t,e,n)=>{var r=n(53984);t.exports=function(t,e){return r(t,e,"post")}},92648:(t,e,n)=>{var r=n(53984);t.exports=function(t,e){return r(t,e,"pre")}},80514:(t,e,n)=>{var r=n(89126),i=n(30771),o=n(75639);t.exports=function(t,e){var n,s=new i,a={},u=new o;function c(t){var r=t.v===n?t.w:t.v,i=u.priority(r);if(void 0!==i){var o=e(t);o<i&&(a[r]=n,u.decrease(r,o))}}if(0===t.nodeCount())return s;r.each(t.nodes(),(function(t){u.add(t,Number.POSITIVE_INFINITY),s.setNode(t)})),u.decrease(t.nodes()[0],0);for(var l=!1;u.size()>0;){if(n=u.removeMin(),r.has(a,n))s.setEdge(n,a[n]);else{if(l)throw new Error("Input graph is not connected: "+t);l=!0}t.nodeEdges(n).forEach(c)}return s}},5023:(t,e,n)=>{var r=n(89126);t.exports=function(t){var e=0,n=[],i={},o=[];function s(a){var u=i[a]={onStack:!0,lowlink:e,index:e++};if(n.push(a),t.successors(a).forEach((function(t){r.has(i,t)?i[t].onStack&&(u.lowlink=Math.min(u.lowlink,i[t].index)):(s(t),u.lowlink=Math.min(u.lowlink,i[t].lowlink))})),u.lowlink===u.index){var c,l=[];do{c=n.pop(),i[c].onStack=!1,l.push(c)}while(a!==c);o.push(l)}}return t.nodes().forEach((function(t){r.has(i,t)||s(t)})),o}},2166:(t,e,n)=>{var r=n(89126);function i(t){var e={},n={},i=[];if(r.each(t.sinks(),(function s(a){if(r.has(n,a))throw new o;r.has(e,a)||(n[a]=!0,e[a]=!0,r.each(t.predecessors(a),s),delete n[a],i.push(a))})),r.size(e)!==t.nodeCount())throw new o;return i}function o(){}t.exports=i,i.CycleException=o,o.prototype=new Error},75639:(t,e,n)=>{var r=n(89126);function i(){this._arr=[],this._keyIndices={}}t.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},i.prototype.has=function(t){return r.has(this._keyIndices,t)},i.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var i=this._arr,o=i.length;return n[t]=o,i.push({key:t,priority:e}),this._decrease(o),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},i.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},i.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},i.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},i.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e}},30771:(t,e,n)=>{"use strict";var r=n(89126);t.exports=o;var i="\0";function o(t){this._isDirected=!r.has(t,"directed")||t.directed,this._isMultigraph=!!r.has(t,"multigraph")&&t.multigraph,this._isCompound=!!r.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function s(t,e){t[e]?t[e]++:t[e]=1}function a(t,e){--t[e]||delete t[e]}function u(t,e,n,i){var o=""+e,s=""+n;if(!t&&o>s){var a=o;o=s,s=a}return o+""+s+""+(r.isUndefined(i)?"\0":i)}function c(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var s=i;i=o,o=s}var a={v:i,w:o};return r&&(a.name=r),a}function l(t,e){return u(t,e.v,e.w,e.name)}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(t){return this._label=t,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultNodeLabelFn=t,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return r.keys(this._nodes)},o.prototype.sources=function(){var t=this;return r.filter(this.nodes(),(function(e){return r.isEmpty(t._in[e])}))},o.prototype.sinks=function(){var t=this;return r.filter(this.nodes(),(function(e){return r.isEmpty(t._out[e])}))},o.prototype.setNodes=function(t,e){var n=arguments,i=this;return r.each(t,(function(t){n.length>1?i.setNode(t,e):i.setNode(t)})),this},o.prototype.setNode=function(t,e){return r.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=i,this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},o.prototype.node=function(t){return this._nodes[t]},o.prototype.hasNode=function(t){return r.has(this._nodes,t)},o.prototype.removeNode=function(t){var e=this;if(r.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],r.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),r.each(r.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],r.each(r.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},o.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(e))e=i;else{for(var n=e+="";!r.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},o.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},o.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==i)return e}},o.prototype.children=function(t){if(r.isUndefined(t)&&(t=i),this._isCompound){var e=this._children[t];if(e)return r.keys(e)}else{if(t===i)return this.nodes();if(this.hasNode(t))return[]}},o.prototype.predecessors=function(t){var e=this._preds[t];if(e)return r.keys(e)},o.prototype.successors=function(t){var e=this._sucs[t];if(e)return r.keys(e)},o.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return r.union(e,this.successors(t))},o.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},o.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;r.each(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),r.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var i={};function o(t){var r=n.parent(t);return void 0===r||e.hasNode(r)?(i[t]=r,r):r in i?i[r]:o(r)}return this._isCompound&&r.each(e.nodes(),(function(t){e.setParent(t,o(t))})),e},o.prototype.setDefaultEdgeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultEdgeLabelFn=t,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return r.values(this._edgeObjs)},o.prototype.setPath=function(t,e){var n=this,i=arguments;return r.reduce(t,(function(t,r){return i.length>1?n.setEdge(t,r,e):n.setEdge(t,r),r})),this},o.prototype.setEdge=function(){var t,e,n,i,o=!1,a=arguments[0];"object"==typeof a&&null!==a&&"v"in a?(t=a.v,e=a.w,n=a.name,2===arguments.length&&(i=arguments[1],o=!0)):(t=a,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),t=""+t,e=""+e,r.isUndefined(n)||(n=""+n);var l=u(this._isDirected,t,e,n);if(r.has(this._edgeLabels,l))return o&&(this._edgeLabels[l]=i),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[l]=o?i:this._defaultEdgeLabelFn(t,e,n);var h=c(this._isDirected,t,e,n);return t=h.v,e=h.w,Object.freeze(h),this._edgeObjs[l]=h,s(this._preds[e],t),s(this._sucs[t],e),this._in[e][l]=h,this._out[t][l]=h,this._edgeCount++,this},o.prototype.edge=function(t,e,n){var r=1===arguments.length?l(this._isDirected,arguments[0]):u(this._isDirected,t,e,n);return this._edgeLabels[r]},o.prototype.hasEdge=function(t,e,n){var i=1===arguments.length?l(this._isDirected,arguments[0]):u(this._isDirected,t,e,n);return r.has(this._edgeLabels,i)},o.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?l(this._isDirected,arguments[0]):u(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],a(this._preds[e],t),a(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},o.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var i=r.values(n);return e?r.filter(i,(function(t){return t.v===e})):i}},o.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var i=r.values(n);return e?r.filter(i,(function(t){return t.w===e})):i}},o.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},82354:(t,e,n)=>{t.exports={Graph:n(30771),version:n(49631)}},28974:(t,e,n)=>{var r=n(89126),i=n(30771);function o(t){return r.map(t.nodes(),(function(e){var n=t.node(e),i=t.parent(e),o={v:e};return r.isUndefined(n)||(o.value=n),r.isUndefined(i)||(o.parent=i),o}))}function s(t){return r.map(t.edges(),(function(e){var n=t.edge(e),i={v:e.v,w:e.w};return r.isUndefined(e.name)||(i.name=e.name),r.isUndefined(n)||(i.value=n),i}))}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:o(t),edges:s(t)};return r.isUndefined(t.graph())||(e.value=r.clone(t.graph())),e},read:function(t){var e=new i(t.options).setGraph(t.value);return r.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),r.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}}},89126:(t,e,n)=>{var r;try{r={clone:n(66678),constant:n(75703),each:n(66073),filter:n(63105),has:n(18721),isArray:n(1469),isEmpty:n(41609),isFunction:n(23560),isUndefined:n(52353),keys:n(3674),map:n(35161),reduce:n(54061),size:n(84238),transform:n(68718),union:n(93386),values:n(52628)}}catch(t){}r||(r=window._),t.exports=r},49631:t=>{t.exports="2.1.8"},19755:function(t,e){var n;!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(r,i){"use strict";var o=[],s=Object.getPrototypeOf,a=o.slice,u=o.flat?function(t){return o.flat.call(t)}:function(t){return o.concat.apply([],t)},c=o.push,l=o.indexOf,h={},f=h.toString,d=h.hasOwnProperty,p=d.toString,g=p.call(Object),v={},m=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},y=function(t){return null!=t&&t===t.window},b=r.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function w(t,e,n){var r,i,o=(n=n||b).createElement("script");if(o.text=t,e)for(r in x)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function _(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[f.call(t)]||"object":typeof t}var A="3.6.0",k=function(t,e){return new k.fn.init(t,e)};function S(t){var e=!!t&&"length"in t&&t.length,n=_(t);return!m(t)&&!y(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}k.fn=k.prototype={jquery:A,constructor:k,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=k.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return k.each(this,t)},map:function(t){return this.pushStack(k.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(k.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(k.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},k.extend=k.fn.extend=function(){var t,e,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||m(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(t=arguments[a]))for(e in t)r=t[e],"__proto__"!==e&&s!==r&&(c&&r&&(k.isPlainObject(r)||(i=Array.isArray(r)))?(n=s[e],o=i&&!Array.isArray(n)?[]:i||k.isPlainObject(n)?n:{},i=!1,s[e]=k.extend(c,o,r)):void 0!==r&&(s[e]=r));return s},k.extend({expando:"jQuery"+(A+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==f.call(t)||(e=s(t))&&("function"!=typeof(n=d.call(e,"constructor")&&e.constructor)||p.call(n)!==g))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){w(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,r=0;if(S(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(S(Object(t))?k.merge(n,"string"==typeof t?[t]:t):c.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:l.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,s=!n;i<o;i++)!e(t[i],i)!==s&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,s=[];if(S(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&s.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&s.push(i);return u(s)},guid:1,support:v}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=o[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){h["[object "+e+"]"]=e.toLowerCase()}));var E=function(t){var e,n,r,i,o,s,a,u,c,l,h,f,d,p,g,v,m,y,b,x="sizzle"+1*new Date,w=t.document,_=0,A=0,k=ut(),S=ut(),E=ut(),P=ut(),C=function(t,e){return t===e&&(h=!0),0},T={}.hasOwnProperty,N=[],L=N.pop,M=N.push,O=N.push,I=N.slice,R=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",D="[\\x20\\t\\r\\n\\f]",j="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",V="\\[[\\x20\\t\\r\\n\\f]*("+j+")(?:"+D+"*([*^$|!~]?=)"+D+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+D+"*\\]",F=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+V+")*)|.*)\\)|)",z=new RegExp(D+"+","g"),U=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),G=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),q=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),H=new RegExp(D+"|>"),W=new RegExp(F),$=new RegExp("^"+j+"$"),X={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+V),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,J=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=function(){f()},st=xt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{O.apply(N=I.call(w.childNodes),w.childNodes),N[w.childNodes.length].nodeType}catch(t){O={apply:N.length?function(t,e){M.apply(t,I.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function at(t,e,r,i){var o,a,c,l,h,p,m,y=e&&e.ownerDocument,w=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==w&&9!==w&&11!==w)return r;if(!i&&(f(e),e=e||d,g)){if(11!==w&&(h=Q.exec(t)))if(o=h[1]){if(9===w){if(!(c=e.getElementById(o)))return r;if(c.id===o)return r.push(c),r}else if(y&&(c=y.getElementById(o))&&b(e,c)&&c.id===o)return r.push(c),r}else{if(h[2])return O.apply(r,e.getElementsByTagName(t)),r;if((o=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return O.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!P[t+" "]&&(!v||!v.test(t))&&(1!==w||"object"!==e.nodeName.toLowerCase())){if(m=t,y=e,1===w&&(H.test(t)||q.test(t))){for((y=tt.test(t)&&mt(e.parentNode)||e)===e&&n.scope||((l=e.getAttribute("id"))?l=l.replace(rt,it):e.setAttribute("id",l=x)),a=(p=s(t)).length;a--;)p[a]=(l?"#"+l:":scope")+" "+bt(p[a]);m=p.join(",")}try{return O.apply(r,y.querySelectorAll(m)),r}catch(e){P(t,!0)}finally{l===x&&e.removeAttribute("id")}}}return u(t.replace(U,"$1"),e,r,i)}function ut(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function ct(t){return t[x]=!0,t}function lt(t){var e=d.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function ft(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function dt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&st(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function vt(t){return ct((function(e){return e=+e,ct((function(n,r){for(var i,o=t([],n.length,e),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))}))}))}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=at.support={},o=at.isXML=function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!Y.test(e||n&&n.nodeName||"HTML")},f=at.setDocument=function(t){var e,i,s=t?t.ownerDocument||t:w;return s!=d&&9===s.nodeType&&s.documentElement?(p=(d=s).documentElement,g=!o(d),w!=d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ot,!1):i.attachEvent&&i.attachEvent("onunload",ot)),n.scope=lt((function(t){return p.appendChild(t).appendChild(d.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),n.attributes=lt((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=lt((function(t){return t.appendChild(d.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=K.test(d.getElementsByClassName),n.getById=lt((function(t){return p.appendChild(t).id=x,!d.getElementsByName||!d.getElementsByName(x).length})),n.getById?(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},m=[],v=[],(n.qsa=K.test(d.querySelectorAll))&&(lt((function(t){var e;p.appendChild(t).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||v.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+B+")"),t.querySelectorAll("[id~="+x+"-]").length||v.push("~="),(e=d.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||v.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll(":checked").length||v.push(":checked"),t.querySelectorAll("a#"+x+"+*").length||v.push(".#.+[+~]"),t.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")})),lt((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=d.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&v.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),v.push(",.*:")}))),(n.matchesSelector=K.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&lt((function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),m.push("!=",F)})),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),e=K.test(p.compareDocumentPosition),b=e||K.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},C=e?function(t,e){if(t===e)return h=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t==d||t.ownerDocument==w&&b(w,t)?-1:e==d||e.ownerDocument==w&&b(w,e)?1:l?R(l,t)-R(l,e):0:4&r?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,s=[t],a=[e];if(!i||!o)return t==d?-1:e==d?1:i?-1:o?1:l?R(l,t)-R(l,e):0;if(i===o)return ft(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[r]===a[r];)r++;return r?ft(s[r],a[r]):s[r]==w?-1:a[r]==w?1:0},d):d},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if(f(t),n.matchesSelector&&g&&!P[e+" "]&&(!m||!m.test(e))&&(!v||!v.test(e)))try{var r=y.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){P(e,!0)}return at(e,d,null,[t]).length>0},at.contains=function(t,e){return(t.ownerDocument||t)!=d&&f(t),b(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!=d&&f(t);var i=r.attrHandle[e.toLowerCase()],o=i&&T.call(r.attrHandle,e.toLowerCase())?i(t,e,!g):void 0;return void 0!==o?o:n.attributes||!g?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},at.escape=function(t){return(t+"").replace(rt,it)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,r=[],i=0,o=0;if(h=!n.detectDuplicates,l=!n.sortStable&&t.slice(0),t.sort(C),h){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return l=null,t},i=at.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},r=at.selectors={cacheLength:50,createPseudo:ct,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return X.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&W.test(n)&&(e=s(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=k[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"("+D+"|$)"))&&k(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=at.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(z," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var c,l,h,f,d,p,g=o!==s?"nextSibling":"previousSibling",v=e.parentNode,m=a&&e.nodeName.toLowerCase(),y=!u&&!a,b=!1;if(v){if(o){for(;g;){for(f=e;f=f[g];)if(a?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[s?v.firstChild:v.lastChild],s&&y){for(b=(d=(c=(l=(h=(f=v)[x]||(f[x]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]||[])[0]===_&&c[1])&&c[2],f=d&&v.childNodes[d];f=++d&&f&&f[g]||(b=d=0)||p.pop();)if(1===f.nodeType&&++b&&f===e){l[t]=[_,d,b];break}}else if(y&&(b=d=(c=(l=(h=(f=e)[x]||(f[x]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]||[])[0]===_&&c[1]),!1===b)for(;(f=++d&&f&&f[g]||(b=d=0)||p.pop())&&((a?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++b||(y&&((l=(h=f[x]||(f[x]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]=[_,b]),f!==e)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return i[x]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?ct((function(t,n){for(var r,o=i(t,e),s=o.length;s--;)t[r=R(t,o[s])]=!(n[r]=o[s])})):function(t){return i(t,0,n)}):i}},pseudos:{not:ct((function(t){var e=[],n=[],r=a(t.replace(U,"$1"));return r[x]?ct((function(t,e,n,i){for(var o,s=r(t,null,i,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))})):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}})),has:ct((function(t){return function(e){return at(t,e).length>0}})),contains:ct((function(t){return t=t.replace(et,nt),function(e){return(e.textContent||i(e)).indexOf(t)>-1}})),lang:ct((function(t){return $.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return Z.test(t.nodeName)},input:function(t){return J.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:vt((function(){return[0]})),last:vt((function(t,e){return[e-1]})),eq:vt((function(t,e,n){return[n<0?n+e:n]})),even:vt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:vt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:vt((function(t,e,n){for(var r=n<0?n+e:n>e?e:n;--r>=0;)t.push(r);return t})),gt:vt((function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t}))}},r.pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=dt(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=pt(e);function yt(){}function bt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function xt(t,e,n){var r=e.dir,i=e.next,o=i||r,s=n&&"parentNode"===o,a=A++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||s)return t(e,n,i);return!1}:function(e,n,u){var c,l,h,f=[_,a];if(u){for(;e=e[r];)if((1===e.nodeType||s)&&t(e,n,u))return!0}else for(;e=e[r];)if(1===e.nodeType||s)if(l=(h=e[x]||(e[x]={}))[e.uniqueID]||(h[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((c=l[o])&&c[0]===_&&c[1]===a)return f[2]=c[2];if(l[o]=f,f[2]=t(e,n,u))return!0}return!1}}function wt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function _t(t,e,n,r,i){for(var o,s=[],a=0,u=t.length,c=null!=e;a<u;a++)(o=t[a])&&(n&&!n(o,r,i)||(s.push(o),c&&e.push(a)));return s}function At(t,e,n,r,i,o){return r&&!r[x]&&(r=At(r)),i&&!i[x]&&(i=At(i,o)),ct((function(o,s,a,u){var c,l,h,f=[],d=[],p=s.length,g=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)at(t,e[r],n);return n}(e||"*",a.nodeType?[a]:a,[]),v=!t||!o&&e?g:_t(g,f,t,a,u),m=n?i||(o?t:p||r)?[]:s:v;if(n&&n(v,m,a,u),r)for(c=_t(m,d),r(c,[],a,u),l=c.length;l--;)(h=c[l])&&(m[d[l]]=!(v[d[l]]=h));if(o){if(i||t){if(i){for(c=[],l=m.length;l--;)(h=m[l])&&c.push(v[l]=h);i(null,m=[],c,u)}for(l=m.length;l--;)(h=m[l])&&(c=i?R(o,h):f[l])>-1&&(o[c]=!(s[c]=h))}}else m=_t(m===s?m.splice(p,m.length):m),i?i(null,s,m,u):O.apply(s,m)}))}function kt(t){for(var e,n,i,o=t.length,s=r.relative[t[0].type],a=s||r.relative[" "],u=s?1:0,l=xt((function(t){return t===e}),a,!0),h=xt((function(t){return R(e,t)>-1}),a,!0),f=[function(t,n,r){var i=!s&&(r||n!==c)||((e=n).nodeType?l(t,n,r):h(t,n,r));return e=null,i}];u<o;u++)if(n=r.relative[t[u].type])f=[xt(wt(f),n)];else{if((n=r.filter[t[u].type].apply(null,t[u].matches))[x]){for(i=++u;i<o&&!r.relative[t[i].type];i++);return At(u>1&&wt(f),u>1&&bt(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(U,"$1"),n,u<i&&kt(t.slice(u,i)),i<o&&kt(t=t.slice(i)),i<o&&bt(t))}f.push(n)}return wt(f)}return yt.prototype=r.filters=r.pseudos,r.setFilters=new yt,s=at.tokenize=function(t,e){var n,i,o,s,a,u,c,l=S[t+" "];if(l)return e?0:l.slice(0);for(a=t,u=[],c=r.preFilter;a;){for(s in n&&!(i=G.exec(a))||(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),n=!1,(i=q.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(U," ")}),a=a.slice(n.length)),r.filter)!(i=X[s].exec(a))||c[s]&&!(i=c[s](i))||(n=i.shift(),o.push({value:n,type:s,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?at.error(t):S(t,u).slice(0)},a=at.compile=function(t,e){var n,i=[],o=[],a=E[t+" "];if(!a){for(e||(e=s(t)),n=e.length;n--;)(a=kt(e[n]))[x]?i.push(a):o.push(a);a=E(t,function(t,e){var n=e.length>0,i=t.length>0,o=function(o,s,a,u,l){var h,p,v,m=0,y="0",b=o&&[],x=[],w=c,A=o||i&&r.find.TAG("*",l),k=_+=null==w?1:Math.random()||.1,S=A.length;for(l&&(c=s==d||s||l);y!==S&&null!=(h=A[y]);y++){if(i&&h){for(p=0,s||h.ownerDocument==d||(f(h),a=!g);v=t[p++];)if(v(h,s||d,a)){u.push(h);break}l&&(_=k)}n&&((h=!v&&h)&&m--,o&&b.push(h))}if(m+=y,n&&y!==m){for(p=0;v=e[p++];)v(b,x,s,a);if(o){if(m>0)for(;y--;)b[y]||x[y]||(x[y]=L.call(u));x=_t(x)}O.apply(u,x),l&&!o&&x.length>0&&m+e.length>1&&at.uniqueSort(u)}return l&&(_=k,c=w),b};return n?ct(o):o}(o,i)),a.selector=t}return a},u=at.select=function(t,e,n,i){var o,u,c,l,h,f="function"==typeof t&&t,d=!i&&s(t=f.selector||t);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&9===e.nodeType&&g&&r.relative[u[1].type]){if(!(e=(r.find.ID(c.matches[0].replace(et,nt),e)||[])[0]))return n;f&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(o=X.needsContext.test(t)?0:u.length;o--&&(c=u[o],!r.relative[l=c.type]);)if((h=r.find[l])&&(i=h(c.matches[0].replace(et,nt),tt.test(u[0].type)&&mt(e.parentNode)||e))){if(u.splice(o,1),!(t=i.length&&bt(u)))return O.apply(n,i),n;break}}return(f||a(t,d))(i,e,!g,n,!e||tt.test(t)&&mt(e.parentNode)||e),n},n.sortStable=x.split("").sort(C).join("")===x,n.detectDuplicates=!!h,f(),n.sortDetached=lt((function(t){return 1&t.compareDocumentPosition(d.createElement("fieldset"))})),lt((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ht("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&lt((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ht("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),lt((function(t){return null==t.getAttribute("disabled")}))||ht(B,(function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null})),at}(r);k.find=E,k.expr=E.selectors,k.expr[":"]=k.expr.pseudos,k.uniqueSort=k.unique=E.uniqueSort,k.text=E.getText,k.isXMLDoc=E.isXML,k.contains=E.contains,k.escapeSelector=E.escape;var P=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&k(t).is(n))break;r.push(t)}return r},C=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},T=k.expr.match.needsContext;function N(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var L=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function M(t,e,n){return m(e)?k.grep(t,(function(t,r){return!!e.call(t,r,t)!==n})):e.nodeType?k.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?k.grep(t,(function(t){return l.call(e,t)>-1!==n})):k.filter(e,t,n)}k.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?k.find.matchesSelector(r,t)?[r]:[]:k.find.matches(t,k.grep(e,(function(t){return 1===t.nodeType})))},k.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(k(t).filter((function(){for(e=0;e<r;e++)if(k.contains(i[e],this))return!0})));for(n=this.pushStack([]),e=0;e<r;e++)k.find(t,i[e],n);return r>1?k.uniqueSort(n):n},filter:function(t){return this.pushStack(M(this,t||[],!1))},not:function(t){return this.pushStack(M(this,t||[],!0))},is:function(t){return!!M(this,"string"==typeof t&&T.test(t)?k(t):t||[],!1).length}});var O,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||O,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:I.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof k?e[0]:e,k.merge(this,k.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:b,!0)),L.test(r[1])&&k.isPlainObject(e))for(r in e)m(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=b.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):m(t)?void 0!==n.ready?n.ready(t):t(k):k.makeArray(t,this)}).prototype=k.fn,O=k(b);var R=/^(?:parents|prev(?:Until|All))/,B={children:!0,contents:!0,next:!0,prev:!0};function D(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}k.fn.extend({has:function(t){var e=k(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(k.contains(this,e[t]))return!0}))},closest:function(t,e){var n,r=0,i=this.length,o=[],s="string"!=typeof t&&k(t);if(!T.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&k.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?k.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?l.call(k(t),this[0]):l.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),k.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return P(t,"parentNode")},parentsUntil:function(t,e,n){return P(t,"parentNode",n)},next:function(t){return D(t,"nextSibling")},prev:function(t){return D(t,"previousSibling")},nextAll:function(t){return P(t,"nextSibling")},prevAll:function(t){return P(t,"previousSibling")},nextUntil:function(t,e,n){return P(t,"nextSibling",n)},prevUntil:function(t,e,n){return P(t,"previousSibling",n)},siblings:function(t){return C((t.parentNode||{}).firstChild,t)},children:function(t){return C(t.firstChild)},contents:function(t){return null!=t.contentDocument&&s(t.contentDocument)?t.contentDocument:(N(t,"template")&&(t=t.content||t),k.merge([],t.childNodes))}},(function(t,e){k.fn[t]=function(n,r){var i=k.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=k.filter(r,i)),this.length>1&&(B[t]||k.uniqueSort(i),R.test(t)&&i.reverse()),this.pushStack(i)}}));var j=/[^\x20\t\r\n\f]+/g;function V(t){return t}function F(t){throw t}function z(t,e,n,r){var i;try{t&&m(i=t.promise)?i.call(t).done(e).fail(n):t&&m(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}k.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return k.each(t.match(j)||[],(function(t,n){e[n]=!0})),e}(t):k.extend({},t);var e,n,r,i,o=[],s=[],a=-1,u=function(){for(i=i||t.once,r=e=!0;s.length;a=-1)for(n=s.shift();++a<o.length;)!1===o[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(a=o.length-1,s.push(n)),function e(n){k.each(n,(function(n,r){m(r)?t.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==_(r)&&e(r)}))}(arguments),n&&!e&&u()),this},remove:function(){return k.each(arguments,(function(t,e){for(var n;(n=k.inArray(e,o,n))>-1;)o.splice(n,1),n<=a&&a--})),this},has:function(t){return t?k.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=s=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],s.push(n),e||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},k.extend({Deferred:function(t){var e=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return k.Deferred((function(n){k.each(e,(function(e,r){var i=m(t[r[4]])&&t[r[4]];o[r[1]]((function(){var t=i&&i.apply(this,arguments);t&&m(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,i){var o=0;function s(t,e,n,i){return function(){var a=this,u=arguments,c=function(){var r,c;if(!(t<o)){if((r=n.apply(a,u))===e.promise())throw new TypeError("Thenable self-resolution");c=r&&("object"==typeof r||"function"==typeof r)&&r.then,m(c)?i?c.call(r,s(o,e,V,i),s(o,e,F,i)):(o++,c.call(r,s(o,e,V,i),s(o,e,F,i),s(o,e,V,e.notifyWith))):(n!==V&&(a=void 0,u=[r]),(i||e.resolveWith)(a,u))}},l=i?c:function(){try{c()}catch(r){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(r,l.stackTrace),t+1>=o&&(n!==F&&(a=void 0,u=[r]),e.rejectWith(a,u))}};t?l():(k.Deferred.getStackHook&&(l.stackTrace=k.Deferred.getStackHook()),r.setTimeout(l))}}return k.Deferred((function(r){e[0][3].add(s(0,r,m(i)?i:V,r.notifyWith)),e[1][3].add(s(0,r,m(t)?t:V)),e[2][3].add(s(0,r,m(n)?n:F))})).promise()},promise:function(t){return null!=t?k.extend(t,i):i}},o={};return k.each(e,(function(t,r){var s=r[2],a=r[5];i[r[1]]=s.add,a&&s.add((function(){n=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=s.fireWith})),i.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=a.call(arguments),o=k.Deferred(),s=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?a.call(arguments):n,--e||o.resolveWith(r,i)}};if(e<=1&&(z(t,o.done(s(n)).resolve,o.reject,!e),"pending"===o.state()||m(i[n]&&i[n].then)))return o.then();for(;n--;)z(i[n],s(n),o.reject);return o.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(t,e){r.console&&r.console.warn&&t&&U.test(t.name)&&r.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},k.readyException=function(t){r.setTimeout((function(){throw t}))};var G=k.Deferred();function q(){b.removeEventListener("DOMContentLoaded",q),r.removeEventListener("load",q),k.ready()}k.fn.ready=function(t){return G.then(t).catch((function(t){k.readyException(t)})),this},k.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--k.readyWait:k.isReady)||(k.isReady=!0,!0!==t&&--k.readyWait>0||G.resolveWith(b,[k]))}}),k.ready.then=G.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?r.setTimeout(k.ready):(b.addEventListener("DOMContentLoaded",q),r.addEventListener("load",q));var H=function(t,e,n,r,i,o,s){var a=0,u=t.length,c=null==n;if("object"===_(n))for(a in i=!0,n)H(t,e,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,m(r)||(s=!0),c&&(s?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(k(t),n)})),e))for(;a<u;a++)e(t[a],n,s?r:r.call(t[a],a,e(t[a],n)));return i?t:c?e.call(t):u?e(t[0],n):o},W=/^-ms-/,$=/-([a-z])/g;function X(t,e){return e.toUpperCase()}function Y(t){return t.replace(W,"ms-").replace($,X)}var J=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Z(){this.expando=k.expando+Z.uid++}Z.uid=1,Z.prototype={cache:function(t){var e=t[this.expando];return e||(e={},J(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[Y(e)]=n;else for(r in e)i[Y(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][Y(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(Y):(e=Y(e))in r?[e]:e.match(j)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||k.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!k.isEmptyObject(e)}};var K=new Z,Q=new Z,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function nt(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(n)}catch(t){}Q.set(t,e,n)}else n=void 0;return n}k.extend({hasData:function(t){return Q.hasData(t)||K.hasData(t)},data:function(t,e,n){return Q.access(t,e,n)},removeData:function(t,e){Q.remove(t,e)},_data:function(t,e,n){return K.access(t,e,n)},_removeData:function(t,e){K.remove(t,e)}}),k.fn.extend({data:function(t,e){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(i=Q.get(o),1===o.nodeType&&!K.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(r=s[n].name).indexOf("data-")&&(r=Y(r.slice(5)),nt(o,r,i[r]));K.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each((function(){Q.set(this,t)})):H(this,(function(e){var n;if(o&&void 0===e)return void 0!==(n=Q.get(o,t))||void 0!==(n=nt(o,t))?n:void 0;this.each((function(){Q.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){Q.remove(this,t)}))}}),k.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=K.get(t,e),n&&(!r||Array.isArray(n)?r=K.access(t,e,k.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=k.queue(t,e),r=n.length,i=n.shift(),o=k._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,(function(){k.dequeue(t,e)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return K.get(t,n)||K.access(t,n,{empty:k.Callbacks("once memory").add((function(){K.remove(t,[e+"queue",n])}))})}}),k.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?k.queue(this[0],t):void 0===e?this:this.each((function(){var n=k.queue(this,t,e);k._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&k.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){k.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=k.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=K.get(o[s],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(e)}});var rt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,it=new RegExp("^(?:([+-])=|)("+rt+")([a-z%]*)$","i"),ot=["Top","Right","Bottom","Left"],st=b.documentElement,at=function(t){return k.contains(t.ownerDocument,t)},ut={composed:!0};st.getRootNode&&(at=function(t){return k.contains(t.ownerDocument,t)||t.getRootNode(ut)===t.ownerDocument});var ct=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&at(t)&&"none"===k.css(t,"display")};function lt(t,e,n,r){var i,o,s=20,a=r?function(){return r.cur()}:function(){return k.css(t,e,"")},u=a(),c=n&&n[3]||(k.cssNumber[e]?"":"px"),l=t.nodeType&&(k.cssNumber[e]||"px"!==c&&+u)&&it.exec(k.css(t,e));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;s--;)k.style(t,e,l+c),(1-o)*(1-(o=a()/u||.5))<=0&&(s=0),l/=o;l*=2,k.style(t,e,l+c),n=n||[]}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}var ht={};function ft(t){var e,n=t.ownerDocument,r=t.nodeName,i=ht[r];return i||(e=n.body.appendChild(n.createElement(r)),i=k.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),ht[r]=i,i)}function dt(t,e){for(var n,r,i=[],o=0,s=t.length;o<s;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=K.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ct(r)&&(i[o]=ft(r))):"none"!==n&&(i[o]="none",K.set(r,"display",n)));for(o=0;o<s;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}k.fn.extend({show:function(){return dt(this,!0)},hide:function(){return dt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){ct(this)?k(this).show():k(this).hide()}))}});var pt,gt,vt=/^(?:checkbox|radio)$/i,mt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,yt=/^$|^module$|\/(?:java|ecma)script/i;pt=b.createDocumentFragment().appendChild(b.createElement("div")),(gt=b.createElement("input")).setAttribute("type","radio"),gt.setAttribute("checked","checked"),gt.setAttribute("name","t"),pt.appendChild(gt),v.checkClone=pt.cloneNode(!0).cloneNode(!0).lastChild.checked,pt.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!pt.cloneNode(!0).lastChild.defaultValue,pt.innerHTML="<option></option>",v.option=!!pt.lastChild;var bt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function xt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&N(t,e)?k.merge([t],n):n}function wt(t,e){for(var n=0,r=t.length;n<r;n++)K.set(t[n],"globalEval",!e||K.get(e[n],"globalEval"))}bt.tbody=bt.tfoot=bt.colgroup=bt.caption=bt.thead,bt.th=bt.td,v.option||(bt.optgroup=bt.option=[1,"<select multiple='multiple'>","</select>"]);var _t=/<|&#?\w+;/;function At(t,e,n,r,i){for(var o,s,a,u,c,l,h=e.createDocumentFragment(),f=[],d=0,p=t.length;d<p;d++)if((o=t[d])||0===o)if("object"===_(o))k.merge(f,o.nodeType?[o]:o);else if(_t.test(o)){for(s=s||h.appendChild(e.createElement("div")),a=(mt.exec(o)||["",""])[1].toLowerCase(),u=bt[a]||bt._default,s.innerHTML=u[1]+k.htmlPrefilter(o)+u[2],l=u[0];l--;)s=s.lastChild;k.merge(f,s.childNodes),(s=h.firstChild).textContent=""}else f.push(e.createTextNode(o));for(h.textContent="",d=0;o=f[d++];)if(r&&k.inArray(o,r)>-1)i&&i.push(o);else if(c=at(o),s=xt(h.appendChild(o),"script"),c&&wt(s),n)for(l=0;o=s[l++];)yt.test(o.type||"")&&n.push(o);return h}var kt=/^([^.]*)(?:\.(.+)|)/;function St(){return!0}function Et(){return!1}function Pt(t,e){return t===function(){try{return b.activeElement}catch(t){}}()==("focus"===e)}function Ct(t,e,n,r,i,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(r=r||n,n=void 0),e)Ct(t,a,n,r,e[a],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Et;else if(!i)return t;return 1===o&&(s=i,i=function(t){return k().off(t),s.apply(this,arguments)},i.guid=s.guid||(s.guid=k.guid++)),t.each((function(){k.event.add(this,e,i,r,n)}))}function Tt(t,e,n){n?(K.set(t,e,!1),k.event.add(t,e,{namespace:!1,handler:function(t){var r,i,o=K.get(this,e);if(1&t.isTrigger&&this[e]){if(o.length)(k.event.special[e]||{}).delegateType&&t.stopPropagation();else if(o=a.call(arguments),K.set(this,e,o),r=n(this,e),this[e](),o!==(i=K.get(this,e))||r?K.set(this,e,!1):i={},o!==i)return t.stopImmediatePropagation(),t.preventDefault(),i&&i.value}else o.length&&(K.set(this,e,{value:k.event.trigger(k.extend(o[0],k.Event.prototype),o.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===K.get(t,e)&&k.event.add(t,e,St)}k.event={global:{},add:function(t,e,n,r,i){var o,s,a,u,c,l,h,f,d,p,g,v=K.get(t);if(J(t))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&k.find.matchesSelector(st,i),n.guid||(n.guid=k.guid++),(u=v.events)||(u=v.events=Object.create(null)),(s=v.handle)||(s=v.handle=function(e){return void 0!==k&&k.event.triggered!==e.type?k.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(j)||[""]).length;c--;)d=g=(a=kt.exec(e[c])||[])[1],p=(a[2]||"").split(".").sort(),d&&(h=k.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,h=k.event.special[d]||{},l=k.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:p.join(".")},o),(f=u[d])||((f=u[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,r,p,s)||t.addEventListener&&t.addEventListener(d,s)),h.add&&(h.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),k.event.global[d]=!0)},remove:function(t,e,n,r,i){var o,s,a,u,c,l,h,f,d,p,g,v=K.hasData(t)&&K.get(t);if(v&&(u=v.events)){for(c=(e=(e||"").match(j)||[""]).length;c--;)if(d=g=(a=kt.exec(e[c])||[])[1],p=(a[2]||"").split(".").sort(),d){for(h=k.event.special[d]||{},f=u[d=(r?h.delegateType:h.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)l=f[o],!i&&g!==l.origType||n&&n.guid!==l.guid||a&&!a.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,h.remove&&h.remove.call(t,l));s&&!f.length&&(h.teardown&&!1!==h.teardown.call(t,p,v.handle)||k.removeEvent(t,d,v.handle),delete u[d])}else for(d in u)k.event.remove(t,d+e[c],n,r,!0);k.isEmptyObject(u)&&K.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,s,a=new Array(arguments.length),u=k.event.fix(t),c=(K.get(this,"events")||Object.create(null))[u.type]||[],l=k.event.special[u.type]||{};for(a[0]=u,e=1;e<arguments.length;e++)a[e]=arguments[e];if(u.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,u)){for(s=k.event.handlers.call(this,u,c),e=0;(i=s[e++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((k.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,u),u.result}},handlers:function(t,e){var n,r,i,o,s,a=[],u=e.delegateCount,c=t.target;if(u&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],s={},n=0;n<u;n++)void 0===s[i=(r=e[n]).selector+" "]&&(s[i]=r.needsContext?k(i,this).index(c)>-1:k.find(i,this,null,[c]).length),s[i]&&o.push(r);o.length&&a.push({elem:c,handlers:o})}return c=this,u<e.length&&a.push({elem:c,handlers:e.slice(u)}),a},addProp:function(t,e){Object.defineProperty(k.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[k.expando]?t:new k.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return vt.test(e.type)&&e.click&&N(e,"input")&&Tt(e,"click",St),!1},trigger:function(t){var e=this||t;return vt.test(e.type)&&e.click&&N(e,"input")&&Tt(e,"click"),!0},_default:function(t){var e=t.target;return vt.test(e.type)&&e.click&&N(e,"input")&&K.get(e,"click")||N(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},k.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},k.Event=function(t,e){if(!(this instanceof k.Event))return new k.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?St:Et,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&k.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:Et,isPropagationStopped:Et,isImmediatePropagationStopped:Et,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=St,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=St,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=St,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},(function(t,e){k.event.special[t]={setup:function(){return Tt(this,t,Pt),!1},trigger:function(){return Tt(this,t),!0},_default:function(){return!0},delegateType:e}})),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){k.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return i&&(i===r||k.contains(r,i))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}})),k.fn.extend({on:function(t,e,n,r){return Ct(this,t,e,n,r)},one:function(t,e,n,r){return Ct(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,k(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Et),this.each((function(){k.event.remove(this,t,n,e)}))}});var Nt=/<script|<style|<link/i,Lt=/checked\s*(?:[^=]|=\s*.checked.)/i,Mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ot(t,e){return N(t,"table")&&N(11!==e.nodeType?e:e.firstChild,"tr")&&k(t).children("tbody")[0]||t}function It(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Rt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Bt(t,e){var n,r,i,o,s,a;if(1===e.nodeType){if(K.hasData(t)&&(a=K.get(t).events))for(i in K.remove(e,"handle events"),a)for(n=0,r=a[i].length;n<r;n++)k.event.add(e,i,a[i][n]);Q.hasData(t)&&(o=Q.access(t),s=k.extend({},o),Q.set(e,s))}}function Dt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&vt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function jt(t,e,n,r){e=u(e);var i,o,s,a,c,l,h=0,f=t.length,d=f-1,p=e[0],g=m(p);if(g||f>1&&"string"==typeof p&&!v.checkClone&&Lt.test(p))return t.each((function(i){var o=t.eq(i);g&&(e[0]=p.call(this,i,o.html())),jt(o,e,n,r)}));if(f&&(o=(i=At(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(a=(s=k.map(xt(i,"script"),It)).length;h<f;h++)c=i,h!==d&&(c=k.clone(c,!0,!0),a&&k.merge(s,xt(c,"script"))),n.call(t[h],c,h);if(a)for(l=s[s.length-1].ownerDocument,k.map(s,Rt),h=0;h<a;h++)c=s[h],yt.test(c.type||"")&&!K.access(c,"globalEval")&&k.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?k._evalUrl&&!c.noModule&&k._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},l):w(c.textContent.replace(Mt,""),c,l))}return t}function Vt(t,e,n){for(var r,i=e?k.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||k.cleanData(xt(r)),r.parentNode&&(n&&at(r)&&wt(xt(r,"script")),r.parentNode.removeChild(r));return t}k.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var r,i,o,s,a=t.cloneNode(!0),u=at(t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||k.isXMLDoc(t)))for(s=xt(a),r=0,i=(o=xt(t)).length;r<i;r++)Dt(o[r],s[r]);if(e)if(n)for(o=o||xt(t),s=s||xt(a),r=0,i=o.length;r<i;r++)Bt(o[r],s[r]);else Bt(t,a);return(s=xt(a,"script")).length>0&&wt(s,!u&&xt(t,"script")),a},cleanData:function(t){for(var e,n,r,i=k.event.special,o=0;void 0!==(n=t[o]);o++)if(J(n)){if(e=n[K.expando]){if(e.events)for(r in e.events)i[r]?k.event.remove(n,r):k.removeEvent(n,r,e.handle);n[K.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),k.fn.extend({detach:function(t){return Vt(this,t,!0)},remove:function(t){return Vt(this,t)},text:function(t){return H(this,(function(t){return void 0===t?k.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return jt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ot(this,t).appendChild(t)}))},prepend:function(){return jt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ot(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return jt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return jt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(k.cleanData(xt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return k.clone(this,t,e)}))},html:function(t){return H(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Nt.test(t)&&!bt[(mt.exec(t)||["",""])[1].toLowerCase()]){t=k.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(k.cleanData(xt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return jt(this,arguments,(function(e){var n=this.parentNode;k.inArray(this,t)<0&&(k.cleanData(xt(this)),n&&n.replaceChild(e,this))}),t)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){k.fn[t]=function(t){for(var n,r=[],i=k(t),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),k(i[s])[e](n),c.apply(r,n.get());return this.pushStack(r)}}));var Ft=new RegExp("^("+rt+")(?!px)[a-z%]+$","i"),zt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=r),e.getComputedStyle(t)},Ut=function(t,e,n){var r,i,o={};for(i in e)o[i]=t.style[i],t.style[i]=e[i];for(i in r=n.call(t),e)t.style[i]=o[i];return r},Gt=new RegExp(ot.join("|"),"i");function qt(t,e,n){var r,i,o,s,a=t.style;return(n=n||zt(t))&&(""!==(s=n.getPropertyValue(e)||n[e])||at(t)||(s=k.style(t,e)),!v.pixelBoxStyles()&&Ft.test(s)&&Gt.test(e)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function Ht(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",st.appendChild(c).appendChild(l);var t=r.getComputedStyle(l);n="1%"!==t.top,u=12===e(t.marginLeft),l.style.right="60%",s=36===e(t.right),i=36===e(t.width),l.style.position="absolute",o=12===e(l.offsetWidth/3),st.removeChild(c),l=null}}function e(t){return Math.round(parseFloat(t))}var n,i,o,s,a,u,c=b.createElement("div"),l=b.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===l.style.backgroundClip,k.extend(v,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,e,n,i;return null==a&&(t=b.createElement("table"),e=b.createElement("tr"),n=b.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",st.appendChild(t).appendChild(e).appendChild(n),i=r.getComputedStyle(e),a=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===e.offsetHeight,st.removeChild(t)),a}}))}();var Wt=["Webkit","Moz","ms"],$t=b.createElement("div").style,Xt={};function Yt(t){return k.cssProps[t]||Xt[t]||(t in $t?t:Xt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Wt.length;n--;)if((t=Wt[n]+e)in $t)return t}(t)||t)}var Jt=/^(none|table(?!-c[ea]).+)/,Zt=/^--/,Kt={position:"absolute",visibility:"hidden",display:"block"},Qt={letterSpacing:"0",fontWeight:"400"};function te(t,e,n){var r=it.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function ee(t,e,n,r,i,o){var s="width"===e?1:0,a=0,u=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(u+=k.css(t,n+ot[s],!0,i)),r?("content"===n&&(u-=k.css(t,"padding"+ot[s],!0,i)),"margin"!==n&&(u-=k.css(t,"border"+ot[s]+"Width",!0,i))):(u+=k.css(t,"padding"+ot[s],!0,i),"padding"!==n?u+=k.css(t,"border"+ot[s]+"Width",!0,i):a+=k.css(t,"border"+ot[s]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-u-a-.5))||0),u}function ne(t,e,n){var r=zt(t),i=(!v.boxSizingReliable()||n)&&"border-box"===k.css(t,"boxSizing",!1,r),o=i,s=qt(t,e,r),a="offset"+e[0].toUpperCase()+e.slice(1);if(Ft.test(s)){if(!n)return s;s="auto"}return(!v.boxSizingReliable()&&i||!v.reliableTrDimensions()&&N(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===k.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===k.css(t,"boxSizing",!1,r),(o=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+ee(t,e,n||(i?"border":"content"),o,r,s)+"px"}function re(t,e,n,r,i){return new re.prototype.init(t,e,n,r,i)}k.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=qt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,s,a=Y(e),u=Zt.test(e),c=t.style;if(u||(e=Yt(a)),s=k.cssHooks[e]||k.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(t,!1,r))?i:c[e];"string"==(o=typeof n)&&(i=it.exec(n))&&i[1]&&(n=lt(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(k.cssNumber[a]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,r))||(u?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,r){var i,o,s,a=Y(e);return Zt.test(e)||(e=Yt(a)),(s=k.cssHooks[e]||k.cssHooks[a])&&"get"in s&&(i=s.get(t,!0,n)),void 0===i&&(i=qt(t,e,r)),"normal"===i&&e in Qt&&(i=Qt[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),k.each(["height","width"],(function(t,e){k.cssHooks[e]={get:function(t,n,r){if(n)return!Jt.test(k.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ne(t,e,r):Ut(t,Kt,(function(){return ne(t,e,r)}))},set:function(t,n,r){var i,o=zt(t),s=!v.scrollboxSize()&&"absolute"===o.position,a=(s||r)&&"border-box"===k.css(t,"boxSizing",!1,o),u=r?ee(t,e,r,a,o):0;return a&&s&&(u-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-ee(t,e,"border",!1,o)-.5)),u&&(i=it.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=k.css(t,e)),te(0,n,u)}}})),k.cssHooks.marginLeft=Ht(v.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(qt(t,"marginLeft"))||t.getBoundingClientRect().left-Ut(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),k.each({margin:"",padding:"",border:"Width"},(function(t,e){k.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+ot[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(k.cssHooks[t+e].set=te)})),k.fn.extend({css:function(t,e){return H(this,(function(t,e,n){var r,i,o={},s=0;if(Array.isArray(e)){for(r=zt(t),i=e.length;s<i;s++)o[e[s]]=k.css(t,e[s],!1,r);return o}return void 0!==n?k.style(t,e,n):k.css(t,e)}),t,e,arguments.length>1)}}),k.Tween=re,re.prototype={constructor:re,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||k.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(k.cssNumber[n]?"":"px")},cur:function(){var t=re.propHooks[this.prop];return t&&t.get?t.get(this):re.propHooks._default.get(this)},run:function(t){var e,n=re.propHooks[this.prop];return this.options.duration?this.pos=e=k.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):re.propHooks._default.set(this),this}},re.prototype.init.prototype=re.prototype,re.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=k.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){k.fx.step[t.prop]?k.fx.step[t.prop](t):1!==t.elem.nodeType||!k.cssHooks[t.prop]&&null==t.elem.style[Yt(t.prop)]?t.elem[t.prop]=t.now:k.style(t.elem,t.prop,t.now+t.unit)}}},re.propHooks.scrollTop=re.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},k.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},k.fx=re.prototype.init,k.fx.step={};var ie,oe,se=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;function ue(){oe&&(!1===b.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(ue):r.setTimeout(ue,k.fx.interval),k.fx.tick())}function ce(){return r.setTimeout((function(){ie=void 0})),ie=Date.now()}function le(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=ot[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function he(t,e,n){for(var r,i=(fe.tweeners[e]||[]).concat(fe.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,e,t))return r}function fe(t,e,n){var r,i,o=0,s=fe.prefilters.length,a=k.Deferred().always((function(){delete u.elem})),u=function(){if(i)return!1;for(var e=ie||ce(),n=Math.max(0,c.startTime+c.duration-e),r=1-(n/c.duration||0),o=0,s=c.tweens.length;o<s;o++)c.tweens[o].run(r);return a.notifyWith(t,[c,r,n]),r<1&&s?n:(s||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:k.extend({},e),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},n),originalProperties:e,originalOptions:n,startTime:ie||ce(),duration:n.duration,tweens:[],createTween:function(e,n){var r=k.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),l=c.props;for(function(t,e){var n,r,i,o,s;for(n in t)if(i=e[r=Y(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(s=k.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(l,c.opts.specialEasing);o<s;o++)if(r=fe.prefilters[o].call(c,t,l,c.opts))return m(r.stop)&&(k._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return k.map(l,he,c),m(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),k.fx.timer(k.extend(u,{elem:t,anim:c,queue:c.opts.queue})),c}k.Animation=k.extend(fe,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return lt(n.elem,t,it.exec(e),n),n}]},tweener:function(t,e){m(t)?(e=t,t=["*"]):t=t.match(j);for(var n,r=0,i=t.length;r<i;r++)n=t[r],fe.tweeners[n]=fe.tweeners[n]||[],fe.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,s,a,u,c,l,h="width"in e||"height"in e,f=this,d={},p=t.style,g=t.nodeType&&ct(t),v=K.get(t,"fxshow");for(r in n.queue||(null==(s=k._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,f.always((function(){f.always((function(){s.unqueued--,k.queue(t,"fx").length||s.empty.fire()}))}))),e)if(i=e[r],se.test(i)){if(delete e[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||k.style(t,r)}if((u=!k.isEmptyObject(e))||!k.isEmptyObject(d))for(r in h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=v&&v.display)&&(c=K.get(t,"display")),"none"===(l=k.css(t,"display"))&&(c?l=c:(dt([t],!0),c=t.style.display||c,l=k.css(t,"display"),dt([t]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===k.css(t,"float")&&(u||(f.done((function(){p.display=c})),null==c&&(l=p.display,c="none"===l?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=K.access(t,"fxshow",{display:c}),o&&(v.hidden=!g),g&&dt([t],!0),f.done((function(){for(r in g||dt([t]),K.remove(t,"fxshow"),d)k.style(t,r,d[r])}))),u=he(g?v[r]:0,r,f),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?fe.prefilters.unshift(t):fe.prefilters.push(t)}}),k.speed=function(t,e,n){var r=t&&"object"==typeof t?k.extend({},t):{complete:n||!n&&e||m(t)&&t,duration:t,easing:n&&e||e&&!m(e)&&e};return k.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in k.fx.speeds?r.duration=k.fx.speeds[r.duration]:r.duration=k.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&k.dequeue(this,r.queue)},r},k.fn.extend({fadeTo:function(t,e,n,r){return this.filter(ct).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=k.isEmptyObject(t),o=k.speed(e,n,r),s=function(){var e=fe(this,k.extend({},t),o);(i||K.get(this,"finish"))&&e.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,i=null!=t&&t+"queueHooks",o=k.timers,s=K.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&ae.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||k.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=K.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=k.timers,s=r?r.length:0;for(n.finish=!0,k.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish}))}}),k.each(["toggle","show","hide"],(function(t,e){var n=k.fn[e];k.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(le(e,!0),t,r,i)}})),k.each({slideDown:le("show"),slideUp:le("hide"),slideToggle:le("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){k.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}})),k.timers=[],k.fx.tick=function(){var t,e=0,n=k.timers;for(ie=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||k.fx.stop(),ie=void 0},k.fx.timer=function(t){k.timers.push(t),k.fx.start()},k.fx.interval=13,k.fx.start=function(){oe||(oe=!0,ue())},k.fx.stop=function(){oe=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(t,e){return t=k.fx&&k.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var i=r.setTimeout(e,t);n.stop=function(){r.clearTimeout(i)}}))},function(){var t=b.createElement("input"),e=b.createElement("select").appendChild(b.createElement("option"));t.type="checkbox",v.checkOn=""!==t.value,v.optSelected=e.selected,(t=b.createElement("input")).value="t",t.type="radio",v.radioValue="t"===t.value}();var de,pe=k.expr.attrHandle;k.fn.extend({attr:function(t,e){return H(this,k.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){k.removeAttr(this,t)}))}}),k.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?k.prop(t,e,n):(1===o&&k.isXMLDoc(t)||(i=k.attrHooks[e.toLowerCase()]||(k.expr.match.bool.test(e)?de:void 0)),void 0!==n?null===n?void k.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=k.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&N(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(j);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),de={set:function(t,e,n){return!1===e?k.removeAttr(t,n):t.setAttribute(n,n),n}},k.each(k.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=pe[e]||k.find.attr;pe[e]=function(t,e,r){var i,o,s=e.toLowerCase();return r||(o=pe[s],pe[s]=i,i=null!=n(t,e,r)?s:null,pe[s]=o),i}}));var ge=/^(?:input|select|textarea|button)$/i,ve=/^(?:a|area)$/i;function me(t){return(t.match(j)||[]).join(" ")}function ye(t){return t.getAttribute&&t.getAttribute("class")||""}function be(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(j)||[]}k.fn.extend({prop:function(t,e){return H(this,k.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[k.propFix[t]||t]}))}}),k.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(t)||(e=k.propFix[e]||e,i=k.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=k.find.attr(t,"tabindex");return e?parseInt(e,10):ge.test(t.nodeName)||ve.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(k.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){k.propFix[this.toLowerCase()]=this})),k.fn.extend({addClass:function(t){var e,n,r,i,o,s,a,u=0;if(m(t))return this.each((function(e){k(this).addClass(t.call(this,e,ye(this)))}));if((e=be(t)).length)for(;n=this[u++];)if(i=ye(n),r=1===n.nodeType&&" "+me(i)+" "){for(s=0;o=e[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(a=me(r))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,r,i,o,s,a,u=0;if(m(t))return this.each((function(e){k(this).removeClass(t.call(this,e,ye(this)))}));if(!arguments.length)return this.attr("class","");if((e=be(t)).length)for(;n=this[u++];)if(i=ye(n),r=1===n.nodeType&&" "+me(i)+" "){for(s=0;o=e[s++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(a=me(r))&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t,r="string"===n||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):m(t)?this.each((function(n){k(this).toggleClass(t.call(this,n,ye(this),e),e)})):this.each((function(){var e,i,o,s;if(r)for(i=0,o=k(this),s=be(t);e=s[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=ye(this))&&K.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":K.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+me(ye(n))+" ").indexOf(e)>-1)return!0;return!1}});var xe=/\r/g;k.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=m(t),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,k(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=k.map(i,(function(t){return null==t?"":t+""}))),(e=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=k.valHooks[i.type]||k.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(xe,""):null==n?"":n:void 0}}),k.extend({valHooks:{option:{get:function(t){var e=k.find.attr(t,"value");return null!=e?e:me(k.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],u=s?o+1:i.length;for(r=o<0?u:s?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(e=k(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=k.makeArray(e),s=i.length;s--;)((r=i[s]).selected=k.inArray(k.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],(function(){k.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=k.inArray(k(t).val(),e)>-1}},v.checkOn||(k.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),v.focusin="onfocusin"in r;var we=/^(?:focusinfocus|focusoutblur)$/,_e=function(t){t.stopPropagation()};k.extend(k.event,{trigger:function(t,e,n,i){var o,s,a,u,c,l,h,f,p=[n||b],g=d.call(t,"type")?t.type:t,v=d.call(t,"namespace")?t.namespace.split("."):[];if(s=f=a=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!we.test(g+k.event.triggered)&&(g.indexOf(".")>-1&&(v=g.split("."),g=v.shift(),v.sort()),c=g.indexOf(":")<0&&"on"+g,(t=t[k.expando]?t:new k.Event(g,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:k.makeArray(e,[t]),h=k.event.special[g]||{},i||!h.trigger||!1!==h.trigger.apply(n,e))){if(!i&&!h.noBubble&&!y(n)){for(u=h.delegateType||g,we.test(u+g)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(n.ownerDocument||b)&&p.push(a.defaultView||a.parentWindow||r)}for(o=0;(s=p[o++])&&!t.isPropagationStopped();)f=s,t.type=o>1?u:h.bindType||g,(l=(K.get(s,"events")||Object.create(null))[t.type]&&K.get(s,"handle"))&&l.apply(s,e),(l=c&&s[c])&&l.apply&&J(s)&&(t.result=l.apply(s,e),!1===t.result&&t.preventDefault());return t.type=g,i||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),e)||!J(n)||c&&m(n[g])&&!y(n)&&((a=n[c])&&(n[c]=null),k.event.triggered=g,t.isPropagationStopped()&&f.addEventListener(g,_e),n[g](),t.isPropagationStopped()&&f.removeEventListener(g,_e),k.event.triggered=void 0,a&&(n[c]=a)),t.result}},simulate:function(t,e,n){var r=k.extend(new k.Event,n,{type:t,isSimulated:!0});k.event.trigger(r,null,e)}}),k.fn.extend({trigger:function(t,e){return this.each((function(){k.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return k.event.trigger(t,e,n,!0)}}),v.focusin||k.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){k.event.simulate(e,t.target,k.event.fix(t))};k.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,i=K.access(r,e);i||r.addEventListener(t,n,!0),K.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=K.access(r,e)-1;i?K.access(r,e,i):(r.removeEventListener(t,n,!0),K.remove(r,e))}}}));var Ae=r.location,ke={guid:Date.now()},Se=/\?/;k.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new r.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||k.error("Invalid XML: "+(n?k.map(n.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Ee=/\[\]$/,Pe=/\r?\n/g,Ce=/^(?:submit|button|image|reset|file)$/i,Te=/^(?:input|select|textarea|keygen)/i;function Ne(t,e,n,r){var i;if(Array.isArray(e))k.each(e,(function(e,i){n||Ee.test(t)?r(t,i):Ne(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)}));else if(n||"object"!==_(e))r(t,e);else for(i in e)Ne(t+"["+i+"]",e[i],n,r)}k.param=function(t,e){var n,r=[],i=function(t,e){var n=m(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!k.isPlainObject(t))k.each(t,(function(){i(this.name,this.value)}));else for(n in t)Ne(n,t[n],e,i);return r.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=k.prop(this,"elements");return t?k.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!k(this).is(":disabled")&&Te.test(this.nodeName)&&!Ce.test(t)&&(this.checked||!vt.test(t))})).map((function(t,e){var n=k(this).val();return null==n?null:Array.isArray(n)?k.map(n,(function(t){return{name:e.name,value:t.replace(Pe,"\r\n")}})):{name:e.name,value:n.replace(Pe,"\r\n")}})).get()}});var Le=/%20/g,Me=/#.*$/,Oe=/([?&])_=[^&]*/,Ie=/^(.*?):[ \t]*([^\r\n]*)$/gm,Re=/^(?:GET|HEAD)$/,Be=/^\/\//,De={},je={},Ve="*/".concat("*"),Fe=b.createElement("a");function ze(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(j)||[];if(m(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Ue(t,e,n,r){var i={},o=t===je;function s(a){var u;return i[a]=!0,k.each(t[a]||[],(function(t,a){var c=a(e,n,r);return"string"!=typeof c||o||i[c]?o?!(u=c):void 0:(e.dataTypes.unshift(c),s(c),!1)})),u}return s(e.dataTypes[0])||!i["*"]&&s("*")}function Ge(t,e){var n,r,i=k.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&k.extend(!0,t,r),t}Fe.href=Ae.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ae.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ae.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ve,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ge(Ge(t,k.ajaxSettings),e):Ge(k.ajaxSettings,t)},ajaxPrefilter:ze(De),ajaxTransport:ze(je),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i,o,s,a,u,c,l,h,f,d=k.ajaxSetup({},e),p=d.context||d,g=d.context&&(p.nodeType||p.jquery)?k(p):k.event,v=k.Deferred(),m=k.Callbacks("once memory"),y=d.statusCode||{},x={},w={},_="canceled",A={readyState:0,getResponseHeader:function(t){var e;if(c){if(!s)for(s={};e=Ie.exec(o);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(t,e){return null==c&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,x[t]=e),this},overrideMimeType:function(t){return null==c&&(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)A.always(t[A.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||_;return n&&n.abort(e),S(0,e),this}};if(v.promise(A),d.url=((t||d.url||Ae.href)+"").replace(Be,Ae.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(j)||[""],null==d.crossDomain){u=b.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=Fe.protocol+"//"+Fe.host!=u.protocol+"//"+u.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=k.param(d.data,d.traditional)),Ue(De,d,e,A),c)return A;for(h in(l=k.event&&d.global)&&0==k.active++&&k.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Re.test(d.type),i=d.url.replace(Me,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Le,"+")):(f=d.url.slice(i.length),d.data&&(d.processData||"string"==typeof d.data)&&(i+=(Se.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(Oe,"$1"),f=(Se.test(i)?"&":"?")+"_="+ke.guid+++f),d.url=i+f),d.ifModified&&(k.lastModified[i]&&A.setRequestHeader("If-Modified-Since",k.lastModified[i]),k.etag[i]&&A.setRequestHeader("If-None-Match",k.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&A.setRequestHeader("Content-Type",d.contentType),A.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Ve+"; q=0.01":""):d.accepts["*"]),d.headers)A.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(!1===d.beforeSend.call(p,A,d)||c))return A.abort();if(_="abort",m.add(d.complete),A.done(d.success),A.fail(d.error),n=Ue(je,d,e,A)){if(A.readyState=1,l&&g.trigger("ajaxSend",[A,d]),c)return A;d.async&&d.timeout>0&&(a=r.setTimeout((function(){A.abort("timeout")}),d.timeout));try{c=!1,n.send(x,S)}catch(t){if(c)throw t;S(-1,t)}}else S(-1,"No Transport");function S(t,e,s,u){var h,f,b,x,w,_=e;c||(c=!0,a&&r.clearTimeout(a),n=void 0,o=u||"",A.readyState=t>0?4:0,h=t>=200&&t<300||304===t,s&&(x=function(t,e,n){for(var r,i,o,s,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==u[0]&&u.unshift(o),n[o]}(d,A,s)),!h&&k.inArray("script",d.dataTypes)>-1&&k.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),x=function(t,e,n,r){var i,o,s,a,u,c={},l=t.dataTypes.slice();if(l[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=l.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(s=c[u+" "+o]||c["* "+o]))for(i in c)if((a=i.split(" "))[1]===o&&(s=c[u+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[i]:!0!==c[i]&&(o=a[0],l.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}(d,x,A,h),h?(d.ifModified&&((w=A.getResponseHeader("Last-Modified"))&&(k.lastModified[i]=w),(w=A.getResponseHeader("etag"))&&(k.etag[i]=w)),204===t||"HEAD"===d.type?_="nocontent":304===t?_="notmodified":(_=x.state,f=x.data,h=!(b=x.error))):(b=_,!t&&_||(_="error",t<0&&(t=0))),A.status=t,A.statusText=(e||_)+"",h?v.resolveWith(p,[f,_,A]):v.rejectWith(p,[A,_,b]),A.statusCode(y),y=void 0,l&&g.trigger(h?"ajaxSuccess":"ajaxError",[A,d,h?f:b]),m.fireWith(p,[A,_]),l&&(g.trigger("ajaxComplete",[A,d]),--k.active||k.event.trigger("ajaxStop")))}return A},getJSON:function(t,e,n){return k.get(t,e,n,"json")},getScript:function(t,e){return k.get(t,void 0,e,"script")}}),k.each(["get","post"],(function(t,e){k[e]=function(t,n,r,i){return m(n)&&(i=i||r,r=n,n=void 0),k.ajax(k.extend({url:t,type:e,dataType:i,data:n,success:r},k.isPlainObject(t)&&t))}})),k.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),k._evalUrl=function(t,e,n){return k.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){k.globalEval(t,e,n)}})},k.fn.extend({wrapAll:function(t){var e;return this[0]&&(m(t)&&(t=t.call(this[0])),e=k(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return m(t)?this.each((function(e){k(this).wrapInner(t.call(this,e))})):this.each((function(){var e=k(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=m(t);return this.each((function(n){k(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){k(this).replaceWith(this.childNodes)})),this}}),k.expr.pseudos.hidden=function(t){return!k.expr.pseudos.visible(t)},k.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(t){}};var qe={0:200,1223:204},He=k.ajaxSettings.xhr();v.cors=!!He&&"withCredentials"in He,v.ajax=He=!!He,k.ajaxTransport((function(t){var e,n;if(v.cors||He&&!t.crossDomain)return{send:function(i,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(s,i[s]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(qe[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&r.setTimeout((function(){e&&n()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),k.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return k.globalEval(t),t}}}),k.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),k.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(r,i){e=k("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),b.head.appendChild(e[0])},abort:function(){n&&n()}}}));var We,$e=[],Xe=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=$e.pop()||k.expando+"_"+ke.guid++;return this[t]=!0,t}}),k.ajaxPrefilter("json jsonp",(function(t,e,n){var i,o,s,a=!1!==t.jsonp&&(Xe.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Xe.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=m(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Xe,"$1"+i):!1!==t.jsonp&&(t.url+=(Se.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||k.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=r[i],r[i]=function(){s=arguments},n.always((function(){void 0===o?k(r).removeProp(i):r[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,$e.push(i)),s&&m(o)&&o(s[0]),s=o=void 0})),"script"})),v.createHTMLDocument=((We=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===We.childNodes.length),k.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?((r=(e=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,e.head.appendChild(r)):e=b),o=!n&&[],(i=L.exec(t))?[e.createElement(i[1])]:(i=At([t],e,o),o&&o.length&&k(o).remove(),k.merge([],i.childNodes)));var r,i,o},k.fn.load=function(t,e,n){var r,i,o,s=this,a=t.indexOf(" ");return a>-1&&(r=me(t.slice(a)),t=t.slice(0,a)),m(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),s.length>0&&k.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done((function(t){o=arguments,s.html(r?k("<div>").append(k.parseHTML(t)).find(r):t)})).always(n&&function(t,e){s.each((function(){n.apply(this,o||[t.responseText,e,t])}))}),this},k.expr.pseudos.animated=function(t){return k.grep(k.timers,(function(e){return t===e.elem})).length},k.offset={setOffset:function(t,e,n){var r,i,o,s,a,u,c=k.css(t,"position"),l=k(t),h={};"static"===c&&(t.style.position="relative"),a=l.offset(),o=k.css(t,"top"),u=k.css(t,"left"),("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1?(s=(r=l.position()).top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),m(e)&&(e=e.call(t,n,k.extend({},a))),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+i),"using"in e?e.using.call(t,h):l.css(h)}},k.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){k.offset.setOffset(this,t,e)}));var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===k.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===k.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=k(t).offset()).top+=k.css(t,"borderTopWidth",!0),i.left+=k.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-k.css(r,"marginTop",!0),left:e.left-i.left-k.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===k.css(t,"position");)t=t.offsetParent;return t||st}))}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;k.fn[t]=function(r){return H(this,(function(t,r,i){var o;if(y(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i}),t,r,arguments.length)}})),k.each(["top","left"],(function(t,e){k.cssHooks[e]=Ht(v.pixelPosition,(function(t,n){if(n)return n=qt(t,e),Ft.test(n)?k(t).position()[e]+"px":n}))})),k.each({Height:"height",Width:"width"},(function(t,e){k.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){k.fn[r]=function(i,o){var s=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===o?"margin":"border");return H(this,(function(e,n,i){var o;return y(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?k.css(e,n,a):k.style(e,n,i,a)}),e,s?i:void 0,s)}}))})),k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){k.fn[e]=function(t){return this.on(e,t)}})),k.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){k.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var Ye=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;k.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),m(t))return r=a.call(arguments,2),i=function(){return t.apply(e||this,r.concat(a.call(arguments)))},i.guid=t.guid=t.guid||k.guid++,i},k.holdReady=function(t){t?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=N,k.isFunction=m,k.isWindow=y,k.camelCase=Y,k.type=_,k.now=Date.now,k.isNumeric=function(t){var e=k.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},k.trim=function(t){return null==t?"":(t+"").replace(Ye,"")},void 0===(n=function(){return k}.apply(e,[]))||(t.exports=n);var Je=r.jQuery,Ze=r.$;return k.noConflict=function(t){return r.$===k&&(r.$=Ze),t&&r.jQuery===k&&(r.jQuery=Je),k},void 0===i&&(r.jQuery=r.$=k),k}))},18552:(t,e,n)=>{var r=n(10852)(n(55639),"DataView");t.exports=r},1989:(t,e,n)=>{var r=n(51789),i=n(80401),o=n(57667),s=n(21327),a=n(81866);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,t.exports=u},38407:(t,e,n)=>{var r=n(27040),i=n(14125),o=n(82117),s=n(67518),a=n(54705);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,t.exports=u},57071:(t,e,n)=>{var r=n(10852)(n(55639),"Map");t.exports=r},83369:(t,e,n)=>{var r=n(24785),i=n(11285),o=n(96e3),s=n(49916),a=n(95265);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,t.exports=u},53818:(t,e,n)=>{var r=n(10852)(n(55639),"Promise");t.exports=r},58525:(t,e,n)=>{var r=n(10852)(n(55639),"Set");t.exports=r},88668:(t,e,n)=>{var r=n(83369),i=n(90619),o=n(72385);function s(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}s.prototype.add=s.prototype.push=i,s.prototype.has=o,t.exports=s},46384:(t,e,n)=>{var r=n(38407),i=n(37465),o=n(63779),s=n(67599),a=n(44758),u=n(34309);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=a,c.prototype.set=u,t.exports=c},62705:(t,e,n)=>{var r=n(55639).Symbol;t.exports=r},11149:(t,e,n)=>{var r=n(55639).Uint8Array;t.exports=r},70577:(t,e,n)=>{var r=n(10852)(n(55639),"WeakMap");t.exports=r},96874:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},77412:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},34963:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}},47443:(t,e,n)=>{var r=n(42118);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},1196:t=>{t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},14636:(t,e,n)=>{var r=n(22545),i=n(35694),o=n(1469),s=n(44144),a=n(65776),u=n(36719),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),l=!n&&i(t),h=!n&&!l&&s(t),f=!n&&!l&&!h&&u(t),d=n||l||h||f,p=d?r(t.length,String):[],g=p.length;for(var v in t)!e&&!c.call(t,v)||d&&("length"==v||h&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||a(v,g))||p.push(v);return p}},29932:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},62488:t=>{t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},62663:t=>{t.exports=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}},82908:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},48983:(t,e,n)=>{var r=n(40371)("length");t.exports=r},86556:(t,e,n)=>{var r=n(89465),i=n(77813);t.exports=function(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},34865:(t,e,n)=>{var r=n(89465),i=n(77813),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var s=t[e];o.call(t,e)&&i(s,n)&&(void 0!==n||e in t)||r(t,e,n)}},18470:(t,e,n)=>{var r=n(77813);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},44037:(t,e,n)=>{var r=n(98363),i=n(3674);t.exports=function(t,e){return t&&r(e,i(e),t)}},63886:(t,e,n)=>{var r=n(98363),i=n(81704);t.exports=function(t,e){return t&&r(e,i(e),t)}},89465:(t,e,n)=>{var r=n(38777);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},85990:(t,e,n)=>{var r=n(46384),i=n(77412),o=n(34865),s=n(44037),a=n(63886),u=n(64626),c=n(278),l=n(18805),h=n(1911),f=n(58234),d=n(46904),p=n(64160),g=n(43824),v=n(29148),m=n(38517),y=n(1469),b=n(44144),x=n(56688),w=n(13218),_=n(72928),A=n(3674),k=n(81704),S="[object Arguments]",E="[object Function]",P="[object Object]",C={};C[S]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object DataView]"]=C["[object Boolean]"]=C["[object Date]"]=C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Map]"]=C["[object Number]"]=C[P]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object Symbol]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Error]"]=C[E]=C["[object WeakMap]"]=!1,t.exports=function t(e,n,T,N,L,M){var O,I=1&n,R=2&n,B=4&n;if(T&&(O=L?T(e,N,L,M):T(e)),void 0!==O)return O;if(!w(e))return e;var D=y(e);if(D){if(O=g(e),!I)return c(e,O)}else{var j=p(e),V=j==E||"[object GeneratorFunction]"==j;if(b(e))return u(e,I);if(j==P||j==S||V&&!L){if(O=R||V?{}:m(e),!I)return R?h(e,a(O,e)):l(e,s(O,e))}else{if(!C[j])return L?e:{};O=v(e,j,I)}}M||(M=new r);var F=M.get(e);if(F)return F;M.set(e,O),_(e)?e.forEach((function(r){O.add(t(r,n,T,r,e,M))})):x(e)&&e.forEach((function(r,i){O.set(i,t(r,n,T,i,e,M))}));var z=D?void 0:(B?R?d:f:R?k:A)(e);return i(z||e,(function(r,i){z&&(r=e[i=r]),o(O,i,t(r,n,T,i,e,M))})),O}},3118:(t,e,n)=>{var r=n(13218),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},89881:(t,e,n)=>{var r=n(47816),i=n(99291)(r);t.exports=i},56029:(t,e,n)=>{var r=n(33448);t.exports=function(t,e,n){for(var i=-1,o=t.length;++i<o;){var s=t[i],a=e(s);if(null!=a&&(void 0===u?a==a&&!r(a):n(a,u)))var u=a,c=s}return c}},80760:(t,e,n)=>{var r=n(89881);t.exports=function(t,e){var n=[];return r(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}},41848:t=>{t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},21078:(t,e,n)=>{var r=n(62488),i=n(37285);t.exports=function t(e,n,o,s,a){var u=-1,c=e.length;for(o||(o=i),a||(a=[]);++u<c;){var l=e[u];n>0&&o(l)?n>1?t(l,n-1,o,s,a):r(a,l):s||(a[a.length]=l)}return a}},28483:(t,e,n)=>{var r=n(25063)();t.exports=r},47816:(t,e,n)=>{var r=n(28483),i=n(3674);t.exports=function(t,e){return t&&r(t,e,i)}},97786:(t,e,n)=>{var r=n(71811),i=n(40327);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},68866:(t,e,n)=>{var r=n(62488),i=n(1469);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},44239:(t,e,n)=>{var r=n(62705),i=n(89607),o=n(2333),s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?i(t):o(t)}},53325:t=>{t.exports=function(t,e){return t>e}},78565:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t,n){return null!=t&&e.call(t,n)}},13:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},42118:(t,e,n)=>{var r=n(41848),i=n(62722),o=n(42351);t.exports=function(t,e,n){return e==e?o(t,e,n):r(t,i,n)}},9454:(t,e,n)=>{var r=n(44239),i=n(37005);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},90939:(t,e,n)=>{var r=n(2492),i=n(37005);t.exports=function t(e,n,o,s,a){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,s,t,a))}},2492:(t,e,n)=>{var r=n(46384),i=n(67114),o=n(18351),s=n(16096),a=n(64160),u=n(1469),c=n(44144),l=n(36719),h="[object Arguments]",f="[object Array]",d="[object Object]",p=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,g,v,m){var y=u(t),b=u(e),x=y?f:a(t),w=b?f:a(e),_=(x=x==h?d:x)==d,A=(w=w==h?d:w)==d,k=x==w;if(k&&c(t)){if(!c(e))return!1;y=!0,_=!1}if(k&&!_)return m||(m=new r),y||l(t)?i(t,e,n,g,v,m):o(t,e,x,n,g,v,m);if(!(1&n)){var S=_&&p.call(t,"__wrapped__"),E=A&&p.call(e,"__wrapped__");if(S||E){var P=S?t.value():t,C=E?e.value():e;return m||(m=new r),v(P,C,n,g,m)}}return!!k&&(m||(m=new r),s(t,e,n,g,v,m))}},25588:(t,e,n)=>{var r=n(64160),i=n(37005);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},2958:(t,e,n)=>{var r=n(46384),i=n(90939);t.exports=function(t,e,n,o){var s=n.length,a=s,u=!o;if(null==t)return!a;for(t=Object(t);s--;){var c=n[s];if(u&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++s<a;){var l=(c=n[s])[0],h=t[l],f=c[1];if(u&&c[2]){if(void 0===h&&!(l in t))return!1}else{var d=new r;if(o)var p=o(h,f,l,t,e,d);if(!(void 0===p?i(f,h,3,o,d):p))return!1}}return!0}},62722:t=>{t.exports=function(t){return t!=t}},28458:(t,e,n)=>{var r=n(23560),i=n(15346),o=n(13218),s=n(80346),a=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,h=c.hasOwnProperty,f=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?f:a).test(s(t))}},29221:(t,e,n)=>{var r=n(64160),i=n(37005);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},38749:(t,e,n)=>{var r=n(44239),i=n(41780),o=n(37005),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!s[r(t)]}},67206:(t,e,n)=>{var r=n(91573),i=n(16432),o=n(6557),s=n(1469),a=n(39601);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?s(t)?i(t[0],t[1]):r(t):a(t)}},280:(t,e,n)=>{var r=n(25726),i=n(86916),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},10313:(t,e,n)=>{var r=n(13218),i=n(25726),o=n(33498),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}},70433:t=>{t.exports=function(t,e){return t<e}},69199:(t,e,n)=>{var r=n(89881),i=n(98612);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}},91573:(t,e,n)=>{var r=n(2958),i=n(1499),o=n(42634);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},16432:(t,e,n)=>{var r=n(90939),i=n(27361),o=n(79095),s=n(15403),a=n(89162),u=n(42634),c=n(40327);t.exports=function(t,e){return s(t)&&a(e)?u(c(t),e):function(n){var s=i(n,t);return void 0===s&&s===e?o(n,t):r(e,s,3)}}},42980:(t,e,n)=>{var r=n(46384),i=n(86556),o=n(28483),s=n(59783),a=n(13218),u=n(81704),c=n(36390);t.exports=function t(e,n,l,h,f){e!==n&&o(n,(function(o,u){if(f||(f=new r),a(o))s(e,n,u,l,t,h,f);else{var d=h?h(c(e,u),o,u+"",e,n,f):void 0;void 0===d&&(d=o),i(e,u,d)}}),u)}},59783:(t,e,n)=>{var r=n(86556),i=n(64626),o=n(77133),s=n(278),a=n(38517),u=n(35694),c=n(1469),l=n(29246),h=n(44144),f=n(23560),d=n(13218),p=n(68630),g=n(36719),v=n(36390),m=n(59881);t.exports=function(t,e,n,y,b,x,w){var _=v(t,n),A=v(e,n),k=w.get(A);if(k)r(t,n,k);else{var S=x?x(_,A,n+"",t,e,w):void 0,E=void 0===S;if(E){var P=c(A),C=!P&&h(A),T=!P&&!C&&g(A);S=A,P||C||T?c(_)?S=_:l(_)?S=s(_):C?(E=!1,S=i(A,!0)):T?(E=!1,S=o(A,!0)):S=[]:p(A)||u(A)?(S=_,u(_)?S=m(_):d(_)&&!f(_)||(S=a(A))):E=!1}E&&(w.set(A,S),b(S,A,y,x,w),w.delete(A)),r(t,n,S)}}},82689:(t,e,n)=>{var r=n(29932),i=n(97786),o=n(67206),s=n(69199),a=n(71131),u=n(7518),c=n(85022),l=n(6557),h=n(1469);t.exports=function(t,e,n){e=e.length?r(e,(function(t){return h(t)?function(e){return i(e,1===t.length?t[0]:t)}:t})):[l];var f=-1;e=r(e,u(o));var d=s(t,(function(t,n,i){return{criteria:r(e,(function(e){return e(t)})),index:++f,value:t}}));return a(d,(function(t,e){return c(t,e,n)}))}},25970:(t,e,n)=>{var r=n(63012),i=n(79095);t.exports=function(t,e){return r(t,e,(function(e,n){return i(t,n)}))}},63012:(t,e,n)=>{var r=n(97786),i=n(10611),o=n(71811);t.exports=function(t,e,n){for(var s=-1,a=e.length,u={};++s<a;){var c=e[s],l=r(t,c);n(l,c)&&i(u,o(c,t),l)}return u}},40371:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},79152:(t,e,n)=>{var r=n(97786);t.exports=function(t){return function(e){return r(e,t)}}},40098:t=>{var e=Math.ceil,n=Math.max;t.exports=function(t,r,i,o){for(var s=-1,a=n(e((r-t)/(i||1)),0),u=Array(a);a--;)u[o?a:++s]=t,t+=i;return u}},10107:t=>{t.exports=function(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}},5976:(t,e,n)=>{var r=n(6557),i=n(45357),o=n(30061);t.exports=function(t,e){return o(i(t,e,r),t+"")}},10611:(t,e,n)=>{var r=n(34865),i=n(71811),o=n(65776),s=n(13218),a=n(40327);t.exports=function(t,e,n,u){if(!s(t))return t;for(var c=-1,l=(e=i(e,t)).length,h=l-1,f=t;null!=f&&++c<l;){var d=a(e[c]),p=n;if("__proto__"===d||"constructor"===d||"prototype"===d)return t;if(c!=h){var g=f[d];void 0===(p=u?u(g,d,f):void 0)&&(p=s(g)?g:o(e[c+1])?[]:{})}r(f,d,p),f=f[d]}return t}},56560:(t,e,n)=>{var r=n(75703),i=n(38777),o=n(6557),s=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=s},71131:t=>{t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},22545:t=>{t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},80531:(t,e,n)=>{var r=n(62705),i=n(29932),o=n(1469),s=n(33448),a=r?r.prototype:void 0,u=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(s(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},27561:(t,e,n)=>{var r=n(67990),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},7518:t=>{t.exports=function(t){return function(e){return t(e)}}},45652:(t,e,n)=>{var r=n(88668),i=n(47443),o=n(1196),s=n(74757),a=n(23593),u=n(21814);t.exports=function(t,e,n){var c=-1,l=i,h=t.length,f=!0,d=[],p=d;if(n)f=!1,l=o;else if(h>=200){var g=e?null:a(t);if(g)return u(g);f=!1,l=s,p=new r}else p=e?[]:d;t:for(;++c<h;){var v=t[c],m=e?e(v):v;if(v=n||0!==v?v:0,f&&m==m){for(var y=p.length;y--;)if(p[y]===m)continue t;e&&p.push(m),d.push(v)}else l(p,m,n)||(p!==d&&p.push(m),d.push(v))}return d}},47415:(t,e,n)=>{var r=n(29932);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},1757:t=>{t.exports=function(t,e,n){for(var r=-1,i=t.length,o=e.length,s={};++r<i;){var a=r<o?e[r]:void 0;n(s,t[r],a)}return s}},74757:t=>{t.exports=function(t,e){return t.has(e)}},54290:(t,e,n)=>{var r=n(6557);t.exports=function(t){return"function"==typeof t?t:r}},71811:(t,e,n)=>{var r=n(1469),i=n(15403),o=n(55514),s=n(79833);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(s(t))}},74318:(t,e,n)=>{var r=n(11149);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},64626:(t,e,n)=>{t=n.nmd(t);var r=n(55639),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i?r.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=a?a(n):new t.constructor(n);return t.copy(r),r}},57157:(t,e,n)=>{var r=n(74318);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},93147:t=>{var e=/\w*$/;t.exports=function(t){var n=new t.constructor(t.source,e.exec(t));return n.lastIndex=t.lastIndex,n}},40419:(t,e,n)=>{var r=n(62705),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},77133:(t,e,n)=>{var r=n(74318);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},26393:(t,e,n)=>{var r=n(33448);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,o=t==t,s=r(t),a=void 0!==e,u=null===e,c=e==e,l=r(e);if(!u&&!l&&!s&&t>e||s&&a&&c&&!u&&!l||i&&a&&c||!n&&c||!o)return 1;if(!i&&!s&&!l&&t<e||l&&n&&o&&!i&&!s||u&&n&&o||!a&&o||!c)return-1}return 0}},85022:(t,e,n)=>{var r=n(26393);t.exports=function(t,e,n){for(var i=-1,o=t.criteria,s=e.criteria,a=o.length,u=n.length;++i<a;){var c=r(o[i],s[i]);if(c)return i>=u?c:c*("desc"==n[i]?-1:1)}return t.index-e.index}},278:t=>{t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},98363:(t,e,n)=>{var r=n(34865),i=n(89465);t.exports=function(t,e,n,o){var s=!n;n||(n={});for(var a=-1,u=e.length;++a<u;){var c=e[a],l=o?o(n[c],t[c],c,n,t):void 0;void 0===l&&(l=t[c]),s?i(n,c,l):r(n,c,l)}return n}},18805:(t,e,n)=>{var r=n(98363),i=n(99551);t.exports=function(t,e){return r(t,i(t),e)}},1911:(t,e,n)=>{var r=n(98363),i=n(51442);t.exports=function(t,e){return r(t,i(t),e)}},14429:(t,e,n)=>{var r=n(55639)["__core-js_shared__"];t.exports=r},21463:(t,e,n)=>{var r=n(5976),i=n(16612);t.exports=function(t){return r((function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):void 0,a&&i(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,s)}return e}))}},99291:(t,e,n)=>{var r=n(98612);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,s=e?o:-1,a=Object(n);(e?s--:++s<o)&&!1!==i(a[s],s,a););return n}}},25063:t=>{t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}},67740:(t,e,n)=>{var r=n(67206),i=n(98612),o=n(3674);t.exports=function(t){return function(e,n,s){var a=Object(e);if(!i(e)){var u=r(n,3);e=o(e),n=function(t){return u(a[t],t,a)}}var c=t(e,n,s);return c>-1?a[u?e[c]:c]:void 0}}},47445:(t,e,n)=>{var r=n(40098),i=n(16612),o=n(18601);t.exports=function(t){return function(e,n,s){return s&&"number"!=typeof s&&i(e,n,s)&&(n=s=void 0),e=o(e),void 0===n?(n=e,e=0):n=o(n),s=void 0===s?e<n?1:-1:o(s),r(e,n,s,t)}}},23593:(t,e,n)=>{var r=n(58525),i=n(50308),o=n(21814),s=r&&1/o(new r([,-0]))[1]==1/0?function(t){return new r(t)}:i;t.exports=s},38777:(t,e,n)=>{var r=n(10852),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},67114:(t,e,n)=>{var r=n(88668),i=n(82908),o=n(74757);t.exports=function(t,e,n,s,a,u){var c=1&n,l=t.length,h=e.length;if(l!=h&&!(c&&h>l))return!1;var f=u.get(t),d=u.get(e);if(f&&d)return f==e&&d==t;var p=-1,g=!0,v=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++p<l;){var m=t[p],y=e[p];if(s)var b=c?s(y,m,p,e,t,u):s(m,y,p,t,e,u);if(void 0!==b){if(b)continue;g=!1;break}if(v){if(!i(e,(function(t,e){if(!o(v,e)&&(m===t||a(m,t,n,s,u)))return v.push(e)}))){g=!1;break}}else if(m!==y&&!a(m,y,n,s,u)){g=!1;break}}return u.delete(t),u.delete(e),g}},18351:(t,e,n)=>{var r=n(62705),i=n(11149),o=n(77813),s=n(67114),a=n(68776),u=n(21814),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;t.exports=function(t,e,n,r,c,h,f){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var d=a;case"[object Set]":var p=1&r;if(d||(d=u),t.size!=e.size&&!p)return!1;var g=f.get(t);if(g)return g==e;r|=2,f.set(t,e);var v=s(d(t),d(e),r,c,h,f);return f.delete(t),v;case"[object Symbol]":if(l)return l.call(t)==l.call(e)}return!1}},16096:(t,e,n)=>{var r=n(58234),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,s,a){var u=1&n,c=r(t),l=c.length;if(l!=r(e).length&&!u)return!1;for(var h=l;h--;){var f=c[h];if(!(u?f in e:i.call(e,f)))return!1}var d=a.get(t),p=a.get(e);if(d&&p)return d==e&&p==t;var g=!0;a.set(t,e),a.set(e,t);for(var v=u;++h<l;){var m=t[f=c[h]],y=e[f];if(o)var b=u?o(y,m,f,e,t,a):o(m,y,f,t,e,a);if(!(void 0===b?m===y||s(m,y,n,o,a):b)){g=!1;break}v||(v="constructor"==f)}if(g&&!v){var x=t.constructor,w=e.constructor;x==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(g=!1)}return a.delete(t),a.delete(e),g}},99021:(t,e,n)=>{var r=n(85564),i=n(45357),o=n(30061);t.exports=function(t){return o(i(t,void 0,r),t+"")}},31957:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},58234:(t,e,n)=>{var r=n(68866),i=n(99551),o=n(3674);t.exports=function(t){return r(t,o,i)}},46904:(t,e,n)=>{var r=n(68866),i=n(51442),o=n(81704);t.exports=function(t){return r(t,o,i)}},45050:(t,e,n)=>{var r=n(37019);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},1499:(t,e,n)=>{var r=n(89162),i=n(3674);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],s=t[o];e[n]=[o,s,r(s)]}return e}},10852:(t,e,n)=>{var r=n(28458),i=n(47801);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},85924:(t,e,n)=>{var r=n(5569)(Object.getPrototypeOf,Object);t.exports=r},89607:(t,e,n)=>{var r=n(62705),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[a]=n:delete t[a]),i}},99551:(t,e,n)=>{var r=n(34963),i=n(70479),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(t){return null==t?[]:(t=Object(t),r(s(t),(function(e){return o.call(t,e)})))}:i;t.exports=a},51442:(t,e,n)=>{var r=n(62488),i=n(85924),o=n(99551),s=n(70479),a=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:s;t.exports=a},64160:(t,e,n)=>{var r=n(18552),i=n(57071),o=n(53818),s=n(58525),a=n(70577),u=n(44239),c=n(80346),l="[object Map]",h="[object Promise]",f="[object Set]",d="[object WeakMap]",p="[object DataView]",g=c(r),v=c(i),m=c(o),y=c(s),b=c(a),x=u;(r&&x(new r(new ArrayBuffer(1)))!=p||i&&x(new i)!=l||o&&x(o.resolve())!=h||s&&x(new s)!=f||a&&x(new a)!=d)&&(x=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case g:return p;case v:return l;case m:return h;case y:return f;case b:return d}return e}),t.exports=x},47801:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},222:(t,e,n)=>{var r=n(71811),i=n(35694),o=n(1469),s=n(65776),a=n(41780),u=n(40327);t.exports=function(t,e,n){for(var c=-1,l=(e=r(e,t)).length,h=!1;++c<l;){var f=u(e[c]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++c!=l?h:!!(l=null==t?0:t.length)&&a(l)&&s(f,l)&&(o(t)||i(t))}},62689:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},51789:(t,e,n)=>{var r=n(94536);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},80401:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},57667:(t,e,n)=>{var r=n(94536),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},21327:(t,e,n)=>{var r=n(94536),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},81866:(t,e,n)=>{var r=n(94536);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},43824:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t){var n=t.length,r=new t.constructor(n);return n&&"string"==typeof t[0]&&e.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},29148:(t,e,n)=>{var r=n(74318),i=n(57157),o=n(93147),s=n(40419),a=n(77133);t.exports=function(t,e,n){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(t,n);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return o(t);case"[object Symbol]":return s(t)}}},38517:(t,e,n)=>{var r=n(3118),i=n(85924),o=n(25726);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},37285:(t,e,n)=>{var r=n(62705),i=n(35694),o=n(1469),s=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(s&&t&&t[s])}},65776:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},16612:(t,e,n)=>{var r=n(77813),i=n(98612),o=n(65776),s=n(13218);t.exports=function(t,e,n){if(!s(n))return!1;var a=typeof e;return!!("number"==a?i(n)&&o(e,n.length):"string"==a&&e in n)&&r(n[e],t)}},15403:(t,e,n)=>{var r=n(1469),i=n(33448),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||s.test(t)||!o.test(t)||null!=e&&t in Object(e)}},37019:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},15346:(t,e,n)=>{var r,i=n(14429),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},25726:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},89162:(t,e,n)=>{var r=n(13218);t.exports=function(t){return t==t&&!r(t)}},27040:t=>{t.exports=function(){this.__data__=[],this.size=0}},14125:(t,e,n)=>{var r=n(18470),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},82117:(t,e,n)=>{var r=n(18470);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},67518:(t,e,n)=>{var r=n(18470);t.exports=function(t){return r(this.__data__,t)>-1}},54705:(t,e,n)=>{var r=n(18470);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},24785:(t,e,n)=>{var r=n(1989),i=n(38407),o=n(57071);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},11285:(t,e,n)=>{var r=n(45050);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},96e3:(t,e,n)=>{var r=n(45050);t.exports=function(t){return r(this,t).get(t)}},49916:(t,e,n)=>{var r=n(45050);t.exports=function(t){return r(this,t).has(t)}},95265:(t,e,n)=>{var r=n(45050);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},68776:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},42634:t=>{t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},24523:(t,e,n)=>{var r=n(88306);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},94536:(t,e,n)=>{var r=n(10852)(Object,"create");t.exports=r},86916:(t,e,n)=>{var r=n(5569)(Object.keys,Object);t.exports=r},33498:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},31167:(t,e,n)=>{t=n.nmd(t);var r=n(31957),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i&&r.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a},2333:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5569:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},45357:(t,e,n)=>{var r=n(96874),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,s=-1,a=i(o.length-e,0),u=Array(a);++s<a;)u[s]=o[e+s];s=-1;for(var c=Array(e+1);++s<e;)c[s]=o[s];return c[e]=n(u),r(t,this,c)}}},55639:(t,e,n)=>{var r=n(31957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},36390:t=>{t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},90619:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},72385:t=>{t.exports=function(t){return this.__data__.has(t)}},21814:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},30061:(t,e,n)=>{var r=n(56560),i=n(21275)(r);t.exports=i},21275:t=>{var e=Date.now;t.exports=function(t){var n=0,r=0;return function(){var i=e(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},37465:(t,e,n)=>{var r=n(38407);t.exports=function(){this.__data__=new r,this.size=0}},63779:t=>{t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},67599:t=>{t.exports=function(t){return this.__data__.get(t)}},44758:t=>{t.exports=function(t){return this.__data__.has(t)}},34309:(t,e,n)=>{var r=n(38407),i=n(57071),o=n(83369);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(t,e),this.size=n.size,this}},42351:t=>{t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},88016:(t,e,n)=>{var r=n(48983),i=n(62689),o=n(21903);t.exports=function(t){return i(t)?o(t):r(t)}},55514:(t,e,n)=>{var r=n(24523),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=s},40327:(t,e,n)=>{var r=n(33448);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},80346:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},67990:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},21903:t=>{var e="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",r="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+e+"|"+n+")?",a="[\\ufe0e\\ufe0f]?",u=a+s+"(?:\\u200d(?:"+[r,i,o].join("|")+")"+a+s+")*",c="(?:"+[r+e+"?",e,i,o,"[\\ud800-\\udfff]"].join("|")+")",l=RegExp(n+"(?="+n+")|"+c+u,"g");t.exports=function(t){for(var e=l.lastIndex=0;l.test(t);)++e;return e}},66678:(t,e,n)=>{var r=n(85990);t.exports=function(t){return r(t,4)}},50361:(t,e,n)=>{var r=n(85990);t.exports=function(t){return r(t,5)}},75703:t=>{t.exports=function(t){return function(){return t}}},91747:(t,e,n)=>{var r=n(5976),i=n(77813),o=n(16612),s=n(81704),a=Object.prototype,u=a.hasOwnProperty,c=r((function(t,e){t=Object(t);var n=-1,r=e.length,c=r>2?e[2]:void 0;for(c&&o(e[0],e[1],c)&&(r=1);++n<r;)for(var l=e[n],h=s(l),f=-1,d=h.length;++f<d;){var p=h[f],g=t[p];(void 0===g||i(g,a[p])&&!u.call(t,p))&&(t[p]=l[p])}return t}));t.exports=c},66073:(t,e,n)=>{t.exports=n(84486)},77813:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},63105:(t,e,n)=>{var r=n(34963),i=n(80760),o=n(67206),s=n(1469);t.exports=function(t,e){return(s(t)?r:i)(t,o(e,3))}},13311:(t,e,n)=>{var r=n(67740)(n(30998));t.exports=r},30998:(t,e,n)=>{var r=n(41848),i=n(67206),o=n(40554),s=Math.max;t.exports=function(t,e,n){var a=null==t?0:t.length;if(!a)return-1;var u=null==n?0:o(n);return u<0&&(u=s(a+u,0)),r(t,i(e,3),u)}},85564:(t,e,n)=>{var r=n(21078);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},84486:(t,e,n)=>{var r=n(77412),i=n(89881),o=n(54290),s=n(1469);t.exports=function(t,e){return(s(t)?r:i)(t,o(e))}},62620:(t,e,n)=>{var r=n(28483),i=n(54290),o=n(81704);t.exports=function(t,e){return null==t?t:r(t,i(e),o)}},27361:(t,e,n)=>{var r=n(97786);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},18721:(t,e,n)=>{var r=n(78565),i=n(222);t.exports=function(t,e){return null!=t&&i(t,e,r)}},79095:(t,e,n)=>{var r=n(13),i=n(222);t.exports=function(t,e){return null!=t&&i(t,e,r)}},6557:t=>{t.exports=function(t){return t}},35694:(t,e,n)=>{var r=n(9454),i=n(37005),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=u},1469:t=>{var e=Array.isArray;t.exports=e},98612:(t,e,n)=>{var r=n(23560),i=n(41780);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},29246:(t,e,n)=>{var r=n(98612),i=n(37005);t.exports=function(t){return i(t)&&r(t)}},44144:(t,e,n)=>{t=n.nmd(t);var r=n(55639),i=n(95062),o=e&&!e.nodeType&&e,s=o&&t&&!t.nodeType&&t,a=s&&s.exports===o?r.Buffer:void 0,u=(a?a.isBuffer:void 0)||i;t.exports=u},41609:(t,e,n)=>{var r=n(280),i=n(64160),o=n(35694),s=n(1469),a=n(98612),u=n(44144),c=n(25726),l=n(36719),h=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(a(t)&&(s(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||l(t)||o(t)))return!t.length;var e=i(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!r(t).length;for(var n in t)if(h.call(t,n))return!1;return!0}},23560:(t,e,n)=>{var r=n(44239),i=n(13218);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},41780:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},56688:(t,e,n)=>{var r=n(25588),i=n(7518),o=n(31167),s=o&&o.isMap,a=s?i(s):r;t.exports=a},13218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},37005:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},68630:(t,e,n)=>{var r=n(44239),i=n(85924),o=n(37005),s=Function.prototype,a=Object.prototype,u=s.toString,c=a.hasOwnProperty,l=u.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==l}},72928:(t,e,n)=>{var r=n(29221),i=n(7518),o=n(31167),s=o&&o.isSet,a=s?i(s):r;t.exports=a},47037:(t,e,n)=>{var r=n(44239),i=n(1469),o=n(37005);t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&"[object String]"==r(t)}},33448:(t,e,n)=>{var r=n(44239),i=n(37005);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},36719:(t,e,n)=>{var r=n(38749),i=n(7518),o=n(31167),s=o&&o.isTypedArray,a=s?i(s):r;t.exports=a},52353:t=>{t.exports=function(t){return void 0===t}},3674:(t,e,n)=>{var r=n(14636),i=n(280),o=n(98612);t.exports=function(t){return o(t)?r(t):i(t)}},81704:(t,e,n)=>{var r=n(14636),i=n(10313),o=n(98612);t.exports=function(t){return o(t)?r(t,!0):i(t)}},10928:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},96486:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",u=32,c=128,l=1/0,h=9007199254740991,f=NaN,d=4294967295,p=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],g="[object Arguments]",v="[object Array]",m="[object Boolean]",y="[object Date]",b="[object Error]",x="[object Function]",w="[object GeneratorFunction]",_="[object Map]",A="[object Number]",k="[object Object]",S="[object Promise]",E="[object RegExp]",P="[object Set]",C="[object String]",T="[object Symbol]",N="[object WeakMap]",L="[object ArrayBuffer]",M="[object DataView]",O="[object Float32Array]",I="[object Float64Array]",R="[object Int8Array]",B="[object Int16Array]",D="[object Int32Array]",j="[object Uint8Array]",V="[object Uint8ClampedArray]",F="[object Uint16Array]",z="[object Uint32Array]",U=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,W=/[&<>"']/g,$=RegExp(H.source),X=RegExp(W.source),Y=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/[()=,{}\[\]\/\s]/,lt=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,dt=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,vt=/^0o[0-7]+$/i,mt=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,xt=/['\n\r\u2028\u2029\\]/g,wt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",_t="a-z\\xdf-\\xf6\\xf8-\\xff",At="A-Z\\xc0-\\xd6\\xd8-\\xde",kt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",St="["+kt+"]",Et="["+wt+"]",Pt="\\d+",Ct="["+_t+"]",Tt="[^\\ud800-\\udfff"+kt+Pt+"\\u2700-\\u27bf"+_t+At+"]",Nt="\\ud83c[\\udffb-\\udfff]",Lt="[^\\ud800-\\udfff]",Mt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ot="[\\ud800-\\udbff][\\udc00-\\udfff]",It="["+At+"]",Rt="(?:"+Ct+"|"+Tt+")",Bt="(?:"+It+"|"+Tt+")",Dt="(?:['](?:d|ll|m|re|s|t|ve))?",jt="(?:['](?:D|LL|M|RE|S|T|VE))?",Vt="(?:"+Et+"|"+Nt+")?",Ft="[\\ufe0e\\ufe0f]?",zt=Ft+Vt+"(?:\\u200d(?:"+[Lt,Mt,Ot].join("|")+")"+Ft+Vt+")*",Ut="(?:"+["[\\u2700-\\u27bf]",Mt,Ot].join("|")+")"+zt,Gt="(?:"+[Lt+Et+"?",Et,Mt,Ot,"[\\ud800-\\udfff]"].join("|")+")",qt=RegExp("[']","g"),Ht=RegExp(Et,"g"),Wt=RegExp(Nt+"(?="+Nt+")|"+Gt+zt,"g"),$t=RegExp([It+"?"+Ct+"+"+Dt+"(?="+[St,It,"$"].join("|")+")",Bt+"+"+jt+"(?="+[St,It+Rt,"$"].join("|")+")",It+"?"+Rt+"+"+Dt,It+"+"+jt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pt,Ut].join("|"),"g"),Xt=RegExp("[\\u200d\\ud800-\\udfff"+wt+"\\ufe0e\\ufe0f]"),Yt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Jt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Zt=-1,Kt={};Kt[O]=Kt[I]=Kt[R]=Kt[B]=Kt[D]=Kt[j]=Kt[V]=Kt[F]=Kt[z]=!0,Kt[g]=Kt[v]=Kt[L]=Kt[m]=Kt[M]=Kt[y]=Kt[b]=Kt[x]=Kt[_]=Kt[A]=Kt[k]=Kt[E]=Kt[P]=Kt[C]=Kt[N]=!1;var Qt={};Qt[g]=Qt[v]=Qt[L]=Qt[M]=Qt[m]=Qt[y]=Qt[O]=Qt[I]=Qt[R]=Qt[B]=Qt[D]=Qt[_]=Qt[A]=Qt[k]=Qt[E]=Qt[P]=Qt[C]=Qt[T]=Qt[j]=Qt[V]=Qt[F]=Qt[z]=!0,Qt[b]=Qt[x]=Qt[N]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ne=parseInt,re="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ie="object"==typeof self&&self&&self.Object===Object&&self,oe=re||ie||Function("return this")(),se=e&&!e.nodeType&&e,ae=se&&t&&!t.nodeType&&t,ue=ae&&ae.exports===se,ce=ue&&re.process,le=function(){try{return ae&&ae.require&&ae.require("util").types||ce&&ce.binding&&ce.binding("util")}catch(t){}}(),he=le&&le.isArrayBuffer,fe=le&&le.isDate,de=le&&le.isMap,pe=le&&le.isRegExp,ge=le&&le.isSet,ve=le&&le.isTypedArray;function me(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ye(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function be(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function xe(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function we(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function _e(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Ae(t,e){return!(null==t||!t.length)&&Oe(t,e,0)>-1}function ke(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Se(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ee(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Pe(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Ce(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Te(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Ne=De("length");function Le(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Me(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Oe(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Me(t,Re,n)}function Ie(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Re(t){return t!=t}function Be(t,e){var n=null==t?0:t.length;return n?Fe(t,e)/n:f}function De(t){return function(e){return null==e?i:e[t]}}function je(t){return function(e){return null==t?i:t[e]}}function Ve(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Fe(t,e){for(var n,r=-1,o=t.length;++r<o;){var s=e(t[r]);s!==i&&(n=n===i?s:n+s)}return n}function ze(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ue(t){return t?t.slice(0,an(t)+1).replace(rt,""):t}function Ge(t){return function(e){return t(e)}}function qe(t,e){return Se(e,(function(e){return t[e]}))}function He(t,e){return t.has(e)}function We(t,e){for(var n=-1,r=t.length;++n<r&&Oe(e,t[n],0)>-1;);return n}function $e(t,e){for(var n=t.length;n--&&Oe(e,t[n],0)>-1;);return n}function Xe(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var Ye=je({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),Je=je({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ze(t){return"\\"+te[t]}function Ke(t){return Xt.test(t)}function Qe(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function tn(t,e){return function(n){return t(e(n))}}function en(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[i++]=n)}return o}function nn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function rn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function on(t){return Ke(t)?function(t){for(var e=Wt.lastIndex=0;Wt.test(t);)++e;return e}(t):Ne(t)}function sn(t){return Ke(t)?function(t){return t.match(Wt)||[]}(t):function(t){return t.split("")}(t)}function an(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var un=je({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),cn=function t(e){var n,r=(e=null==e?oe:cn.defaults(oe.Object(),e,cn.pick(oe,Jt))).Array,it=e.Date,wt=e.Error,_t=e.Function,At=e.Math,kt=e.Object,St=e.RegExp,Et=e.String,Pt=e.TypeError,Ct=r.prototype,Tt=_t.prototype,Nt=kt.prototype,Lt=e["__core-js_shared__"],Mt=Tt.toString,Ot=Nt.hasOwnProperty,It=0,Rt=(n=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Bt=Nt.toString,Dt=Mt.call(kt),jt=oe._,Vt=St("^"+Mt.call(Ot).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ft=ue?e.Buffer:i,zt=e.Symbol,Ut=e.Uint8Array,Gt=Ft?Ft.allocUnsafe:i,Wt=tn(kt.getPrototypeOf,kt),Xt=kt.create,te=Nt.propertyIsEnumerable,re=Ct.splice,ie=zt?zt.isConcatSpreadable:i,se=zt?zt.iterator:i,ae=zt?zt.toStringTag:i,ce=function(){try{var t=co(kt,"defineProperty");return t({},"",{}),t}catch(t){}}(),le=e.clearTimeout!==oe.clearTimeout&&e.clearTimeout,Ne=it&&it.now!==oe.Date.now&&it.now,je=e.setTimeout!==oe.setTimeout&&e.setTimeout,ln=At.ceil,hn=At.floor,fn=kt.getOwnPropertySymbols,dn=Ft?Ft.isBuffer:i,pn=e.isFinite,gn=Ct.join,vn=tn(kt.keys,kt),mn=At.max,yn=At.min,bn=it.now,xn=e.parseInt,wn=At.random,_n=Ct.reverse,An=co(e,"DataView"),kn=co(e,"Map"),Sn=co(e,"Promise"),En=co(e,"Set"),Pn=co(e,"WeakMap"),Cn=co(kt,"create"),Tn=Pn&&new Pn,Nn={},Ln=Vo(An),Mn=Vo(kn),On=Vo(Sn),In=Vo(En),Rn=Vo(Pn),Bn=zt?zt.prototype:i,Dn=Bn?Bn.valueOf:i,jn=Bn?Bn.toString:i;function Vn(t){if(na(t)&&!Hs(t)&&!(t instanceof Gn)){if(t instanceof Un)return t;if(Ot.call(t,"__wrapped__"))return Fo(t)}return new Un(t)}var Fn=function(){function t(){}return function(e){if(!ea(e))return{};if(Xt)return Xt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function zn(){}function Un(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Gn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function $n(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Wn;++e<n;)this.add(t[e])}function Xn(t){var e=this.__data__=new Hn(t);this.size=e.size}function Yn(t,e){var n=Hs(t),r=!n&&qs(t),i=!n&&!r&&Ys(t),o=!n&&!r&&!i&&la(t),s=n||r||i||o,a=s?ze(t.length,Et):[],u=a.length;for(var c in t)!e&&!Ot.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||mo(c,u))||a.push(c);return a}function Jn(t){var e=t.length;return e?t[Wr(0,e-1)]:i}function Zn(t,e){return Io(Pi(t),sr(e,0,t.length))}function Kn(t){return Io(Pi(t))}function Qn(t,e,n){(n!==i&&!zs(t[e],n)||n===i&&!(e in t))&&ir(t,e,n)}function tr(t,e,n){var r=t[e];Ot.call(t,e)&&zs(r,n)&&(n!==i||e in t)||ir(t,e,n)}function er(t,e){for(var n=t.length;n--;)if(zs(t[n][0],e))return n;return-1}function nr(t,e,n,r){return hr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function rr(t,e){return t&&Ci(e,Ma(e),t)}function ir(t,e,n){"__proto__"==e&&ce?ce(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function or(t,e){for(var n=-1,o=e.length,s=r(o),a=null==t;++n<o;)s[n]=a?i:Pa(t,e[n]);return s}function sr(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function ar(t,e,n,r,o,s){var a,u=1&e,c=2&e,l=4&e;if(n&&(a=o?n(t,r,o,s):n(t)),a!==i)return a;if(!ea(t))return t;var h=Hs(t);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ot.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return Pi(t,a)}else{var f=fo(t),d=f==x||f==w;if(Ys(t))return wi(t,u);if(f==k||f==g||d&&!o){if(a=c||d?{}:go(t),!u)return c?function(t,e){return Ci(t,ho(t),e)}(t,function(t,e){return t&&Ci(e,Oa(e),t)}(a,t)):function(t,e){return Ci(t,lo(t),e)}(t,rr(a,t))}else{if(!Qt[f])return o?t:{};a=function(t,e,n){var r,i=t.constructor;switch(e){case L:return _i(t);case m:case y:return new i(+t);case M:return function(t,e){var n=e?_i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case O:case I:case R:case B:case D:case j:case V:case F:case z:return Ai(t,n);case _:return new i;case A:case C:return new i(t);case E:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case P:return new i;case T:return r=t,Dn?kt(Dn.call(r)):{}}}(t,f,u)}}s||(s=new Xn);var p=s.get(t);if(p)return p;s.set(t,a),aa(t)?t.forEach((function(r){a.add(ar(r,e,n,r,t,s))})):ra(t)&&t.forEach((function(r,i){a.set(i,ar(r,e,n,i,t,s))}));var v=h?i:(l?c?no:eo:c?Oa:Ma)(t);return be(v||t,(function(r,i){v&&(r=t[i=r]),tr(a,i,ar(r,e,n,i,t,s))})),a}function ur(t,e,n){var r=n.length;if(null==t)return!r;for(t=kt(t);r--;){var o=n[r],s=e[o],a=t[o];if(a===i&&!(o in t)||!s(a))return!1}return!0}function cr(t,e,n){if("function"!=typeof t)throw new Pt(o);return No((function(){t.apply(i,n)}),e)}function lr(t,e,n,r){var i=-1,o=Ae,s=!0,a=t.length,u=[],c=e.length;if(!a)return u;n&&(e=Se(e,Ge(n))),r?(o=ke,s=!1):e.length>=200&&(o=He,s=!1,e=new $n(e));t:for(;++i<a;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,s&&h==h){for(var f=c;f--;)if(e[f]===h)continue t;u.push(l)}else o(e,h,r)||u.push(l)}return u}Vn.templateSettings={escape:Y,evaluate:J,interpolate:Z,variable:"",imports:{_:Vn}},Vn.prototype=zn.prototype,Vn.prototype.constructor=Vn,Un.prototype=Fn(zn.prototype),Un.prototype.constructor=Un,Gn.prototype=Fn(zn.prototype),Gn.prototype.constructor=Gn,qn.prototype.clear=function(){this.__data__=Cn?Cn(null):{},this.size=0},qn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},qn.prototype.get=function(t){var e=this.__data__;if(Cn){var n=e[t];return n===s?i:n}return Ot.call(e,t)?e[t]:i},qn.prototype.has=function(t){var e=this.__data__;return Cn?e[t]!==i:Ot.call(e,t)},qn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Cn&&e===i?s:e,this},Hn.prototype.clear=function(){this.__data__=[],this.size=0},Hn.prototype.delete=function(t){var e=this.__data__,n=er(e,t);return!(n<0||(n==e.length-1?e.pop():re.call(e,n,1),--this.size,0))},Hn.prototype.get=function(t){var e=this.__data__,n=er(e,t);return n<0?i:e[n][1]},Hn.prototype.has=function(t){return er(this.__data__,t)>-1},Hn.prototype.set=function(t,e){var n=this.__data__,r=er(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Wn.prototype.clear=function(){this.size=0,this.__data__={hash:new qn,map:new(kn||Hn),string:new qn}},Wn.prototype.delete=function(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e},Wn.prototype.get=function(t){return ao(this,t).get(t)},Wn.prototype.has=function(t){return ao(this,t).has(t)},Wn.prototype.set=function(t,e){var n=ao(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},$n.prototype.add=$n.prototype.push=function(t){return this.__data__.set(t,s),this},$n.prototype.has=function(t){return this.__data__.has(t)},Xn.prototype.clear=function(){this.__data__=new Hn,this.size=0},Xn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Xn.prototype.get=function(t){return this.__data__.get(t)},Xn.prototype.has=function(t){return this.__data__.has(t)},Xn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Hn){var r=n.__data__;if(!kn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Wn(r)}return n.set(t,e),this.size=n.size,this};var hr=Li(br),fr=Li(xr,!0);function dr(t,e){var n=!0;return hr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function pr(t,e,n){for(var r=-1,o=t.length;++r<o;){var s=t[r],a=e(s);if(null!=a&&(u===i?a==a&&!ca(a):n(a,u)))var u=a,c=s}return c}function gr(t,e){var n=[];return hr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function vr(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=vo),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?vr(a,e-1,n,r,i):Ee(i,a):r||(i[i.length]=a)}return i}var mr=Mi(),yr=Mi(!0);function br(t,e){return t&&mr(t,e,Ma)}function xr(t,e){return t&&yr(t,e,Ma)}function wr(t,e){return _e(e,(function(e){return Ks(t[e])}))}function _r(t,e){for(var n=0,r=(e=mi(e,t)).length;null!=t&&n<r;)t=t[jo(e[n++])];return n&&n==r?t:i}function Ar(t,e,n){var r=e(t);return Hs(t)?r:Ee(r,n(t))}function kr(t){return null==t?t===i?"[object Undefined]":"[object Null]":ae&&ae in kt(t)?function(t){var e=Ot.call(t,ae),n=t[ae];try{t[ae]=i;var r=!0}catch(t){}var o=Bt.call(t);return r&&(e?t[ae]=n:delete t[ae]),o}(t):function(t){return Bt.call(t)}(t)}function Sr(t,e){return t>e}function Er(t,e){return null!=t&&Ot.call(t,e)}function Pr(t,e){return null!=t&&e in kt(t)}function Cr(t,e,n){for(var o=n?ke:Ae,s=t[0].length,a=t.length,u=a,c=r(a),l=1/0,h=[];u--;){var f=t[u];u&&e&&(f=Se(f,Ge(e))),l=yn(f.length,l),c[u]=!n&&(e||s>=120&&f.length>=120)?new $n(u&&f):i}f=t[0];var d=-1,p=c[0];t:for(;++d<s&&h.length<l;){var g=f[d],v=e?e(g):g;if(g=n||0!==g?g:0,!(p?He(p,v):o(h,v,n))){for(u=a;--u;){var m=c[u];if(!(m?He(m,v):o(t[u],v,n)))continue t}p&&p.push(v),h.push(g)}}return h}function Tr(t,e,n){var r=null==(t=Eo(t,e=mi(e,t)))?t:t[jo(Zo(e))];return null==r?i:me(r,t,n)}function Nr(t){return na(t)&&kr(t)==g}function Lr(t,e,n,r,o){return t===e||(null==t||null==e||!na(t)&&!na(e)?t!=t&&e!=e:function(t,e,n,r,o,s){var a=Hs(t),u=Hs(e),c=a?v:fo(t),l=u?v:fo(e),h=(c=c==g?k:c)==k,f=(l=l==g?k:l)==k,d=c==l;if(d&&Ys(t)){if(!Ys(e))return!1;a=!0,h=!1}if(d&&!h)return s||(s=new Xn),a||la(t)?Qi(t,e,n,r,o,s):function(t,e,n,r,i,o,s){switch(n){case M:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case L:return!(t.byteLength!=e.byteLength||!o(new Ut(t),new Ut(e)));case m:case y:case A:return zs(+t,+e);case b:return t.name==e.name&&t.message==e.message;case E:case C:return t==e+"";case _:var a=Qe;case P:var u=1&r;if(a||(a=nn),t.size!=e.size&&!u)return!1;var c=s.get(t);if(c)return c==e;r|=2,s.set(t,e);var l=Qi(a(t),a(e),r,i,o,s);return s.delete(t),l;case T:if(Dn)return Dn.call(t)==Dn.call(e)}return!1}(t,e,c,n,r,o,s);if(!(1&n)){var p=h&&Ot.call(t,"__wrapped__"),x=f&&Ot.call(e,"__wrapped__");if(p||x){var w=p?t.value():t,S=x?e.value():e;return s||(s=new Xn),o(w,S,n,r,s)}}return!!d&&(s||(s=new Xn),function(t,e,n,r,o,s){var a=1&n,u=eo(t),c=u.length;if(c!=eo(e).length&&!a)return!1;for(var l=c;l--;){var h=u[l];if(!(a?h in e:Ot.call(e,h)))return!1}var f=s.get(t),d=s.get(e);if(f&&d)return f==e&&d==t;var p=!0;s.set(t,e),s.set(e,t);for(var g=a;++l<c;){var v=t[h=u[l]],m=e[h];if(r)var y=a?r(m,v,h,e,t,s):r(v,m,h,t,e,s);if(!(y===i?v===m||o(v,m,n,r,s):y)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var b=t.constructor,x=e.constructor;b==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x||(p=!1)}return s.delete(t),s.delete(e),p}(t,e,n,r,o,s))}(t,e,n,r,Lr,o))}function Mr(t,e,n,r){var o=n.length,s=o,a=!r;if(null==t)return!s;for(t=kt(t);o--;){var u=n[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<s;){var c=(u=n[o])[0],l=t[c],h=u[1];if(a&&u[2]){if(l===i&&!(c in t))return!1}else{var f=new Xn;if(r)var d=r(l,h,c,t,e,f);if(!(d===i?Lr(h,l,3,r,f):d))return!1}}return!0}function Or(t){return!(!ea(t)||(e=t,Rt&&Rt in e))&&(Ks(t)?Vt:gt).test(Vo(t));var e}function Ir(t){return"function"==typeof t?t:null==t?iu:"object"==typeof t?Hs(t)?Vr(t[0],t[1]):jr(t):du(t)}function Rr(t){if(!_o(t))return vn(t);var e=[];for(var n in kt(t))Ot.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Br(t,e){return t<e}function Dr(t,e){var n=-1,i=$s(t)?r(t.length):[];return hr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function jr(t){var e=uo(t);return 1==e.length&&e[0][2]?ko(e[0][0],e[0][1]):function(n){return n===t||Mr(n,t,e)}}function Vr(t,e){return bo(t)&&Ao(e)?ko(jo(t),e):function(n){var r=Pa(n,t);return r===i&&r===e?Ca(n,t):Lr(e,r,3)}}function Fr(t,e,n,r,o){t!==e&&mr(e,(function(s,a){if(o||(o=new Xn),ea(s))!function(t,e,n,r,o,s,a){var u=Co(t,n),c=Co(e,n),l=a.get(c);if(l)Qn(t,n,l);else{var h=s?s(u,c,n+"",t,e,a):i,f=h===i;if(f){var d=Hs(c),p=!d&&Ys(c),g=!d&&!p&&la(c);h=c,d||p||g?Hs(u)?h=u:Xs(u)?h=Pi(u):p?(f=!1,h=wi(c,!0)):g?(f=!1,h=Ai(c,!0)):h=[]:oa(c)||qs(c)?(h=u,qs(u)?h=ya(u):ea(u)&&!Ks(u)||(h=go(c))):f=!1}f&&(a.set(c,h),o(h,c,r,s,a),a.delete(c)),Qn(t,n,h)}}(t,e,a,n,Fr,r,o);else{var u=r?r(Co(t,a),s,a+"",t,e,o):i;u===i&&(u=s),Qn(t,a,u)}}),Oa)}function zr(t,e){var n=t.length;if(n)return mo(e+=e<0?n:0,n)?t[e]:i}function Ur(t,e,n){e=e.length?Se(e,(function(t){return Hs(t)?function(e){return _r(e,1===t.length?t[0]:t)}:t})):[iu];var r=-1;e=Se(e,Ge(so()));var i=Dr(t,(function(t,n,i){var o=Se(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var u=ki(i[r],o[r]);if(u)return r>=a?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(i)}function Gr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=_r(t,s);n(a,s)&&Zr(o,mi(s,t),a)}return o}function qr(t,e,n,r){var i=r?Ie:Oe,o=-1,s=e.length,a=t;for(t===e&&(e=Pi(e)),n&&(a=Se(t,Ge(n)));++o<s;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(a,l,u,r))>-1;)a!==t&&re.call(a,u,1),re.call(t,u,1);return t}function Hr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;mo(i)?re.call(t,i,1):ci(t,i)}}return t}function Wr(t,e){return t+hn(wn()*(e-t+1))}function $r(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=hn(e/2))&&(t+=t)}while(e);return n}function Xr(t,e){return Lo(So(t,e,iu),t+"")}function Yr(t){return Jn(za(t))}function Jr(t,e){var n=za(t);return Io(n,sr(e,0,n.length))}function Zr(t,e,n,r){if(!ea(t))return t;for(var o=-1,s=(e=mi(e,t)).length,a=s-1,u=t;null!=u&&++o<s;){var c=jo(e[o]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=a){var h=u[c];(l=r?r(h,c,u):i)===i&&(l=ea(h)?h:mo(e[o+1])?[]:{})}tr(u,c,l),u=u[c]}return t}var Kr=Tn?function(t,e){return Tn.set(t,e),t}:iu,Qr=ce?function(t,e){return ce(t,"toString",{configurable:!0,enumerable:!1,value:eu(e),writable:!0})}:iu;function ti(t){return Io(za(t))}function ei(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=r(o);++i<o;)s[i]=t[i+e];return s}function ni(t,e){var n;return hr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ri(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!ca(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return ii(t,e,iu,n)}function ii(t,e,n,r){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=n(e))!=e,u=null===e,c=ca(e),l=e===i;o<s;){var h=hn((o+s)/2),f=n(t[h]),d=f!==i,p=null===f,g=f==f,v=ca(f);if(a)var m=r||g;else m=l?g&&(r||d):u?g&&d&&(r||!p):c?g&&d&&!p&&(r||!v):!p&&!v&&(r?f<=e:f<e);m?o=h+1:s=h}return yn(s,4294967294)}function oi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!zs(a,u)){var u=a;o[i++]=0===s?0:s}}return o}function si(t){return"number"==typeof t?t:ca(t)?f:+t}function ai(t){if("string"==typeof t)return t;if(Hs(t))return Se(t,ai)+"";if(ca(t))return jn?jn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ui(t,e,n){var r=-1,i=Ae,o=t.length,s=!0,a=[],u=a;if(n)s=!1,i=ke;else if(o>=200){var c=e?null:$i(t);if(c)return nn(c);s=!1,i=He,u=new $n}else u=e?[]:a;t:for(;++r<o;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,s&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),a.push(l)}else i(u,h,n)||(u!==a&&u.push(h),a.push(l))}return a}function ci(t,e){return null==(t=Eo(t,e=mi(e,t)))||delete t[jo(Zo(e))]}function li(t,e,n,r){return Zr(t,e,n(_r(t,e)),r)}function hi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ei(t,r?0:o,r?o+1:i):ei(t,r?o+1:0,r?i:o)}function fi(t,e){var n=t;return n instanceof Gn&&(n=n.value()),Pe(e,(function(t,e){return e.func.apply(e.thisArg,Ee([t],e.args))}),n)}function di(t,e,n){var i=t.length;if(i<2)return i?ui(t[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=t[o],u=-1;++u<i;)u!=o&&(s[o]=lr(s[o]||a,t[u],e,n));return ui(vr(s,1),e,n)}function pi(t,e,n){for(var r=-1,o=t.length,s=e.length,a={};++r<o;){var u=r<s?e[r]:i;n(a,t[r],u)}return a}function gi(t){return Xs(t)?t:[]}function vi(t){return"function"==typeof t?t:iu}function mi(t,e){return Hs(t)?t:bo(t,e)?[t]:Do(ba(t))}var yi=Xr;function bi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ei(t,e,n)}var xi=le||function(t){return oe.clearTimeout(t)};function wi(t,e){if(e)return t.slice();var n=t.length,r=Gt?Gt(n):new t.constructor(n);return t.copy(r),r}function _i(t){var e=new t.constructor(t.byteLength);return new Ut(e).set(new Ut(t)),e}function Ai(t,e){var n=e?_i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function ki(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,s=ca(t),a=e!==i,u=null===e,c=e==e,l=ca(e);if(!u&&!l&&!s&&t>e||s&&a&&c&&!u&&!l||r&&a&&c||!n&&c||!o)return 1;if(!r&&!s&&!l&&t<e||l&&n&&o&&!r&&!s||u&&n&&o||!a&&o||!c)return-1}return 0}function Si(t,e,n,i){for(var o=-1,s=t.length,a=n.length,u=-1,c=e.length,l=mn(s-a,0),h=r(c+l),f=!i;++u<c;)h[u]=e[u];for(;++o<a;)(f||o<s)&&(h[n[o]]=t[o]);for(;l--;)h[u++]=t[o++];return h}function Ei(t,e,n,i){for(var o=-1,s=t.length,a=-1,u=n.length,c=-1,l=e.length,h=mn(s-u,0),f=r(h+l),d=!i;++o<h;)f[o]=t[o];for(var p=o;++c<l;)f[p+c]=e[c];for(;++a<u;)(d||o<s)&&(f[p+n[a]]=t[o++]);return f}function Pi(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Ci(t,e,n,r){var o=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var u=e[s],c=r?r(n[u],t[u],u,n,t):i;c===i&&(c=t[u]),o?ir(n,u,c):tr(n,u,c)}return n}function Ti(t,e){return function(n,r){var i=Hs(n)?ye:nr,o=e?e():{};return i(n,t,so(r,2),o)}}function Ni(t){return Xr((function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;for(s=t.length>3&&"function"==typeof s?(o--,s):i,a&&yo(n[0],n[1],a)&&(s=o<3?i:s,o=1),e=kt(e);++r<o;){var u=n[r];u&&t(e,u,r,s)}return e}))}function Li(t,e){return function(n,r){if(null==n)return n;if(!$s(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=kt(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Mi(t){return function(e,n,r){for(var i=-1,o=kt(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}function Oi(t){return function(e){var n=Ke(e=ba(e))?sn(e):i,r=n?n[0]:e.charAt(0),o=n?bi(n,1).join(""):e.slice(1);return r[t]()+o}}function Ii(t){return function(e){return Pe(Ka(qa(e).replace(qt,"")),t,"")}}function Ri(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Fn(t.prototype),r=t.apply(n,e);return ea(r)?r:n}}function Bi(t){return function(e,n,r){var o=kt(e);if(!$s(e)){var s=so(n,3);e=Ma(e),n=function(t){return s(o[t],t,o)}}var a=t(e,n,r);return a>-1?o[s?e[a]:a]:i}}function Di(t){return to((function(e){var n=e.length,r=n,s=Un.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new Pt(o);if(s&&!u&&"wrapper"==io(a))var u=new Un([],!0)}for(r=u?r:n;++r<n;){var c=io(a=e[r]),l="wrapper"==c?ro(a):i;u=l&&xo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[io(l[0])].apply(u,l[3]):1==a.length&&xo(a)?u[c]():u.thru(a)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Hs(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function ji(t,e,n,o,s,a,u,l,h,f){var d=e&c,p=1&e,g=2&e,v=24&e,m=512&e,y=g?i:Ri(t);return function i(){for(var c=arguments.length,b=r(c),x=c;x--;)b[x]=arguments[x];if(v)var w=oo(i),_=Xe(b,w);if(o&&(b=Si(b,o,s,v)),a&&(b=Ei(b,a,u,v)),c-=_,v&&c<f){var A=en(b,w);return Hi(t,e,ji,i.placeholder,n,b,A,l,h,f-c)}var k=p?n:this,S=g?k[t]:t;return c=b.length,l?b=Po(b,l):m&&c>1&&b.reverse(),d&&h<c&&(b.length=h),this&&this!==oe&&this instanceof i&&(S=y||Ri(S)),S.apply(k,b)}}function Vi(t,e){return function(n,r){return function(t,e,n,r){return br(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Fi(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ai(n),r=ai(r)):(n=si(n),r=si(r)),o=t(n,r)}return o}}function zi(t){return to((function(e){return e=Se(e,Ge(so())),Xr((function(n){var r=this;return t(e,(function(t){return me(t,r,n)}))}))}))}function Ui(t,e){var n=(e=e===i?" ":ai(e)).length;if(n<2)return n?$r(e,t):e;var r=$r(e,ln(t/on(e)));return Ke(e)?bi(sn(r),0,t).join(""):r.slice(0,t)}function Gi(t){return function(e,n,o){return o&&"number"!=typeof o&&yo(e,n,o)&&(n=o=i),e=pa(e),n===i?(n=e,e=0):n=pa(n),function(t,e,n,i){for(var o=-1,s=mn(ln((e-t)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=t,t+=n;return a}(e,n,o=o===i?e<n?1:-1:pa(o),t)}}function qi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ma(e),n=ma(n)),t(e,n)}}function Hi(t,e,n,r,o,s,a,c,l,h){var f=8&e;e|=f?u:64,4&(e&=~(f?64:u))||(e&=-4);var d=[t,e,o,f?s:i,f?a:i,f?i:s,f?i:a,c,l,h],p=n.apply(i,d);return xo(t)&&To(p,d),p.placeholder=r,Mo(p,t,e)}function Wi(t){var e=At[t];return function(t,n){if(t=ma(t),(n=null==n?0:yn(ga(n),292))&&pn(t)){var r=(ba(t)+"e").split("e");return+((r=(ba(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var $i=En&&1/nn(new En([,-0]))[1]==l?function(t){return new En(t)}:cu;function Xi(t){return function(e){var n=fo(e);return n==_?Qe(e):n==P?rn(e):function(t,e){return Se(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Yi(t,e,n,s,l,h,f,d){var p=2&e;if(!p&&"function"!=typeof t)throw new Pt(o);var g=s?s.length:0;if(g||(e&=-97,s=l=i),f=f===i?f:mn(ga(f),0),d=d===i?d:ga(d),g-=l?l.length:0,64&e){var v=s,m=l;s=l=i}var y=p?i:ro(t),b=[t,e,n,s,l,v,m,h,f,d];if(y&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=r==c&&8==n||r==c&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var l=t[3];t[3]=l?Si(l,u,e[4]):u,t[4]=l?en(t[3],a):e[4]}(u=e[5])&&(l=t[5],t[5]=l?Ei(l,u,e[6]):u,t[6]=l?en(t[5],a):e[6]),(u=e[7])&&(t[7]=u),r&c&&(t[8]=null==t[8]?e[8]:yn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(b,y),t=b[0],e=b[1],n=b[2],s=b[3],l=b[4],!(d=b[9]=b[9]===i?p?0:t.length:mn(b[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)x=8==e||16==e?function(t,e,n){var o=Ri(t);return function s(){for(var a=arguments.length,u=r(a),c=a,l=oo(s);c--;)u[c]=arguments[c];var h=a<3&&u[0]!==l&&u[a-1]!==l?[]:en(u,l);return(a-=h.length)<n?Hi(t,e,ji,s.placeholder,i,u,h,i,i,n-a):me(this&&this!==oe&&this instanceof s?o:t,this,u)}}(t,e,d):e!=u&&33!=e||l.length?ji.apply(i,b):function(t,e,n,i){var o=1&e,s=Ri(t);return function e(){for(var a=-1,u=arguments.length,c=-1,l=i.length,h=r(l+u),f=this&&this!==oe&&this instanceof e?s:t;++c<l;)h[c]=i[c];for(;u--;)h[c++]=arguments[++a];return me(f,o?n:this,h)}}(t,e,n,s);else var x=function(t,e,n){var r=1&e,i=Ri(t);return function e(){return(this&&this!==oe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Mo((y?Kr:To)(x,b),t,e)}function Ji(t,e,n,r){return t===i||zs(t,Nt[n])&&!Ot.call(r,n)?e:t}function Zi(t,e,n,r,o,s){return ea(t)&&ea(e)&&(s.set(e,t),Fr(t,e,i,Zi,s),s.delete(e)),t}function Ki(t){return oa(t)?i:t}function Qi(t,e,n,r,o,s){var a=1&n,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var l=s.get(t),h=s.get(e);if(l&&h)return l==e&&h==t;var f=-1,d=!0,p=2&n?new $n:i;for(s.set(t,e),s.set(e,t);++f<u;){var g=t[f],v=e[f];if(r)var m=a?r(v,g,f,e,t,s):r(g,v,f,t,e,s);if(m!==i){if(m)continue;d=!1;break}if(p){if(!Te(e,(function(t,e){if(!He(p,e)&&(g===t||o(g,t,n,r,s)))return p.push(e)}))){d=!1;break}}else if(g!==v&&!o(g,v,n,r,s)){d=!1;break}}return s.delete(t),s.delete(e),d}function to(t){return Lo(So(t,i,Wo),t+"")}function eo(t){return Ar(t,Ma,lo)}function no(t){return Ar(t,Oa,ho)}var ro=Tn?function(t){return Tn.get(t)}:cu;function io(t){for(var e=t.name+"",n=Nn[e],r=Ot.call(Nn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function oo(t){return(Ot.call(Vn,"placeholder")?Vn:t).placeholder}function so(){var t=Vn.iteratee||ou;return t=t===ou?Ir:t,arguments.length?t(arguments[0],arguments[1]):t}function ao(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function uo(t){for(var e=Ma(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ao(i)]}return e}function co(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Or(n)?n:i}var lo=fn?function(t){return null==t?[]:(t=kt(t),_e(fn(t),(function(e){return te.call(t,e)})))}:vu,ho=fn?function(t){for(var e=[];t;)Ee(e,lo(t)),t=Wt(t);return e}:vu,fo=kr;function po(t,e,n){for(var r=-1,i=(e=mi(e,t)).length,o=!1;++r<i;){var s=jo(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ta(i)&&mo(s,i)&&(Hs(t)||qs(t))}function go(t){return"function"!=typeof t.constructor||_o(t)?{}:Fn(Wt(t))}function vo(t){return Hs(t)||qs(t)||!!(ie&&t&&t[ie])}function mo(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&mt.test(t))&&t>-1&&t%1==0&&t<e}function yo(t,e,n){if(!ea(n))return!1;var r=typeof e;return!!("number"==r?$s(n)&&mo(e,n.length):"string"==r&&e in n)&&zs(n[e],t)}function bo(t,e){if(Hs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ca(t))||Q.test(t)||!K.test(t)||null!=e&&t in kt(e)}function xo(t){var e=io(t),n=Vn[e];if("function"!=typeof n||!(e in Gn.prototype))return!1;if(t===n)return!0;var r=ro(n);return!!r&&t===r[0]}(An&&fo(new An(new ArrayBuffer(1)))!=M||kn&&fo(new kn)!=_||Sn&&fo(Sn.resolve())!=S||En&&fo(new En)!=P||Pn&&fo(new Pn)!=N)&&(fo=function(t){var e=kr(t),n=e==k?t.constructor:i,r=n?Vo(n):"";if(r)switch(r){case Ln:return M;case Mn:return _;case On:return S;case In:return P;case Rn:return N}return e});var wo=Lt?Ks:mu;function _o(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Nt)}function Ao(t){return t==t&&!ea(t)}function ko(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in kt(n))}}function So(t,e,n){return e=mn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=mn(i.length-e,0),a=r(s);++o<s;)a[o]=i[e+o];o=-1;for(var u=r(e+1);++o<e;)u[o]=i[o];return u[e]=n(a),me(t,this,u)}}function Eo(t,e){return e.length<2?t:_r(t,ei(e,0,-1))}function Po(t,e){for(var n=t.length,r=yn(e.length,n),o=Pi(t);r--;){var s=e[r];t[r]=mo(s,n)?o[s]:i}return t}function Co(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var To=Oo(Kr),No=je||function(t,e){return oe.setTimeout(t,e)},Lo=Oo(Qr);function Mo(t,e,n){var r=e+"";return Lo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return be(p,(function(n){var r="_."+n[0];e&n[1]&&!Ae(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(at):[]}(r),n)))}function Oo(t){var e=0,n=0;return function(){var r=bn(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Io(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var s=Wr(n,o),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var Ro,Bo,Do=(Ro=Rs((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(lt,"$1"):n||t)})),e}),(function(t){return 500===Bo.size&&Bo.clear(),t})),Bo=Ro.cache,Ro);function jo(t){if("string"==typeof t||ca(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Vo(t){if(null!=t){try{return Mt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Fo(t){if(t instanceof Gn)return t.clone();var e=new Un(t.__wrapped__,t.__chain__);return e.__actions__=Pi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var zo=Xr((function(t,e){return Xs(t)?lr(t,vr(e,1,Xs,!0)):[]})),Uo=Xr((function(t,e){var n=Zo(e);return Xs(n)&&(n=i),Xs(t)?lr(t,vr(e,1,Xs,!0),so(n,2)):[]})),Go=Xr((function(t,e){var n=Zo(e);return Xs(n)&&(n=i),Xs(t)?lr(t,vr(e,1,Xs,!0),i,n):[]}));function qo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ga(n);return i<0&&(i=mn(r+i,0)),Me(t,so(e,3),i)}function Ho(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=ga(n),o=n<0?mn(r+o,0):yn(o,r-1)),Me(t,so(e,3),o,!0)}function Wo(t){return null!=t&&t.length?vr(t,1):[]}function $o(t){return t&&t.length?t[0]:i}var Xo=Xr((function(t){var e=Se(t,gi);return e.length&&e[0]===t[0]?Cr(e):[]})),Yo=Xr((function(t){var e=Zo(t),n=Se(t,gi);return e===Zo(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Cr(n,so(e,2)):[]})),Jo=Xr((function(t){var e=Zo(t),n=Se(t,gi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Cr(n,i,e):[]}));function Zo(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Ko=Xr(Qo);function Qo(t,e){return t&&t.length&&e&&e.length?qr(t,e):t}var ts=to((function(t,e){var n=null==t?0:t.length,r=or(t,e);return Hr(t,Se(e,(function(t){return mo(t,n)?+t:t})).sort(ki)),r}));function es(t){return null==t?t:_n.call(t)}var ns=Xr((function(t){return ui(vr(t,1,Xs,!0))})),rs=Xr((function(t){var e=Zo(t);return Xs(e)&&(e=i),ui(vr(t,1,Xs,!0),so(e,2))})),is=Xr((function(t){var e=Zo(t);return e="function"==typeof e?e:i,ui(vr(t,1,Xs,!0),i,e)}));function os(t){if(!t||!t.length)return[];var e=0;return t=_e(t,(function(t){if(Xs(t))return e=mn(t.length,e),!0})),ze(e,(function(e){return Se(t,De(e))}))}function ss(t,e){if(!t||!t.length)return[];var n=os(t);return null==e?n:Se(n,(function(t){return me(e,i,t)}))}var as=Xr((function(t,e){return Xs(t)?lr(t,e):[]})),us=Xr((function(t){return di(_e(t,Xs))})),cs=Xr((function(t){var e=Zo(t);return Xs(e)&&(e=i),di(_e(t,Xs),so(e,2))})),ls=Xr((function(t){var e=Zo(t);return e="function"==typeof e?e:i,di(_e(t,Xs),i,e)})),hs=Xr(os),fs=Xr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ss(t,n)}));function ds(t){var e=Vn(t);return e.__chain__=!0,e}function ps(t,e){return e(t)}var gs=to((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return or(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Gn&&mo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ps,args:[o],thisArg:i}),new Un(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),vs=Ti((function(t,e,n){Ot.call(t,n)?++t[n]:ir(t,n,1)})),ms=Bi(qo),ys=Bi(Ho);function bs(t,e){return(Hs(t)?be:hr)(t,so(e,3))}function xs(t,e){return(Hs(t)?xe:fr)(t,so(e,3))}var ws=Ti((function(t,e,n){Ot.call(t,n)?t[n].push(e):ir(t,n,[e])})),_s=Xr((function(t,e,n){var i=-1,o="function"==typeof e,s=$s(t)?r(t.length):[];return hr(t,(function(t){s[++i]=o?me(e,t,n):Tr(t,e,n)})),s})),As=Ti((function(t,e,n){ir(t,n,e)}));function ks(t,e){return(Hs(t)?Se:Dr)(t,so(e,3))}var Ss=Ti((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Es=Xr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&yo(t,e[0],e[1])?e=[]:n>2&&yo(e[0],e[1],e[2])&&(e=[e[0]]),Ur(t,vr(e,1),[])})),Ps=Ne||function(){return oe.Date.now()};function Cs(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Yi(t,c,i,i,i,i,e)}function Ts(t,e){var n;if("function"!=typeof e)throw new Pt(o);return t=ga(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Ns=Xr((function(t,e,n){var r=1;if(n.length){var i=en(n,oo(Ns));r|=u}return Yi(t,r,e,n,i)})),Ls=Xr((function(t,e,n){var r=3;if(n.length){var i=en(n,oo(Ls));r|=u}return Yi(e,r,t,n,i)}));function Ms(t,e,n){var r,s,a,u,c,l,h=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new Pt(o);function g(e){var n=r,o=s;return r=s=i,h=e,u=t.apply(o,n)}function v(t){return h=t,c=No(y,e),f?g(t):u}function m(t){var n=t-l;return l===i||n>=e||n<0||d&&t-h>=a}function y(){var t=Ps();if(m(t))return b(t);c=No(y,function(t){var n=e-(t-l);return d?yn(n,a-(t-h)):n}(t))}function b(t){return c=i,p&&r?g(t):(r=s=i,u)}function x(){var t=Ps(),n=m(t);if(r=arguments,s=this,l=t,n){if(c===i)return v(l);if(d)return xi(c),c=No(y,e),g(l)}return c===i&&(c=No(y,e)),u}return e=ma(e)||0,ea(n)&&(f=!!n.leading,a=(d="maxWait"in n)?mn(ma(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p),x.cancel=function(){c!==i&&xi(c),h=0,r=l=s=c=i},x.flush=function(){return c===i?u:b(Ps())},x}var Os=Xr((function(t,e){return cr(t,1,e)})),Is=Xr((function(t,e,n){return cr(t,ma(e)||0,n)}));function Rs(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Pt(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Rs.Cache||Wn),n}function Bs(t){if("function"!=typeof t)throw new Pt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Rs.Cache=Wn;var Ds=yi((function(t,e){var n=(e=1==e.length&&Hs(e[0])?Se(e[0],Ge(so())):Se(vr(e,1),Ge(so()))).length;return Xr((function(r){for(var i=-1,o=yn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return me(t,this,r)}))})),js=Xr((function(t,e){var n=en(e,oo(js));return Yi(t,u,i,e,n)})),Vs=Xr((function(t,e){var n=en(e,oo(Vs));return Yi(t,64,i,e,n)})),Fs=to((function(t,e){return Yi(t,256,i,i,i,e)}));function zs(t,e){return t===e||t!=t&&e!=e}var Us=qi(Sr),Gs=qi((function(t,e){return t>=e})),qs=Nr(function(){return arguments}())?Nr:function(t){return na(t)&&Ot.call(t,"callee")&&!te.call(t,"callee")},Hs=r.isArray,Ws=he?Ge(he):function(t){return na(t)&&kr(t)==L};function $s(t){return null!=t&&ta(t.length)&&!Ks(t)}function Xs(t){return na(t)&&$s(t)}var Ys=dn||mu,Js=fe?Ge(fe):function(t){return na(t)&&kr(t)==y};function Zs(t){if(!na(t))return!1;var e=kr(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!oa(t)}function Ks(t){if(!ea(t))return!1;var e=kr(t);return e==x||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qs(t){return"number"==typeof t&&t==ga(t)}function ta(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function ea(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function na(t){return null!=t&&"object"==typeof t}var ra=de?Ge(de):function(t){return na(t)&&fo(t)==_};function ia(t){return"number"==typeof t||na(t)&&kr(t)==A}function oa(t){if(!na(t)||kr(t)!=k)return!1;var e=Wt(t);if(null===e)return!0;var n=Ot.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Mt.call(n)==Dt}var sa=pe?Ge(pe):function(t){return na(t)&&kr(t)==E},aa=ge?Ge(ge):function(t){return na(t)&&fo(t)==P};function ua(t){return"string"==typeof t||!Hs(t)&&na(t)&&kr(t)==C}function ca(t){return"symbol"==typeof t||na(t)&&kr(t)==T}var la=ve?Ge(ve):function(t){return na(t)&&ta(t.length)&&!!Kt[kr(t)]},ha=qi(Br),fa=qi((function(t,e){return t<=e}));function da(t){if(!t)return[];if($s(t))return ua(t)?sn(t):Pi(t);if(se&&t[se])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[se]());var e=fo(t);return(e==_?Qe:e==P?nn:za)(t)}function pa(t){return t?(t=ma(t))===l||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ga(t){var e=pa(t),n=e%1;return e==e?n?e-n:e:0}function va(t){return t?sr(ga(t),0,d):0}function ma(t){if("number"==typeof t)return t;if(ca(t))return f;if(ea(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ea(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ue(t);var n=pt.test(t);return n||vt.test(t)?ne(t.slice(2),n?2:8):dt.test(t)?f:+t}function ya(t){return Ci(t,Oa(t))}function ba(t){return null==t?"":ai(t)}var xa=Ni((function(t,e){if(_o(e)||$s(e))Ci(e,Ma(e),t);else for(var n in e)Ot.call(e,n)&&tr(t,n,e[n])})),wa=Ni((function(t,e){Ci(e,Oa(e),t)})),_a=Ni((function(t,e,n,r){Ci(e,Oa(e),t,r)})),Aa=Ni((function(t,e,n,r){Ci(e,Ma(e),t,r)})),ka=to(or),Sa=Xr((function(t,e){t=kt(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&yo(e[0],e[1],o)&&(r=1);++n<r;)for(var s=e[n],a=Oa(s),u=-1,c=a.length;++u<c;){var l=a[u],h=t[l];(h===i||zs(h,Nt[l])&&!Ot.call(t,l))&&(t[l]=s[l])}return t})),Ea=Xr((function(t){return t.push(i,Zi),me(Ra,i,t)}));function Pa(t,e,n){var r=null==t?i:_r(t,e);return r===i?n:r}function Ca(t,e){return null!=t&&po(t,e,Pr)}var Ta=Vi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Bt.call(e)),t[e]=n}),eu(iu)),Na=Vi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Bt.call(e)),Ot.call(t,e)?t[e].push(n):t[e]=[n]}),so),La=Xr(Tr);function Ma(t){return $s(t)?Yn(t):Rr(t)}function Oa(t){return $s(t)?Yn(t,!0):function(t){if(!ea(t))return function(t){var e=[];if(null!=t)for(var n in kt(t))e.push(n);return e}(t);var e=_o(t),n=[];for(var r in t)("constructor"!=r||!e&&Ot.call(t,r))&&n.push(r);return n}(t)}var Ia=Ni((function(t,e,n){Fr(t,e,n)})),Ra=Ni((function(t,e,n,r){Fr(t,e,n,r)})),Ba=to((function(t,e){var n={};if(null==t)return n;var r=!1;e=Se(e,(function(e){return e=mi(e,t),r||(r=e.length>1),e})),Ci(t,no(t),n),r&&(n=ar(n,7,Ki));for(var i=e.length;i--;)ci(n,e[i]);return n})),Da=to((function(t,e){return null==t?{}:function(t,e){return Gr(t,e,(function(e,n){return Ca(t,n)}))}(t,e)}));function ja(t,e){if(null==t)return{};var n=Se(no(t),(function(t){return[t]}));return e=so(e),Gr(t,n,(function(t,n){return e(t,n[0])}))}var Va=Xi(Ma),Fa=Xi(Oa);function za(t){return null==t?[]:qe(t,Ma(t))}var Ua=Ii((function(t,e,n){return e=e.toLowerCase(),t+(n?Ga(e):e)}));function Ga(t){return Za(ba(t).toLowerCase())}function qa(t){return(t=ba(t))&&t.replace(yt,Ye).replace(Ht,"")}var Ha=Ii((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Wa=Ii((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),$a=Oi("toLowerCase"),Xa=Ii((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Ya=Ii((function(t,e,n){return t+(n?" ":"")+Za(e)})),Ja=Ii((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Za=Oi("toUpperCase");function Ka(t,e,n){return t=ba(t),(e=n?i:e)===i?function(t){return Yt.test(t)}(t)?function(t){return t.match($t)||[]}(t):function(t){return t.match(ut)||[]}(t):t.match(e)||[]}var Qa=Xr((function(t,e){try{return me(t,i,e)}catch(t){return Zs(t)?t:new wt(t)}})),tu=to((function(t,e){return be(e,(function(e){e=jo(e),ir(t,e,Ns(t[e],t))})),t}));function eu(t){return function(){return t}}var nu=Di(),ru=Di(!0);function iu(t){return t}function ou(t){return Ir("function"==typeof t?t:ar(t,1))}var su=Xr((function(t,e){return function(n){return Tr(n,t,e)}})),au=Xr((function(t,e){return function(n){return Tr(t,n,e)}}));function uu(t,e,n){var r=Ma(e),i=wr(e,r);null!=n||ea(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=wr(e,Ma(e)));var o=!(ea(n)&&"chain"in n&&!n.chain),s=Ks(t);return be(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Pi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ee([this.value()],arguments))})})),t}function cu(){}var lu=zi(Se),hu=zi(we),fu=zi(Te);function du(t){return bo(t)?De(jo(t)):function(t){return function(e){return _r(e,t)}}(t)}var pu=Gi(),gu=Gi(!0);function vu(){return[]}function mu(){return!1}var yu,bu=Fi((function(t,e){return t+e}),0),xu=Wi("ceil"),wu=Fi((function(t,e){return t/e}),1),_u=Wi("floor"),Au=Fi((function(t,e){return t*e}),1),ku=Wi("round"),Su=Fi((function(t,e){return t-e}),0);return Vn.after=function(t,e){if("function"!=typeof e)throw new Pt(o);return t=ga(t),function(){if(--t<1)return e.apply(this,arguments)}},Vn.ary=Cs,Vn.assign=xa,Vn.assignIn=wa,Vn.assignInWith=_a,Vn.assignWith=Aa,Vn.at=ka,Vn.before=Ts,Vn.bind=Ns,Vn.bindAll=tu,Vn.bindKey=Ls,Vn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Hs(t)?t:[t]},Vn.chain=ds,Vn.chunk=function(t,e,n){e=(n?yo(t,e,n):e===i)?1:mn(ga(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var s=0,a=0,u=r(ln(o/e));s<o;)u[a++]=ei(t,s,s+=e);return u},Vn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Vn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Ee(Hs(n)?Pi(n):[n],vr(e,1))},Vn.cond=function(t){var e=null==t?0:t.length,n=so();return t=e?Se(t,(function(t){if("function"!=typeof t[1])throw new Pt(o);return[n(t[0]),t[1]]})):[],Xr((function(n){for(var r=-1;++r<e;){var i=t[r];if(me(i[0],this,n))return me(i[1],this,n)}}))},Vn.conforms=function(t){return function(t){var e=Ma(t);return function(n){return ur(n,t,e)}}(ar(t,1))},Vn.constant=eu,Vn.countBy=vs,Vn.create=function(t,e){var n=Fn(t);return null==e?n:rr(n,e)},Vn.curry=function t(e,n,r){var o=Yi(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Vn.curryRight=function t(e,n,r){var o=Yi(e,16,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Vn.debounce=Ms,Vn.defaults=Sa,Vn.defaultsDeep=Ea,Vn.defer=Os,Vn.delay=Is,Vn.difference=zo,Vn.differenceBy=Uo,Vn.differenceWith=Go,Vn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=n||e===i?1:ga(e))<0?0:e,r):[]},Vn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,0,(e=r-(e=n||e===i?1:ga(e)))<0?0:e):[]},Vn.dropRightWhile=function(t,e){return t&&t.length?hi(t,so(e,3),!0,!0):[]},Vn.dropWhile=function(t,e){return t&&t.length?hi(t,so(e,3),!0):[]},Vn.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&yo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=ga(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:ga(r))<0&&(r+=o),r=n>r?0:va(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Vn.filter=function(t,e){return(Hs(t)?_e:gr)(t,so(e,3))},Vn.flatMap=function(t,e){return vr(ks(t,e),1)},Vn.flatMapDeep=function(t,e){return vr(ks(t,e),l)},Vn.flatMapDepth=function(t,e,n){return n=n===i?1:ga(n),vr(ks(t,e),n)},Vn.flatten=Wo,Vn.flattenDeep=function(t){return null!=t&&t.length?vr(t,l):[]},Vn.flattenDepth=function(t,e){return null!=t&&t.length?vr(t,e=e===i?1:ga(e)):[]},Vn.flip=function(t){return Yi(t,512)},Vn.flow=nu,Vn.flowRight=ru,Vn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Vn.functions=function(t){return null==t?[]:wr(t,Ma(t))},Vn.functionsIn=function(t){return null==t?[]:wr(t,Oa(t))},Vn.groupBy=ws,Vn.initial=function(t){return null!=t&&t.length?ei(t,0,-1):[]},Vn.intersection=Xo,Vn.intersectionBy=Yo,Vn.intersectionWith=Jo,Vn.invert=Ta,Vn.invertBy=Na,Vn.invokeMap=_s,Vn.iteratee=ou,Vn.keyBy=As,Vn.keys=Ma,Vn.keysIn=Oa,Vn.map=ks,Vn.mapKeys=function(t,e){var n={};return e=so(e,3),br(t,(function(t,r,i){ir(n,e(t,r,i),t)})),n},Vn.mapValues=function(t,e){var n={};return e=so(e,3),br(t,(function(t,r,i){ir(n,r,e(t,r,i))})),n},Vn.matches=function(t){return jr(ar(t,1))},Vn.matchesProperty=function(t,e){return Vr(t,ar(e,1))},Vn.memoize=Rs,Vn.merge=Ia,Vn.mergeWith=Ra,Vn.method=su,Vn.methodOf=au,Vn.mixin=uu,Vn.negate=Bs,Vn.nthArg=function(t){return t=ga(t),Xr((function(e){return zr(e,t)}))},Vn.omit=Ba,Vn.omitBy=function(t,e){return ja(t,Bs(so(e)))},Vn.once=function(t){return Ts(2,t)},Vn.orderBy=function(t,e,n,r){return null==t?[]:(Hs(e)||(e=null==e?[]:[e]),Hs(n=r?i:n)||(n=null==n?[]:[n]),Ur(t,e,n))},Vn.over=lu,Vn.overArgs=Ds,Vn.overEvery=hu,Vn.overSome=fu,Vn.partial=js,Vn.partialRight=Vs,Vn.partition=Ss,Vn.pick=Da,Vn.pickBy=ja,Vn.property=du,Vn.propertyOf=function(t){return function(e){return null==t?i:_r(t,e)}},Vn.pull=Ko,Vn.pullAll=Qo,Vn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?qr(t,e,so(n,2)):t},Vn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?qr(t,e,i,n):t},Vn.pullAt=ts,Vn.range=pu,Vn.rangeRight=gu,Vn.rearg=Fs,Vn.reject=function(t,e){return(Hs(t)?_e:gr)(t,Bs(so(e,3)))},Vn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=so(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return Hr(t,i),n},Vn.rest=function(t,e){if("function"!=typeof t)throw new Pt(o);return Xr(t,e=e===i?e:ga(e))},Vn.reverse=es,Vn.sampleSize=function(t,e,n){return e=(n?yo(t,e,n):e===i)?1:ga(e),(Hs(t)?Zn:Jr)(t,e)},Vn.set=function(t,e,n){return null==t?t:Zr(t,e,n)},Vn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Zr(t,e,n,r)},Vn.shuffle=function(t){return(Hs(t)?Kn:ti)(t)},Vn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&yo(t,e,n)?(e=0,n=r):(e=null==e?0:ga(e),n=n===i?r:ga(n)),ei(t,e,n)):[]},Vn.sortBy=Es,Vn.sortedUniq=function(t){return t&&t.length?oi(t):[]},Vn.sortedUniqBy=function(t,e){return t&&t.length?oi(t,so(e,2)):[]},Vn.split=function(t,e,n){return n&&"number"!=typeof n&&yo(t,e,n)&&(e=n=i),(n=n===i?d:n>>>0)?(t=ba(t))&&("string"==typeof e||null!=e&&!sa(e))&&!(e=ai(e))&&Ke(t)?bi(sn(t),0,n):t.split(e,n):[]},Vn.spread=function(t,e){if("function"!=typeof t)throw new Pt(o);return e=null==e?0:mn(ga(e),0),Xr((function(n){var r=n[e],i=bi(n,0,e);return r&&Ee(i,r),me(t,this,i)}))},Vn.tail=function(t){var e=null==t?0:t.length;return e?ei(t,1,e):[]},Vn.take=function(t,e,n){return t&&t.length?ei(t,0,(e=n||e===i?1:ga(e))<0?0:e):[]},Vn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=r-(e=n||e===i?1:ga(e)))<0?0:e,r):[]},Vn.takeRightWhile=function(t,e){return t&&t.length?hi(t,so(e,3),!1,!0):[]},Vn.takeWhile=function(t,e){return t&&t.length?hi(t,so(e,3)):[]},Vn.tap=function(t,e){return e(t),t},Vn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Pt(o);return ea(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ms(t,e,{leading:r,maxWait:e,trailing:i})},Vn.thru=ps,Vn.toArray=da,Vn.toPairs=Va,Vn.toPairsIn=Fa,Vn.toPath=function(t){return Hs(t)?Se(t,jo):ca(t)?[t]:Pi(Do(ba(t)))},Vn.toPlainObject=ya,Vn.transform=function(t,e,n){var r=Hs(t),i=r||Ys(t)||la(t);if(e=so(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ea(t)&&Ks(o)?Fn(Wt(t)):{}}return(i?be:br)(t,(function(t,r,i){return e(n,t,r,i)})),n},Vn.unary=function(t){return Cs(t,1)},Vn.union=ns,Vn.unionBy=rs,Vn.unionWith=is,Vn.uniq=function(t){return t&&t.length?ui(t):[]},Vn.uniqBy=function(t,e){return t&&t.length?ui(t,so(e,2)):[]},Vn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?ui(t,i,e):[]},Vn.unset=function(t,e){return null==t||ci(t,e)},Vn.unzip=os,Vn.unzipWith=ss,Vn.update=function(t,e,n){return null==t?t:li(t,e,vi(n))},Vn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:li(t,e,vi(n),r)},Vn.values=za,Vn.valuesIn=function(t){return null==t?[]:qe(t,Oa(t))},Vn.without=as,Vn.words=Ka,Vn.wrap=function(t,e){return js(vi(e),t)},Vn.xor=us,Vn.xorBy=cs,Vn.xorWith=ls,Vn.zip=hs,Vn.zipObject=function(t,e){return pi(t||[],e||[],tr)},Vn.zipObjectDeep=function(t,e){return pi(t||[],e||[],Zr)},Vn.zipWith=fs,Vn.entries=Va,Vn.entriesIn=Fa,Vn.extend=wa,Vn.extendWith=_a,uu(Vn,Vn),Vn.add=bu,Vn.attempt=Qa,Vn.camelCase=Ua,Vn.capitalize=Ga,Vn.ceil=xu,Vn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=ma(n))==n?n:0),e!==i&&(e=(e=ma(e))==e?e:0),sr(ma(t),e,n)},Vn.clone=function(t){return ar(t,4)},Vn.cloneDeep=function(t){return ar(t,5)},Vn.cloneDeepWith=function(t,e){return ar(t,5,e="function"==typeof e?e:i)},Vn.cloneWith=function(t,e){return ar(t,4,e="function"==typeof e?e:i)},Vn.conformsTo=function(t,e){return null==e||ur(t,e,Ma(e))},Vn.deburr=qa,Vn.defaultTo=function(t,e){return null==t||t!=t?e:t},Vn.divide=wu,Vn.endsWith=function(t,e,n){t=ba(t),e=ai(e);var r=t.length,o=n=n===i?r:sr(ga(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},Vn.eq=zs,Vn.escape=function(t){return(t=ba(t))&&X.test(t)?t.replace(W,Je):t},Vn.escapeRegExp=function(t){return(t=ba(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Vn.every=function(t,e,n){var r=Hs(t)?we:dr;return n&&yo(t,e,n)&&(e=i),r(t,so(e,3))},Vn.find=ms,Vn.findIndex=qo,Vn.findKey=function(t,e){return Le(t,so(e,3),br)},Vn.findLast=ys,Vn.findLastIndex=Ho,Vn.findLastKey=function(t,e){return Le(t,so(e,3),xr)},Vn.floor=_u,Vn.forEach=bs,Vn.forEachRight=xs,Vn.forIn=function(t,e){return null==t?t:mr(t,so(e,3),Oa)},Vn.forInRight=function(t,e){return null==t?t:yr(t,so(e,3),Oa)},Vn.forOwn=function(t,e){return t&&br(t,so(e,3))},Vn.forOwnRight=function(t,e){return t&&xr(t,so(e,3))},Vn.get=Pa,Vn.gt=Us,Vn.gte=Gs,Vn.has=function(t,e){return null!=t&&po(t,e,Er)},Vn.hasIn=Ca,Vn.head=$o,Vn.identity=iu,Vn.includes=function(t,e,n,r){t=$s(t)?t:za(t),n=n&&!r?ga(n):0;var i=t.length;return n<0&&(n=mn(i+n,0)),ua(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Oe(t,e,n)>-1},Vn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ga(n);return i<0&&(i=mn(r+i,0)),Oe(t,e,i)},Vn.inRange=function(t,e,n){return e=pa(e),n===i?(n=e,e=0):n=pa(n),function(t,e,n){return t>=yn(e,n)&&t<mn(e,n)}(t=ma(t),e,n)},Vn.invoke=La,Vn.isArguments=qs,Vn.isArray=Hs,Vn.isArrayBuffer=Ws,Vn.isArrayLike=$s,Vn.isArrayLikeObject=Xs,Vn.isBoolean=function(t){return!0===t||!1===t||na(t)&&kr(t)==m},Vn.isBuffer=Ys,Vn.isDate=Js,Vn.isElement=function(t){return na(t)&&1===t.nodeType&&!oa(t)},Vn.isEmpty=function(t){if(null==t)return!0;if($s(t)&&(Hs(t)||"string"==typeof t||"function"==typeof t.splice||Ys(t)||la(t)||qs(t)))return!t.length;var e=fo(t);if(e==_||e==P)return!t.size;if(_o(t))return!Rr(t).length;for(var n in t)if(Ot.call(t,n))return!1;return!0},Vn.isEqual=function(t,e){return Lr(t,e)},Vn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Lr(t,e,i,n):!!r},Vn.isError=Zs,Vn.isFinite=function(t){return"number"==typeof t&&pn(t)},Vn.isFunction=Ks,Vn.isInteger=Qs,Vn.isLength=ta,Vn.isMap=ra,Vn.isMatch=function(t,e){return t===e||Mr(t,e,uo(e))},Vn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Mr(t,e,uo(e),n)},Vn.isNaN=function(t){return ia(t)&&t!=+t},Vn.isNative=function(t){if(wo(t))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Or(t)},Vn.isNil=function(t){return null==t},Vn.isNull=function(t){return null===t},Vn.isNumber=ia,Vn.isObject=ea,Vn.isObjectLike=na,Vn.isPlainObject=oa,Vn.isRegExp=sa,Vn.isSafeInteger=function(t){return Qs(t)&&t>=-9007199254740991&&t<=h},Vn.isSet=aa,Vn.isString=ua,Vn.isSymbol=ca,Vn.isTypedArray=la,Vn.isUndefined=function(t){return t===i},Vn.isWeakMap=function(t){return na(t)&&fo(t)==N},Vn.isWeakSet=function(t){return na(t)&&"[object WeakSet]"==kr(t)},Vn.join=function(t,e){return null==t?"":gn.call(t,e)},Vn.kebabCase=Ha,Vn.last=Zo,Vn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=ga(n))<0?mn(r+o,0):yn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Me(t,Re,o,!0)},Vn.lowerCase=Wa,Vn.lowerFirst=$a,Vn.lt=ha,Vn.lte=fa,Vn.max=function(t){return t&&t.length?pr(t,iu,Sr):i},Vn.maxBy=function(t,e){return t&&t.length?pr(t,so(e,2),Sr):i},Vn.mean=function(t){return Be(t,iu)},Vn.meanBy=function(t,e){return Be(t,so(e,2))},Vn.min=function(t){return t&&t.length?pr(t,iu,Br):i},Vn.minBy=function(t,e){return t&&t.length?pr(t,so(e,2),Br):i},Vn.stubArray=vu,Vn.stubFalse=mu,Vn.stubObject=function(){return{}},Vn.stubString=function(){return""},Vn.stubTrue=function(){return!0},Vn.multiply=Au,Vn.nth=function(t,e){return t&&t.length?zr(t,ga(e)):i},Vn.noConflict=function(){return oe._===this&&(oe._=jt),this},Vn.noop=cu,Vn.now=Ps,Vn.pad=function(t,e,n){t=ba(t);var r=(e=ga(e))?on(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Ui(hn(i),n)+t+Ui(ln(i),n)},Vn.padEnd=function(t,e,n){t=ba(t);var r=(e=ga(e))?on(t):0;return e&&r<e?t+Ui(e-r,n):t},Vn.padStart=function(t,e,n){t=ba(t);var r=(e=ga(e))?on(t):0;return e&&r<e?Ui(e-r,n)+t:t},Vn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),xn(ba(t).replace(rt,""),e||0)},Vn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&yo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=pa(t),e===i?(e=t,t=0):e=pa(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=wn();return yn(t+o*(e-t+ee("1e-"+((o+"").length-1))),e)}return Wr(t,e)},Vn.reduce=function(t,e,n){var r=Hs(t)?Pe:Ve,i=arguments.length<3;return r(t,so(e,4),n,i,hr)},Vn.reduceRight=function(t,e,n){var r=Hs(t)?Ce:Ve,i=arguments.length<3;return r(t,so(e,4),n,i,fr)},Vn.repeat=function(t,e,n){return e=(n?yo(t,e,n):e===i)?1:ga(e),$r(ba(t),e)},Vn.replace=function(){var t=arguments,e=ba(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Vn.result=function(t,e,n){var r=-1,o=(e=mi(e,t)).length;for(o||(o=1,t=i);++r<o;){var s=null==t?i:t[jo(e[r])];s===i&&(r=o,s=n),t=Ks(s)?s.call(t):s}return t},Vn.round=ku,Vn.runInContext=t,Vn.sample=function(t){return(Hs(t)?Jn:Yr)(t)},Vn.size=function(t){if(null==t)return 0;if($s(t))return ua(t)?on(t):t.length;var e=fo(t);return e==_||e==P?t.size:Rr(t).length},Vn.snakeCase=Xa,Vn.some=function(t,e,n){var r=Hs(t)?Te:ni;return n&&yo(t,e,n)&&(e=i),r(t,so(e,3))},Vn.sortedIndex=function(t,e){return ri(t,e)},Vn.sortedIndexBy=function(t,e,n){return ii(t,e,so(n,2))},Vn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ri(t,e);if(r<n&&zs(t[r],e))return r}return-1},Vn.sortedLastIndex=function(t,e){return ri(t,e,!0)},Vn.sortedLastIndexBy=function(t,e,n){return ii(t,e,so(n,2),!0)},Vn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ri(t,e,!0)-1;if(zs(t[n],e))return n}return-1},Vn.startCase=Ya,Vn.startsWith=function(t,e,n){return t=ba(t),n=null==n?0:sr(ga(n),0,t.length),e=ai(e),t.slice(n,n+e.length)==e},Vn.subtract=Su,Vn.sum=function(t){return t&&t.length?Fe(t,iu):0},Vn.sumBy=function(t,e){return t&&t.length?Fe(t,so(e,2)):0},Vn.template=function(t,e,n){var r=Vn.templateSettings;n&&yo(t,e,n)&&(e=i),t=ba(t),e=_a({},e,r,Ji);var o,s,a=_a({},e.imports,r.imports,Ji),u=Ma(a),c=qe(a,u),l=0,h=e.interpolate||bt,f="__p += '",d=St((e.escape||bt).source+"|"+h.source+"|"+(h===Z?ht:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),p="//# sourceURL="+(Ot.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Zt+"]")+"\n";t.replace(d,(function(e,n,r,i,a,u){return r||(r=i),f+=t.slice(l,u).replace(xt,Ze),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),f+="';\n";var g=Ot.call(e,"variable")&&e.variable;if(g){if(ct.test(g))throw new wt("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(s?f.replace(U,""):f).replace(G,"$1").replace(q,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Qa((function(){return _t(u,p+"return "+f).apply(i,c)}));if(v.source=f,Zs(v))throw v;return v},Vn.times=function(t,e){if((t=ga(t))<1||t>h)return[];var n=d,r=yn(t,d);e=so(e),t-=d;for(var i=ze(r,e);++n<t;)e(n);return i},Vn.toFinite=pa,Vn.toInteger=ga,Vn.toLength=va,Vn.toLower=function(t){return ba(t).toLowerCase()},Vn.toNumber=ma,Vn.toSafeInteger=function(t){return t?sr(ga(t),-9007199254740991,h):0===t?t:0},Vn.toString=ba,Vn.toUpper=function(t){return ba(t).toUpperCase()},Vn.trim=function(t,e,n){if((t=ba(t))&&(n||e===i))return Ue(t);if(!t||!(e=ai(e)))return t;var r=sn(t),o=sn(e);return bi(r,We(r,o),$e(r,o)+1).join("")},Vn.trimEnd=function(t,e,n){if((t=ba(t))&&(n||e===i))return t.slice(0,an(t)+1);if(!t||!(e=ai(e)))return t;var r=sn(t);return bi(r,0,$e(r,sn(e))+1).join("")},Vn.trimStart=function(t,e,n){if((t=ba(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=ai(e)))return t;var r=sn(t);return bi(r,We(r,sn(e))).join("")},Vn.truncate=function(t,e){var n=30,r="...";if(ea(e)){var o="separator"in e?e.separator:o;n="length"in e?ga(e.length):n,r="omission"in e?ai(e.omission):r}var s=(t=ba(t)).length;if(Ke(t)){var a=sn(t);s=a.length}if(n>=s)return t;var u=n-on(r);if(u<1)return r;var c=a?bi(a,0,u).join(""):t.slice(0,u);if(o===i)return c+r;if(a&&(u+=c.length-u),sa(o)){if(t.slice(u).search(o)){var l,h=c;for(o.global||(o=St(o.source,ba(ft.exec(o))+"g")),o.lastIndex=0;l=o.exec(h);)var f=l.index;c=c.slice(0,f===i?u:f)}}else if(t.indexOf(ai(o),u)!=u){var d=c.lastIndexOf(o);d>-1&&(c=c.slice(0,d))}return c+r},Vn.unescape=function(t){return(t=ba(t))&&$.test(t)?t.replace(H,un):t},Vn.uniqueId=function(t){var e=++It;return ba(t)+e},Vn.upperCase=Ja,Vn.upperFirst=Za,Vn.each=bs,Vn.eachRight=xs,Vn.first=$o,uu(Vn,(yu={},br(Vn,(function(t,e){Ot.call(Vn.prototype,e)||(yu[e]=t)})),yu),{chain:!1}),Vn.VERSION="4.17.21",be(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Vn[t].placeholder=Vn})),be(["drop","take"],(function(t,e){Gn.prototype[t]=function(n){n=n===i?1:mn(ga(n),0);var r=this.__filtered__&&!e?new Gn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,d),type:t+(r.__dir__<0?"Right":"")}),r},Gn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),be(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Gn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:so(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),be(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Gn.prototype[t]=function(){return this[n](1).value()[0]}})),be(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Gn.prototype[t]=function(){return this.__filtered__?new Gn(this):this[n](1)}})),Gn.prototype.compact=function(){return this.filter(iu)},Gn.prototype.find=function(t){return this.filter(t).head()},Gn.prototype.findLast=function(t){return this.reverse().find(t)},Gn.prototype.invokeMap=Xr((function(t,e){return"function"==typeof t?new Gn(this):this.map((function(n){return Tr(n,t,e)}))})),Gn.prototype.reject=function(t){return this.filter(Bs(so(t)))},Gn.prototype.slice=function(t,e){t=ga(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Gn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=ga(e))<0?n.dropRight(-e):n.take(e-t)),n)},Gn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Gn.prototype.toArray=function(){return this.take(d)},br(Gn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=Vn[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);o&&(Vn.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,u=e instanceof Gn,c=a[0],l=u||Hs(e),h=function(t){var e=o.apply(Vn,Ee([t],a));return r&&f?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,d=!!this.__actions__.length,p=s&&!f,g=u&&!d;if(!s&&l){e=g?e:new Gn(this);var v=t.apply(e,a);return v.__actions__.push({func:ps,args:[h],thisArg:i}),new Un(v,f)}return p&&g?t.apply(this,a):(v=this.thru(h),p?r?v.value()[0]:v.value():v)})})),be(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Ct[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Vn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Hs(i)?i:[],t)}return this[n]((function(n){return e.apply(Hs(n)?n:[],t)}))}})),br(Gn.prototype,(function(t,e){var n=Vn[e];if(n){var r=n.name+"";Ot.call(Nn,r)||(Nn[r]=[]),Nn[r].push({name:e,func:n})}})),Nn[ji(i,2).name]=[{name:"wrapper",func:i}],Gn.prototype.clone=function(){var t=new Gn(this.__wrapped__);return t.__actions__=Pi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Pi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Pi(this.__views__),t},Gn.prototype.reverse=function(){if(this.__filtered__){var t=new Gn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Gn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Hs(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=yn(e,t+s);break;case"takeRight":t=mn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,u=a-s,c=r?a:s-1,l=this.__iteratees__,h=l.length,f=0,d=yn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return fi(t,this.__actions__);var p=[];t:for(;u--&&f<d;){for(var g=-1,v=t[c+=e];++g<h;){var m=l[g],y=m.iteratee,b=m.type,x=y(v);if(2==b)v=x;else if(!x){if(1==b)continue t;break t}}p[f++]=v}return p},Vn.prototype.at=gs,Vn.prototype.chain=function(){return ds(this)},Vn.prototype.commit=function(){return new Un(this.value(),this.__chain__)},Vn.prototype.next=function(){this.__values__===i&&(this.__values__=da(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Vn.prototype.plant=function(t){for(var e,n=this;n instanceof zn;){var r=Fo(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},Vn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Gn){var e=t;return this.__actions__.length&&(e=new Gn(this)),(e=e.reverse()).__actions__.push({func:ps,args:[es],thisArg:i}),new Un(e,this.__chain__)}return this.thru(es)},Vn.prototype.toJSON=Vn.prototype.valueOf=Vn.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},Vn.prototype.first=Vn.prototype.head,se&&(Vn.prototype[se]=function(){return this}),Vn}();oe._=cn,(r=function(){return cn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},35161:(t,e,n)=>{var r=n(29932),i=n(67206),o=n(69199),s=n(1469);t.exports=function(t,e){return(s(t)?r:o)(t,i(e,3))}},66604:(t,e,n)=>{var r=n(89465),i=n(47816),o=n(67206);t.exports=function(t,e){var n={};return e=o(e,3),i(t,(function(t,i,o){r(n,i,e(t,i,o))})),n}},6162:(t,e,n)=>{var r=n(56029),i=n(53325),o=n(6557);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},88306:(t,e,n)=>{var r=n(83369);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},82492:(t,e,n)=>{var r=n(42980),i=n(21463)((function(t,e,n){r(t,e,n)}));t.exports=i},53632:(t,e,n)=>{var r=n(56029),i=n(70433),o=n(6557);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},22762:(t,e,n)=>{var r=n(56029),i=n(67206),o=n(70433);t.exports=function(t,e){return t&&t.length?r(t,i(e,2),o):void 0}},50308:t=>{t.exports=function(){}},7771:(t,e,n)=>{var r=n(55639);t.exports=function(){return r.Date.now()}},78718:(t,e,n)=>{var r=n(25970),i=n(99021)((function(t,e){return null==t?{}:r(t,e)}));t.exports=i},39601:(t,e,n)=>{var r=n(40371),i=n(79152),o=n(15403),s=n(40327);t.exports=function(t){return o(t)?r(s(t)):i(t)}},96026:(t,e,n)=>{var r=n(47445)();t.exports=r},54061:(t,e,n)=>{var r=n(62663),i=n(89881),o=n(67206),s=n(10107),a=n(1469);t.exports=function(t,e,n){var u=a(t)?r:s,c=arguments.length<3;return u(t,o(e,4),n,c,i)}},84238:(t,e,n)=>{var r=n(280),i=n(64160),o=n(98612),s=n(47037),a=n(88016);t.exports=function(t){if(null==t)return 0;if(o(t))return s(t)?a(t):t.length;var e=i(t);return"[object Map]"==e||"[object Set]"==e?t.size:r(t).length}},89734:(t,e,n)=>{var r=n(21078),i=n(82689),o=n(5976),s=n(16612),a=o((function(t,e){if(null==t)return[];var n=e.length;return n>1&&s(t,e[0],e[1])?e=[]:n>2&&s(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])}));t.exports=a},70479:t=>{t.exports=function(){return[]}},95062:t=>{t.exports=function(){return!1}},18601:(t,e,n)=>{var r=n(14841);t.exports=function(t){return t?Infinity===(t=r(t))||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},40554:(t,e,n)=>{var r=n(18601);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},14841:(t,e,n)=>{var r=n(27561),i=n(13218),o=n(33448),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=a.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):s.test(t)?NaN:+t}},59881:(t,e,n)=>{var r=n(98363),i=n(81704);t.exports=function(t){return r(t,i(t))}},79833:(t,e,n)=>{var r=n(80531);t.exports=function(t){return null==t?"":r(t)}},68718:(t,e,n)=>{var r=n(77412),i=n(3118),o=n(47816),s=n(67206),a=n(85924),u=n(1469),c=n(44144),l=n(23560),h=n(13218),f=n(36719);t.exports=function(t,e,n){var d=u(t),p=d||c(t)||f(t);if(e=s(e,4),null==n){var g=t&&t.constructor;n=p?d?new g:[]:h(t)&&l(g)?i(a(t)):{}}return(p?r:o)(t,(function(t,r,i){return e(n,t,r,i)})),n}},93386:(t,e,n)=>{var r=n(21078),i=n(5976),o=n(45652),s=n(29246),a=i((function(t){return o(r(t,1,s,!0))}));t.exports=a},73955:(t,e,n)=>{var r=n(79833),i=0;t.exports=function(t){var e=++i;return r(t)+e}},52628:(t,e,n)=>{var r=n(47415),i=n(3674);t.exports=function(t){return null==t?[]:r(t,i(t))}},7287:(t,e,n)=>{var r=n(34865),i=n(1757);t.exports=function(t,e){return i(t||[],e||[],r)}},13469:(t,e,n)=>{var r;t=n.nmd(t),function(){var i="object"==typeof self&&self.self===self&&self||"object"==typeof n.g&&n.g.global===n.g&&n.g||this||{},o=i._,s=Array.prototype,a=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,c=s.push,l=s.slice,h=a.toString,f=a.hasOwnProperty,d=Array.isArray,p=Object.keys,g=Object.create,v=function(){},m=function(t){return t instanceof m?t:this instanceof m?void(this._wrapped=t):new m(t)};e.nodeType?i._=m:(!t.nodeType&&t.exports&&(e=t.exports=m),e._=m),m.VERSION="1.9.1";var y,b=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},x=function(t,e,n){return m.iteratee!==y?m.iteratee(t,e):null==t?m.identity:m.isFunction(t)?b(t,e,n):m.isObject(t)&&!m.isArray(t)?m.matcher(t):m.property(t)};m.iteratee=y=function(t,e){return x(t,e,1/0)};var w=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}},_=function(t){if(!m.isObject(t))return{};if(g)return g(t);v.prototype=t;var e=new v;return v.prototype=null,e},A=function(t){return function(e){return null==e?void 0:e[t]}},k=function(t,e){return null!=t&&f.call(t,e)},S=function(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0},E=Math.pow(2,53)-1,P=A("length"),C=function(t){var e=P(t);return"number"==typeof e&&e>=0&&e<=E};m.each=m.forEach=function(t,e,n){var r,i;if(e=b(e,n),C(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=m.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},m.map=m.collect=function(t,e,n){e=x(e,n);for(var r=!C(t)&&m.keys(t),i=(r||t).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=e(t[a],a,t)}return o};var T=function(t){var e=function(e,n,r,i){var o=!C(e)&&m.keys(e),s=(o||e).length,a=t>0?0:s-1;for(i||(r=e[o?o[a]:a],a+=t);a>=0&&a<s;a+=t){var u=o?o[a]:a;r=n(r,e[u],u,e)}return r};return function(t,n,r,i){var o=arguments.length>=3;return e(t,b(n,i,4),r,o)}};m.reduce=m.foldl=m.inject=T(1),m.reduceRight=m.foldr=T(-1),m.find=m.detect=function(t,e,n){var r=(C(t)?m.findIndex:m.findKey)(t,e,n);if(void 0!==r&&-1!==r)return t[r]},m.filter=m.select=function(t,e,n){var r=[];return e=x(e,n),m.each(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r},m.reject=function(t,e,n){return m.filter(t,m.negate(x(e)),n)},m.every=m.all=function(t,e,n){e=x(e,n);for(var r=!C(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(!e(t[s],s,t))return!1}return!0},m.some=m.any=function(t,e,n){e=x(e,n);for(var r=!C(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(e(t[s],s,t))return!0}return!1},m.contains=m.includes=m.include=function(t,e,n,r){return C(t)||(t=m.values(t)),("number"!=typeof n||r)&&(n=0),m.indexOf(t,e,n)>=0},m.invoke=w((function(t,e,n){var r,i;return m.isFunction(e)?i=e:m.isArray(e)&&(r=e.slice(0,-1),e=e[e.length-1]),m.map(t,(function(t){var o=i;if(!o){if(r&&r.length&&(t=S(t,r)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))})),m.pluck=function(t,e){return m.map(t,m.property(e))},m.where=function(t,e){return m.filter(t,m.matcher(e))},m.findWhere=function(t,e){return m.find(t,m.matcher(e))},m.max=function(t,e,n){var r,i,o=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,u=(t=C(t)?t:m.values(t)).length;a<u;a++)null!=(r=t[a])&&r>o&&(o=r);else e=x(e,n),m.each(t,(function(t,n,r){((i=e(t,n,r))>s||i===-1/0&&o===-1/0)&&(o=t,s=i)}));return o},m.min=function(t,e,n){var r,i,o=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,u=(t=C(t)?t:m.values(t)).length;a<u;a++)null!=(r=t[a])&&r<o&&(o=r);else e=x(e,n),m.each(t,(function(t,n,r){((i=e(t,n,r))<s||i===1/0&&o===1/0)&&(o=t,s=i)}));return o},m.shuffle=function(t){return m.sample(t,1/0)},m.sample=function(t,e,n){if(null==e||n)return C(t)||(t=m.values(t)),t[m.random(t.length-1)];var r=C(t)?m.clone(t):m.values(t),i=P(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,s=0;s<e;s++){var a=m.random(s,o),u=r[s];r[s]=r[a],r[a]=u}return r.slice(0,e)},m.sortBy=function(t,e,n){var r=0;return e=x(e,n),m.pluck(m.map(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")};var N=function(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=x(r,i),m.each(n,(function(e,i){var s=r(e,i,n);t(o,e,s)})),o}};m.groupBy=N((function(t,e,n){k(t,n)?t[n].push(e):t[n]=[e]})),m.indexBy=N((function(t,e,n){t[n]=e})),m.countBy=N((function(t,e,n){k(t,n)?t[n]++:t[n]=1}));var L=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;m.toArray=function(t){return t?m.isArray(t)?l.call(t):m.isString(t)?t.match(L):C(t)?m.map(t,m.identity):m.values(t):[]},m.size=function(t){return null==t?0:C(t)?t.length:m.keys(t).length},m.partition=N((function(t,e,n){t[n?0:1].push(e)}),!0),m.first=m.head=m.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:m.initial(t,t.length-e)},m.initial=function(t,e,n){return l.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},m.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:m.rest(t,Math.max(0,t.length-e))},m.rest=m.tail=m.drop=function(t,e,n){return l.call(t,null==e||n?1:e)},m.compact=function(t){return m.filter(t,Boolean)};var M=function(t,e,n,r){for(var i=(r=r||[]).length,o=0,s=P(t);o<s;o++){var a=t[o];if(C(a)&&(m.isArray(a)||m.isArguments(a)))if(e)for(var u=0,c=a.length;u<c;)r[i++]=a[u++];else M(a,e,n,r),i=r.length;else n||(r[i++]=a)}return r};m.flatten=function(t,e){return M(t,e,!1)},m.without=w((function(t,e){return m.difference(t,e)})),m.uniq=m.unique=function(t,e,n,r){m.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=x(n,r));for(var i=[],o=[],s=0,a=P(t);s<a;s++){var u=t[s],c=n?n(u,s,t):u;e&&!n?(s&&o===c||i.push(u),o=c):n?m.contains(o,c)||(o.push(c),i.push(u)):m.contains(i,u)||i.push(u)}return i},m.union=w((function(t){return m.uniq(M(t,!0,!0))})),m.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=P(t);r<i;r++){var o=t[r];if(!m.contains(e,o)){var s;for(s=1;s<n&&m.contains(arguments[s],o);s++);s===n&&e.push(o)}}return e},m.difference=w((function(t,e){return e=M(e,!0,!0),m.filter(t,(function(t){return!m.contains(e,t)}))})),m.unzip=function(t){for(var e=t&&m.max(t,P).length||0,n=Array(e),r=0;r<e;r++)n[r]=m.pluck(t,r);return n},m.zip=w(m.unzip),m.object=function(t,e){for(var n={},r=0,i=P(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n};var O=function(t){return function(e,n,r){n=x(n,r);for(var i=P(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}};m.findIndex=O(1),m.findLastIndex=O(-1),m.sortedIndex=function(t,e,n,r){for(var i=(n=x(n,r,1))(e),o=0,s=P(t);o<s;){var a=Math.floor((o+s)/2);n(t[a])<i?o=a+1:s=a}return o};var I=function(t,e,n){return function(r,i,o){var s=0,a=P(r);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(l.call(r,s,a),m.isNaN))>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&o<a;o+=t)if(r[o]===i)return o;return-1}};m.indexOf=I(1,m.findIndex,m.sortedIndex),m.lastIndexOf=I(-1,m.findLastIndex),m.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i},m.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(l.call(t,r,r+=e));return n};var R=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=_(t.prototype),s=t.apply(o,i);return m.isObject(s)?s:o};m.bind=w((function(t,e,n){if(!m.isFunction(t))throw new TypeError("Bind must be called on a function");var r=w((function(i){return R(t,r,e,this,n.concat(i))}));return r})),m.partial=w((function(t,e){var n=m.partial.placeholder,r=function(){for(var i=0,o=e.length,s=Array(o),a=0;a<o;a++)s[a]=e[a]===n?arguments[i++]:e[a];for(;i<arguments.length;)s.push(arguments[i++]);return R(t,r,this,this,s)};return r})),m.partial.placeholder=m,m.bindAll=w((function(t,e){var n=(e=M(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=m.bind(t[r],t)}})),m.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return k(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},m.delay=w((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),m.defer=m.partial(m.delay,m,1),m.throttle=function(t,e,n){var r,i,o,s,a=0;n||(n={});var u=function(){a=!1===n.leading?0:m.now(),r=null,s=t.apply(i,o),r||(i=o=null)},c=function(){var c=m.now();a||!1!==n.leading||(a=c);var l=e-(c-a);return i=this,o=arguments,l<=0||l>e?(r&&(clearTimeout(r),r=null),a=c,s=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(u,l)),s};return c.cancel=function(){clearTimeout(r),a=0,r=i=o=null},c},m.debounce=function(t,e,n){var r,i,o=function(e,n){r=null,n&&(i=t.apply(e,n))},s=w((function(s){if(r&&clearTimeout(r),n){var a=!r;r=setTimeout(o,e),a&&(i=t.apply(this,s))}else r=m.delay(o,e,this,s);return i}));return s.cancel=function(){clearTimeout(r),r=null},s},m.wrap=function(t,e){return m.partial(e,t)},m.negate=function(t){return function(){return!t.apply(this,arguments)}},m.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},m.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},m.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},m.once=m.partial(m.before,2),m.restArguments=w;var B=!{toString:null}.propertyIsEnumerable("toString"),D=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],j=function(t,e){var n=D.length,r=t.constructor,i=m.isFunction(r)&&r.prototype||a,o="constructor";for(k(t,o)&&!m.contains(e,o)&&e.push(o);n--;)(o=D[n])in t&&t[o]!==i[o]&&!m.contains(e,o)&&e.push(o)};m.keys=function(t){if(!m.isObject(t))return[];if(p)return p(t);var e=[];for(var n in t)k(t,n)&&e.push(n);return B&&j(t,e),e},m.allKeys=function(t){if(!m.isObject(t))return[];var e=[];for(var n in t)e.push(n);return B&&j(t,e),e},m.values=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},m.mapObject=function(t,e,n){e=x(e,n);for(var r=m.keys(t),i=r.length,o={},s=0;s<i;s++){var a=r[s];o[a]=e(t[a],a,t)}return o},m.pairs=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},m.invert=function(t){for(var e={},n=m.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},m.functions=m.methods=function(t){var e=[];for(var n in t)m.isFunction(t[n])&&e.push(n);return e.sort()};var V=function(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=t(o),a=s.length,u=0;u<a;u++){var c=s[u];e&&void 0!==n[c]||(n[c]=o[c])}return n}};m.extend=V(m.allKeys),m.extendOwn=m.assign=V(m.keys),m.findKey=function(t,e,n){e=x(e,n);for(var r,i=m.keys(t),o=0,s=i.length;o<s;o++)if(e(t[r=i[o]],r,t))return r};var F,z,U=function(t,e,n){return e in n};m.pick=w((function(t,e){var n={},r=e[0];if(null==t)return n;m.isFunction(r)?(e.length>1&&(r=b(r,e[1])),e=m.allKeys(t)):(r=U,e=M(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var s=e[i],a=t[s];r(a,s,t)&&(n[s]=a)}return n})),m.omit=w((function(t,e){var n,r=e[0];return m.isFunction(r)?(r=m.negate(r),e.length>1&&(n=e[1])):(e=m.map(M(e,!1,!1),String),r=function(t,n){return!m.contains(e,n)}),m.pick(t,r,n)})),m.defaults=V(m.allKeys,!0),m.create=function(t,e){var n=_(t);return e&&m.extendOwn(n,e),n},m.clone=function(t){return m.isObject(t)?m.isArray(t)?t.slice():m.extend({},t):t},m.tap=function(t,e){return e(t),t},m.isMatch=function(t,e){var n=m.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var s=n[o];if(e[s]!==i[s]||!(s in i))return!1}return!0},F=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"===i||"object"===i||"object"==typeof e)&&z(t,e,n,r)},z=function(t,e,n,r){t instanceof m&&(t=t._wrapped),e instanceof m&&(e=e._wrapped);var i=h.call(t);if(i!==h.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return u.valueOf.call(t)===u.valueOf.call(e)}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(m.isFunction(s)&&s instanceof s&&m.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var c=(n=n||[]).length;c--;)if(n[c]===t)return r[c]===e;if(n.push(t),r.push(e),o){if((c=t.length)!==e.length)return!1;for(;c--;)if(!F(t[c],e[c],n,r))return!1}else{var l,f=m.keys(t);if(c=f.length,m.keys(e).length!==c)return!1;for(;c--;)if(l=f[c],!k(e,l)||!F(t[l],e[l],n,r))return!1}return n.pop(),r.pop(),!0},m.isEqual=function(t,e){return F(t,e)},m.isEmpty=function(t){return null==t||(C(t)&&(m.isArray(t)||m.isString(t)||m.isArguments(t))?0===t.length:0===m.keys(t).length)},m.isElement=function(t){return!(!t||1!==t.nodeType)},m.isArray=d||function(t){return"[object Array]"===h.call(t)},m.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},m.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(t){m["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}})),m.isArguments(arguments)||(m.isArguments=function(t){return k(t,"callee")});var G=i.document&&i.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof G&&(m.isFunction=function(t){return"function"==typeof t||!1}),m.isFinite=function(t){return!m.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},m.isNaN=function(t){return m.isNumber(t)&&isNaN(t)},m.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===h.call(t)},m.isNull=function(t){return null===t},m.isUndefined=function(t){return void 0===t},m.has=function(t,e){if(!m.isArray(e))return k(t,e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(null==t||!f.call(t,i))return!1;t=t[i]}return!!n},m.noConflict=function(){return i._=o,this},m.identity=function(t){return t},m.constant=function(t){return function(){return t}},m.noop=function(){},m.property=function(t){return m.isArray(t)?function(e){return S(e,t)}:A(t)},m.propertyOf=function(t){return null==t?function(){}:function(e){return m.isArray(e)?S(t,e):t[e]}},m.matcher=m.matches=function(t){return t=m.extendOwn({},t),function(e){return m.isMatch(e,t)}},m.times=function(t,e,n){var r=Array(Math.max(0,t));e=b(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},m.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},m.now=Date.now||function(){return(new Date).getTime()};var q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},H=m.invert(q),W=function(t){var e=function(e){return t[e]},n="(?:"+m.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};m.escape=W(q),m.unescape=W(H),m.result=function(t,e,n){m.isArray(e)||(e=[e]);var r=e.length;if(!r)return m.isFunction(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=m.isFunction(o)?o.call(t):o}return t};var $=0;m.uniqueId=function(t){var e=++$+"";return t?t+e:e},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var X=/(.)^/,Y={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},J=/\\|'|\r|\n|\u2028|\u2029/g,Z=function(t){return"\\"+Y[t]};m.template=function(t,e,n){!e&&n&&(e=n),e=m.defaults({},e,m.templateSettings);var r,i=RegExp([(e.escape||X).source,(e.interpolate||X).source,(e.evaluate||X).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(i,(function(e,n,r,i,a){return s+=t.slice(o,a).replace(J,Z),o=a+e.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(s+="';\n"+i+"\n__p+='"),e})),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(e.variable||"obj","_",s)}catch(t){throw t.source=s,t}var a=function(t){return r.call(this,t,m)},u=e.variable||"obj";return a.source="function("+u+"){\n"+s+"}",a},m.chain=function(t){var e=m(t);return e._chain=!0,e};var K=function(t,e){return t._chain?m(e).chain():e};m.mixin=function(t){return m.each(m.functions(t),(function(e){var n=m[e]=t[e];m.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),K(this,n.apply(m,t))}})),m},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=s[t];m.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],K(this,n)}})),m.each(["concat","join","slice"],(function(t){var e=s[t];m.prototype[t]=function(){return K(this,e.apply(this._wrapped,arguments))}})),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return String(this._wrapped)},void 0===(r=function(){return m}.apply(e,[]))||(t.exports=r)}()}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t={};n.r(t),n.d(t,{ellipseWithEllipse:()=>Ot,ellipseWithLine:()=>Mt,exists:()=>Nt,lineWithLine:()=>Lt,pathWithEllipse:()=>$t,pathWithLine:()=>Wt,pathWithPath:()=>Zt,pathWithPolygon:()=>Jt,pathWithPolyline:()=>Yt,pathWithRect:()=>Xt,polygonWithEllipse:()=>Ut,polygonWithLine:()=>zt,polygonWithPolygon:()=>Ht,polygonWithPolyline:()=>qt,polygonWithRect:()=>Gt,polylineWithEllipse:()=>jt,polylineWithLine:()=>Dt,polylineWithPolyline:()=>Ft,polylineWithRect:()=>Vt,rectWithEllipse:()=>Rt,rectWithLine:()=>It,rectWithRect:()=>Bt});var e={};n.r(e),n.d(e,{Curve:()=>pt,Ellipse:()=>G,Line:()=>rt,Path:()=>vt,Point:()=>j,Polygon:()=>Tt,Polyline:()=>ut,Rect:()=>Q,bezier:()=>Ct,ellipse:()=>q,intersection:()=>se,line:()=>it,normalizeAngle:()=>v,point:()=>V,random:()=>x,rect:()=>tt,scale:()=>g,snapToGrid:()=>m,toDeg:()=>y,toRad:()=>b,types:()=>P});var r={};n.r(r),n.d(r,{absolute:()=>lr,bottom:()=>vr,ellipse:()=>yr,ellipseSpread:()=>mr,fn:()=>hr,left:()=>dr,line:()=>fr,right:()=>pr,top:()=>gr});var i={};n.r(i),n.d(i,{bottom:()=>Cr,inside:()=>Mr,insideOriented:()=>Lr,left:()=>Sr,manual:()=>kr,outside:()=>Nr,outsideOriented:()=>Tr,radial:()=>Or,radialOriented:()=>Ir,right:()=>Er,top:()=>Pr});var o={};n.r(o),n.d(o,{manhattan:()=>Mi,metro:()=>Ii,normal:()=>Kr,oneSide:()=>Qr,orthogonal:()=>pi});var s={};n.r(s),n.d(s,{curve:()=>Xi,jumpover:()=>Ui,normal:()=>Gi,rounded:()=>qi,smooth:()=>Hi});var a={};n.r(a),n.d(a,{addClass:()=>Mu,mask:()=>Tu,opacity:()=>Nu,stroke:()=>Pu});var u={};n.r(u),n.d(u,{connectionClosest:()=>ju,connectionLength:()=>Iu,connectionPerpendicular:()=>Du,connectionRatio:()=>Ou,resolveRef:()=>Ru});var c={};n.r(c),n.d(c,{anchor:()=>Uu,bbox:()=>Gu,boundary:()=>Hu,rectangle:()=>qu});var l={};n.r(l),n.d(l,{bottom:()=>Yu,bottomLeft:()=>tc,bottomRight:()=>ec,center:()=>$u,left:()=>Ju,midSide:()=>rc,modelCenter:()=>ic,perpendicular:()=>nc,right:()=>Zu,top:()=>Xu,topLeft:()=>Ku,topRight:()=>Qu});var h={};n.r(h),n.d(h,{Addition:()=>zs,AdditionConst:()=>wa,AdditionConstView:()=>_a,AdditionView:()=>Us,And:()=>ss,AndReduce:()=>xs,AndReduceView:()=>ws,AndView:()=>as,Arith:()=>Ts,Arith11:()=>Ns,Arith21:()=>Ls,ArithConst:()=>va,BaseCompare:()=>Is,BaseCompareConst:()=>ya,BitExtend:()=>Ya,BitExtendView:()=>Ja,Box:()=>_o,BoxView:()=>Ao,BusGroup:()=>ou,BusGroupView:()=>su,BusRegroup:()=>ru,BusRegroupView:()=>iu,BusSlice:()=>eu,BusSliceView:()=>nu,BusUngroup:()=>au,BusUngroupView:()=>uu,Button:()=>No,ButtonView:()=>Lo,Clock:()=>Uo,ClockView:()=>Go,Compare:()=>Rs,CompareConst:()=>ba,Constant:()=>Fo,ConstantView:()=>zo,Dff:()=>_u,DffView:()=>Au,Division:()=>$s,DivisionConst:()=>Pa,DivisionConstView:()=>Ca,DivisionView:()=>Xs,Eq:()=>ha,EqCompare:()=>Bs,EqCompareConst:()=>xa,EqConst:()=>Ha,EqConstView:()=>Wa,EqView:()=>fa,FSM:()=>dc,FSMView:()=>pc,Gate:()=>yo,Gate11:()=>Zo,GateReduce:()=>Qo,GateSVG:()=>Jo,GateView:()=>bo,GateX1:()=>Ko,Ge:()=>ca,GeConst:()=>Ga,GeConstView:()=>qa,GeView:()=>la,GenMux:()=>pu,GenMuxView:()=>gu,Gt:()=>aa,GtConst:()=>za,GtConstView:()=>Ua,GtView:()=>ua,IO:()=>Eo,IOView:()=>Po,Input:()=>Co,InputView:()=>To,Lamp:()=>Bo,LampView:()=>Do,Le:()=>oa,LeConst:()=>Va,LeConstView:()=>Fa,LeView:()=>sa,Lt:()=>ra,LtConst:()=>Da,LtConstView:()=>ja,LtView:()=>ia,Memory:()=>ku,MemoryView:()=>Su,Modulo:()=>Ys,ModuloConst:()=>Ta,ModuloConstView:()=>Na,ModuloView:()=>Js,Multiplication:()=>Hs,MultiplicationConst:()=>Sa,MultiplicationConstView:()=>Ea,MultiplicationView:()=>Ws,Mux:()=>vu,Mux1Hot:()=>yu,Mux1HotView:()=>bu,MuxSparse:()=>xu,MuxSparseView:()=>wu,MuxView:()=>mu,Nand:()=>ls,NandReduce:()=>_s,NandReduceView:()=>As,NandView:()=>hs,Ne:()=>da,NeConst:()=>$a,NeConstView:()=>Xa,NeView:()=>pa,Negation:()=>Ds,NegationView:()=>js,Nor:()=>us,NorReduce:()=>ys,NorReduceView:()=>bs,NorView:()=>cs,Not:()=>ns,NotView:()=>rs,NumBase:()=>ko,NumBaseView:()=>So,NumDisplay:()=>jo,NumDisplayView:()=>Vo,NumEntry:()=>Mo,NumEntryView:()=>Oo,OpConst:()=>ga,Or:()=>is,OrReduce:()=>vs,OrReduceView:()=>ms,OrView:()=>os,Output:()=>Io,OutputView:()=>Ro,Power:()=>Zs,PowerConst:()=>La,PowerConstView:()=>Ma,PowerView:()=>Ks,Repeater:()=>ts,RepeaterView:()=>es,Shift:()=>Os,ShiftConst:()=>ma,ShiftLeft:()=>Qs,ShiftLeftConst:()=>Oa,ShiftLeftConstView:()=>Ia,ShiftLeftView:()=>ta,ShiftRight:()=>ea,ShiftRightConst:()=>Ra,ShiftRightConstView:()=>Ba,ShiftRightView:()=>na,SignExtend:()=>Qa,SignExtendView:()=>tu,Subcircuit:()=>fu,SubcircuitView:()=>du,Subtraction:()=>Gs,SubtractionConst:()=>Aa,SubtractionConstView:()=>ka,SubtractionView:()=>qs,UnaryPlus:()=>Vs,UnaryPlusView:()=>Fs,Wire:()=>xo,WireView:()=>wo,Xnor:()=>ps,XnorReduce:()=>Es,XnorReduceView:()=>Ps,XnorView:()=>gs,Xor:()=>fs,XorReduce:()=>ks,XorReduceView:()=>Ss,XorView:()=>ds,ZeroExtend:()=>Za,ZeroExtendView:()=>Ka,portGroupAttrs:()=>mo});const{round:f,floor:d,PI:p}=Math,g={linear:function(t,e,n){var r=t[1]-t[0],i=e[1]-e[0];return(n-t[0])/r*i+e[0]||0}},v=function(t){return t%360+(t<0?360:0)},m=function(t,e){return e*f(t/e)},y=function(t){return 180*t/p%360},b=function(t,e){return(t=(e=e||!1)?t:t%360)*p/180},x=function(t,e){if(void 0===e)e=void 0===t?1:t,t=0;else if(e<t){const n=t;t=e,e=n}return d(Math.random()*(e-t+1)+t)},{cos:w,sin:_,atan2:A}=Math,k=function(t,e){var n=b(t.y),r=b(e.y),i=t.x,o=e.x,s=b(o-i),a=_(s)*w(r),u=w(n)*_(r)-_(n)*w(r)*w(s),c=y(A(a,u))-22.5;return c<0&&(c+=360),["NE","E","SE","S","SW","W","NW","N"][c=parseInt(c/45)]},S=function(t,e){var n=t.x,r=t.y;return(n-=e.x)*n+(r-=e.y)*r},E=function(t,e){return Math.sqrt(S(t,e))},P={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:C,cos:T,sin:N,sqrt:L,min:M,max:O,atan2:I,round:R,pow:B,PI:D}=Math,j=function(t,e){if(!(this instanceof j))return new j(t,e);if("string"==typeof t){var n=t.split(-1===t.indexOf("@")?" ":"@");t=parseFloat(n[0]),e=parseFloat(n[1])}else Object(t)===t&&(e=t.y,t=t.x);this.x=void 0===t?0:t,this.y=void 0===e?0:e};j.fromPolar=function(t,e,n){n=new j(n);var r=C(t*T(e)),i=C(t*N(e)),o=v(y(e));return o<90?i=-i:o<180?(r=-r,i=-i):o<270&&(r=-r),new j(n.x+r,n.y+i)},j.random=function(t,e,n,r){return new j(x(t,e),x(n,r))},j.prototype={type:P.Point,chooseClosest:function(t){var e=t.length;if(1===e)return new j(t[0]);for(var n=null,r=1/0,i=0;i<e;i++){var o=new j(t[i]),s=this.squaredDistance(o);s<r&&(n=o,r=s)}return n},adhereToRect:function(t){return t.containsPoint(this)||(this.x=M(O(this.x,t.x),t.x+t.width),this.y=M(O(this.y,t.y),t.y+t.height)),this},angleBetween:function(t,e){var n=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return n<0&&(n+=360),n},bearing:function(t){return k(this,t)},changeInAngle:function(t,e,n){return this.clone().offset(-t,-e).theta(n)-this.theta(n)},clone:function(){return new j(this)},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),new j(this.x-(t||0),this.y-(e||0))},distance:function(t){return E(this,t)},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,e){var n=this.x,r=this.y;return new j((1-e)*n+e*t.x,(1-e)*r+e*t.y)},magnitude:function(){return L(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return C(t.x-this.x)+C(t.y-this.y)},move:function(t,e){var n=b(new j(t).theta(this));return this.offset(T(n)*e,-N(n)*e)},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return new j(t).move(this,this.distance(t))},rotate:function(t,e){if(0===e)return this;t=t||new j(0,0),e=b(v(-e));var n=T(e),r=N(e),i=n*(this.x-t.x)-r*(this.y-t.y)+t.x,o=r*(this.x-t.x)+n*(this.y-t.y)+t.y;return this.x=i,this.y=o,this},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=B(10,t)}return this.x=R(this.x*e)/e,this.y=R(this.y*e)/e,this},scale:function(t,e,n){return n=n&&new j(n)||new j(0,0),this.x=n.x+t*(this.x-n.x),this.y=n.y+e*(this.y-n.y),this},snapToGrid:function(t,e){return this.x=m(this.x,t),this.y=m(this.y,e||t),this},squaredDistance:function(t){return S(this,t)},theta:function(t){var e=-((t=new j(t)).y-this.y),n=t.x-this.x,r=I(e,n);return r<0&&(r=2*D+r),180*r/D},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new j(t)||new j(0,0);var e=this.x,n=this.y;return this.x=L((e-t.x)*(e-t.x)+(n-t.y)*(n-t.y)),this.y=b(t.theta(new j(e,n))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x=t||0,this.y=e||0,this},vectorAngle:function(t){return new j(0,0).angleBetween(this,t)}},j.prototype.translate=j.prototype.offset;const V=j,{sqrt:F,round:z,pow:U}=Math,G=function(t,e,n){return this instanceof G?t instanceof G?new G(new j(t.x,t.y),t.a,t.b):(t=new j(t),this.x=t.x,this.y=t.y,this.a=e,void(this.b=n)):new G(t,e,n)};G.fromRect=function(t){return t=new Q(t),new G(t.center(),t.width/2,t.height/2)},G.prototype={type:P.Ellipse,bbox:function(){return new Q(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new j(this.x,this.y)},clone:function(){return new G(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.a+=2*t,this.b+=2*e,this},intersectionWithLine:function(t){var e=[],n=t.start,r=t.end,i=this.a,o=this.b,s=t.vector(),a=n.difference(new j(this)),u=new j(s.x/(i*i),s.y/(o*o)),c=new j(a.x/(i*i),a.y/(o*o)),l=s.dot(u),h=s.dot(c),f=h*h-l*(a.dot(c)-1);if(f<0)return null;if(f>0){var d=F(f),p=(-h-d)/l,g=(-h+d)/l;if((p<0||1<p)&&(g<0||1<g))return null;0<=p&&p<=1&&e.push(n.lerp(r,p)),0<=g&&g<=1&&e.push(n.lerp(r,g))}else{var v=-h/l;if(!(0<=v&&v<=1))return null;e.push(n.lerp(r,v))}return e},intersectionWithLineFromCenterToPoint:function(t,e){t=new j(t),e&&t.rotate(new j(this.x,this.y),e);var n,r=t.x-this.x,i=t.y-this.y;if(0===r)return n=this.bbox().pointNearestToPoint(t),e?n.rotate(new j(this.x,this.y),-e):n;var o=i/r,s=o*o,a=this.a*this.a,u=this.b*this.b,c=F(1/(1/a+s/u)),l=o*(c=r<0?-c:c);return n=new j(this.x+c,this.y+l),e?n.rotate(new j(this.x,this.y),-e):n},normalizedDistance:function(t){var e=t.x,n=t.y,r=this.a,i=this.b,o=this.x,s=this.y;return(e-o)*(e-o)/(r*r)+(n-s)*(n-s)/(i*i)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=U(10,t)}return this.x=z(this.x*e)/e,this.y=z(this.y*e)/e,this.a=z(this.a*e)/e,this.b=z(this.b*e)/e,this},tangentTheta:function(t){var e,n,r=t.x,i=t.y,o=this.a,s=this.b,a=this.bbox().center(),u=a.x,c=a.y,l=r>a.x+o/2,h=r<a.x-o/2;return l||h?n=o*o/(r-u)-o*o*(i-c)*((e=r>a.x?i-30:i+30)-c)/(s*s*(r-u))+u:e=s*s/(i-c)-s*s*(r-u)*((n=i>a.y?r+30:r-30)-u)/(o*o*(i-c))+c,new j(n,e).theta(t)},toString:function(){return new j(this.x,this.y).toString()+" "+this.a+" "+this.b}};const q=G,{abs:H,cos:W,sin:X,min:Y,max:J,round:Z,pow:K}=Math,Q=function(t,e,n,r){if(!(this instanceof Q))return new Q(t,e,n,r);Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=void 0===t?0:t,this.y=void 0===e?0:e,this.width=void 0===n?0:n,this.height=void 0===r?0:r};Q.fromEllipse=function(t){return t=new G(t),new Q(t.x-t.a,t.y-t.b,2*t.a,2*t.b)},Q.fromPointUnion=function(...t){if(0===t.length)return null;const e=new j;let n,r,i,o;n=r=1/0,i=o=-1/0;for(let s=0;s<t.length;s++){e.update(t[s]);const a=e.x,u=e.y;a<n&&(n=a),a>i&&(i=a),u<r&&(r=u),u>o&&(o=u)}return new Q(n,r,i-n,o-r)},Q.fromRectUnion=function(...t){if(0===t.length)return null;const e=new Q;let n,r,i,o;n=r=1/0,i=o=-1/0;for(let s=0;s<t.length;s++){e.update(t[s]);const a=e.x,u=e.y,c=a+e.width,l=u+e.height;a<n&&(n=a),c>i&&(i=c),u<r&&(r=u),l>o&&(o=l)}return new Q(n,r,i-n,o-r)},Q.prototype={type:P.Rect,bbox:function(t){return this.clone().rotateAroundCenter(t)},rotateAroundCenter:function(t){if(!t)return this;const{width:e,height:n}=this,r=b(t),i=H(X(r)),o=H(W(r)),s=e*o+n*i,a=e*i+n*o;return this.x+=(e-s)/2,this.y+=(n-a)/2,this.width=s,this.height=a,this},bottomLeft:function(){return new j(this.x,this.y+this.height)},bottomLine:function(){return new rt(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new j(this.x+this.width/2,this.y+this.height)},center:function(){return new j(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new Q(this)},containsPoint:function(t){return(t=new j(t)).x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=new Q(this).normalize(),n=new Q(t).normalize(),r=e.width,i=e.height,o=n.width,s=n.height;if(!(r&&i&&o&&s))return!1;var a=e.x,u=e.y,c=n.x,l=n.y;return o+=c,r+=a,s+=l,i+=u,a<=c&&o<=r&&u<=l&&s<=i},corner:function(){return new j(this.x+this.width,this.y+this.height)},equals:function(t){var e=new Q(this).normalize(),n=new Q(t).normalize();return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},intersect:function(t){var e=this.origin(),n=this.corner(),r=t.origin(),i=t.corner();if(i.x<=e.x||i.y<=e.y||r.x>=n.x||r.y>=n.y)return null;var o=J(e.x,r.x),s=J(e.y,r.y);return new Q(o,s,Y(n.x,i.x)-o,Y(n.y,i.y)-s)},intersectionWithLine:function(t){var e,n,r=this,i=[r.topLine(),r.rightLine(),r.bottomLine(),r.leftLine()],o=[],s=[],a=i.length;for(n=0;n<a;n++)null!==(e=t.intersect(i[n]))&&s.indexOf(e.toString())<0&&(o.push(e),s.push(e.toString()));return o.length>0?o:null},intersectionWithLineFromCenterToPoint:function(t,e){t=new j(t);var n,r=new j(this.x+this.width/2,this.y+this.height/2);e&&t.rotate(r,e);for(var i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],o=new rt(r,t),s=i.length-1;s>=0;--s){var a=i[s].intersection(o);if(null!==a){n=a;break}}return n&&e&&n.rotate(r,-e),n},leftLine:function(){return new rt(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new j(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,e){var n,r,i,o,s,a,u,c;t=new Q(t),e||(e=t.center());var l=e.x,h=e.y;n=r=i=o=s=a=u=c=1/0;var f=t.topLeft();f.x<l&&(n=(this.x-l)/(f.x-l)),f.y<h&&(s=(this.y-h)/(f.y-h));var d=t.bottomRight();d.x>l&&(r=(this.x+this.width-l)/(d.x-l)),d.y>h&&(a=(this.y+this.height-h)/(d.y-h));var p=t.topRight();p.x>l&&(i=(this.x+this.width-l)/(p.x-l)),p.y<h&&(u=(this.y-h)/(p.y-h));var g=t.bottomLeft();return g.x<l&&(o=(this.x-l)/(g.x-l)),g.y>h&&(c=(this.y+this.height-h)/(g.y-h)),{sx:Y(n,r,i,o),sy:Y(s,a,u,c)}},maxRectUniformScaleToFit:function(t,e){var n=this.maxRectScaleToFit(t,e);return Y(n.sx,n.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,n=this.width,r=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,r=-this.height),this.x=t,this.y=e,this.width=n,this.height=r,this},offset:function(t,e){return j.prototype.offset.call(this,t,e)},origin:function(){return new j(this.x,this.y)},pointNearestToPoint:function(t){if(t=new j(t),this.containsPoint(t))switch(this.sideNearestToPoint(t)){case"right":return new j(this.x+this.width,t.y);case"left":return new j(this.x,t.y);case"bottom":return new j(t.x,this.y+this.height);case"top":return new j(t.x,this.y)}return t.adhereToRect(this)},rightLine:function(){return new rt(this.topRight(),this.bottomRight())},rightMiddle:function(){return new j(this.x+this.width,this.y+this.height/2)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=K(10,t)}return this.x=Z(this.x*e)/e,this.y=Z(this.y*e)/e,this.width=Z(this.width*e)/e,this.height=Z(this.height*e)/e,this},scale:function(t,e,n){return n=this.origin().scale(t,e,n),this.x=n.x,this.y=n.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){var e=(t=new j(t)).x-this.x,n=this.x+this.width-t.x,r=t.y-this.y,i=e,o="left";return n<i&&(i=n,o="right"),r<i&&(i=r,o="top"),this.y+this.height-t.y<i&&(o="bottom"),o},snapToGrid:function(t,e){var n=this.origin().snapToGrid(t,e),r=this.corner().snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new rt(this.topLeft(),this.topRight())},topMiddle:function(){return new j(this.x+this.width/2,this.y)},topRight:function(){return new j(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){return Q.fromRectUnion(this,t)},update:function(t,e,n,r){return Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0,this}},Q.prototype.bottomRight=Q.prototype.corner,Q.prototype.topLeft=Q.prototype.origin,Q.prototype.translate=Q.prototype.offset;const tt=Q,{max:et,min:nt}=Math,rt=function(t,e){return this instanceof rt?t instanceof rt?new rt(t.start,t.end):(this.start=new j(t),void(this.end=new j(e))):new rt(t,e)};rt.prototype={type:P.Line,angle:function(){var t=new j(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=nt(this.start.x,this.end.x),e=nt(this.start.y,this.end.y),n=et(this.start.x,this.end.x),r=et(this.start.y,this.end.y);return new Q(t,e,n-t,r-e)},bearing:function(){return k(this.start,this.end)},clone:function(){return new rt(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var e=this.vector().dot(new rt(this.start,t).vector()),n=nt(1,et(0,e/this.squaredLength()));return n!=n?0:n},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var e=this.start,n=this.end;if(0!==e.cross(t,n))return!1;var r=this.length();return!(new rt(e,t).length()>r||new rt(t,n).length()>r)},divideAt:function(t){var e=this.pointAt(t);return[new rt(this.start,e),new rt(e,this.end)]},divideAtLength:function(t){var e=this.pointAtLength(t);return[new rt(this.start,e),new rt(e,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,e){if(t&&t.intersectionWithLine){var n=t.intersectionWithLine(this,e);return n&&t instanceof rt&&(n=n[0]),n}return null},intersectionWithLine:function(t){var e=new j(this.end.x-this.start.x,this.end.y-this.start.y),n=new j(t.end.x-t.start.x,t.end.y-t.start.y),r=e.x*n.y-e.y*n.x,i=new j(t.start.x-this.start.x,t.start.y-this.start.y),o=i.x*n.y-i.y*n.x,s=i.x*e.y-i.y*e.x;if(0===r||o*r<0||s*r<0)return null;if(r>0){if(o>r||s>r)return null}else if(o<r||s<r)return null;return[new j(this.start.x+o*e.x/r,this.start.y+o*e.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return E(this.start,this.end)},midpoint:function(){return new j((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){const e=this.clone();if(!this.isDifferentiable())return e;const{start:n,end:r}=e,i=n.clone().rotate(r,270),o=r.clone().rotate(n,90);return n.move(o,t),r.move(i,t),e},pointAt:function(t){var e=this.start,n=this.end;return t<=0?e.clone():t>=1?n.clone():e.lerp(n,t)},pointAtLength:function(t){var e=this.start,n=this.end,r=!0;t<0&&(r=!1,t=-t);var i=this.length();return t>=i?r?n.clone():e.clone():this.pointAt((r?t:i-t)/i)},pointOffset:function(t){t=new j(t);var e=this.start,n=this.end;return((n.x-e.x)*(t.y-e.y)-(n.y-e.y)*(t.x-e.x))/this.length()},rotate:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},round:function(t){return this.start.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.end.scale(t,e,n),this},setLength:function(t){var e=this.length();if(!e)return this;var n=t/e;return this.scale(n,n,this.start)},squaredLength:function(){return S(this.start,this.end)},tangentAt:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAt(t),i=new rt(e,n);return i.translate(r.x-e.x,r.y-e.y),i},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAtLength(t),i=new rt(e,n);return i.translate(r.x-e.x,r.y-e.y),i},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,e){return this.start.translate(t,e),this.end.translate(t,e),this},vector:function(){return new j(this.end.x-this.start.x,this.end.y-this.start.y)}},rt.prototype.intersection=rt.prototype.intersect;const it=rt;function ot(t){if(""===(t=t.trim()))return[];const e=[],n=t.split(/\s*,\s*|\s+/),r=n.length;for(let t=0;t<r;t+=2)e.push({x:+n[t],y:+n[t+1]});return e}function st(t){const e=t.length;if(0===e)return[];const n=[];for(let r=0;r<e;r++){const e=t[r].clone();n.push(e)}return n}function at(t){const{abs:e}=Math;var n,r,i,o=t.length;if(0===o)return[];for(n=0;n<o;n++)(void 0===i||t[n].y<i.y||t[n].y===i.y&&t[n].x>i.x)&&(i=t[n]);var s=[];for(n=0;n<o;n++){var a=i.theta(t[n]);0===a&&(a=360);var u=[t[n],n,a];s.push(u)}if(s.sort((function(t,e){var n=t[2]-e[2];return 0===n&&(n=e[1]-t[1]),n})),s.length>2){var c=s[s.length-1];s.unshift(c)}for(var l,h,f,d,p,g,v,m={},y=[];0!==s.length;)if(h=(l=s.pop())[0],!m.hasOwnProperty(l[0]+"@@"+l[1]))for(var b=!1;!b;)if(y.length<2)y.push(l),b=!0;else{d=(f=y.pop())[0];var x=(g=(p=y.pop())[0]).cross(d,h);if(x<0)y.push(p),y.push(f),y.push(l),b=!0;else if(0===x){var w=d.angleBetween(g,h);e(w-180)<1e-10||d.equals(h)||g.equals(d)?(m[f[0]+"@@"+f[1]]=d,y.push(p)):e((w+1)%360-1)<1e-10&&(y.push(p),s.push(f))}else m[f[0]+"@@"+f[1]]=d,y.push(p)}y.length>2&&y.pop();var _=-1;for(r=y.length,n=0;n<r;n++){var A=y[n][1];(void 0===v||A<v)&&(v=A,_=n)}var k=[];if(_>0){var S=y.slice(_),E=y.slice(0,_);k=S.concat(E)}else k=y;var P=[];for(r=k.length,n=0;n<r;n++)P.push(k[n][0]);return P}const ut=function(t){return this instanceof ut?"string"==typeof t?new ut.parse(t):void(this.points=Array.isArray(t)?t.map(j):[]):new ut(t)};ut.parse=function(t){return new ut(ot(t))},ut.fromRect=function(t){return new ut([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft(),t.topLeft()])},ut.prototype={type:P.Polyline,bbox:function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=this.points,o=i.length;if(0===o)return null;for(var s=0;s<o;s++){var a=i[s],u=a.x,c=a.y;u<t&&(t=u),u>e&&(e=u),c<n&&(n=c),c>r&&(r=c)}return new Q(t,n,e-t,r-n)},clone:function(){return new ut(st(this.points))},closestPoint:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},closestPointLength:function(t){var e,n=this.lengthPoints(),r=n.length;if(0===r)return 0;if(1===r)return 0;for(var i=1/0,o=0,s=r-1,a=0;a<s;a++){var u=new rt(n[a],n[a+1]),c=u.length(),l=u.closestPointNormalizedLength(t),h=u.pointAt(l).squaredDistance(t);h<i&&(i=h,e=o+l*c),o+=c}return e},closestPointNormalizedLength:function(t){var e=this.closestPointLength(t);if(0===e)return 0;var n=this.length();return 0===n?0:e/n},closestPointTangent:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},containsPoint:function(t){var e=this.points,n=e.length;if(0===n)return!1;for(var r=t.x,i=t.y,o=n-1,s=0,a=0,u=new rt,c=new rt,l=new j;s<n;s++){var h=e[o],f=e[s];if(t.equals(h))return!0;if(u.start=h,u.end=f,u.containsPoint(t))return!0;if(i<=h.y&&i>f.y||i>h.y&&i<=f.y){var d=h.x-r>f.x-r?h.x-r:f.x-r;d>=0&&(l.x=r+d,l.y=i,c.start=t,c.end=l,u.intersect(c)&&a++)}o=s}return a%2==1},close:function(){const{start:t,end:e,points:n}=this;return t&&e&&!t.equals(e)&&n.push(t.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new ut(at(this.points))},equals:function(t){if(!t)return!1;var e=this.points,n=t.points,r=e.length;if(n.length!==r)return!1;for(var i=0;i<r;i++){var o=e[i],s=t.points[i];if(!o.equals(s))return!1}return!0},intersectionWithLine:function(t){for(var e=new rt(t),n=[],r=this.lengthPoints(),i=new rt,o=0,s=r.length-1;o<s;o++){i.start=r[o],i.end=r[o+1];var a=e.intersectionWithLine(i);a&&n.push(a[0])}return n.length>0?n:null},isDifferentiable:function(){var t=this.points,e=t.length;if(0===e)return!1;for(var n=new rt,r=e-1,i=0;i<r;i++)if(n.start=t[i],n.end=t[i+1],n.isDifferentiable())return!0;return!1},length:function(){var t=this.lengthPoints(),e=t.length;if(0===e)return 0;for(var n=0,r=e-1,i=0;i<r;i++)n+=t[i].distance(t[i+1]);return n},pointAt:function(t){var e=this.lengthPoints(),n=e.length;if(0===n)return null;if(1===n)return e[0].clone();if(t<=0)return e[0].clone();if(t>=1)return e[n-1].clone();var r=this.length()*t;return this.pointAtLength(r)},pointAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(0===n)return null;if(1===n)return e[0].clone();var r=!0;t<0&&(r=!1,t=-t);for(var i=0,o=n-1,s=0;s<o;s++){var a=r?s:o-1-s,u=e[a],c=e[a+1],l=new rt(u,c),h=u.distance(c);if(t<=i+h)return l.pointAtLength((r?1:-1)*(t-i));i+=h}return(r?e[n-1]:e[0]).clone()},round:function(t){for(var e=this.points,n=e.length,r=0;r<n;r++)e[r].round(t);return this},scale:function(t,e,n){for(var r=this.points,i=r.length,o=0;o<i;o++)r[o].scale(t,e,n);return this},simplify:function(t={}){const e=this.points;if(e.length<3)return this;const n=t.threshold||0;let r=0;for(;e[r+2];){const t=r+1,i=r+2,o=e[r],s=e[t],a=e[i];new rt(o,a).closestPoint(s).distance(s)<=n?e.splice(t,1):r+=1}return this},tangentAt:function(t){var e=this.lengthPoints().length;if(0===e)return null;if(1===e)return null;t<0&&(t=0),t>1&&(t=1);var n=this.length()*t;return this.tangentAtLength(n)},tangentAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(0===n)return null;if(1===n)return null;var r,i=!0;t<0&&(i=!1,t=-t);for(var o=0,s=n-1,a=0;a<s;a++){var u=i?a:s-1-a,c=e[u],l=e[u+1],h=new rt(c,l),f=c.distance(l);if(h.isDifferentiable()){if(t<=o+f)return h.tangentAtLength((i?1:-1)*(t-o));r=h}o+=f}if(r){var d=i?1:0;return r.tangentAt(d)}return null},toString:function(){return this.points+""},translate:function(t,e){for(var n=this.points,r=n.length,i=0;i<r;i++)n[i].translate(t,e);return this},serialize:function(){var t=this.points,e=t.length;if(0===e)return"";for(var n="",r=0;r<e;r++){var i=t[r];n+=i.x+","+i.y+" "}return n.trim()}},Object.defineProperty(ut.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(ut.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.points.length;return 0===t?null:this.points[t-1]}});const{abs:ct,sqrt:lt,min:ht,max:ft,pow:dt}=Math,pt=function(t,e,n,r){return this instanceof pt?t instanceof pt?new pt(t.start,t.controlPoint1,t.controlPoint2,t.end):(this.start=new j(t),this.controlPoint1=new j(e),this.controlPoint2=new j(n),void(this.end=new j(r))):new pt(t,e,n,r)};function gt(t){var e,n,r=[];for(n=arguments.length,e=1;e<n;e++)r.push(arguments[e]);if(!t)throw new Error("Missing a parent object.");var i=Object.create(t);for(n=r.length,e=0;e<n;e++){var o,s,a=r[e];for(s in a)a.hasOwnProperty(s)&&(delete i[s],o=Object.getOwnPropertyDescriptor(a,s),Object.defineProperty(i,s,o))}return i}pt.throughPoints=function(){function t(t){var e=t.length,n=[],r=[],i=2;n[0]=t[0]/i;for(var o=1;o<e;o++)r[o]=1/i,i=(o<e-1?4:3.5)-r[o],n[o]=(t[o]-n[o-1])/i;for(o=1;o<e;o++)n[e-o-1]-=r[e-o]*n[e-o];return n}return function(e){if(!e||Array.isArray(e)&&e.length<2)throw new Error("At least 2 points are required");for(var n=function(e){var n,r=[],i=[],o=e.length-1;if(1==o)return r[0]=new j((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),i[0]=new j(2*r[0].x-e[0].x,2*r[0].y-e[0].y),[r,i];var s=[];for(n=1;n<o-1;n++)s[n]=4*e[n].x+2*e[n+1].x;s[0]=e[0].x+2*e[1].x,s[o-1]=(8*e[o-1].x+e[o].x)/2;var a=t(s);for(n=1;n<o-1;++n)s[n]=4*e[n].y+2*e[n+1].y;s[0]=e[0].y+2*e[1].y,s[o-1]=(8*e[o-1].y+e[o].y)/2;var u=t(s);for(n=0;n<o;n++)r.push(new j(a[n],u[n])),n<o-1?i.push(new j(2*e[n+1].x-a[n+1],2*e[n+1].y-u[n+1])):i.push(new j((e[o].x+a[o-1])/2,(e[o].y+u[o-1])/2));return[r,i]}(e),r=[],i=n[0].length,o=0;o<i;o++){var s=new j(n[0][o].x,n[0][o].y),a=new j(n[1][o].x,n[1][o].y);r.push(new pt(e[o],s,a,e[o+1]))}return r}}(),pt.prototype={type:P.Curve,bbox:function(){for(var t,e,n,r,i,o,s,a,u=this.start,c=this.controlPoint1,l=this.controlPoint2,h=this.end,f=u.x,d=u.y,p=c.x,g=c.y,v=l.x,m=l.y,y=h.x,b=h.y,x=new Array,w=new Array,_=[new Array,new Array],A=0;A<2;++A)if(0===A?(e=6*f-12*p+6*v,t=-3*f+9*p-9*v+3*y,n=3*p-3*f):(e=6*d-12*g+6*m,t=-3*d+9*g-9*m+3*b,n=3*g-3*d),ct(t)<1e-12){if(ct(e)<1e-12)continue;0<(r=-n/e)&&r<1&&w.push(r)}else a=lt(s=e*e-4*n*t),s<0||(0<(i=(-e+a)/(2*t))&&i<1&&w.push(i),0<(o=(-e-a)/(2*t))&&o<1&&w.push(o));for(var k,S,E,P=w.length,C=P;P--;)S=(k=1-(r=w[P]))*k*k*f+3*k*k*r*p+3*k*r*r*v+r*r*r*y,_[0][P]=S,E=k*k*k*d+3*k*k*r*g+3*k*r*r*m+r*r*r*b,_[1][P]=E,x[P]={X:S,Y:E};w[C]=0,w[C+1]=1,x[C]={X:f,Y:d},x[C+1]={X:y,Y:b},_[0][C]=f,_[1][C]=d,_[0][C+1]=y,_[1][C+1]=b,w.length=C+2,_[0].length=C+2,_[1].length=C+2,x.length=C+2;var T=ht.apply(null,_[0]),N=ht.apply(null,_[1]),L=ft.apply(null,_[0]),M=ft.apply(null,_[1]);return new Q(T,N,L-T,M-N)},clone:function(){return new pt(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,e){return this.pointAtT(this.closestPointT(t,e))},closestPointLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions};return this.lengthAtT(this.closestPointT(t,r),r)},closestPointNormalizedLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions},i=this.closestPointLength(t,r);if(!i)return 0;var o=this.length(r);return 0===o?0:i/o},closestPointT:function(t,e){for(var n,r,i,o,s,a,u,c=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l=void 0===e.subdivisions?this.getSubdivisions({precision:c}):e.subdivisions,h=l.length,f=h?1/h:0,d=0;d<h;d++){var p=l[d],g=p.start.distance(t),v=p.end.distance(t),m=g+v;(!u||m<u)&&(n=p,r=d*f,i=(d+1)*f,o=g,s=v,a=p.start.distance(p.end),u=m)}for(var y=dt(10,-c);;){var b=o?ct(o-s)/o:0,x=s?ct(o-s)/s:0;if(b<y||x<y||!o||o<a*y||!s||s<a*y)return o<=s?r:i;var w=n.divide(.5);f/=2;var _=w[0].start.distance(t),A=w[0].end.distance(t),k=_+A,S=w[1].start.distance(t),E=w[1].end.distance(t);k<=S+E?(n=w[0],i-=f,o=_,s=A):(n=w[1],r+=f,o=S,s=E)}},closestPointTangent:function(t,e){return this.tangentAtT(this.closestPointT(t,e))},containsPoint:function(t,e){return this.toPolyline(e).containsPoint(t)},divideAt:function(t,e){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var n=this.tAt(t,e);return this.divideAtT(n)},divideAtLength:function(t,e){var n=this.tAtLength(t,e);return this.divideAtT(n)},divideAtT:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return[new pt(e,e,e,e),new pt(e,n,r,i)];if(t>=1)return[new pt(e,n,r,i),new pt(i,i,i,i)];var o=this.getSkeletonPoints(t),s=o.startControlPoint1,a=o.startControlPoint2,u=o.divider,c=o.dividerControlPoint1,l=o.dividerControlPoint2;return[new pt(e,s,a,u),new pt(u,c,l,i)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:r.clone()};if(t>=1)return{startControlPoint1:n.clone(),startControlPoint2:r.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var o=new rt(e,n).pointAt(t),s=new rt(n,r).pointAt(t),a=new rt(r,i).pointAt(t),u=new rt(o,s).pointAt(t),c=new rt(s,a).pointAt(t);return{startControlPoint1:o,startControlPoint2:u,divider:new rt(u,c).pointAt(t),dividerControlPoint1:c,dividerControlPoint2:a}},getSubdivisions:function(t){var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,n=[new pt(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===e)return n;for(var r=this.endpointDistance(),i=dt(10,-e),o=0;;){o+=1;for(var s=[],a=n.length,u=0;u<a;u++){var c=n[u].divide(.5);s.push(c[0],c[1])}for(var l=0,h=s.length,f=0;f<h;f++)l+=s[f].endpointDistance();if(o>1&&(0!==l?(l-r)/l:0)<i)return s;n=s,r=l}},isDifferentiable:function(){var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))},length:function(t){for(var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,n=void 0===t.subdivisions?this.getSubdivisions({precision:e}):t.subdivisions,r=0,i=n.length,o=0;o<i;o++)r+=n[o].endpointDistance();return r},lengthAtT:function(t,e){if(t<=0)return 0;var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:n})},pointAt:function(t,e){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var n=this.tAt(t,e);return this.pointAtT(n)},pointAtLength:function(t,e){var n=this.tAtLength(t,e);return this.pointAtT(n)},pointAtT:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,round:function(t){return this.start.round(t),this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},tangentAt:function(t,e){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var n=this.tAt(t,e);return this.tangentAtT(n)},tangentAtLength:function(t,e){if(!this.isDifferentiable())return null;var n=this.tAtLength(t,e);return this.tangentAtT(n)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var e=this.getSkeletonPoints(t),n=e.startControlPoint2,r=e.dividerControlPoint1,i=e.divider,o=new rt(n,r);return o.translate(i.x-n.x,i.y-n.y),o},tAt:function(t,e){if(t<=0)return 0;if(t>=1)return 1;var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions},i=this.length(r)*t;return this.tAtLength(i,r)},tAtLength:function(t,e){var n=!0;t<0&&(n=!1,t=-t);for(var r,i,o,s,a,u=void 0===(e=e||{}).precision?this.PRECISION:e.precision,c=void 0===e.subdivisions?this.getSubdivisions({precision:u}):e.subdivisions,l={precision:u,subdivisions:c},h=0,f=c.length,d=1/f,p=0;p<f;p++){var g=n?p:f-1-p,v=c[p],m=v.endpointDistance();if(t<=h+m){r=v,i=g*d,o=(g+1)*d,s=n?t-h:m+h-t,a=n?m+h-t:t-h;break}h+=m}if(!r)return n?1:0;for(var y=this.length(l),b=dt(10,-u);;){var x,w;if((0!==y?s/y:0)<b)return i;if((0!==y?a/y:0)<b)return o;var _=r.divide(.5);d/=2;var A=_[0].endpointDistance(),k=_[1].endpointDistance();s<=A?(r=_[0],o-=d,w=A-(x=s)):(r=_[1],i+=d,w=k-(x=s-A)),s=x,a=w}},toPoints:function(t){for(var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,n=void 0===t.subdivisions?this.getSubdivisions({precision:e}):t.subdivisions,r=[n[0].start.clone()],i=n.length,o=0;o<i;o++){var s=n[o];r.push(s.end.clone())}return r},toPolyline:function(t){return new ut(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}},pt.prototype.divide=pt.prototype.divideAtT;const vt=function(t){if(!(this instanceof vt))return new vt(t);if("string"==typeof t)return new vt.parse(t);var e,n;if(this.segments=[],t)if(Array.isArray(t)&&0!==t.length)if(n=(t=t.reduce((function(t,e){return t.concat(e)}),[])).length,t[0].isSegment)for(e=0;e<n;e++){var r=t[e];this.appendSegment(r)}else{var i=null;for(e=0;e<n;e++){var o=t[e];if(!(o instanceof rt||o instanceof pt))throw new Error("Cannot construct a path segment from the provided object.");0===e&&this.appendSegment(vt.createSegment("M",o.start)),i&&!i.end.equals(o.start)&&this.appendSegment(vt.createSegment("M",o.start)),o instanceof rt?this.appendSegment(vt.createSegment("L",o.end)):o instanceof pt&&this.appendSegment(vt.createSegment("C",o.controlPoint1,o.controlPoint2,o.end)),i=o}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof rt)this.appendSegment(vt.createSegment("M",t.start)),this.appendSegment(vt.createSegment("L",t.end));else if(t instanceof pt)this.appendSegment(vt.createSegment("M",t.start)),this.appendSegment(vt.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else{if(!(t instanceof ut))throw new Error("Cannot construct a path from the provided object.");if(!t.points||0===t.points.length)return;for(n=t.points.length,e=0;e<n;e++){var s=t.points[e];0===e?this.appendSegment(vt.createSegment("M",s)):this.appendSegment(vt.createSegment("L",s))}}};function mt(t,e){return e.unshift(null),new(Function.prototype.bind.apply(t,e))}vt.parse=function(t){if(!t)return new vt;for(var e=new vt,n=t.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),r=n.length,i=0;i<r;i++){var o=n[i].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),s=vt.createSegment.apply(this,o);e.appendSegment(s)}return e},vt.createSegment=function(t){if(!t)throw new Error("Type must be provided.");var e=vt.segmentTypes[t];if(!e)throw new Error(t+" is not a recognized path segment type.");for(var n=[],r=arguments.length,i=1;i<r;i++)n.push(arguments[i]);return mt(e,n)},vt.prototype={type:P.Path,appendSegment:function(t){var e,n=this.segments,r=n.length,i=0!==r?n[r-1]:null;if(Array.isArray(t)){if(!(t=t.reduce((function(t,e){return t.concat(e)}),[]))[0].isSegment)throw new Error("Segments required.");for(var o=t.length,s=0;s<o;s++){var a=t[s];e=this.prepareSegment(a,i,null),n.push(e),i=e}}else{if(!t||!t.isSegment)throw new Error("Segment required.");e=this.prepareSegment(t,i,null),n.push(e)}},bbox:function(){var t,e=this.segments,n=e.length;if(0===n)return null;for(var r=0;r<n;r++){var i=e[r];if(i.isVisible){var o=i.bbox();t=t?t.union(o):o}}if(t)return t;var s=e[n-1];return new Q(s.end.x,s.end.y,0,0)},clone:function(){for(var t=this.segments,e=t.length,n=new vt,r=0;r<e;r++){var i=t[r].clone();n.appendSegment(i)}return n},closestPoint:function(t,e){var n=this.closestPointT(t,e);return n?this.pointAtT(n):null},closestPointLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},i=this.closestPointT(t,r);return i?this.lengthAtT(i,r):0},closestPointNormalizedLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},i=this.closestPointLength(t,r);if(0===i)return 0;var o=this.length(r);return 0===o?0:i/o},closestPointT:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;for(var i,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=1/0,u=0;u<r;u++){var c=n[u],l=s[u];if(c.isVisible){var h=c.closestPointT(t,{precision:o,subdivisions:l}),f=c.pointAtT(h),d=new rt(f,t).squaredLength();d<a&&(i={segmentIndex:u,value:h},a=d)}}return i||{segmentIndex:r-1,value:1}},closestPointTangent:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;for(var i,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=1/0,u=0;u<r;u++){var c=n[u],l=s[u];if(c.isDifferentiable()){var h=c.closestPointT(t,{precision:o,subdivisions:l}),f=c.pointAtT(h),d=new rt(f,t).squaredLength();d<a&&(i=c.tangentAtT(h),a=d)}}return i||null},containsPoint:function(t,e){var n=this.toPolylines(e);if(!n)return!1;for(var r=n.length,i=0,o=0;o<r;o++)n[o].containsPoint(t)&&i++;return i%2==1},divideAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},i=this.length(r)*t;return this.divideAtLength(i,r)},divideAtLength:function(t,e){var n=this.segments.length;if(0===n)return null;var r=!0;t<0&&(r=!1,t=-t);var i,o,s,a,u,c,l,h=void 0===(e=e||{}).precision?this.PRECISION:e.precision,f=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:h}):e.segmentSubdivisions,d=0;for(i=0;i<n;i++){var p=r?i:n-1-i;o=this.getSegment(p);var g=f[p],v=o.length({precision:h,subdivisions:g});if(o.isDifferentiable()&&(u=o,c=p,t<=d+v)){a=p,s=o.divideAtLength((r?1:-1)*(t-d),{precision:h,subdivisions:g});break}d+=v}if(!u)return null;s||(a=c,l=r?1:0,s=u.divideAtT(l));var m=this.clone();m.replaceSegment(a,s);var y=a,b=a+1,x=a+2;s[0].isDifferentiable()||(m.removeSegment(y),b-=1,x-=1);var w=m.getSegment(b).start;m.insertSegment(b,vt.createSegment("M",w)),x+=1,s[1].isDifferentiable()||(m.removeSegment(x-1),x-=1);var _=x-y-1;for(i=x;i<m.segments.length;i++){var A=this.getSegment(i-_);if("Z"===(o=m.getSegment(i)).type&&!A.subpathStartSegment.end.equals(o.subpathStartSegment.end)){var k=vt.createSegment("L",A.end);m.replaceSegment(i,k)}}return[new vt(m.segments.slice(0,b)),new vt(m.segments.slice(b))]},equals:function(t){if(!t)return!1;var e=this.segments,n=t.segments,r=e.length;if(n.length!==r)return!1;for(var i=0;i<r;i++){var o=e[i],s=n[i];if(o.type!==s.type||!o.equals(s))return!1}return!0},getSegment:function(t){var e=this.segments,n=e.length;if(0===n)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");return e[t]},getSegmentSubdivisions:function(t){for(var e=this.segments,n=e.length,r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=[],o=0;o<n;o++){var s=e[o].getSubdivisions({precision:r});i.push(s)}return i},getSubpaths:function(){const t=this.clone().validate().segments,e=t.length,n=[];for(let r=0;r<e;r++){const e=t[r];e.isSubpathStart?n.push(new vt(e)):n[n.length-1].appendSegment(e)}return n},insertSegment:function(t,e){var n,r=this.segments,i=r.length;if(t<0&&(t=i+t+1),t>i||t<0)throw new Error("Index out of range.");var o=null,s=null;if(0!==i&&(s=t>=1?(o=r[t-1]).nextSegment:r[0]),Array.isArray(e)){if(!(e=e.reduce((function(t,e){return t.concat(e)}),[]))[0].isSegment)throw new Error("Segments required.");for(var a=e.length,u=0;u<a;u++){var c=e[u];n=this.prepareSegment(c,o,s),r.splice(t+u,0,n),o=n}}else{if(!e||!e.isSegment)throw new Error("Segment required.");n=this.prepareSegment(e,o,s),r.splice(t,0,n)}},intersectionWithLine:function(t,e){var n=null,r=this.toPolylines(e);if(!r)return null;for(var i=0,o=r.length;i<o;i++){var s=r[i],a=t.intersect(s);a&&(n||(n=[]),Array.isArray(a)?Array.prototype.push.apply(n,a):n.push(a))}return n},isDifferentiable:function(){for(var t=this.segments,e=t.length,n=0;n<e;n++)if(t[n].isDifferentiable())return!0;return!1},isValid:function(){var t=this.segments;return 0===t.length||"M"===t[0].type},length:function(t){var e=this.segments,n=e.length;if(0===n)return 0;for(var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,o=0,s=0;s<n;s++){var a=e[s],u=i[s];o+=a.length({subdivisions:u})}return o},lengthAtT:function(t,e){var n=this.segments,r=n.length;if(0===r)return 0;var i=t.segmentIndex;if(i<0)return 0;var o=t.value;i>=r?(i=r-1,o=1):o<0?o=0:o>1&&(o=1);for(var s,a=void 0===(e=e||{}).precision?this.PRECISION:e.precision,u=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):e.segmentSubdivisions,c=0,l=0;l<i;l++){var h=n[l];s=u[l],c+=h.length({precisison:a,subdivisions:s})}return h=n[i],s=u[i],c+h.lengthAtT(o,{precisison:a,subdivisions:s})},pointAt:function(t,e){if(0===this.segments.length)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},i=this.length(r)*t;return this.pointAtLength(i,r)},pointAtLength:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;if(0===t)return this.start.clone();var i=!0;t<0&&(i=!1,t=-t);for(var o,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,u=0,c=0;c<r;c++){var l=i?c:r-1-c,h=n[l],f=a[l],d=h.length({precision:s,subdivisions:f});if(h.isVisible){if(t<=u+d)return h.pointAtLength((i?1:-1)*(t-u),{precision:s,subdivisions:f});o=h}u+=d}return o?i?o.end:o.start:n[r-1].end.clone()},pointAtT:function(t){var e=this.segments,n=e.length;if(0===n)return null;var r=t.segmentIndex;if(r<0)return e[0].pointAtT(0);if(r>=n)return e[n-1].pointAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[r].pointAtT(i)},PRECISION:3,prepareSegment:function(t,e,n){t.previousSegment=e,t.nextSegment=n,e&&(e.nextSegment=t),n&&(n.previousSegment=t);var r=t;return t.isSubpathStart&&(t.subpathStartSegment=t,r=n),r&&this.updateSubpathStartSegment(r),t},removeSegment:function(t){var e=this.segments,n=e.length;if(0===n)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");var r=e.splice(t,1)[0],i=r.previousSegment,o=r.nextSegment;i&&(i.nextSegment=o),o&&(o.previousSegment=i),r.isSubpathStart&&o&&this.updateSubpathStartSegment(o)},replaceSegment:function(t,e){var n,r=this.segments,i=r.length;if(0===i)throw new Error("Path has no segments.");if(t<0&&(t=i+t),t>=i||t<0)throw new Error("Index out of range.");var o=r[t],s=o.previousSegment,a=o.nextSegment,u=o.isSubpathStart;if(Array.isArray(e)){if(!(e=e.reduce((function(t,e){return t.concat(e)}),[]))[0].isSegment)throw new Error("Segments required.");r.splice(t,1);for(var c=e.length,l=0;l<c;l++){var h=e[l];n=this.prepareSegment(h,s,a),r.splice(t+l,0,n),s=n,u&&n.isSubpathStart&&(u=!1)}}else{if(!e||!e.isSegment)throw new Error("Segment required.");n=this.prepareSegment(e,s,a),r.splice(t,1,n),u&&n.isSubpathStart&&(u=!1)}u&&a&&this.updateSubpathStartSegment(a)},round:function(t){for(var e=this.segments,n=e.length,r=0;r<n;r++)e[r].round(t);return this},scale:function(t,e,n){for(var r=this.segments,i=r.length,o=0;o<i;o++)r[o].scale(t,e,n);return this},segmentAt:function(t,e){var n=this.segmentIndexAt(t,e);return n?this.getSegment(n):null},segmentAtLength:function(t,e){var n=this.segmentIndexAtLength(t,e);return n?this.getSegment(n):null},segmentIndexAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},i=this.length(r)*t;return this.segmentIndexAtLength(i,r)},segmentIndexAtLength:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;var i=!0;t<0&&(i=!1,t=-t);for(var o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=null,u=0,c=0;c<r;c++){var l=i?c:r-1-c,h=n[l],f=s[l],d=h.length({precision:o,subdivisions:f});if(h.isVisible){if(t<=u+d)return l;a=l}u+=d}return a},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},i=this.length(r)*t;return this.tangentAtLength(i,r)},tangentAtLength:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;var i=!0;t<0&&(i=!1,t=-t);for(var o,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,u=0,c=0;c<r;c++){var l=i?c:r-1-c,h=n[l],f=a[l],d=h.length({precision:s,subdivisions:f});if(h.isDifferentiable()){if(t<=u+d)return h.tangentAtLength((i?1:-1)*(t-u),{precision:s,subdivisions:f});o=h}u+=d}if(o){var p=i?1:0;return o.tangentAtT(p)}return null},tangentAtT:function(t){var e=this.segments,n=e.length;if(0===n)return null;var r=t.segmentIndex;if(r<0)return e[0].tangentAtT(0);if(r>=n)return e[n-1].tangentAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[r].tangentAtT(i)},toPoints:function(t){var e=this.segments,n=e.length;if(0===n)return null;for(var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,o=[],s=[],a=0;a<n;a++){var u=e[a];if(u.isVisible){var c=i[a];if(c.length>0){var l=c.map((function(t){return t.start}));Array.prototype.push.apply(s,l)}else s.push(u.start)}else s.length>0&&(s.push(e[a-1].end),o.push(s),s=[])}return s.length>0&&(s.push(this.end),o.push(s)),o},toPolylines:function(t){var e=[],n=this.toPoints(t);if(!n)return null;for(var r=0,i=n.length;r<i;r++)e.push(new ut(n[r]));return e},toString:function(){for(var t=this.segments,e=t.length,n="",r=0;r<e;r++)n+=t[r].serialize()+" ";return n.trim()},translate:function(t,e){for(var n=this.segments,r=n.length,i=0;i<r;i++)n[i].translate(t,e);return this},updateSubpathStartSegment:function(t){for(var e=t.previousSegment;t&&!t.isSubpathStart;)t.subpathStartSegment=e?e.subpathStartSegment:null,e=t,t=t.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,vt.createSegment("M",0,0)),this}},Object.defineProperty(vt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n=0;n<e;n++){var r=t[n];if(r.isVisible)return r.start}return t[e-1].end}}),Object.defineProperty(vt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n=e-1;n>=0;n--){var r=t[n];if(r.isVisible)return r.end}return t[e-1].end}});var yt={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var e=this.length();return t>=1?e:e*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(yt,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(yt,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(yt,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var bt=function(){for(var t,e,n=[],r=arguments.length,i=0;i<r;i++)n.push(arguments[i]);if(!(this instanceof bt))return mt(bt,n);if(0===r)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");if(n[0]instanceof rt){if(1===r)return this.end=n[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" lines provided).")}if("string"==typeof n[0]||"number"==typeof n[0]){if(2===r)return this.end=new j(+n[0],+n[1]),this;if(r<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" coordinates provided).");var o;for(t=[],i=0;i<r;i+=2)o=n.slice(i,i+2),t.push(mt(bt,o));return t}if(1===r)return this.end=new j(n[0]),this;for(t=[],i=0;i<r;i+=1)e=n[i],t.push(new bt(e));return t},xt={clone:function(){return new bt(this.end)},divideAt:function(t){var e=new rt(this.start,this.end).divideAt(t);return[new bt(e[0]),new bt(e[1])]},divideAtLength:function(t){var e=new rt(this.start,this.end).divideAtLength(t);return[new bt(e[0]),new bt(e[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(xt,"type",{configurable:!0,enumerable:!0,value:"L"}),bt.prototype=gt(yt,rt.prototype,xt);var wt=function(){for(var t,e,n=[],r=arguments.length,i=0;i<r;i++)n.push(arguments[i]);if(!(this instanceof wt))return mt(wt,n);if(0===r)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");if(n[0]instanceof pt){if(1===r)return this.controlPoint1=n[0].controlPoint1.clone(),this.controlPoint2=n[0].controlPoint2.clone(),this.end=n[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" curves provided).")}if("string"==typeof n[0]||"number"==typeof n[0]){if(6===r)return this.controlPoint1=new j(+n[0],+n[1]),this.controlPoint2=new j(+n[2],+n[3]),this.end=new j(+n[4],+n[5]),this;if(r<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" coordinates provided).");var o;for(t=[],i=0;i<r;i+=6)o=n.slice(i,i+6),t.push(mt(wt,o));return t}if(3===r)return this.controlPoint1=new j(n[0]),this.controlPoint2=new j(n[1]),this.end=new j(n[2]),this;if(r<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" points provided).");for(t=[],i=0;i<r;i+=3)e=n.slice(i,i+3),t.push(mt(wt,e));return t},_t={clone:function(){return new wt(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,e){var n=new pt(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(t,e);return[new wt(n[0]),new wt(n[1])]},divideAtLength:function(t,e){var n=new pt(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(t,e);return[new wt(n[0]),new wt(n[1])]},divideAtT:function(t){var e=new pt(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(t);return[new wt(e[0]),new wt(e[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))},round:function(t){return this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},serialize:function(){var t=this.controlPoint1,e=this.controlPoint2,n=this.end;return this.type+" "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+n.x+" "+n.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Object.defineProperty(_t,"type",{configurable:!0,enumerable:!0,value:"C"}),wt.prototype=gt(yt,pt.prototype,_t);var At=function(){for(var t,e,n=[],r=arguments.length,i=0;i<r;i++)n.push(arguments[i]);if(!(this instanceof At))return mt(At,n);if(0===r)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");if(n[0]instanceof rt){if(1===r)return this.end=n[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" lines provided).")}if(n[0]instanceof pt){if(1===r)return this.end=n[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" curves provided).")}if("string"==typeof n[0]||"number"==typeof n[0]){if(2===r)return this.end=new j(+n[0],+n[1]),this;if(r<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" coordinates provided).");var o;for(t=[],i=0;i<r;i+=2)o=n.slice(i,i+2),0===i?t.push(mt(At,o)):t.push(mt(bt,o));return t}if(1===r)return this.end=new j(n[0]),this;for(t=[],i=0;i<r;i+=1)e=n[i],0===i?t.push(new At(e)):t.push(new bt(e));return t},kt={bbox:function(){return null},clone:function(){return new At(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(kt,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(kt,"type",{configurable:!0,enumerable:!0,value:"M"}),At.prototype=gt(yt,kt);var St=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof St))return mt(St,t);if(e>0)throw new Error("Closepath constructor expects no arguments.");return this},Et={clone:function(){return new St},divideAt:function(t){var e=new rt(this.start,this.end).divideAt(t);return[e[1].isDifferentiable()?new bt(e[0]):this.clone(),new bt(e[1])]},divideAtLength:function(t){var e=new rt(this.start,this.end).divideAtLength(t);return[e[1].isDifferentiable()?new bt(e[0]):this.clone(),new bt(e[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(Et,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(Et,"type",{configurable:!0,enumerable:!0,value:"Z"}),St.prototype=gt(yt,rt.prototype,Et);var Pt=vt.segmentTypes={L:bt,C:wt,M:At,Z:St,z:St};vt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(Pt).join("")+",.]*$"),vt.isDataSupported=function(t){return"string"==typeof t&&this.regexSupportedData.test(t)};const Ct={curveThroughPoints:function(t){return console.warn("deprecated"),new vt(pt.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var e,n=[],r=[],i=t.length-1;if(1==i)return n[0]=new j((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),r[0]=new j(2*n[0].x-t[0].x,2*n[0].y-t[0].y),[n,r];var o=[];for(e=1;e<i-1;e++)o[e]=4*t[e].x+2*t[e+1].x;o[0]=t[0].x+2*t[1].x,o[i-1]=(8*t[i-1].x+t[i].x)/2;var s=this.getFirstControlPoints(o);for(e=1;e<i-1;++e)o[e]=4*t[e].y+2*t[e+1].y;o[0]=t[0].y+2*t[1].y,o[i-1]=(8*t[i-1].y+t[i].y)/2;var a=this.getFirstControlPoints(o);for(e=0;e<i;e++)n.push(new j(s[e],a[e])),e<i-1?r.push(new j(2*t[e+1].x-s[e+1],2*t[e+1].y-a[e+1])):r.push(new j((t[i].x+s[i-1])/2,(t[i].y+a[i-1])/2));return[n,r]},getCurveDivider:function(t,e,n,r){console.warn("deprecated");var i=new pt(t,e,n,r);return function(t){var e=i.divide(t);return[{p0:e[0].start,p1:e[0].controlPoint1,p2:e[0].controlPoint2,p3:e[0].end},{p0:e[1].start,p1:e[1].controlPoint1,p2:e[1].controlPoint2,p3:e[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var e=t.length,n=[],r=[],i=2;n[0]=t[0]/i;for(var o=1;o<e;o++)r[o]=1/i,i=(o<e-1?4:3.5)-r[o],n[o]=(t[o]-n[o-1])/i;for(o=1;o<e;o++)n[e-o-1]-=r[e-o]*n[e-o];return n},getInversionSolver:function(t,e,n,r){console.warn("deprecated");var i=new pt(t,e,n,r);return function(t){return i.closestPointT(t)}}},Tt=function(t){return this instanceof Tt?"string"==typeof t?new Tt.parse(t):void(this.points=Array.isArray(t)?t.map(j):[]):new Tt(t)};function Nt(t,e,n,r){switch(t.type){case P.Line:if(e.type===P.Line)return Lt(t,e);break;case P.Ellipse:switch(e.type){case P.Line:return Mt(t,e);case P.Ellipse:return Ot(t,e)}break;case P.Rect:switch(e.type){case P.Line:return It(t,e);case P.Ellipse:return Rt(t,e);case P.Rect:return Bt(t,e)}break;case P.Polyline:switch(e.type){case P.Line:return Dt(t,e);case P.Ellipse:return jt(t,e);case P.Rect:return Vt(t,e);case P.Polyline:return Ft(t,e)}break;case P.Polygon:switch(e.type){case P.Line:return zt(t,e);case P.Ellipse:return Ut(t,e);case P.Rect:return Gt(t,e);case P.Polyline:return qt(t,e);case P.Polygon:return Ht(t,e)}break;case P.Path:switch(e.type){case P.Line:return Wt(t,e,n);case P.Ellipse:return $t(t,e,n);case P.Rect:return Xt(t,e,n);case P.Polyline:return Yt(t,e,n);case P.Polygon:return Jt(t,e,n);case P.Path:return Zt(t,e,n,r)}}switch(e.type){case P.Ellipse:case P.Rect:case P.Polyline:case P.Polygon:case P.Path:return Nt(e,t,r,n);default:throw Error(`The intersection for ${t} and ${e} could not be found.`)}}function Lt(t,e){const n=t.start.x,r=t.start.y,i=t.end.x,o=t.end.y,s=e.start.x,a=e.start.y,u=i-n,c=o-r,l=e.end.x-s,h=e.end.y-a,f=n-s,d=r-a,p=u*h-l*c,g=(u*d-c*f)/p,v=(l*d-h*f)/p;return g>=0&&g<=1&&v>=0&&v<=1}function Mt(t,e){const n=t.a,r=t.b,i=t.x,o=t.y,s=e.start.x-i,a=e.end.x-i,u=e.start.y-o,c=n*n,l=r*r,h=a-s,f=e.end.y-o-u,d=h*h/c+f*f/l,p=2*s*h/c+2*u*f/l,g=p*p-4*d*(s*s/c+u*u/l-1);if(0===g){const t=-p/2/d;return t>=0&&t<=1}if(g>0){const t=Math.sqrt(g),e=(-p+t)/2/d,n=(-p-t)/2/d;return e>=0&&e<=1||n>=0&&n<=1}return!1}function Ot(t,e){return function(t,e,n,r){const{cos:i,sin:o}=Math,s=o(0),a=i(0),u=o(0),c=i(0),l=s*s,h=a*a,f=s*a,d=u*u,p=c*c,g=u*c,v=t.a*t.a,m=t.b*t.b,y=n.a*n.a,b=n.b*n.b,x=v*l+m*h,w=y*d+b*p,_=v*h+m*l,A=y*p+b*d;let k=2*(m-v)*f,S=2*(b-y)*g,E=-2*x*t.x-k*t.y,P=-2*w*n.x-S*n.y,C=-k*t.x-2*_*t.y,T=-S*n.x-2*A*n.y;const N=x*t.x*t.x+_*t.y*t.y+k*t.x*t.y-v*m,L=w*n.x*n.x+A*n.y*n.y+S*n.x*n.y-y*b;k/=2,S/=2,E/=2,P/=2,C/=2,T/=2;const M=oe([[x,k,E],[k,_,C],[E,C,N]]),O=oe([[w,S,P],[S,A,T],[P,T,L]]),I=.33333333*(oe([[w,k,E],[S,_,C],[P,C,N]])+oe([[x,S,E],[k,A,C],[E,T,N]])+oe([[x,k,P],[k,_,T],[E,C,L]])),R=.33333333*(oe([[x,S,P],[k,A,T],[E,T,L]])+oe([[w,k,P],[S,_,T],[P,C,L]])+oe([[w,S,E],[S,A,C],[P,T,N]])),B=ie([[M,I],[I,R]]),D=ie([[M,R],[I,O]]),j=ie([[I,R],[R,O]]);return!(ie([[2*B,D],[D,2*j]])>0&&(R>0||I>0))}(t,0,e)}function It(t,e){const{start:n,end:r}=e,{x:i,y:o,width:s,height:a}=t;return!(n.x>i+s&&r.x>i+s||n.x<i&&r.x<i||n.y>o+a&&r.y>o+a||n.y<o&&r.y<o)&&(!(!t.containsPoint(e.start)&&!t.containsPoint(e.end))||Lt(t.topLine(),e)||Lt(t.rightLine(),e)||Lt(t.bottomLine(),e)||Lt(t.leftLine(),e))}function Rt(t,e){return!!Bt(t,Q.fromEllipse(e))&&Ut(Tt.fromRect(t),e)}function Bt(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function Dt(t,e){return Kt(t,e,{interior:!1})}function jt(t,e){return Qt(t,e,{interior:!1})}function Vt(t,e){return te(t,e,{interior:!1})}function Ft(t,e){return ne(t,e,{interior:!1})}function zt(t,e){return Kt(t,e,{interior:!0})}function Ut(t,e){return Qt(t,e,{interior:!0})}function Gt(t,e){return te(t,e,{interior:!0})}function qt(t,e){return ne(t,e,{interior:!0})}function Ht(t,e){return re(t,e,{interior:!0})}function Wt(t,e,n){return t.getSubpaths().some((t=>{const[r]=t.toPolylines(n),{type:i}=t.getSegment(-1);return"Z"===i?zt(r,e):Dt(r,e)}))}function $t(t,e,n){return t.getSubpaths().some((t=>{const[r]=t.toPolylines(n),{type:i}=t.getSegment(-1);return"Z"===i?Ut(r,e):jt(r,e)}))}function Xt(t,e,n){return Jt(t,Tt.fromRect(e),n)}function Yt(t,e,n){return ee(t,e,n,{interior:!1})}function Jt(t,e,n){return ee(t,e,n,{interior:!0})}function Zt(t,e,n,r){return t.getSubpaths().some((t=>{const[i]=t.toPolylines(n),{type:o}=t.getSegment(-1);return"Z"===o?Jt(e,i,r):Yt(e,i,r)}))}function Kt(t,e,n={}){const{interior:r=!1}=n;let i;if(r){if(t.containsPoint(e.start))return!0;const{start:n,end:r,points:o}=t;i=r.equals(n)?o:[...o,n]}else i=t.points;const{length:o}=i,s=new rt;for(let t=0;t<o-1;t++)if(s.start=i[t],s.end=i[t+1],Lt(e,s))return!0;return!1}function Qt(t,e,n={}){const{start:r,end:i,points:o}=t;if(e.containsPoint(r))return!0;let s;const{interior:a=!1}=n;if(a){if(t.containsPoint(e.center()))return!0;s=i.equals(r)?o:[...o,r]}else s=o;const{length:u}=s,c=new rt;for(let t=0;t<u-1;t++)if(c.start=s[t],c.end=s[t+1],Mt(e,c))return!0;return!1}function te(t,e,n){return re(t,Tt.fromRect(e),n)}function ee(t,e,n,r){return t.getSubpaths().some((t=>{const[i]=t.toPolylines(n),{type:o}=t.getSegment(-1);return"Z"===o?re(e,i,r):ne(e,i,r)}))}function ne(t,e,n={}){const{interior:r=!1}=n;let i;if(r){const{start:n}=e;if(t.containsPoint(n))return!0;i=t.clone().close()}else i=t;const o=e.points,{length:s}=o,a=new rt;for(let t=0;t<s-1;t++)if(a.start=o[t],a.end=o[t+1],Dt(i,a))return!0;return!1}function re(t,e,n){return e.containsPoint(t.start)||ne(t,e.clone().close(),n)}function ie(t){return t[0][0]*t[1][1]-t[0][1]*t[1][0]}function oe(t){return t[0][0]*t[1][1]*t[2][2]-t[0][0]*t[1][2]*t[2][1]-t[0][1]*t[1][0]*t[2][2]+t[0][1]*t[1][2]*t[2][0]+t[0][2]*t[1][0]*t[2][1]-t[0][2]*t[1][1]*t[2][0]}Tt.parse=function(t){return new Tt(ot(t))},Tt.fromRect=function(t){return new Tt([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft()])},Tt.prototype=gt(ut.prototype,{type:P.Polygon,clone:function(){return new Tt(st(this.points))},convexHull:function(){return new Tt(at(this.points))},lengthPoints:function(){const{start:t,end:e,points:n}=this;return n.length<=1||t.equals(e)?n:[...n,t.clone()]}});const se=t,ae=function(){if("object"!=typeof window||!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))return function(){throw new Error("SVG is required to use Vectorizer.")};var t={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},n=Math,r=n.PI,i=n.atan2,o=n.sqrt,s=n.min,a=n.max,u=n.cos,c=n.sin,l=function(e,n,r){if(!(this instanceof l))return l.apply(Object.create(l.prototype),arguments);if(e){if(l.isV(e)&&(e=e.node),n=n||{},l.isString(e)){if("svg"===(e=e.trim()).toLowerCase())e=l.createSvgDocument();else if("<"===e[0]){var i=l.createSvgDocument(e);if(i.childNodes.length>1){var o,s,a=[];for(o=0,s=i.childNodes.length;o<s;o++){var u=i.childNodes[o];a.push(new l(document.importNode(u,!0)))}return a}e=document.importNode(i.firstChild,!0)}else e=document.createElementNS(t.svg,e);l.ensureId(e)}return this.node=e,this.setAttributes(n),r&&this.append(r),this}},h=l.prototype;function f(t,e,n){n||(n={});for(var r=n.includeAnnotationIndices,i=n.eol,o=n.lineHeight,s=n.baseSize,a=0,u={},c=e.length-1,h=0;h<=c;h++){var f=e[h],d=null;if(l.isObject(f)){var p=f.attrs,g=l("tspan",p),v=g.node,m=f.t;i&&h===c&&(m+=i),v.textContent=m;var y=p.class;y&&g.addClass(y),r&&g.attr("annotations",f.annotations),d=parseFloat(p["font-size"]),isFinite(d)||(d=s),d&&d>a&&(a=d)}else i&&h===c&&(f+=i),v=document.createTextNode(f||" "),s&&s>a&&(a=s);t.appendChild(v)}return a&&(u.maxFontSize=a),o?u.lineHeight=o:a&&(u.lineHeight=1.2*a),u}Object.defineProperty(h,"id",{enumerable:!0,get:function(){return this.node.id},set:function(t){this.node.id=t}}),h.getTransformToElement=function(t){var e=this.node;if(l.isSVGGraphicsElement(t)&&l.isSVGGraphicsElement(e)){var n=l.toNode(t).getScreenCTM(),r=e.getScreenCTM();if(n&&r)return n.inverse().multiply(r)}return l.createSVGMatrix()},h.transform=function(t,e){var n=this.node;if(l.isUndefined(t))return l.transformStringToMatrix(this.attr("transform"));if(e&&e.absolute)return this.attr("transform",l.matrixToTransformString(t));var r=l.createSVGTransform(t);return n.transform.baseVal.appendItem(r),this},h.translate=function(t,e,n){n=n||{},e=e||0;var r=this.attr("transform")||"",i=l.parseTransformString(r);if(r=i.value,l.isUndefined(t))return i.translate;r=r.replace(/translate\([^)]*\)/g,"").trim();var o="translate("+(n.absolute?t:i.translate.tx+t)+","+(n.absolute?e:i.translate.ty+e)+")";return this.attr("transform",(o+" "+r).trim()),this},h.rotate=function(t,e,n,r){r=r||{};var i=this.attr("transform")||"",o=l.parseTransformString(i);if(i=o.value,l.isUndefined(t))return o.rotate;i=i.replace(/rotate\([^)]*\)/g,"").trim(),t%=360;var s="rotate("+(r.absolute?t:o.rotate.angle+t)+(void 0!==e&&void 0!==n?","+e+","+n:"")+")";return this.attr("transform",(i+" "+s).trim()),this},h.scale=function(t,e){e=l.isUndefined(e)?t:e;var n=this.attr("transform")||"",r=l.parseTransformString(n);if(n=r.value,l.isUndefined(t))return r.scale;n=n.replace(/scale\([^)]*\)/g,"").trim();var i="scale("+t+","+e+")";return this.attr("transform",(n+" "+i).trim()),this},h.bbox=function(t,e){var n,r=this.node,i=r.ownerSVGElement;if(!i)return new Q(0,0,0,0);try{n=r.getBBox()}catch(t){n={x:r.clientLeft,y:r.clientTop,width:r.clientWidth,height:r.clientHeight}}if(t)return new Q(n);var o=this.getTransformToElement(e||i);return l.transformRect(n,o)},h.getBBox=function(t){var e,n={},r=this.node;if(!r.ownerSVGElement||!l.isSVGGraphicsElement(r))return new Q(0,0,0,0);if(t&&(t.target&&(n.target=l.toNode(t.target)),t.recursive&&(n.recursive=t.recursive)),n.recursive){var i=this.children(),o=i.length;if(0===o)return this.getBBox({target:n.target,recursive:!1});n.target||(n.target=this);for(var s=0;s<o;s++){var a,u=i[s];a=0===u.children().length?u.getBBox({target:n.target,recursive:!1}):u.getBBox({target:n.target,recursive:!0}),e=e?e.union(a):a}return e}try{e=r.getBBox()}catch(t){e={x:r.clientLeft,y:r.clientTop,width:r.clientWidth,height:r.clientHeight}}if(n.target){var c=this.getTransformToElement(n.target);return l.transformRect(e,c)}return new Q(e)};var d=/em$/;function p(t,e){var n=parseFloat(t);return d.test(t)?n*e:n}h.text=function(e,n){if(e&&"string"!=typeof e)throw new Error("Vectorizer: text() expects the first argument to be a string.");e=l.sanitizeText(e),n||(n={});var r=n.displayEmpty,i=n.eol,o=n.textPath,s=n.textVerticalAnchor,a="middle"===s||"bottom"===s||"top"===s,u=n.x;void 0===u&&(u=this.attr("x")||0);var c=n.includeAnnotationIndices,h=n.annotations;h&&!l.isArray(h)&&(h=[h]);var g=n.lineHeight,v="auto"===g,m=v?"1.5em":g||"1em";this.empty(),this.attr({"xml:space":"preserve",display:e||r?null:"none"});var y=parseFloat(this.attr("font-size"));y||(y=16,(a||h)&&this.attr("font-size",y));var b,x=document;o?("string"==typeof o&&(o={d:o}),b=function(t,e){t||(t={});var n=l("textPath"),r=t.d;if(r&&void 0===t["xlink:href"]){var i=l("path").attr("d",r).appendTo(e.defs());n.attr("xlink:href","#"+i.id)}return l.isObject(t)&&n.attr(t),n.node}(o,this)):b=x.createDocumentFragment();for(var w,_=0,A=e.split("\n"),k=[],S=0,E=A.length-1;S<=E;S++){var P,C=m,T="v-line",N=x.createElementNS(t.svg,"tspan"),L=A[S];if(L)if(h){var M=(P=f(N,l.annotateString(L,h,{offset:-_,includeAnnotationIndices:c}),{includeAnnotationIndices:c,eol:S!==E&&i,lineHeight:v?null:m,baseSize:y})).lineHeight;M&&v&&0!==S&&(C=M),0===S&&(w=.8*P.maxFontSize)}else i&&S!==E&&(L+=i),N.textContent=L;else{N.textContent="-",T+=" v-empty-line";var O=N.style;O.fillOpacity=0,O.strokeOpacity=0,h&&(P={})}P&&k.push(P),S>0&&N.setAttribute("dy",C),(S>0||o)&&N.setAttribute("x",u),N.className.baseVal=T,b.appendChild(N),_+=L.length+1}if(a)if(h)C=function(t,e,n,r){if(!Array.isArray(e))return 0;var i=e.length;if(!i)return 0;for(var o=e[0],s=p(o.maxFontSize,n)||n,a=0,u=p(r,n),c=1;c<i;c++)a+=p((o=e[c]).lineHeight,n)||u;var l,h=p(o.maxFontSize,n)||n;switch(t){case"middle":l=s/2-.15*h-a/2;break;case"bottom":l=-.25*h-a;break;default:l=.8*s}return l}(s,k,y,m);else if("top"===s)C="0.8em";else{var I;switch(E>0?(I=parseFloat(m)||1,I*=E,d.test(m)||(I/=y)):I=0,s){case"middle":C=.3-I/2+"em";break;case"bottom":C=-I-.3+"em"}}else 0===s?C="0em":s?C=s:(C=0,null===this.attr("y")&&this.attr("y",w||"0.8em"));return b.firstChild.setAttribute("dy",C),this.append(b),this},h.removeAttr=function(t){var e=l.qualifyAttr(t),n=this.node;return e.ns?n.hasAttributeNS(e.ns,e.local)&&n.removeAttributeNS(e.ns,e.local):n.hasAttribute(t)&&n.removeAttribute(t),this},h.attr=function(t,e){if(l.isUndefined(t)){for(var n=this.node.attributes,r={},i=0;i<n.length;i++)r[n[i].name]=n[i].value;return r}if(l.isString(t)&&l.isUndefined(e))return this.node.getAttribute(t);if("object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&this.setAttribute(o,t[o]);else this.setAttribute(t,e);return this},h.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",l.normalizePathData(this.attr("d"))),this},h.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},h.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},h.setAttributes=function(t){for(var e in t)t.hasOwnProperty(e)&&this.setAttribute(e,t[e]);return this},h.append=function(t){l.isArray(t)||(t=[t]);for(var e=0,n=t.length;e<n;e++)this.node.appendChild(l.toNode(t[e]));return this},h.prepend=function(t){var e=this.node.firstChild;return e?l(e).before(t):this.append(t)},h.before=function(t){var e=this.node,n=e.parentNode;if(n){l.isArray(t)||(t=[t]);for(var r=0,i=t.length;r<i;r++)n.insertBefore(l.toNode(t[r]),e)}return this},h.appendTo=function(t){return l.toNode(t).appendChild(this.node),this},h.svg=function(){return this.node instanceof window.SVGSVGElement?this:l(this.node.ownerSVGElement)},h.tagName=function(){return this.node.tagName.toUpperCase()},h.defs=function(){var t=this.svg()||this,e=t.node.getElementsByTagName("defs")[0];return e?l(e):l("defs").appendTo(t)},h.clone=function(){var t=l(this.node.cloneNode(!0));return t.node.id=l.uniqueId(),t},h.findOne=function(t){var e=this.node.querySelector(t);return e?l(e):void 0},h.find=function(t){var e=[],n=this.node.querySelectorAll(t);if(n)for(var r=0;r<n.length;r++)e.push(l(n[r]));return e},h.children=function(){for(var t=this.node.childNodes,e=[],n=0;n<t.length;n++)1===t[n].nodeType&&e.push(l(t[n]));return e},h.parent=function(){return l(this.node.parentNode)||null},h.index=function(){for(var t=0,e=this.node.previousSibling;e;)1===e.nodeType&&t++,e=e.previousSibling;return t},h.findParentByClass=function(t,e){for(var n=this.node.ownerSVGElement,r=this.node.parentNode;r&&r!==e&&r!==n;){var i=l(r);if(i.hasClass(t))return i;r=r.parentNode}return null},h.contains=function(t){var e=this.node,n=l.toNode(t),r=n&&n.parentNode;return e===r||!!(r&&1===r.nodeType&&16&e.compareDocumentPosition(r))},h.toLocalPoint=function(t,e){var n=this.svg().node,r=n.createSVGPoint();r.x=t,r.y=e;try{var i=r.matrixTransform(n.getScreenCTM().inverse()),o=this.getTransformToElement(n).inverse()}catch(t){return r}return i.matrixTransform(o)},h.translateCenterToPoint=function(t){var e=this.getBBox({target:this.svg()}).center();return this.translate(t.x-e.x,t.y-e.y),this},h.translateAndAutoOrient=function(t,e,n){t=new j(t),e=new j(e),n||(n=this.svg());var r=this.scale();this.attr("transform","");var i=this.getBBox({target:n}).scale(r.sx,r.sy),o=l.createSVGTransform();o.setTranslate(-i.x-i.width/2,-i.y-i.height/2);var s=l.createSVGTransform(),a=t.angleBetween(e,t.clone().offset(1,0));a&&s.setRotate(a,0,0);var u=l.createSVGTransform(),c=t.clone().move(e,i.width/2);u.setTranslate(2*t.x-c.x,2*t.y-c.y);var h=this.getTransformToElement(n),f=l.createSVGTransform();return f.setMatrix(u.matrix.multiply(s.matrix.multiply(o.matrix.multiply(h.scale(r.sx,r.sy))))),this.attr("transform",l.matrixToTransformString(f.matrix)),this},h.animateAlongPath=function(t,e){e=l.toNode(e);var n=l.ensureId(e),r=l("animateMotion",t),i=l("mpath",{"xlink:href":"#"+n});r.append(i),this.append(r);try{r.node.beginElement()}catch(t){if("fake"===document.documentElement.getAttribute("smiling")){var o=r.node;o.animators=[];var s=o.getAttribute("id");s&&(id2anim[s]=o);for(var a=getTargets(o),u=0,c=a.length;u<c;u++){var h=a[u],f=new Animator(o,h,u);animators.push(f),o.animators[u]=f,f.register()}}}return this},h.hasClass=function(t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(this.node.getAttribute("class"))},h.addClass=function(t){if(t&&!this.hasClass(t)){var e=this.node.getAttribute("class")||"";this.node.setAttribute("class",(e+" "+t).trim())}return this},h.removeClass=function(t){if(t&&this.hasClass(t)){var e=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");this.node.setAttribute("class",e)}return this},h.toggleClass=function(t,e){return(l.isUndefined(e)?this.hasClass(t):!e)?this.removeClass(t):this.addClass(t),this},h.sample=function(t){t=t||1;for(var e,n=this.node,r=n.getTotalLength(),i=[],o=0;o<r;)e=n.getPointAtLength(o),i.push({x:e.x,y:e.y,distance:o}),o+=t;return i},h.convertToPath=function(){var t=l("path");t.attr(this.attr());var e=this.convertToPathData();return e&&t.attr("d",e),t},h.convertToPathData=function(){var t=this.tagName();switch(t){case"PATH":return this.attr("d");case"LINE":return l.convertLineToPathData(this.node);case"POLYGON":return l.convertPolygonToPathData(this.node);case"POLYLINE":return l.convertPolylineToPathData(this.node);case"ELLIPSE":return l.convertEllipseToPathData(this.node);case"CIRCLE":return l.convertCircleToPathData(this.node);case"RECT":return l.convertRectToPathData(this.node)}throw new Error(t+" cannot be converted to PATH.")},l.prototype.toGeometryShape=function(){var t,e,n,r,i,o,s,a,u,c,h,f,d,p,g;switch(this.tagName()){case"RECT":return t=parseFloat(this.attr("x"))||0,e=parseFloat(this.attr("y"))||0,n=parseFloat(this.attr("width"))||0,r=parseFloat(this.attr("height"))||0,new Q(t,e,n,r);case"CIRCLE":return i=parseFloat(this.attr("cx"))||0,o=parseFloat(this.attr("cy"))||0,s=parseFloat(this.attr("r"))||0,new G({x:i,y:o},s,s);case"ELLIPSE":return i=parseFloat(this.attr("cx"))||0,o=parseFloat(this.attr("cy"))||0,a=parseFloat(this.attr("rx"))||0,u=parseFloat(this.attr("ry"))||0,new G({x:i,y:o},a,u);case"POLYLINE":return c=l.getPointsFromSvgNode(this),new ut(c);case"POLYGON":return(c=l.getPointsFromSvgNode(this)).length>1&&c.push(c[0]),new ut(c);case"PATH":return h=this.attr("d"),vt.isDataSupported(h)||(h=l.normalizePathData(h)),new vt(h);case"LINE":return f=parseFloat(this.attr("x1"))||0,p=parseFloat(this.attr("y1"))||0,d=parseFloat(this.attr("x2"))||0,g=parseFloat(this.attr("y2"))||0,new rt({x:f,y:p},{x:d,y:g})}return this.getBBox()},h.findIntersection=function(t,e){var n=this.svg().node;e=e||n;var r=this.getBBox({target:e}),i=r.center();if(r.intersectionWithLineFromCenterToPoint(t)){var o,s=this.tagName();if("RECT"===s){var a=new Q(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),u=this.getTransformToElement(e),c=l.decomposeMatrix(u),h=n.createSVGTransform();h.setRotate(-c.rotation,i.x,i.y);var f=l.transformRect(a,h.matrix.multiply(u));o=new Q(f).intersectionWithLineFromCenterToPoint(t,c.rotation)}else if("PATH"===s||"POLYGON"===s||"POLYLINE"===s||"CIRCLE"===s||"ELLIPSE"===s){var d,p,g,v,m,y=("PATH"===s?this:this.convertToPath()).sample(),b=1/0,x=[];for(d=0;d<y.length;d++)p=y[d],g=(g=l.createSVGPoint(p.x,p.y)).matrixTransform(this.getTransformToElement(e)),(m=(p=new j(g)).distance(i)+(v=1.1*p.distance(t)))<b?(b=m,x=[{sample:p,refDistance:v}]):m<b+1&&x.push({sample:p,refDistance:v});x.sort((function(t,e){return t.refDistance-e.refDistance})),x[0]&&(o=x[0].sample)}return o}},h.setAttribute=function(t,e){var n=this.node;if(null===e)return this.removeAttr(t),this;var r=l.qualifyAttr(t);return r.ns?n.setAttributeNS(r.ns,t,e):"id"===t?n.id=e:n.setAttribute(t,e),this},l.createSvgDocument=function(e){if(e){const n=`<svg xmlns="${t.svg}" xmlns:xlink="${t.xlink}" version="1.1">${e}</svg>`,{documentElement:r}=l.parseXML(n,{async:!1});return r}const n=document.createElementNS(t.svg,"svg");return n.setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),n.setAttribute("version","1.1"),n},l.createSVGStyle=function(t){const{node:e}=l("style",{type:"text/css"},[l.createCDATASection(t)]);return e},l.createCDATASection=function(t=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(t)},l.idCounter=0,l.uniqueId=function(){return"v-"+ ++l.idCounter},l.toNode=function(t){return l.isV(t)?t.node:t.nodeName&&t||t[0]},l.ensureId=function(t){return(t=l.toNode(t)).id||(t.id=l.uniqueId())},l.sanitizeText=function(t){return(t||"").replace(/ /g,"")},l.isUndefined=function(t){return void 0===t},l.isString=function(t){return"string"==typeof t},l.isObject=function(t){return t&&"object"==typeof t},l.isArray=Array.isArray,l.parseXML=function(t,e){var n;e=e||{};try{var r=new DOMParser;l.isUndefined(e.async)||(r.async=e.async),n=r.parseFromString(t,"text/xml")}catch(t){n=void 0}if(!n||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return n},l.qualifyAttr=function(e){if(-1!==e.indexOf(":")){var n=e.split(":");return{ns:t[n[0]],local:n[1]}}return{ns:null,local:e}},l.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,l.transformSeparatorRegex=/[ ,]+/,l.transformationListRegex=/^(\w+)\((.*)\)/,l.transformStringToMatrix=function(t){var e=l.createSVGMatrix(),n=t&&t.match(l.transformRegex);if(!n)return e;for(var r=0,i=n.length;r<i;r++){var o=n[r].match(l.transformationListRegex);if(o){var s,a,u,c,h,f=l.createSVGMatrix(),d=o[2].split(l.transformSeparatorRegex);switch(o[1].toLowerCase()){case"scale":s=parseFloat(d[0]),a=void 0===d[1]?s:parseFloat(d[1]),f=f.scaleNonUniform(s,a);break;case"translate":u=parseFloat(d[0]),c=parseFloat(d[1]),f=f.translate(u,c);break;case"rotate":h=parseFloat(d[0]),u=parseFloat(d[1])||0,c=parseFloat(d[2])||0,f=0!==u||0!==c?f.translate(u,c).rotate(h).translate(-u,-c):f.rotate(h);break;case"skewx":h=parseFloat(d[0]),f=f.skewX(h);break;case"skewy":h=parseFloat(d[0]),f=f.skewY(h);break;case"matrix":f.a=parseFloat(d[0]),f.b=parseFloat(d[1]),f.c=parseFloat(d[2]),f.d=parseFloat(d[3]),f.e=parseFloat(d[4]),f.f=parseFloat(d[5]);break;default:continue}e=e.multiply(f)}}return e},l.matrixToTransformString=function(t){return t||(t=!0),"matrix("+(void 0!==t.a?t.a:1)+","+(void 0!==t.b?t.b:0)+","+(void 0!==t.c?t.c:0)+","+(void 0!==t.d?t.d:1)+","+(void 0!==t.e?t.e:0)+","+(void 0!==t.f?t.f:0)+")"},l.parseTransformString=function(t){var e,n,r;if(t){var i=l.transformSeparatorRegex;if(t.trim().indexOf("matrix")>=0){var o=l.transformStringToMatrix(t),s=l.decomposeMatrix(o);e=[s.translateX,s.translateY],r=[s.scaleX,s.scaleY],n=[s.rotation];var a=[];0===e[0]&&0===e[1]||a.push("translate("+e+")"),1===r[0]&&1===r[1]||a.push("scale("+r+")"),0!==n[0]&&a.push("rotate("+n+")"),t=a.join(" ")}else{var u=t.match(/translate\((.*?)\)/);u&&(e=u[1].split(i));var c=t.match(/rotate\((.*?)\)/);c&&(n=c[1].split(i));var h=t.match(/scale\((.*?)\)/);h&&(r=h[1].split(i))}}var f=r&&r[0]?parseFloat(r[0]):1;return{value:t,translate:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotate:{angle:n&&n[0]?parseInt(n[0],10):0,cx:n&&n[1]?parseInt(n[1],10):void 0,cy:n&&n[2]?parseInt(n[2],10):void 0},scale:{sx:f,sy:r&&r[1]?parseFloat(r[1]):f}}},l.deltaTransformPoint=function(t,e){return{x:e.x*t.a+e.y*t.c+0,y:e.x*t.b+e.y*t.d+0}},l.decomposeMatrix=function(t){var e=l.deltaTransformPoint(t,{x:0,y:1}),n=l.deltaTransformPoint(t,{x:1,y:0}),s=180/r*i(e.y,e.x)-90,a=180/r*i(n.y,n.x);return{translateX:t.e,translateY:t.f,scaleX:o(t.a*t.a+t.b*t.b),scaleY:o(t.c*t.c+t.d*t.d),skewX:s,skewY:a,rotation:s}},l.matrixToScale=function(t){var e,n,r,i;return t?(e=l.isUndefined(t.a)?1:t.a,i=l.isUndefined(t.d)?1:t.d,n=t.b,r=t.c):e=i=1,{sx:n?o(e*e+n*n):e,sy:r?o(r*r+i*i):i}},l.matrixToRotate=function(t){var e={x:0,y:1};return t&&(e=l.deltaTransformPoint(t,e)),{angle:v(y(i(e.y,e.x))-90)}},l.matrixToTranslate=function(t){return{tx:t&&t.e||0,ty:t&&t.f||0}},l.isV=function(t){return t instanceof l},l.isVElement=l.isV,l.isSVGGraphicsElement=function(t){return!!t&&(t=l.toNode(t))instanceof SVGElement&&"function"==typeof t.getScreenCTM};var g=l("svg").node;return l.createSVGMatrix=function(t){var e=g.createSVGMatrix();for(var n in t)e[n]=t[n];return e},l.createSVGTransform=function(t){return l.isUndefined(t)?g.createSVGTransform():(t instanceof SVGMatrix||(t=l.createSVGMatrix(t)),g.createSVGTransformFromMatrix(t))},l.createSVGPoint=function(t,e){var n=g.createSVGPoint();return n.x=t,n.y=e,n},l.transformRect=function(t,e){var n=g.createSVGPoint();n.x=t.x,n.y=t.y;var r=n.matrixTransform(e);n.x=t.x+t.width,n.y=t.y;var i=n.matrixTransform(e);n.x=t.x+t.width,n.y=t.y+t.height;var o=n.matrixTransform(e);n.x=t.x,n.y=t.y+t.height;var u=n.matrixTransform(e),c=s(r.x,i.x,o.x,u.x),l=a(r.x,i.x,o.x,u.x),h=s(r.y,i.y,o.y,u.y),f=a(r.y,i.y,o.y,u.y);return new Q(c,h,l-c,f-h)},l.transformPoint=function(t,e){return new j(l.createSVGPoint(t.x,t.y).matrixTransform(e))},l.transformLine=function(t,e){return new rt(l.transformPoint(t.start,e),l.transformPoint(t.end,e))},l.transformPolyline=function(t,e){var n=t instanceof ut?t.points:t;l.isArray(n)||(n=[]);for(var r=[],i=0,o=n.length;i<o;i++)r[i]=l.transformPoint(n[i],e);return new ut(r)},l.styleToObject=function(t){for(var e={},n=t.split(";"),r=0;r<n.length;r++){var i=n[r].split("=");e[i[0].trim()]=i[1].trim()}return e},l.createSlicePathData=function(t,e,n,i){var o=2*r-1e-6,s=t,a=e,l=n,h=i,f=(h<l&&(f=l,l=h,h=f),h-l),d=f<r?"0":"1",p=u(l),g=c(l),v=u(h),m=c(h);return f>=o?s?"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"M0,"+s+"A"+s+","+s+" 0 1,0 0,"+-s+"A"+s+","+s+" 0 1,0 0,"+s+"Z":"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z":s?"M"+a*p+","+a*g+"A"+a+","+a+" 0 "+d+",1 "+a*v+","+a*m+"L"+s*v+","+s*m+"A"+s+","+s+" 0 "+d+",0 "+s*p+","+s*g+"Z":"M"+a*p+","+a*g+"A"+a+","+a+" 0 "+d+",1 "+a*v+","+a*m+"L0,0Z"},l.mergeAttrs=function(t,e){for(var n in e)"class"===n?t[n]=t[n]?t[n]+" "+e[n]:e[n]:"style"===n?l.isObject(t[n])&&l.isObject(e[n])?t[n]=l.mergeAttrs(t[n],e[n]):l.isObject(t[n])?t[n]=l.mergeAttrs(t[n],l.styleToObject(e[n])):l.isObject(e[n])?t[n]=l.mergeAttrs(l.styleToObject(t[n]),e[n]):t[n]=l.mergeAttrs(l.styleToObject(t[n]),l.styleToObject(e[n])):t[n]=e[n];return t},l.annotateString=function(t,e,n){e=e||[];for(var r,i,o,s=(n=n||{}).offset||0,a=[],u=[],c=0;c<t.length;c++){i=u[c]=t[c];for(var h=0;h<e.length;h++){var f=e[h],d=f.start+s,p=f.end+s;c>=d&&c<p&&(l.isObject(i)?i.attrs=l.mergeAttrs(l.mergeAttrs({},i.attrs),f.attrs):i=u[c]={t:t[c],attrs:f.attrs},n.includeAnnotationIndices&&(i.annotations||(i.annotations=[])).push(h))}(o=u[c-1])?l.isObject(i)&&l.isObject(o)?JSON.stringify(i.attrs)===JSON.stringify(o.attrs)?r.t+=i.t:(a.push(r),r=i):l.isObject(i)||l.isObject(o)?(a.push(r),r=i):r=(r||"")+i:r=i}return r&&a.push(r),a},l.findAnnotationsAtIndex=function(t,e){var n=[];return t&&t.forEach((function(t){t.start<e&&e<=t.end&&n.push(t)})),n},l.findAnnotationsBetweenIndexes=function(t,e,n){var r=[];return t&&t.forEach((function(t){(e>=t.start&&e<t.end||n>t.start&&n<=t.end||t.start>=e&&t.end<n)&&r.push(t)})),r},l.shiftAnnotations=function(t,e,n){return t&&t.forEach((function(t){t.start<e&&t.end>=e?t.end+=n:t.start>=e&&(t.start+=n,t.end+=n)})),t},l.convertLineToPathData=function(t){return["M",(t=l(t)).attr("x1"),t.attr("y1"),"L",t.attr("x2"),t.attr("y2")].join(" ")},l.convertPolygonToPathData=function(t){var e=l.getPointsFromSvgNode(t);return 0===e.length?null:l.svgPointsToPath(e)+" Z"},l.convertPolylineToPathData=function(t){var e=l.getPointsFromSvgNode(t);return 0===e.length?null:l.svgPointsToPath(e)},l.svgPointsToPath=function(t){for(var e=0,n=t.length;e<n;e++)t[e]=t[e].x+" "+t[e].y;return"M "+t.join(" L")},l.getPointsFromSvgNode=function(t){var e=[],n=(t=l.toNode(t)).points;if(n)for(var r=0,i=n.numberOfItems;r<i;r++)e.push(n.getItem(r));return e},l.KAPPA=.551784,l.convertCircleToPathData=function(t){t=l(t);var e=parseFloat(t.attr("cx"))||0,n=parseFloat(t.attr("cy"))||0,r=parseFloat(t.attr("r")),i=r*l.KAPPA;return["M",e,n-r,"C",e+i,n-r,e+r,n-i,e+r,n,"C",e+r,n+i,e+i,n+r,e,n+r,"C",e-i,n+r,e-r,n+i,e-r,n,"C",e-r,n-i,e-i,n-r,e,n-r,"Z"].join(" ")},l.convertEllipseToPathData=function(t){t=l(t);var e=parseFloat(t.attr("cx"))||0,n=parseFloat(t.attr("cy"))||0,r=parseFloat(t.attr("rx")),i=parseFloat(t.attr("ry"))||r,o=r*l.KAPPA,s=i*l.KAPPA;return["M",e,n-i,"C",e+o,n-i,e+r,n-s,e+r,n,"C",e+r,n+s,e+o,n+i,e,n+i,"C",e-o,n+i,e-r,n+s,e-r,n,"C",e-r,n-s,e-o,n-i,e,n-i,"Z"].join(" ")},l.convertRectToPathData=function(t){return t=l(t),l.rectToPath({x:parseFloat(t.attr("x"))||0,y:parseFloat(t.attr("y"))||0,width:parseFloat(t.attr("width"))||0,height:parseFloat(t.attr("height"))||0,rx:parseFloat(t.attr("rx"))||0,ry:parseFloat(t.attr("ry"))||0})},l.rectToPath=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=s(t.rx||t["top-rx"]||0,r/2),a=s(t.rx||t["bottom-rx"]||0,r/2),u=s(t.ry||t["top-ry"]||0,i/2),c=s(t.ry||t["bottom-ry"]||0,i/2);return(o||a||u||c?["M",e,n+u,"v",i-u-c,"a",a,c,0,0,0,a,c,"h",r-2*a,"a",a,c,0,0,0,a,-c,"v",-(i-c-u),"a",o,u,0,0,0,-o,-u,"h",-(r-2*o),"a",o,u,0,0,0,-o,u,"Z"]:["M",e,n,"H",e+r,"V",n+i,"H",e,"V",n,"Z"]).join(" ")},l.normalizePathData=function(){var t="\t\n\v\f\r \u2028\u2029",e=new RegExp("([a-z])["+t+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+t+"]*,?["+t+"]*)+)","ig"),n=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+t+"]*,?["+t+"]*","ig"),r=Math,i=r.PI,o=r.sin,s=r.cos,a=r.tan,u=r.asin,c=r.sqrt,l=r.abs;function h(t,e,n,r,i,o){var s=1/3,a=2/3;return[s*t+a*n,s*e+a*r,s*i+a*n,s*o+a*r,i,o]}function f(t,e,n){return{x:t*s(n)-e*o(n),y:t*o(n)+e*s(n)}}function d(t,e,n,r,h,p,g,v,m,y){var b,x=120*i/180,w=i/180*(+h||0),_=[];if(y)L=y[0],M=y[1],T=y[2],N=y[3];else{t=(b=f(t,e,-w)).x,e=b.y;var A=(t-(v=(b=f(v,m,-w)).x))/2,k=(e-(m=b.y))/2,S=A*A/(n*n)+k*k/(r*r);S>1&&(n*=S=c(S),r*=S);var E=n*n,P=r*r,C=(p==g?-1:1)*c(l((E*P-E*k*k-P*A*A)/(E*k*k+P*A*A))),T=C*n*k/r+(t+v)/2,N=C*-r*A/n+(e+m)/2,L=u(((e-N)/r).toFixed(9)),M=u(((m-N)/r).toFixed(9));(L=t<T?i-L:L)<0&&(L=2*i+L),(M=v<T?i-M:M)<0&&(M=2*i+M),g&&L>M&&(L-=2*i),!g&&M>L&&(M-=2*i)}var O=M-L;if(l(O)>x){var I=M,R=v,B=m;_=d(v=T+n*s(M=L+x*(g&&M>L?1:-1)),m=N+r*o(M),n,r,h,0,g,R,B,[M,I,T,N])}O=M-L;var D=s(L),j=o(L),V=s(M),F=o(M),z=a(O/4),U=4/3*(n*z),G=4/3*(r*z),q=[t,e],H=[t+U*j,e-G*D],W=[v+U*F,m-G*V],$=[v,m];if(H[0]=2*q[0]-H[0],H[1]=2*q[1]-H[1],y)return[H,W,$].concat(_);for(var X=[],Y=(_=[H,W,$].concat(_).join().split(",")).length,J=0;J<Y;J++)X[J]=J%2?f(_[J-1],_[J],w).y:f(_[J],_[J+1],w).x;return X}function p(t){var r=function(t){if(Array.isArray(t)&&Array.isArray(t&&t[0])||(t=function(t){if(!t)return null;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=[];return String(t).replace(e,(function(t,e,o){var s=[],a=e.toLowerCase();for(o.replace(n,(function(t,e){e&&s.push(+e)})),"m"===a&&s.length>2&&(i.push([e].concat(s.splice(0,2))),a="l",e="m"===e?"l":"L");s.length>=r[a]&&(i.push([e].concat(s.splice(0,r[a]))),r[a]););})),i}(t)),!t||!t.length)return[["M",0,0]];for(var r,i=[],o=0,s=0,a=0,u=0,c=t.length,l=0;l<c;l++){var h=[];i.push(h);var f,d,p=t[l];if((r=p[0])!=r.toUpperCase())switch(h[0]=r.toUpperCase(),h[0]){case"A":h[1]=p[1],h[2]=p[2],h[3]=p[3],h[4]=p[4],h[5]=p[5],h[6]=+p[6]+o,h[7]=+p[7]+s;break;case"V":h[1]=+p[1]+s;break;case"H":h[1]=+p[1]+o;break;case"M":for(a=+p[1]+o,u=+p[2]+s,f=p.length,d=1;d<f;d++)h[d]=+p[d]+(d%2?o:s);break;default:for(f=p.length,d=1;d<f;d++)h[d]=+p[d]+(d%2?o:s)}else for(var g=p.length,v=0;v<g;v++)h[v]=p[v];switch(h[0]){case"Z":o=+a,s=+u;break;case"H":o=h[1];break;case"V":s=h[1];break;case"M":a=h[h.length-2],u=h[h.length-1],o=h[h.length-2],s=h[h.length-1];break;default:o=h[h.length-2],s=h[h.length-1]}}return i}(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function o(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(t[0]in{T:1,Q:1}||(e.qx=null,e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=0===parseFloat(t[1])||0===parseFloat(t[2])?["L",t[6],t[7]]:["C"].concat(d.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(h(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(h(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"H":t=["L"].concat(t[1],e.y);break;case"V":t=["L"].concat(e.x,t[1])}return t}function s(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)a[e]="A",t.splice(e++,0,["C"].concat(n.splice(0,6)));t.splice(e,1),l=r.length}}for(var a=[],u="",c="",l=r.length,f=0;f<l;f++){r[f]&&(u=r[f][0]),"C"!==u&&(a[f]=u,f>0&&(c=a[f-1])),r[f]=o(r[f],i,c),"A"!==a[f]&&"C"===u&&(a[f]="C"),s(r,f);var p=r[f],g=p.length;i.x=p[g-2],i.y=p[g-1],i.bx=parseFloat(p[g-4])||i.x,i.by=parseFloat(p[g-3])||i.y}return r[0][0]&&"M"===r[0][0]||r.unshift(["M",0,0]),r}return function(t){return p(t).join(",").split(",").join(" ")}}(),l.namespace=t,l.g=e,l}(),ue=ae;var ce=n(96486),le=n(9983);const he={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},fe=function(t){return t?t.toString().split(" ").map((function(t){return t.substr(0,he.classNamePrefix.length)!==he.classNamePrefix&&(t=he.classNamePrefix+t),t})).join(" "):t},de=function(t){return t?t.toString().split(" ").map((function(t){return t.substr(0,he.classNamePrefix.length)===he.classNamePrefix&&(t=t.substr(he.classNamePrefix.length)),t})).join(" "):t},pe=function(t,e){for(var n={},r={},i=ue.namespace.svg,o=e||i,s=document.createDocumentFragment(),a=[t,s,o];a.length>0;){o=a.pop();for(var u=a.pop(),c=a.pop(),l=0,h=c.length;l<h;l++){var f=c[l];if(!f.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");var d=f.tagName;f.hasOwnProperty("namespaceURI")&&(o=f.namespaceURI);var p=document.createElementNS(o,d),g=o===i,v=g?ue:le,m=f.attributes;m&&v(p).attr(m);var y=f.style;if(y&&le(p).css(y),f.hasOwnProperty("className")){var b=f.className;g?p.className.baseVal=b:p.className=b}if(f.hasOwnProperty("textContent")&&(p.textContent=f.textContent),f.hasOwnProperty("selector")){var x=f.selector;if(n[x])throw new Error("json-dom-parser: selector must be unique");n[x]=p,v(p).attr("joint-selector",x)}if(f.hasOwnProperty("groupSelector")){var w=f.groupSelector;Array.isArray(w)||(w=[w]);for(var _=0,A=w.length;_<A;_++){var k=w[_],S=r[k];S||(S=r[k]=[]),S.push(p)}}u.appendChild(p);var E=f.children;Array.isArray(E)&&a.push(E,p,o)}}return{fragment:s,selectors:n,groupSelectors:r}},ge=function(t){let e=0;if(0===t.length)return e;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e},ve=function(t,e,n){for(var r,i=Array.isArray(e)?e:e.split(n||"/"),o=0,s=i.length;o<s;){if(r=i[o++],Object(t)!==t||!(r in t))return;t=t[r]}return t},me=function(t,e){return"string"!=typeof e&&"number"!=typeof e&&(e=String(e)),("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!==e},ye=function(t,e,n,r){const i=Array.isArray(e)?e:e.split(r||"/"),o=i.length-1;let s=t,a=0;for(;a<o;a++){const e=i[a];if(!me(s,e))return t;s=s[e]||(s[e]={})}return s[i[o]]=n,t},be=function(t,e,n){const r=Array.isArray(e)?e:e.split(n||"/"),i=r.length-1;let o=t,s=0;for(;s<i;s++){const e=r[s];if(!me(o,e))return t;const n=o[e];if(!n)return t;o=n}return delete o[r[i]],t},xe=function(t){return xe.id=xe.id||1,t.id=void 0===t.id?"j_"+xe.id++:t.id,t.id},we=function(t){var e=t,n=t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0];if(n){for(var r in t)void 0===n[r]&&(n[r]=t[r]);e=n}var i=e.target;if(i){var o=i.correspondingUseElement;o&&(e.target=o)}return e},_e=function(){var t;if("undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),i=setTimeout((function(){t(n+r)}),r);return e=n+r,i}}return function(e,n,...r){return t(void 0!==n?e.bind(n,...r):e)}}(),Ae=((Se="undefined"!=typeof window)&&(ke=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),ke=ke||clearTimeout,Se?ke.bind(window):ke);var ke,Se;const Ee=function(t){return cn(t)&&"%"===t.slice(-1)},Pe=function(t,e){var n=parseFloat(t);if(Number.isNaN(n))return null;var r,i={};if(i.value=n,null==e)r="[A-Za-z]*";else if(Array.isArray(e)){if(0===e.length)return null;r=e.join("|")}else cn(e)&&(r=e);var o=function(e){var n=new RegExp("(?:\\d+(?:\\.\\d+)*)("+e+")$").exec(t);return n?n[1]:null}(r);return null===o?null:(i.unit=o,i)},Ce=function(t,e,n={},r={}){var i=e.width,o=e.height,s=r.svgDocument||ue("svg").node,a=ue("tspan").node,u=ue("text").attr(n).append(a).node,c=document.createTextNode("");u.style.opacity=0,u.style.display="block",a.style.display="block",a.appendChild(c),s.appendChild(u),r.svgDocument||document.body.appendChild(s);var l=r.separator||" ",h=r.eol||"\n",f=r.hyphen?new RegExp(r.hyphen):/[^\w\d]/,d=r.maxLineCount;un(d)||(d=1/0);for(var p,g,v,m=t.split(l),y=[],b=[],x=0,w=0,_=m.length;x<_;x++){var A=m[x];if(A){var k=!1;if(h&&A.indexOf(h)>=0){if(A.length>1){for(var S=A.split(h),E=0,P=S.length-1;E<P;E++)S.splice(2*E+1,0,h);m.splice(x,1,...S.filter((t=>""!==t))),x--,_=m.length;continue}b[++w]="",k=!0}if(!k)if(c.data=b[w]?b[w]+" "+A:A,a.getComputedTextLength()<=i)b[w]=c.data,(p||g)&&(y[w++]=!0,p=0,g=0);else{if(!b[w]||p){var C=!!p;if(p=A.length-1,C||!p){if(!p){if(!b[w]){b=[];break}m.splice(x,2,A+m[x+1]),_--,y[w++]=!0,x--;continue}m[x]=A.substring(0,p),m[x+1]=A.substring(p)+(void 0===m[x+1]?"":m[x+1])}else{if(g)m.splice(x,2,m[x]+m[x+1]),g=0;else{var T=A.search(f);T>-1&&T!==A.length-1&&0!==T&&(g=T+1,p=0),m.splice(x,1,A.substring(0,g||p),A.substring(g||p)),_++}w&&!y[w-1]&&w--}x--;continue}w++,x--}var N=null;if(b.length>d)N=d-1;else if(void 0!==o){var L;void 0===v&&(v=(L="auto"===n.lineHeight?{value:1.5,unit:"em"}:Pe(n.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===L.unit&&(v*=u.getBBox().height)),v*b.length>o&&(N=Math.floor(o/v)-1)}if(null!==N){b.splice(N+1);var M=r.ellipsis;if(!M||N<0)break;"string"!=typeof M&&(M="");var O=b[N];if(!O&&!k)break;var I,R,B=O.length;do{if(R=O[B],I=O.substring(0,B),R?R.match(l)&&(I+=R):I+="string"==typeof l?l:" ",I+=M,c.data=I,a.getComputedTextLength()<=i){b[N]=I;break}B--}while(B>=0);break}}}return r.svgDocument?s.removeChild(u):document.body.removeChild(s),b.join(h)},Te=function(t){if(Object(t)!==t){var e=0;return isFinite(t)&&(e=+t),{top:e,right:e,bottom:e,left:e}}var n,r,i,o;return n=r=i=o=0,isFinite(t.vertical)&&(n=i=+t.vertical),isFinite(t.horizontal)&&(r=o=+t.horizontal),isFinite(t.top)&&(n=+t.top),isFinite(t.right)&&(r=+t.right),isFinite(t.bottom)&&(i=+t.bottom),isFinite(t.left)&&(o=+t.left),{top:n,right:r,bottom:i,left:o}},Ne={linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,n=1;;e+=n,n/=2)if(t>=(7-4*e)/11){var r=(11-6*e-11*t)/4;return-r*r+n*n}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t,e,n){return e=e||0,n=n||1,function(r){var i=t(r);return i<e?e:i>n?n:i}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},Le={number:function(t,e){var n=e-t;return function(e){return t+n*e}},object:function(t,e){var n=Object.keys(t);return function(r){var i,o,s={};for(i=n.length-1;-1!=i;i--)s[o=n[i]]=t[o]+(e[o]-t[o])*r;return s}},hexColor:function(t,e){var n=parseInt(t.slice(1),16),r=parseInt(e.slice(1),16),i=255&n,o=(255&r)-i,s=65280&n,a=(65280&r)-s,u=16711680&n,c=(16711680&r)-u;return function(t){return"#"+(1<<24|i+o*t&255|s+a*t&65280|u+c*t&16711680).toString(16).slice(1)}},unit:function(t,e){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=n.exec(t),i=n.exec(e),o=i[1].indexOf("."),s=o>0?i[1].length-o-1:0;t=+r[1];var a=+i[1]-t,u=r[2];return function(e){return(t+a*e).toFixed(s)+u}}},Me={outline:function(t){var e=Number.isFinite(t.margin)?t.margin:2,n=Number.isFinite(t.width)?t.width:1;return Oe('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:e+n,innerRadius:e})},highlight:function(t){return Oe('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return Oe('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return Oe(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Oe('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Oe('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Oe('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return Oe('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Oe('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return Oe('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Oe('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},Oe=function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(n){return n=n||{},t.replace(e,(function(t){for(var e=Array.from(arguments),r=e.slice(1,4).find((function(t){return!!t})),i=r.split("."),o=n[i.shift()];void 0!==o&&i.length;)o=o[i.shift()];return void 0!==o?o:""}))}},Ie=(ce.assign,ce.defaults,ce.defaultsDeep,ce.assign),Re=ce.defaults,Be=ce.defaultsDeep,De=ce.invokeMap||ce.invoke,je=ce.sortedIndexBy||ce.sortedIndex,Ve=ce.uniqBy||ce.uniq,Fe=ce.clone,ze=ce.cloneDeep,Ue=ce.isEmpty,Ge=ce.isEqual,qe=ce.isFunction,He=ce.isPlainObject,We=ce.toArray,$e=(ce.debounce,ce.groupBy),Xe=(ce.sortBy,ce.flattenDeep),Ye=ce.without,Je=ce.difference,Ze=(ce.intersection,ce.union),Ke=ce.has,Qe=ce.result,tn=ce.omit,en=ce.pick,nn=(ce.bindAll,ce.forIn),rn=ce.camelCase,on=ce.uniqueId,sn=function(){if(ce.mergeWith){var t=Array.from(arguments),e=t[t.length-1],n=qe(e)?e:ln;return t.push((function(t,e){var r=n(t,e);return void 0!==r?r:Array.isArray(t)&&!Array.isArray(e)?e:void 0})),ce.mergeWith.apply(this,t)}return ce.merge.apply(this,arguments)},an=function(t){return!!t&&("object"==typeof t||"function"==typeof t)},un=function(t){var e=Object.prototype.toString;return"number"==typeof t||!!t&&"object"==typeof t&&"[object Number]"===e.call(t)},cn=function(t){var e=Object.prototype.toString;return"string"==typeof t||!!t&&"object"==typeof t&&"[object String]"===e.call(t)},ln=function(){};function hn(t,e){return 0===e?"0%":Math.round(t/e*100*1e3)/1e3+"%"}function fn(t){return function(e,n,r,i){return(n.isNodeConnection(r)?pn:dn)(t,e,n,r,i)}}function dn(t,e,n,r,i){var o=n.model.angle(),s=n.getNodeUnrotatedBBox(r),a=n.model.getBBox().center();i.rotate(a,o);var u=i.x-s.x,c=i.y-s.y;return t&&(u=hn(u,s.width),c=hn(c,s.height)),e.anchor={name:"topLeft",args:{dx:u,dy:c,rotate:!0}},e}function pn(t,e,n,r,i){var o=n.getConnection();if(!o)return e;var s=o.closestPointLength(i);if(t){var a=o.length();e.anchor={name:"connectionRatio",args:{ratio:s/a}}}else e.anchor={name:"connectionLength",args:{length:s}};return e}fn(!1);const gn=fn(!0);var vn=n(72316);const mn={},yn=vn.View.extend({options:{},theme:null,themeClassNamePrefix:fe("theme-"),requireSetThemeOverride:!1,defaultTheme:he.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=Ie({},this.options,t),vn.View.call(this,t)},initialize:function(){mn[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},renderChildren:function(t){if(t||(t=Qe(this,"children")),t){var e=this.svgElement,n=ue.namespace[e?"svg":"xhtml"],r=pe(t,n);(e?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttribute:function(t,e){for(var n=e;n&&1===n.nodeType;){var r=n.getAttribute(t);if(r)return r;if(n===this.el)return null;n=n.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(Qe(this,"el"));else{var t=Qe(this,"tagName"),e=Ie({},Qe(this,"attributes")),n=Ie({},Qe(this,"style"));this.id&&(e.id=Qe(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e),this._setStyle(n)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(ue.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof vn.$?t:vn.$(t),this.el=this.$el[0],this.svgElement&&(this.vel=ue(this.el))},_ensureElClassName:function(){var t=Qe(this,"className");if(t){var e=fe(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override||(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t),this},addThemeClassName:function(t){if(!(t=t||this.theme))return this;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(e):this.$el.addClass(e),this},removeThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.removeClass(e):this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),mn[this.cid]=null,vn.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,e,n){if(!e)return this;n||(n={});var r=this.getEventNamespace();for(var i in e){var o=e[i];"function"!=typeof o&&(o=this[o]),o&&le(t).on(i+r,n,o.bind(this))}return this},undelegateElementEvents:function(t){return le(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,e){return t||(t=Qe(this,"documentEvents")),this.delegateElementEvents(document,t,e)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,e){if(!t)throw new Error("eventData(): event object required.");var n=t.data,r="__"+this.cid+"__";return void 0===e?n&&n[r]||{}:(n||(n=t.data={}),n[r]||(n[r]={}),Ie(n[r],e),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),e=t[0]&&Ie({},t[0])||{},n=t[1]&&Ie({},t[1])||{},r=e.render||this.prototype&&this.prototype.render||null;return e.render=function(){return"function"==typeof r&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},e.render.__render__=r,vn.View.extend.call(this,e,n)}});if(le.event&&!("dbltap"in le.event.special)){const t=he.doubleTapInterval,e=30;le.event.special.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(n,...r){const{handleObj:i,target:o}=n,s=le.data(o),a=(new Date).getTime(),u="lastTouch"in s?a-s.lastTouch:0;u<t&&u>e?(s.lastTouch=null,n.type=i.origType,i.handler.call(this,n,...r)):s.lastTouch=a}}}const bn=yn.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var t=this.name;t&&this.vel.attr("data-tool-name",t)},configure:function(t,e){return this.relatedView=t,this.paper=t.paper,this.parentView=e,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(t){t&&t.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var t=this.options.focusOpacity;isFinite(t)&&(this.el.style.opacity=t),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(t){const{paper:e,relatedView:n}=this;return!e||!n||e.guard(t,n)}});function xn(t,e,n){return gn.call(this.paper,{},e,n,t,this.model).anchor}function wn(t,e){const{model:n}=t;return e?n.getBBox():n.isLink()?t.getConnection().bbox():t.getNodeUnrotatedBBox(t.el)}var _n=yn.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick",dbltap:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(t,e){this.vel.attr({cx:t,cy:e})},onPointerDown:function(t){this.options.guard(t)||(t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data),this.trigger("will-change",this,t))},onPointerMove:function(t){this.trigger("changing",this,t)},onDoubleClick:function(t){this.trigger("remove",this,t)},onPointerUp:function(t){this.trigger("changed",this,t),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}}),An=bn.extend({name:"vertices",options:{handleClass:_n,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},onRender:function(){return this.options.vertexAdding&&(this.renderChildren(),this.updatePath()),this.resetHandles(),this.renderHandles(),this},update:function(){return this.relatedView.model.vertices().length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),Array.isArray(t))for(var e=0,n=t.length;e<n;e++)t[e].remove()},renderHandles:function(){for(var t=this.relatedView.model.vertices(),e=0,n=t.length;e<n;e++){var r=t[e],i=new this.options.handleClass({index:e,paper:this.paper,guard:t=>this.guard(t)});i.render(),i.position(r.x,r.y),this.simulateRelatedView(i.el),i.vel.appendTo(this.el),this.handles.push(i),this.startHandleListening(i)}},updateHandles:function(){for(var t=this.relatedView.model.vertices(),e=0,n=t.length;e<n;e++){var r=t[e],i=this.handles[e];if(!i)return;i.position(r.x,r.y)}},updatePath:function(){var t=this.childNodes.connection;t&&t.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(t){var e=this.relatedView;e.can("vertexMove")&&(this.listenTo(t,"will-change",this.onHandleWillChange),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"changed",this.onHandleChanged)),e.can("vertexRemove")&&this.listenTo(t,"remove",this.onHandleRemove)},getNeighborPoints:function(t){var e=this.relatedView,n=e.model.vertices(),r=t>0?n[t-1]:e.sourceAnchor,i=t<n.length-1?n[t+1]:e.targetAnchor;return{prev:new j(r),next:new j(i)}},onHandleWillChange:function(t,e){this.focus();const{relatedView:n,options:r}=this;n.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),r.stopPropagation||n.notifyPointerdown(...n.paper.getPointerArgs(e))},onHandleChanging:function(t,e){const{options:n,relatedView:r}=this;var i=t.options.index,[o,s,a]=r.paper.getPointerArgs(e),u={x:s,y:a};this.snapVertex(u,i),r.model.vertex(i,u,{ui:!0,tool:this.cid}),t.position(u.x,u.y),n.stopPropagation||r.notifyPointermove(o,s,a)},onHandleChanged:function(t,e){const{options:n,relatedView:r}=this;if(n.vertexAdding&&this.updatePath(),n.redundancyRemoval){r.removeRedundantLinearVertices({ui:!0,tool:this.cid})&&this.render(),this.blur(),r.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(e).vertexAdded&&r.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var[i,o,s]=r.paper.getPointerArgs(e);n.stopPropagation||r.notifyPointerup(i,o,s),r.checkMouseleave(i)}},snapVertex:function(t,e){var n=this.options.snapRadius;if(n>0){var r=this.getNeighborPoints(e),i=r.prev,o=r.next;Math.abs(t.x-i.x)<n?t.x=i.x:Math.abs(t.x-o.x)<n&&(t.x=o.x),Math.abs(t.y-i.y)<n?t.y=r.prev.y:Math.abs(t.y-o.y)<n&&(t.y=o.y)}},onHandleRemove:function(t,e){var n=t.options.index,r=this.relatedView;r.model.removeVertex(n,{ui:!0}),this.options.vertexAdding&&this.updatePath(),r.checkMouseleave(we(e))},onPathPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=we(t),n=this.paper.snapToGrid(e.clientX,e.clientY).toJSON(),r=this.relatedView;r.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var i=r.getVertexIndex(n.x,n.y);this.snapVertex(n,i),r.model.insertVertex(i,n,{ui:!0,tool:this.cid}),this.update();var o=this.handles[i];this.eventData(e,{vertexAdded:!0}),o.onPointerDown(e)}},onRemove:function(){this.resetHandles()}},{VertexHandle:_n}),kn=yn.extend({tagName:"g",svgElement:!0,className:"marker-segment",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},children:[{tagName:"line",selector:"line",attributes:{stroke:"#33334F","stroke-width":2,fill:"none","pointer-events":"none"}},{tagName:"rect",selector:"handle",attributes:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2}}],onRender:function(){this.renderChildren()},position:function(t,e,n,r){var i=ue.createSVGMatrix().translate(t,e).rotate(n),o=this.childNodes.handle;o.setAttribute("transform",ue.matrixToTransformString(i)),o.setAttribute("cursor",n%180==0?"row-resize":"col-resize");var s=r.getClosestPoint(new j(t,e)),a=this.childNodes.line;a.setAttribute("x1",t),a.setAttribute("y1",e),a.setAttribute("x2",s.x),a.setAttribute("y2",s.y)},onPointerDown:function(t){this.options.guard(t)||(this.trigger("change:start",this,t),t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data))},onPointerMove:function(t){this.trigger("changing",this,t)},onPointerUp:function(t){this.undelegateDocumentEvents(),this.options.paper.delegateEvents(),this.trigger("change:end",this,t)},show:function(){this.el.style.display=""},hide:function(){this.el.style.display="none"}}),Sn=(bn.extend({name:"segments",precision:.5,options:{handleClass:kn,segmentLengthThreshold:40,redundancyRemoval:!0,anchor:xn,snapRadius:10,snapHandle:!0,stopPropagation:!0},handles:null,onRender:function(){this.resetHandles();var t=this.relatedView,e=t.model.vertices();e.unshift(t.sourcePoint),e.push(t.targetPoint);for(var n=0,r=e.length;n<r-1;n++){var i=e[n],o=e[n+1],s=this.renderHandle(i,o);this.simulateRelatedView(s.el),this.handles.push(s),s.options.index=n}return this},renderHandle:function(t,e){var n=new this.options.handleClass({paper:this.paper,guard:t=>this.guard(t)});return n.render(),this.updateHandle(n,t,e),n.vel.appendTo(this.el),this.startHandleListening(n),n},update:function(){return this.render(),this},startHandleListening:function(t){this.listenTo(t,"change:start",this.onHandleChangeStart),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"change:end",this.onHandleChangeEnd)},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),Array.isArray(t))for(var e=0,n=t.length;e<n;e++)t[e].remove()},shiftHandleIndexes:function(t){for(var e=this.handles,n=0,r=e.length;n<r;n++)e[n].options.index+=t},resetAnchor:function(t,e){var n=this.relatedView.model;e?n.prop([t,"anchor"],e,{rewrite:!0,ui:!0,tool:this.cid}):n.removeProp([t,"anchor"],{ui:!0,tool:this.cid})},snapHandle:function(t,e,n){var r=t.options.index,i=this.relatedView.model.vertices(),o=t.options.axis,s=i[r-2]||n.sourceAnchor,a=i[r+1]||n.targetAnchor,u=this.options.snapRadius;return Math.abs(e[o]-s[o])<u?e[o]=s[o]:Math.abs(e[o]-a[o])<u&&(e[o]=a[o]),e},onHandleChanging:function(t,e){const{options:n}=this;var r=this.eventData(e),i=this.relatedView,o=i.paper,s=t.options.index-1,a=we(e),u=o.snapToGrid(a.clientX,a.clientY),c=this.snapHandle(t,u.clone(),r),l=t.options.axis,h=this.options.snapHandle?0:u[l]-c[l],f=i.model,d=ze(f.vertices()),p=d[s],g=d[s+1],v=this.options.anchor;"function"!=typeof v&&(v=null);var m=i.sourceView,y=i.sourceBBox,b=!1,x=!1;if(p?0===s?y.containsPoint(p)?(d.shift(),this.shiftHandleIndexes(-1),b=!0):(p[l]=c[l],x=!0):p[l]=c[l]:((p=i.sourceAnchor.toJSON())[l]=c[l],y.containsPoint(p)?(p[l]=c[l],b=!0):(d.unshift(p),this.shiftHandleIndexes(1),x=!0)),v&&m){if(b){var w=r.sourceAnchor.clone();w[l]=c[l];var _=v.call(i,w,m,i.sourceMagnet||m.el,"source",i);this.resetAnchor("source",_)}x&&this.resetAnchor("source",r.sourceAnchorDef)}var A=i.targetView,k=i.targetBBox,S=!1,E=!1;if(g?s===d.length-2?k.containsPoint(g)?(d.pop(),S=!0):(g[l]=c[l],E=!0):g[l]=c[l]:((g=i.targetAnchor.toJSON())[l]=c[l],k.containsPoint(g)?S=!0:(d.push(g),E=!0)),v&&A){if(S){var P=r.targetAnchor.clone();P[l]=c[l];var C=v.call(i,P,A,i.targetMagnet||A.el,"target",i);this.resetAnchor("target",C)}E&&this.resetAnchor("target",r.targetAnchorDef)}f.vertices(d,{ui:!0,tool:this.cid}),this.updateHandle(t,p,g,h),n.stopPropagation||i.notifyPointermove(a,u.x,u.y)},onHandleChangeStart:function(t,e){const{options:n,handles:r,relatedView:i}=this,{model:o,paper:s}=i;var a=t.options.index;if(Array.isArray(r)){for(var u=0,c=r.length;u<c;u++)u!==a&&r[u].hide();this.focus(),this.eventData(e,{sourceAnchor:i.sourceAnchor.clone(),targetAnchor:i.targetAnchor.clone(),sourceAnchorDef:Fe(o.prop(["source","anchor"])),targetAnchorDef:Fe(o.prop(["target","anchor"]))}),o.startBatch("segment-move",{ui:!0,tool:this.cid}),n.stopPropagation||i.notifyPointerdown(...s.getPointerArgs(e))}},onHandleChangeEnd:function(t,e){const{options:n,relatedView:r}=this,{paper:i,model:o}=r;n.redundancyRemoval&&r.removeRedundantLinearVertices({ui:!0,tool:this.cid});const s=we(e),a=i.snapToGrid(s.clientX,s.clientY);this.render(),this.blur(),o.stopBatch("segment-move",{ui:!0,tool:this.cid}),n.stopPropagation||r.notifyPointerup(s,a.x,a.y),r.checkMouseleave(s)},updateHandle:function(t,e,n,r){var i=Math.abs(e.x-n.x)<this.precision,o=Math.abs(e.y-n.y)<this.precision;if(i||o){var s=new rt(e,n);if(s.length()<this.options.segmentLengthThreshold)t.hide();else{var a=s.midpoint(),u=i?"x":"y";a[u]+=r||0;var c=s.vector().vectorAngle(new j(1,0));t.position(a.x,a.y,c,this.relatedView),t.show(),t.options.axis=u}}else t.hide()},onRemove:function(){this.resetHandles()}},{SegmentHandle:kn}),bn.extend({tagName:"path",xAxisVector:new j(1,0),events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},onRender:function(){this.update()},update:function(){var t,e,n=this.ratio,r=this.relatedView,i=r.getTangentAtRatio(n);if(i?(t=i.start,e=i.vector().vectorAngle(this.xAxisVector)||0):(t=r.getPointAtRatio(n),e=0),!t)return this;var o=ue.createSVGMatrix().translate(t.x,t.y).rotate(e);return this.vel.transform(o,{absolute:!0}),this},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.relatedView;e.model.startBatch("arrowhead-move",{ui:!0,tool:this.cid}),e.can("arrowheadMove")&&(e.startArrowheadMove(this.arrowheadType),this.delegateDocumentEvents(),e.paper.undelegateEvents()),this.focus(),this.el.style.pointerEvents="none"}},onPointerMove:function(t){var e=we(t),n=this.paper.snapToGrid(e.clientX,e.clientY);this.relatedView.pointermove(e,n.x,n.y)},onPointerUp:function(t){this.undelegateDocumentEvents();var e=this.relatedView,n=e.paper,r=we(t),i=n.snapToGrid(r.clientX,r.clientY);e.pointerup(r,i.x,i.y),n.delegateEvents(),this.blur(),this.el.style.pointerEvents="",e.model.stopBatch("arrowhead-move",{ui:!0,tool:this.cid})}})),En=Sn.extend({name:"target-arrowhead",ratio:1,arrowheadType:"target",attributes:{d:"M -10 -8 10 0 -10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"target-arrowhead"}}),Pn=Sn.extend({name:"source-arrowhead",ratio:0,arrowheadType:"source",attributes:{d:"M 10 -8 -10 0 10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"source-arrowhead"}}),Cn=bn.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){const{relatedView:t,vel:e}=this,n=t.model.isLink()?this.getLinkMatrix():this.getElementMatrix();e.transform(n,{absolute:!0})},getElementMatrix(){const{relatedView:t,options:e}=this;let{x:n=0,y:r=0,offset:i={},useModelGeometry:o,rotate:s}=e,a=wn(t,o);const u=t.model.angle();s||(a=a.bbox(u));const{x:c=0,y:l=0}=i;Ee(n)&&(n=parseFloat(n)/100*a.width),Ee(r)&&(r=parseFloat(r)/100*a.height);let h=ue.createSVGMatrix().translate(a.x+a.width/2,a.y+a.height/2);return s&&(h=h.rotate(u)),h=h.translate(n+c-a.width/2,r+l-a.height/2),h},getLinkMatrix(){const{relatedView:t,options:e}=this,{offset:n=0,distance:r=0,rotate:i}=e;let o,s,a;o=Ee(r)?t.getTangentAtRatio(parseFloat(r)/100):t.getTangentAtLength(r),o?(s=o.start,a=o.vector().vectorAngle(new j(1,0))||0):(s=t.getConnection().start,a=0);let u=ue.createSVGMatrix().translate(s.x,s.y).rotate(a).translate(0,n);return i||(u=u.rotate(-a)),u},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.options.action;"function"==typeof e&&e.call(this.relatedView,t,this.relatedView,this)}}}),Tn=Cn.extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(t,e,n){e.model.remove({ui:!0,tool:n.cid})}}});Cn.extend({name:"connect",documentEvents:{mousemove:"drag",touchmove:"drag",mouseup:"dragend",touchend:"dragend",touchcancel:"dragend"},children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#333333",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -4 -1 L 0 -1 L 0 -4 L 4 0 L 0 4 0 1 -4 1 z",fill:"#FFFFFF",stroke:"none","stroke-width":2,"pointer-events":"none"}}],options:{distance:80,offset:0,magnet:t=>t.el,action:(t,e,n)=>n.dragstart(t)},getMagnetNode:function(){const{options:t,relatedView:e}=this,{magnet:n}=t;let r;switch(typeof n){case"function":r=n.call(this,e,this);break;case"string":[r]=e.findBySelector(n);break;default:r=n}if(r||(r=e.el),r instanceof SVGElement)return r;throw new Error("Connect: magnet must be an SVGElement")},dragstart:function(t){const{paper:e,relatedView:n}=this,r=we(t),{x:i,y:o}=e.clientToLocalPoint(r.clientX,r.clientY);n.dragLinkStart(r,this.getMagnetNode(),i,o),e.undelegateEvents(),this.delegateDocumentEvents(null,t.data),this.focus()},drag:function(t){const{paper:e,relatedView:n}=this,r=we(t),{x:i,y:o}=e.snapToGrid(r.clientX,r.clientY);n.dragLink(r,i,o)},dragend:function(t){const{paper:e,relatedView:n}=this,r=we(t),{x:i,y:o}=e.snapToGrid(r.clientX,r.clientY);n.dragLinkEnd(r,i,o),this.undelegateDocumentEvents(),e.delegateEvents(),this.blur(),n.checkMouseleave(r)}}),bn.extend({name:"boundary",tagName:"rect",options:{padding:10,useModelGeometry:!1},attributes:{fill:"none",stroke:"#33334F","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"},onRender:function(){this.update()},update:function(){const{relatedView:t,options:e,vel:n}=this,{useModelGeometry:r,rotate:i}=e,o=Te(e.padding);let s=wn(t,r).moveAndExpand({x:-o.left,y:-o.top,width:o.left+o.right,height:o.top+o.bottom});var a=t.model;if(a.isElement()){var u=a.angle();if(u)if(i){var c=a.getBBox().center();n.rotate(u,c.x,c.y,{absolute:!0})}else s=s.bbox(u)}return n.attr(s.toJSON()),this}});var Nn=bn.extend({tagName:"g",type:null,children:[{tagName:"circle",selector:"anchor",attributes:{cursor:"pointer"}},{tagName:"rect",selector:"area",attributes:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onPointerDblClick",dbltap:"onPointerDblClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{snap:function(t,e,n,r,i,o){var s=o.options.snapRadius,a="source"===r,u=a?0:-1,c=this.model.vertex(u)||this.getEndAnchor(a?"target":"source");return c&&(Math.abs(c.x-t.x)<s&&(t.x=c.x),Math.abs(c.y-t.y)<s&&(t.y=c.y)),t},anchor:xn,resetAnchor:!0,customAnchorAttributes:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttributes:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,restrictArea:!0,redundancyRemoval:!0},onRender:function(){this.renderChildren(),this.toggleArea(!1),this.update()},update:function(){var t=this.type;return this.relatedView.getEndView(t)?(this.updateAnchor(),this.updateArea(),this.el.style.display=""):this.el.style.display="none",this},updateAnchor:function(){var t=this.childNodes;if(t){var e=t.anchor;if(e){var n=this.relatedView,r=this.type,i=n.getEndAnchor(r),o=this.options,s=n.model.prop([r,"anchor"]);e.setAttribute("transform","translate("+i.x+","+i.y+")");var a=s?o.customAnchorAttributes:o.defaultAnchorAttributes;for(var u in a)e.setAttribute(u,a[u])}}},updateArea:function(){var t=this.childNodes;if(t){var e=t.area;if(e){var n,r,i,o=this.relatedView,s=this.type,a=o.getEndView(s),u=a.model,c=o.getEndMagnet(s),l=this.options.areaPadding;isFinite(l)||(l=0),a.isNodeConnection(c)?(r=0,i=(n=a.getBBox()).center()):(n=a.getNodeUnrotatedBBox(c),r=u.angle(),i=n.center(),r&&i.rotate(u.getBBox().center(),-r)),n.inflate(l),e.setAttribute("x",-n.width/2),e.setAttribute("y",-n.height/2),e.setAttribute("width",n.width),e.setAttribute("height",n.height),e.setAttribute("transform","translate("+i.x+","+i.y+") rotate("+r+")")}}},toggleArea:function(t){this.childNodes.area.style.display=t?"":"none"},onPointerDown:function(t){this.guard(t)||(t.stopPropagation(),t.preventDefault(),this.paper.undelegateEvents(),this.delegateDocumentEvents(),this.focus(),this.toggleArea(this.options.restrictArea),this.relatedView.model.startBatch("anchor-move",{ui:!0,tool:this.cid}))},resetAnchor:function(t){var e=this.type,n=this.relatedView.model;t?n.prop([e,"anchor"],t,{rewrite:!0,ui:!0,tool:this.cid}):n.removeProp([e,"anchor"],{ui:!0,tool:this.cid})},onPointerMove:function(t){var e,n=this.relatedView,r=this.type,i=n.getEndView(r),o=i.model,s=n.getEndMagnet(r),a=we(t),u=this.paper.clientToLocalPoint(a.clientX,a.clientY),c=this.options.snap;if("function"==typeof c&&(u=c.call(n,u,i,s,r,n,this),u=new j(u)),this.options.restrictArea)if(i.isNodeConnection(s)){var l=i.getClosestPoint(u);l&&(u=l)}else{var h=i.getNodeUnrotatedBBox(s),f=o.angle(),d=o.getBBox().center(),p=u.clone().rotate(d,f);h.containsPoint(p)||(u=h.pointNearestToPoint(p).rotate(d,-f))}var g=this.options.anchor;"function"==typeof g&&(e=g.call(n,u,i,s,r,n)),this.resetAnchor(e),this.update()},onPointerUp:function(t){this.paper.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);var e=this.relatedView;this.options.redundancyRemoval&&e.removeRedundantLinearVertices({ui:!0,tool:this.cid}),e.model.stopBatch("anchor-move",{ui:!0,tool:this.cid})},onPointerDblClick:function(){var t=this.options.resetAnchor;!1!==t&&(!0===t&&(t=null),this.resetAnchor(ze(t)),this.update())}});function Ln(t){t=Ve(t);const e=We(t).reduce((function(t,e){return t[e.id]=e.clone(),t}),{});return We(t).forEach((function(t){const n=e[t.id];if(n.isLink()){const t=n.source(),r=n.target();t.id&&e[t.id]&&n.prop("source/id",e[t.id].id),r.id&&e[r.id]&&n.prop("target/id",e[r.id].id)}const r=t.get("parent");r&&e[r]&&n.set("parent",e[r].id);const i=We(t.get("embeds")).reduce((function(t,n){return e[n]&&t.push(e[n].id),t}),[]);Ue(i)||n.set("embeds",i)})),e}Nn.extend({name:"source-anchor",type:"source"}),Nn.extend({name:"target-anchor",type:"target"});const Mn={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},On=Object.keys(Mn).map((t=>Mn[t])).join(""),In="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",Rn=/\s/g,Bn=new RegExp(`^(${In}\\*)?([${On}])([-+]{1,2}${In})?$`,"g");function Dn(t){throw new Error(`Invalid calc() expression: ${t}`)}function jn(t,e){const n=Bn.exec(t.replace(Rn,""));n||Dn(t),Bn.lastIndex=0;const[,r=1,i,o=0]=n,{x:s,y:a,width:u,height:c}=e;let l=0;switch(i){case Mn.width:l=u;break;case Mn.height:l=c;break;case Mn.x:l=s;break;case Mn.y:l=a;break;case Mn.minimum:l=Math.min(c,u);break;case Mn.maximum:l=Math.max(c,u);break;case Mn.diagonal:l=Math.sqrt(c*c+u*u)}return parseFloat(r)*l+function(t){if(!t)return 0;const[e]=t;switch(e){case"+":return parseFloat(t.substr(1));case"-":return-parseFloat(t.substr(1))}return parseFloat(t)}(o)}function Vn(t){return"string"==typeof t&&t.includes("calc")}const Fn="calc(",zn=Fn.length;function Un(t,e){let n=t,r=0;for(;;){let t=n.indexOf(Fn,r);if(-1===t)return n;let i=t+zn,o=1;t:for(;;){switch(n[i]){case"(":o++;break;case")":if(o--,0===o)break t;break;case void 0:Dn(n)}i++}let s=n.slice(t+zn,i);Vn(s)&&(s=Un(s,e));const a=String(jn(s,e));n=n.slice(0,t)+a+n.slice(i+1),r=t+a.length}}function Gn(t,e){return function(n,r){var i=Ee(n);n=parseFloat(n),i&&(n/=100);var o={};if(isFinite(n)){var s=i||n>=0&&n<=1?n*r[e]:Math.max(n+r[e],0);o[t]=s}return o}}function qn(t,e,n){return function(r,i){var o,s=Ee(r);if(r=parseFloat(r),s&&(r/=100),isFinite(r)){var a=i[n]();o=s||r>0&&r<1?a[t]+i[e]*r:a[t]+r}var u=j();return u[t]=o||0,u}}function Hn(t,e,n){return function(r,i){var o;o="middle"===r?i[e]/2:r===n?i[e]:isFinite(r)?r>-1&&r<1?-i[e]*r:-r:Ee(r)?i[e]*parseFloat(r)/100:0;var s=j();return s[t]=-(i[t]+o),s}}function Wn(t,e){var n="joint-shape",r=e&&e.resetOffset;return function(e,i,o){var s=le(o),a=s.data(n);if(!a||a.value!==e){var u=t(e);a={value:e,shape:u,shapeBBox:u.bbox()},s.data(n,a)}var c=a.shape.clone(),l=a.shapeBBox.clone(),h=l.origin(),f=i.origin();l.x=f.x,l.y=f.y;var d=i.maxRectScaleToFit(l,f),p=0===l.width||0===i.width?1:d.sx,g=0===l.height||0===i.height?1:d.sy;return c.scale(p,g,h),r&&c.translate(-h.x,-h.y),c}}function $n(t){var e=Wn((function(t){return new vt(ue.normalizePathData(t))}),t);return function(t,n,r){return{d:e(t,n,r).serialize()}}}function Xn(t){var e=Wn(ut,t);return function(t,n,r){return{points:e(t,n,r).serialize()}}}function Yn(t,e){var n=new j(1,0);return function(r){var i,o,s=this[t](r);return s?(o=e.rotate?s.vector().vectorAngle(n):0,i=s.start):(i=this.path.start,o=0),0===o?{transform:"translate("+i.x+","+i.y+")"}:{transform:"translate("+i.x+","+i.y+") rotate("+o+")"}}}function Jn(t){return function(e,n,r){const i=ue(r);i.attr(t)!==e&&i.attr(t,e)}}function Zn(t,e,n){return void 0!==n.text}function Kn(){return this.model.isLink()}function Qn(t){var e={},n=t.stroke;"string"==typeof n&&(e.stroke=n,e.fill=n);var r=t.strokeOpacity;return void 0===r&&(r=t["stroke-opacity"]),void 0===r&&(r=t.opacity),void 0!==r&&(e["stroke-opacity"]=r,e["fill-opacity"]=r),e}function tr(t){const{paper:e}=this;return`url(#${"pattern"===t.type?e.definePattern(t):e.defineGradient(t)})`}const er={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:Jn("href")},xlinkHref:{set:Jn("xlink:href")},filter:{qualify:He,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}},fill:{qualify:He,set:tr},stroke:{qualify:He,set:tr},sourceMarker:{qualify:He,set:function(t,e,n,r){return t=Ie(Qn(r),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},targetMarker:{qualify:He,set:function(t,e,n,r){return t=Ie(Qn(r),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},vertexMarker:{qualify:He,set:function(t,e,n,r){return t=Ie(Qn(r),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},text:{qualify:function(t,e,n){return!n.textWrap||!He(n.textWrap)},set:function(t,e,n,r){var i=le(n),o="joint-text",s=i.data(o),a=en(r,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty");const{x:u}=a;Vn(u)&&(a.x=Un(u,e));var c=a.fontSize=r["font-size"]||r.fontSize,l=JSON.stringify([t,a]);if(void 0===s||s!==l){c&&n.setAttribute("font-size",c);var h=a.textPath;if(an(h)){var f=h.selector;if("string"==typeof f){var d=this.findBySelector(f)[0];d instanceof SVGPathElement&&(a.textPath=Ie({"xlink:href":"#"+d.id},h))}}ue(n).text(""+t,a),i.data(o,l)}}},textWrap:{qualify:He,set:function(t,e,n,r){var i=t.width||0,o={};Ee(i)?o.width=e.width*parseFloat(i)/100:o.width=i<=0?e.width+i:i;var s,a=t.height||0;Ee(a)?o.height=e.height*parseFloat(a)/100:o.height=a<=0?e.height+a:a;var u=t.text;void 0===u&&(u=r.text),s=void 0!==u?Ce(""+u,o,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":r["font-size"]||r.fontSize,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight,"letter-spacing":"letter-spacing"in r?r["letter-spacing"]:r.letterSpacing},{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,maxLineCount:t.maxLineCount}):"",er.text.set.call(this,s,e,n,r)}},title:{qualify:function(t,e){return e instanceof SVGElement},set:function(t,e,n){var r=le(n),i="joint-title",o=r.data(i);if(void 0===o||o!==t){r.data(i,t);var s=n.firstChild;if(s&&"TITLE"===s.tagName.toUpperCase())s.textContent=t;else{var a=document.createElementNS(n.namespaceURI,"title");a.textContent=t,n.insertBefore(a,s)}}}},lineHeight:{qualify:Zn},textVerticalAnchor:{qualify:Zn},textPath:{qualify:Zn},annotations:{qualify:Zn},eol:{qualify:Zn},displayEmpty:{qualify:Zn},port:{set:function(t){return null===t||void 0===t.id?t:t.id}},style:{qualify:He,set:function(t,e,n){le(n).css(t)}},html:{set:function(t,e,n){le(n).html(t+"")}},ref:{},refX:{position:qn("x","width","origin")},refY:{position:qn("y","height","origin")},refDx:{position:qn("x","width","corner")},refDy:{position:qn("y","height","corner")},refWidth:{set:Gn("width","width")},refHeight:{set:Gn("height","height")},refRx:{set:Gn("rx","width")},refRy:{set:Gn("ry","height")},refRInscribed:{set:(nr=Gn("r","width"),rr=Gn("r","height"),function(t,e){return(e.height>e.width?nr:rr)(t,e)})},refRCircumscribed:{set:function(t,e){var n=Ee(t);t=parseFloat(t),n&&(t/=100);var r,i=Math.sqrt(e.height*e.height+e.width*e.width);return isFinite(t)&&(r=n||t>=0&&t<=1?t*i:Math.max(t+i,0)),{r}}},refCx:{set:Gn("cx","width")},refCy:{set:Gn("cy","height")},xAlignment:{offset:Hn("x","width","right")},yAlignment:{offset:Hn("y","height","bottom")},resetOffset:{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}},refDResetOffset:{set:$n({resetOffset:!0})},refDKeepOffset:{set:$n({resetOffset:!1})},refPointsResetOffset:{set:Xn({resetOffset:!0})},refPointsKeepOffset:{set:Xn({resetOffset:!1})},connection:{qualify:Kn,set:function({stubs:t=0}){let e;if(isFinite(t)&&0!==t){let n;n=t<0?(this.getConnectionLength()+t)/2:t;const r=this.getConnection(),i=r.divideAtLength(n),o=r.divideAtLength(-n);i&&o&&(e=`${i[0].serialize()} ${o[1].serialize()}`)}return{d:e||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:Kn,set:Yn("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:Kn,set:Yn("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:Kn,set:Yn("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:Kn,set:Yn("getTangentAtRatio",{rotate:!1})}};var nr,rr;er["xlink:href"]=er.xlinkHref,["transform","d","points","width","height","cx","cy","r","rx","ry","x1","x2","y1","y2","x","y","dx","dy"].forEach((t=>{er[t]={qualify:Vn,set:function(e,n){return{[t]:Un(e,n)}}}})),er.refR=er.refRInscribed,er.refD=er.refDResetOffset,er.refPoints=er.refPointsResetOffset,er.atConnectionLength=er.atConnectionLengthKeepGradient,er.atConnectionRatio=er.atConnectionRatioKeepGradient,er.refX2=er.refX,er.refY2=er.refY,er.refWidth2=er.refWidth,er.refHeight2=er.refHeight,er["ref-x"]=er.refX,er["ref-y"]=er.refY,er["ref-dy"]=er.refDy,er["ref-dx"]=er.refDx,er["ref-width"]=er.refWidth,er["ref-height"]=er.refHeight,er["x-alignment"]=er.xAlignment,er["y-alignment"]=er.yAlignment;const ir=er,or=vn.Model.extend({constructor:function(t,e){var n,r=t||{};"function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=on("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(r=this.parse(r,e)||{}),(n=Qe(this,"defaults"))&&(r=sn({},n,r)),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,n){throw new Error("Must define a translate() method.")},toJSON:function(){const t=Qe(this.constructor.prototype,"defaults").attrs||{},e=this.attributes.attrs,n={};nn(e,(function(e,r){const i=t[r];nn(e,(function(t,e){an(t)&&!Array.isArray(t)?nn(t,(function(t,o){i&&i[e]&&Ge(i[e][o],t)||(n[r]=n[r]||{},(n[r][e]||(n[r][e]={}))[o]=t)})):i&&Ge(i[e],t)||(n[r]=n[r]||{},n[r][e]=t)}))}));const r=ze(tn(this.attributes,"attrs"));return r.attrs=n,r},initialize:function(t){const e=this.getIdAttribute();t&&e in t||this.set(e,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},processPorts:function(){var t=this.ports,e={};nn(this.get("attrs"),(function(t,n){t&&t.port&&(void 0!==t.port.id?e[t.port.id]=t.port:e[t.port]={id:t.port})}));var n={};nn(t,(function(t,r){e[r]||(n[r]=!0)})),this.graph&&!Ue(n)&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach((function(t){n[t.get("target").port]&&t.remove()})),this.graph.getConnectedLinks(this,{outbound:!0}).forEach((function(t){n[t.get("source").port]&&t.remove()}))),this.ports=e},remove:function(t={}){const{graph:e,collection:n}=this;if(!e)return n&&n.remove(this,t),this;e.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,t);const i=this.getEmbeddedCells();for(let e=0,n=i.length;e<n;e++){const n=i[e];n&&n.remove(t)}return this.trigger("remove",this,e.attributes.cells,t),e.stopBatch("remove"),this},toFront:function(t){var e=this.graph;if(e){t=t||{};var n,r=e.maxZIndex();t.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==t.breadthFirst})).unshift(this):n=[this],r=r-n.length+1;var i=e.get("cells"),o=i.indexOf(this)!==i.length-n.length;o||(o=n.some((function(t,e){return t.get("z")!==r+e}))),o&&(this.startBatch("to-front"),r+=n.length,n.forEach((function(e,n){e.set("z",r+n,t)})),this.stopBatch("to-front"))}return this},toBack:function(t){var e=this.graph;if(e){t=t||{};var n,r=e.minZIndex();t.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==t.breadthFirst})).unshift(this):n=[this];var i=0!==e.get("cells").indexOf(this);i||(i=n.some((function(t,e){return t.get("z")!==r+e}))),i&&(this.startBatch("to-back"),r-=n.length,n.forEach((function(e,n){e.set("z",r+n,t)})),this.stopBatch("to-back"))}return this},parent:function(t,e){return void 0===t?this.get("parent"):this.set("parent",t,e)},embed:function(t,e){const n=Array.isArray(t)?t:[t];if(!this.canEmbed(n))throw new Error("Recursive embedding not allowed.");return this._embedCells(n,e),this},unembed:function(t,e){const n=Array.isArray(t)?t:[t];return this._unembedCells(n,e),this},canEmbed:function(t){return(Array.isArray(t)?t:[t]).every((t=>this!==t&&!this.isEmbeddedIn(t)))},_embedCells:function(t,e){const n="embed";this.startBatch(n);const r=Ie([],this.get("embeds"));t.forEach((t=>{r[t.isLink()?"unshift":"push"](t.id),t.parent(this.id,e)})),this.set("embeds",Ve(r),e),this.stopBatch(n)},_unembedCells:function(t,e){const n="unembed";this.startBatch(n),t.forEach((t=>t.unset("parent",e))),this.set("embeds",Ye(this.get("embeds"),...t.map((t=>t.id))),e),this.stopBatch(n)},getParentCell:function(){var t=this.parent(),e=this.graph;return t&&e&&e.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var e=this.getParentCell();e;)t.push(e),e=e.getParentCell();return t},getEmbeddedCells:function(t){if(t=t||{},this.graph){var e;if(t.deep)if(t.breadthFirst){e=[];for(var n=this.getEmbeddedCells();n.length>0;){var r=n.shift();e.push(r),n.push.apply(n,r.getEmbeddedCells())}}else(e=this.getEmbeddedCells()).forEach((function(n){e.push.apply(e,n.getEmbeddedCells(t))}));else e=We(this.get("embeds")).map(this.graph.getCell,this.graph);return e}return[]},isEmbeddedIn:function(t,e){var n=cn(t)?t:t.id,r=this.parent();if(e=Re({deep:!0},e),this.graph&&e.deep){for(;r;){if(r===n)return!0;r=this.graph.getCell(r).parent()}return!1}return r===n},isEmbedded:function(){return!!this.parent()},clone:function(t){if((t=t||{}).deep)return We(Ln([this].concat(this.getEmbeddedCells({deep:!0}))));var e=vn.Model.prototype.clone.apply(this,arguments);return e.set(this.getIdAttribute(),this.generateId()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,n){var r="/",i=cn(t);if(i||Array.isArray(t)){if(arguments.length>1){var o,s;i?s=(o=t).split("/"):(o=t.join(r),s=t.slice());var a=s[0],u=s.length;if((n=n||{}).propertyPath=o,n.propertyValue=e,n.propertyPathArray=s,1===u)return this.set(a,e,n);for(var c={},l=c,h=a,f=1;f<u;f++){var d=s[f],p=Number.isFinite(i?Number(d):d);l=l[h]=p?[]:{},h=d}c=ye(c,s,e,"/");var g=sn({},this.attributes);n.rewrite&&be(g,o,"/");var v=sn(g,c);return this.set(a,v[a],n)}return ve(this.attributes,t,r)}return this.set(sn({},this.attributes,t),e)},removeProp:function(t,e){e=e||{};var n=Array.isArray(t)?t:t.split("/"),r=n[0];if("attrs"===r&&(e.dirty=!0),1===n.length)return this.unset(t,e);var i=n.slice(1),o=ze(this.get(r));return be(o,i,"/"),this.set(r,o,e)},attr:function(t,e,n){var r=Array.from(arguments);return 0===r.length?this.get("attrs"):(Array.isArray(t)?r[0]=["attrs"].concat(t):cn(t)?r[0]="attrs/"+t:r[0]={attrs:t},this.prop.apply(this,r))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(t,e,n,r){r=r||"/",n=Ie({duration:100,delay:10,timingFunction:Ne.linear,valueFunction:Le.number},n);var i,o=0,s=function(e){var r,a,u;(a=(e-=o=o||e)/n.duration)<1?this._transitionIds[t]=r=_e(s):(a=1,delete this._transitionIds[t]),u=i(n.timingFunction(a)),n.transitionId=r,this.prop(t,u,n),r||this.trigger("transition:end",this,t)}.bind(this);const{_scheduledTransitionIds:a}=this;let u;return u=setTimeout((o=>{a[t]&&(a[t]=Ye(a[t],u),0===a[t].length&&delete a[t]),this.stopPendingTransitions(t,r),i=n.valueFunction(ve(this.attributes,t,r),e),this._transitionIds[t]=_e(o),this.trigger("transition:start",this,t)}),n.delay,s),a[t]||(a[t]=[]),a[t].push(u),u},getTransitions:function(){return Ze(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(t,e="/"){const{_scheduledTransitionIds:n={}}=this;let r=Object.keys(n);if(t){const n=t.split(e);r=r.filter((t=>Ge(n,t.split(e).slice(0,n.length))))}return r.forEach((t=>{n[t].forEach((t=>clearTimeout(t))),delete n[t]})),this},stopPendingTransitions(t,e="/"){const{_transitionIds:n={}}=this;let r=Object.keys(n);if(t){const n=t.split(e);r=r.filter((t=>Ge(n,t.split(e).slice(0,n.length))))}r.forEach((t=>{const e=n[t];Ae(e),delete n[t],this.trigger("transition:end",this,t)}))},stopTransitions:function(t,e="/"){return this.stopScheduledTransitions(t,e),this.stopPendingTransitions(t,e),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,Ie({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,Ie({},e,{cell:this})),this},getChangeFlag:function(t){var e=0;if(!t)return e;for(var n in t)t.hasOwnProperty(n)&&this.hasChanged(n)&&(e|=t[n]);return e},angle:function(){return 0},position:function(){return new j(0,0)},getPointFromConnectedLink:function(){return new j},getBBox:function(){return new Q(0,0,0,0)},getPointRotatedAroundCenter(t,e,n){const r=new j(e,n);return t&&r.rotate(this.getBBox().center(),t),r},getAbsolutePointFromRelative(t,e){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(t,e))},getRelativePointFromAbsolute(t,e){return this.getPointRotatedAroundCenter(this.angle(),t,e).difference(this.position())}},{getAttributeDefinition:function(t){var e=this.attributes,n=ir;return e&&e[t]||n[t]},define:function(t,e,n,r){n=Ie({defaults:Be({type:t},e,this.prototype.defaults)},n);var i=this.extend(n,r);return"undefined"!=typeof joint&&Ke(joint,"shapes")&&ye(joint.shapes,t,i,"."),i}});function sr(t,e,n){var r=t.toJSON();return r.angle=e||0,Re({},n,r)}function ar(t,e,n){return t.map((function(t,e,n){var r=this.pointAt((e+.5)/n.length);return(t.dx||t.dy)&&r.offset(t.dx||0,t.dy||0),sr(r.round(),0,t)}),it(e,n))}function ur(t,e,n,r){var i=e.center(),o=e.width/e.height,s=e.topMiddle(),a=G.fromRect(e);return t.map((function(t,e,u){var c=n+r(e,u.length),l=s.clone().rotate(i,-c).scale(o,1,i),h=t.compensateRotation?-a.tangentTheta(l):0;return(t.dx||t.dy)&&l.offset(t.dx||0,t.dy||0),t.dr&&l.move(i,t.dr),sr(l.round(),h,t)}))}function cr(t,e){var n=e.x;cn(n)&&(n=parseFloat(n)/100*t.width);var r=e.y;return cn(r)&&(r=parseFloat(r)/100*t.height),V(n||0,r||0)}const lr=function(t,e,n){return t.map(cr.bind(null,e))},hr=function(t,e,n){return n.fn(t,e,n)},fr=function(t,e,n){return ar(t,cr(e,n.start||e.origin()),cr(e,n.end||e.corner()))},dr=function(t,e,n){return ar(t,e.origin(),e.bottomLeft())},pr=function(t,e,n){return ar(t,e.topRight(),e.corner())},gr=function(t,e,n){return ar(t,e.origin(),e.topRight())},vr=function(t,e,n){return ar(t,e.bottomLeft(),e.corner())},mr=function(t,e,n){var r=n.startAngle||0,i=n.step||360/t.length;return ur(t,e,r,(function(t){return t*i}))},yr=function(t,e,n){var r=n.startAngle||0,i=n.step||20;return ur(t,e,r,(function(t,e){return(t+.5-e/2)*i}))};function br(t,e){return Be({},t,e,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function xr(t,e,n,r){r=Re({},r,{offset:15});var i,o,s,a,u=e.center().theta(t),c=wr(e),l=r.offset,h=0;u<c[1]||u>c[2]?(s=".3em",i=l,o=0,a="start"):u<c[0]?(s="0",i=0,o=-l,n?(h=-90,a="start"):a="middle"):u<c[3]?(s=".3em",i=-l,o=0,a="end"):(s=".6em",i=0,o=l,n?(h=90,a="start"):a="middle");var f=Math.round;return br({x:f(i),y:f(o),angle:h,attrs:{".":{y:s,"text-anchor":a}}})}function wr(t){var e=t.center(),n=e.theta(t.origin()),r=e.theta(t.bottomLeft()),i=e.theta(t.corner());return[n,e.theta(t.topRight()),i,r]}function _r(t,e,n,r){var i,o,s,a,u=e.center().theta(t),c=(r=Re({},r,{offset:15})).offset,l=0,h=wr(e);u<h[1]||u>h[2]?(s=".3em",i=-c,o=0,a="end"):u<h[0]?(s=".6em",i=0,o=c,n?(l=90,a="start"):a="middle"):u<h[3]?(s=".3em",i=c,o=0,a="start"):(s="0em",i=0,o=-c,n?(l=-90,a="start"):a="middle");var f=Math.round;return br({x:f(i),y:f(o),angle:l,attrs:{".":{y:s,"text-anchor":a}}})}function Ar(t,e,n){n=Re({},n,{offset:20});var r,i=V(0,0),o=-t.theta(i),s=o,a=t.clone().move(i,n.offset).difference(t).round(),u=".3em";(o+90)%180==0?(r=e?"end":"middle",e||-270!==o||(u="0em")):o>-270&&o<-90?(r="start",s=o-180):r="end";var c=Math.round;return br({x:c(a.x),y:c(a.y),angle:e?s:0,attrs:{".":{y:u,"text-anchor":r}}})}const kr=function(t,e,n){return br(n,e)},Sr=function(t,e,n){return br(n,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},Er=function(t,e,n){return br(n,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},Pr=function(t,e,n){return br(n,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},Cr=function(t,e,n){return br(n,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},Tr=function(t,e,n){return xr(t,e,!0,n)},Nr=function(t,e,n){return xr(t,e,!1,n)},Lr=function(t,e,n){return _r(t,e,!0,n)},Mr=function(t,e,n){return _r(t,e,!1,n)},Or=function(t,e,n){return Ar(t.difference(e.center()),!1,n)},Ir=function(t,e,n){return Ar(t.difference(e.center()),!0,n)};var Rr=function(t){var e=ze(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=r,this.portLabelLayoutNamespace=i,this._init(e)};Rr.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(t){return this.ports.filter((function(e){return e.group===t}))},getGroupPortsMetrics:function(t,e){var n=this.getGroup(t),r=this.getPortsByGroup(t),i=n.position||{},o=i.name,s=this.portLayoutNamespace;s[o]||(o="left");var a=i.args||{},u=r.map((function(t){return t&&t.position&&t.position.args})),c=s[o](u,e,a),l={ports:r,result:[]};return We(c).reduce(function(t,n,r){var i=t.ports[r];return t.result.push({portId:i.id,portTransformation:n,labelTransformation:this._getPortLabelLayout(i,j(n),e),portAttrs:i.attrs,portSize:i.size,labelSize:i.label.size}),t}.bind(this),l),l.result},_getPortLabelLayout:function(t,e,n){var r=this.portLabelLayoutNamespace,i=t.label.position.name||"left";return r[i]?r[i](e,n,t.label.position.args):null},_init:function(t){if(an(t.groups))for(var e=Object.keys(t.groups),n=0,r=e.length;n<r;n++){var i=e[n];this.groups[i]=this._evaluateGroup(t.groups[i])}for(var o=We(t.items),s=0,a=o.length;s<a;s++)this.ports.push(this._evaluatePort(o[s]))},_evaluateGroup:function(t){return sn(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=Ie({},t),n=this.getGroup(t.group);return e.markup=e.markup||n.markup,e.attrs=sn({},n.attrs,e.attrs),e.position=this._createPositionNode(n,e),e.label=sn({},n.label,this._getLabel(e)),e.z=this._getZIndex(n,e),e.size=Ie({},n.size,e.size),e},_getZIndex:function(t,e){return un(e.z)?e.z:un(t.z)||"auto"===t.z?t.z:"auto"},_createPositionNode:function(t,e){return sn({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var n,r={};qe(t)?(n="fn",r.fn=t):cn(t)?n=t:void 0===t?n=e?"left":null:Array.isArray(t)?(n="absolute",r.x=t[0],r.y=t[1]):an(t)&&(n=t.name,Ie(r,t.args));var i={args:r};return n&&(i.name=n),i},_getLabel:function(t,e){var n=t.label||{},r=n;return r.position=this._getPosition(n.position,e),r}};const Br={_initializePorts:function(){this._createPortData(),this.on("change:ports",(function(){this._processRemovedPort(),this._createPortData()}),this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};We(t.items).forEach((function(t){e[t.id]=!0}));var n=this.previous("ports")||{},r={};We(n.items).forEach((function(t){e[t.id]||(r[t.id]=!0)}));var i=this.graph;i&&!Ue(r)&&(i.getConnectedLinks(this,{inbound:!0}).forEach((function(t){r[t.get("target").port]&&t.remove()})),i.getConnectedLinks(this,{outbound:!0}).forEach((function(t){r[t.get("source").port]&&t.remove()})))},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&t.length>0},hasPort:function(t){return-1!==this.getPortIndex(t)},getPorts:function(){return ze(this.prop("ports/items"))||[]},getGroupPorts:function(t){const e=We(this.prop(["ports","items"])).filter((e=>e.group===t));return ze(e)},getPort:function(t){return ze(We(this.prop("ports/items")).find((function(e){return e.id&&e.id===t})))},getPortsPositions:function(t){return this._portSettingsData.getGroupPortsMetrics(t,Q(this.size())).reduce((function(t,e){var n=e.portTransformation;return t[e.portId]={x:n.x,y:n.y,angle:n.angle},t}),{})},getPortIndex:function(t){var e=an(t)?t.id:t;return this._isValidPortId(e)?We(this.prop("ports/items")).findIndex((function(t){return t.id===e})):-1},addPort:function(t,e){if(!an(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var n=Ie([],this.prop("ports/items"));return n.push(t),this.prop("ports/items",n,e),this},insertPort:function(t,e,n){const r="number"==typeof t?t:this.getPortIndex(t);if(!an(e)||Array.isArray(e))throw new Error("dia.Element: insertPort requires an object.");const i=Ie([],this.prop("ports/items"));return i.splice(r,0,e),this.prop("ports/items",i,n),this},portProp:function(t,e,n,r){var i=this.getPortIndex(t);if(-1===i)throw new Error("Element: unable to find port with id "+t);var o=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?o[0]=["ports","items",i].concat(e):cn(e)?o[0]=["ports/items/",i,"/",e].join(""):(o=["ports/items/"+i],He(e)&&(o.push(e),o.push(n))),this.prop.apply(this,o)},_validatePorts:function(){var t=this.get("ports")||{},e=[],n=We((t=t||{}).items);return n.forEach((function(t){"object"!=typeof t&&e.push("Element: invalid port ",t),this._isValidPortId(t.id)||(t.id=this.generatePortId())}),this),Ve(n,"id").length!==n.length&&e.push("Element: found id duplicities in ports."),e},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return null!=t&&!an(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",Ie([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){const n=e||{},r=this.getPortIndex(t);if(-1!==r){const t=Ie([],this.prop(["ports","items"]));t.splice(r,1),n.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],t,n),this.stopBatch("port-remove")}return this},removePorts:function(t,e){let n,r;if(Array.isArray(t)){if(n=e||{},0===t.length)return this.this;r=Ie([],this.prop(["ports","items"])).filter((function(e){return!t.some((function(t){const n=an(t)?t.id:t;return e.id===n}))}))}else n=t||{},r=[];return this.startBatch("port-remove"),n.rewrite=!0,this.prop(["ports","items"],r,n),this.stopBatch("port-remove"),this},_createPortData:function(){var t,e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new Rr(this.get("ports"));var n=this._portSettingsData.getPorts();if(t){var r=n.filter((function(e){if(!t.find((function(t){return t.id===e.id})))return e})),i=t.filter((function(t){if(!n.find((function(e){return e.id===t.id})))return t}));i.length>0&&this.trigger("ports:remove",this,i),r.length>0&&this.trigger("ports:add",this,r)}}},Dr={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var t=[],e=this._getContainerElement(),n=0,r=e.node.childNodes.length;n<r;n++)t.push(e.node.childNodes[n]);var i=$e(this.model._portSettingsData.getPorts(),"z");We(i.auto).forEach((function(n){var r=this._getPortElement(n);e.append(r),t.push(r)}),this);for(var o=Object.keys(i),s=0;s<o.length;s++){var a=o[s];if("auto"!==a){var u=parseInt(a,10);this._appendPorts(i[a],u,t)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,n){var r=this._getContainerElement(),i=We(t).map(this._getPortElement,this);n[e]||e<0?ue(n[Math.max(e,0)]).before(i):r.append(i)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNode:function(t,e){const n=this._portElementsCache[t];if(!n)return null;const r=n.portContentElement.node,i=n.portContentSelectors,[o=null]=this.findBySelector(e,r,i);return o},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){De(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){let e,n,r,i;var o=ue(this.portContainerMarkup).addClass("joint-port"),s=this._getPortMarkup(t);if(Array.isArray(s)){var a=this.parseDOMJSON(s,o.node),u=a.fragment;e=u.childNodes.length>1?ue("g").append(u):ue(u.firstChild),i=a.selectors}else e=ue(s),Array.isArray(e)&&(e=ue("g").append(e));if(!e)throw new Error("ElementView: Invalid port markup.");e.attr({port:t.id,"port-group":t.group});const c=this._getPortLabelMarkup(t.label);if(Array.isArray(c)){const{fragment:t,selectors:e}=this.parseDOMJSON(c,o.node),i=t.childNodes.length;i>0&&(r=e,n=1===i?ue(t.firstChild):ue("g").append(t))}else n=ue(c),Array.isArray(n)&&(n=ue("g").append(n));var l;if(i&&r){for(var h in r)if(i[h]&&h!==this.selector)throw new Error("ElementView: selectors within port must be unique.");l=Ie({},i,r)}else l=i||r;return o.append(e.addClass("joint-port-body")),n&&o.append(n.addClass("joint-port-label")),this._portElementsCache[t.id]={portElement:o,portLabelElement:n,portSelectors:l,portLabelSelectors:r,portContentElement:e,portContentSelectors:i},o},_updatePortGroup:function(t){for(var e=Q(this.model.size()),n=this.model._portSettingsData.getGroupPortsMetrics(t,e),r=0,i=n.length;r<i;r++){var o=n[r],s=o.portId,a=this._portElementsCache[s]||{},u=o.portTransformation;this.applyPortTransform(a.portElement,u),this.updateDOMSubtreeAttributes(a.portElement.node,o.portAttrs,{rootBBox:new Q(o.portSize),selectors:a.portSelectors});var c=o.labelTransformation;c&&a.portLabelElement&&(this.applyPortTransform(a.portLabelElement,c,-u.angle||0),this.updateDOMSubtreeAttributes(a.portLabelElement.node,c.attrs,{rootBBox:new Q(o.labelSize),selectors:a.portLabelSelectors}))}},applyPortTransform:function(t,e,n){var r=ue.createSVGMatrix().rotate(n||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(r,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},jr=or.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),or.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,e,n){const r=un(e);n=(r?n:t)||{};const{parentRelative:i,deep:o,restrictedArea:s}=n;let a;if(i){if(!this.graph)throw new Error("Element must be part of a graph.");const t=this.getParentCell();t&&!t.isLink()&&(a=t.get("position"))}if(r){if(a&&(t+=a.x,e+=a.y),o||s){const{x:r,y:i}=this.get("position");this.translate(t-r,e-i,n)}else this.set("position",{x:t,y:e},n);return this}{const t=j(this.get("position"));return i?t.difference(a):t}},translate:function(t,e,n){if(e=e||0,0===(t=t||0)&&0===e)return this;(n=n||{}).translateBy=n.translateBy||this.id;var r=this.get("position")||{x:0,y:0},i=n.restrictedArea;if(i&&n.translateBy===this.id)if("function"==typeof i){var o=i.call(this,r.x+t,r.y+e,n);t=o.x-r.x,e=o.y-r.y}else{var s=this.getBBox({deep:!0}),a=r.x-s.x,u=r.y-s.y,c=Math.max(i.x+a,Math.min(i.x+i.width+a-s.width,r.x+t)),l=Math.max(i.y+u,Math.min(i.y+i.height+u-s.height,r.y+e));t=c-r.x,e=l-r.y}var h={x:r.x+t,y:r.y+e};return n.tx=t,n.ty=e,n.transition?(an(n.transition)||(n.transition={}),this.transition("position",h,Ie({},n.transition,{valueFunction:Le.object})),De(this.getEmbeddedCells(),"translate",t,e,n)):(this.startBatch("translate",n),this.set("position",h,n),De(this.getEmbeddedCells(),"translate",t,e,n),this.stopBatch("translate",n)),this},size:function(t,e,n){var r=this.get("size");return void 0===t?{width:r.width,height:r.height}:(an(t)&&(n=e,e=un(t.height)?t.height:r.height,t=un(t.width)?t.width:r.width),this.resize(t,e,n))},resize:function(t,e,n){if(n=n||{},this.startBatch("resize",n),n.direction){var r=this.get("size");switch(n.direction){case"left":case"right":e=r.height;break;case"top":case"bottom":t=r.width}var i,o=v(this.get("angle")||0),s=this.getBBox();if(o){var a={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[n.direction];n.absolute&&(a+=Math.floor((o+45)/90),a%=4);var u=s[["bottomLeft","corner","topRight","origin"][a]](),c=j(u).rotate(s.center(),-o),l=Math.sqrt(t*t+e*e)/2,h=a*Math.PI/2;h+=Math.atan(a%2==0?e/t:t/e),h-=b(o);var f=j.fromPolar(l,h,c);i=j(f).offset(t/-2,e/-2)}else switch(i=s.topLeft(),n.direction){case"top":case"top-right":i.offset(0,s.height-e);break;case"left":case"bottom-left":i.offset(s.width-t,0);break;case"top-left":i.offset(s.width-t,s.height-e)}this.set("size",{width:t,height:e},n),this.position(i.x,i.y,n)}else this.set("size",{width:t,height:e},n);return this.stopBatch("resize",n),this},scale:function(t,e,n,r){var i=this.getBBox().scale(t,e,n);return this.startBatch("scale",r),this.position(i.x,i.y,r),this.resize(i.width,i.height,r),this.stopBatch("scale"),this},fitEmbeds:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");const n=this.getEmbeddedCells().filter((t=>t.isElement()));if(0===n.length)return this;this.startBatch("fit-embeds",t),t.deep&&De(n,"fitEmbeds",t);const{left:r,right:i,top:o,bottom:s}=Te(t.padding);let{x:a,y:u,width:c,height:l}=e.getCellsBBox(n);return a-=r,u-=o,c+=r+i,l+=s+o,this.set({position:{x:a,y:u},size:{width:c,height:l}},t),this.stopBatch("fit-embeds"),this},rotate:function(t,e,n,r){if(n){var i=this.getBBox().center(),o=this.get("size"),s=this.get("position");i.rotate(n,this.get("angle")-t);var a=i.x-o.width/2-s.x,u=i.y-o.height/2-s.y;this.startBatch("rotate",{angle:t,absolute:e,origin:n}),this.position(s.x+a,s.y+u,r),this.rotate(t,e,null,r),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,r);return this},angle:function(){return v(this.get("angle")||0)},getBBox:function(t={}){const{graph:e,attributes:n}=this,{deep:r,rotate:i}=t;if(r&&e){const n=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return n.push(this),e.getCellsBBox(n,t)}const{angle:o=0,position:{x:s,y:a},size:{width:u,height:c}}=n,l=new Q(s,a,u,c);return i&&l.rotateAroundCenter(o),l},getPointFromConnectedLink:function(t,e){var n=this.getBBox(),r=n.center(),i=t.get(e);if(!i)return r;var o=i.port;if(!o||!this.hasPort(o))return r;var s=this.portProp(o,["group"]),a=this.getPortsPositions(s),u=new j(a[o]).offset(n.origin()),c=this.angle();return c&&u.rotate(r,-c),u}});function Vr(t){return t?Array.isArray(t)?t:[t]:[]}Ie(jr.prototype,Br);const Fr=yn.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,transformGroup:null,requestUpdate(t,e){const{paper:n}=t;this.cellView=t,this.nodeSelector=e,n&&(this.updateRequested=!0,n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:t,nodeSelector:e}=this;return this.update(t,e),this.mount(),this.transform(),0},findNode(t,e=null){let n;if("string"==typeof e)[n]=t.findBySelector(e);else if(He(e)){const r=t.model.isLink(),{label:i=null,port:o,selector:s}=e;r&&null!==i?n=t.findLabelNode(i,s):!r&&o?n=t.findPortNode(o,s):[n]=t.findBySelector(s)}else e&&(n=ue.toNode(e),n instanceof SVGElement||(n=null));return n||null},mount(){const{MOUNTABLE:t,cellView:e,el:n,options:r,transformGroup:i}=this;if(!t||i)return;const{vel:o,paper:s}=e,{layer:a}=r;if(a){const t=this.transformGroup=ue("g").addClass("highlight-transform").append(n);s.getLayerView(a).insertSortedNode(t.node,r.z)}else n.parentNode&&!n.nextSibling||o.append(n)},unmount(){const{MOUNTABLE:t,transformGroup:e,vel:n}=this;t&&(e?(this.transformGroup=null,e.remove()):n.remove())},transform(){const{transformGroup:t,cellView:e,updateRequested:n}=this;if(!t||e.model.isLink()||n)return;const r=e.getRootTranslateMatrix(),i=e.getRootRotateMatrix(),o=r.multiply(i);t.attr("transform",ue.matrixToTransformString(o))},update(){const{node:t,cellView:e,nodeSelector:n,updateRequested:r,id:i}=this;if(r)return;const o=this.node=this.findNode(e,n);t&&this.unhighlight(e,t),o?(this.highlight(e,o),this.mount()):(this.unmount(),e.notify("cell:highlight:invalid",i,this))},onRemove(){const{node:t,cellView:e,id:n,constructor:r}=this;t&&this.unhighlight(e,t),this.unmount(),r._removeRef(e,n)},highlight(t,e){},unhighlight(t,e){}},{_views:{},highlight:function(t,e,n){const r=this.uniqueId(e,n);this.add(t,e,r,n)},unhighlight:function(t,e,n){const r=this.uniqueId(e,n);this.remove(t,r)},get(t,e=null){const{cid:n}=t,{_views:r}=this,i=r[n];if(null===e){const t=[];if(!i)return t;for(let e in i){const n=i[e];n instanceof this&&t.push(n)}return t}if(!i)return null;if(e in i){const t=i[e];if(t instanceof this)return t}return null},add(t,e,n,r={}){if(!n)throw new Error("dia.HighlighterView: An ID required.");const i=Fr.get(t,n);i&&i.remove();const o=new this(r);return o.id=n,this._addRef(t,n,o),o.requestUpdate(t,e),o},_addRef(t,e,n){const{cid:r}=t,{_views:i}=this;let o=i[r];o||(o=i[r]={}),o[e]=n},_removeRef(t,e){const{cid:n}=t,{_views:r}=this,i=r[n];if(i){e&&delete i[e];for(let t in i)return;delete r[n]}},remove(t,e=null){Vr(this.get(t,e)).forEach((t=>{t.remove()}))},update(t,e=null,n=!1){Vr(this.get(t,e)).forEach((t=>{(n||t.UPDATABLE)&&t.update()}))},transform(t,e=null){Vr(this.get(t,e)).forEach((t=>{t.UPDATABLE&&t.transform()}))},uniqueId:(t,e="")=>ue.ensureId(t)+JSON.stringify(e)}),zr={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},Ur=yn.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var t=["cell"],e=this.model.get("type");return e&&e.toLowerCase().split(".").forEach((function(e,n,r){t.push("type-"+r.slice(0,n+1).join("-"))})),t.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var t,e,n,r={},i={},o=0,s=Qe(this,"presentationAttributes");for(var a in s)if(s.hasOwnProperty(a)){var u=s[a];for(Array.isArray(u)||(u=[u]),t=0,e=u.length;t<e;t++){var c=r[n=u[t]];c||(c=r[n]=1<<o++),i[a]|=c}}var l=Qe(this,"initFlag");for(Array.isArray(l)||(l=[l]),t=0,e=l.length;t<e;t++)r[n=l[t]]||(r[n]=1<<o++);if(o>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=r,this._presentationAttributes=i},hasFlag:function(t,e){return t&this.getFlag(e)},removeFlag:function(t,e){return t^t&this.getFlag(e)},getFlag:function(t){var e=this._flags;if(!e)return 0;var n=0;if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)n|=e[t[r]];else n|=e[t];return n},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||xe(this),yn.call(this,t)},initialize:function(){this.setFlags(),yn.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},onMount(){},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,e){var n=t.getChangeFlag(this._presentationAttributes);!e.updateHandled&&n&&(e.dirty&&this.hasFlag(n,"UPDATE")&&(n|=this.getFlag("RENDER")),e.tool&&(e.async=!1),this.requestUpdate(n,e))},requestUpdate:function(t,e){const{paper:n}=this;n&&t>0&&n.requestViewUpdate(this,t,this.UPDATE_PRIORITY,e)},parseDOMJSON:function(t,e){var n=pe(t),r=n.selectors,i=n.groupSelectors;for(var o in i){if(r[o])throw new Error("dia.CellView: ambiguous group selector");r[o]=i[o]}if(e){var s=this.selector;if(r[s])throw new Error("dia.CellView: ambiguous root selector.");r[s]=e}return{fragment:n.fragment,selectors:r}},can:function(t){var e,n,r=qe(this.options.interactive)?this.options.interactive(this):this.options.interactive;return an(r)&&!1!==r[t]||(e=r,n=Object.prototype.toString,(!0===e||!1===e||!!e&&"object"==typeof e&&"[object Boolean]"===n.call(e))&&!1!==r)},findBySelector:function(t,e,n){if(e||(e=this.el),n||(n=this.selectors),!t||"."===t)return[e];if(n){var r=n[t];if(r)return Array.isArray(r)?r:[r]}return he.useCSSSelectors?le(e).find(t).toArray():[]},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getBBox:function(t){var e;if(t&&t.useModelGeometry){var n=this.model;e=n.getBBox().bbox(n.angle())}else e=this.getNodeBBox(this.el);return this.paper.localToPaperRect(e)},getNodeBBox:function(t){var e=this.getNodeBoundingRect(t),n=this.getNodeMatrix(t),r=this.getRootTranslateMatrix(),i=this.getRootRotateMatrix();return ue.transformRect(e,r.multiply(i).multiply(n))},getNodeUnrotatedBBox:function(t){var e=this.getNodeBoundingRect(t),n=this.getNodeMatrix(t),r=this.getRootTranslateMatrix();return ue.transformRect(e,r.multiply(n))},getRootTranslateMatrix:function(){var t=this.model.position();return ue.createSVGMatrix().translate(t.x,t.y)},getRootRotateMatrix:function(){var t=ue.createSVGMatrix(),e=this.model,n=e.angle();if(n){var r=e.getBBox(),i=r.width/2,o=r.height/2;t=t.translate(i,o).rotate(n).translate(-i,-o)}return t},_notifyHighlight:function(t,e,n={}){const{el:r}=this;let i;if([i=r]="string"==typeof e?this.findBySelector(e):this.$(e),n.partial=i!==r,void 0===n.type){let t;switch(!0){case n.embedding:t=zr.EMBEDDING;break;case n.connecting:t=zr.CONNECTING;break;case n.magnetAvailability:t=zr.MAGNET_AVAILABILITY;break;case n.elementAvailability:t=zr.ELEMENT_AVAILABILITY;break;default:t=zr.DEFAULT}n.type=t}return this.notify(t,i,n),this},highlight:function(t,e){return this._notifyHighlight("cell:highlight",t,e)},unhighlight:function(t,e={}){return this._notifyHighlight("cell:unhighlight",t,e)},findMagnet:function(t){const e=this.el;let n=this.$(t)[0];n||(n=e);do{const t=n.getAttribute("magnet"),r=n===e;if((t||r)&&"false"!==t)return n;if(r)return;n=n.parentNode}while(n)},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const[t]=this.findBySelector(n);if(t)return t}return t},getSelector:function(t,e){var n;if(t===this.el)return"string"==typeof e&&(n="> "+e),n;if(t){var r=ue(t).index()+1;n=t.tagName+":nth-child("+r+")",e&&(n+=" > "+e),n=this.getSelector(t.parentNode,n)}return n},addLinkFromMagnet:function(t,e,n){var r=this.paper,i=r.model,o=r.getDefaultLink(this,t);return o.set({source:this.getLinkEnd(t,e,n,o,"source"),target:{x:e,y:n}}).addTo(i,{async:!1,ui:!0}),o.findView(r)},getLinkEnd:function(t,...e){var n=this.model,r=n.id,i=this.findAttribute("port",t),o=t.getAttribute("joint-selector"),s={id:r};return null!=o&&(s.magnet=o),null!=i?(s.port=i,n.hasPort(i)||o||(s.selector=this.getSelector(t))):null==o&&this.el!==t&&(s.selector=this.getSelector(t)),this.customizeLinkEnd(s,t,...e)},customizeLinkEnd:function(t,e,n,r,i,o){const{paper:s}=this,{connectionStrategy:a}=s.options;if("function"==typeof a){var u=a.call(s,t,this,e,new j(n,r),i,o,s);if(u)return u}return t},getMagnetFromLinkEnd:function(t){var e,n=this.el,r=t.port,i=t.magnet,o=this.model;return null!=r&&o.isElement()&&o.hasPort(r)?e=this.findPortNode(r,i)||n:(i||(i=t.selector),i||null==r||(i='[port="'+r+'"]'),e=this.findBySelector(i,n,this.selectors)[0]),this.findProxyNode(e,"magnet")},dragLinkStart:function(t,e,n,r){this.model.startBatch("add-link");const i=this.addLinkFromMagnet(e,n,r);i.notifyPointerdown(t,n,r),i.eventData(t,i.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:i})},dragLink:function(t,e,n){var r=this.eventData(t),i=r.linkView;if(i)i.pointermove(t,e,n);else{var o=this.paper,s=o.options.magnetThreshold,a=this.getEventTarget(t),u=r.targetMagnet;if("onleave"===s){if(u===a||ue(u).contains(a))return}else if(o.eventData(t).mousemoved<=s)return;this.dragLinkStart(t,u,e,n)}},dragLinkEnd:function(t,e,n){var r=this.eventData(t).linkView;r&&(r.pointerup(t,e,n),this.model.stopBatch("add-link"))},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){Ue(e)||(t instanceof SVGElement?ue(t).attr(e):le(t).attr(e))},processNodeAttributes:function(t,e){var n,r,i,o,s,a,u,c,l,h,f=[];for(n in e)e.hasOwnProperty(n)&&(r=e[n],!(i=this.getAttributeDefinition(n))||qe(i.qualify)&&!i.qualify.call(this,r,t,e)?(a||(a={}),a[(h=n,h.replace(/[A-Z]/g,"-$&").toLowerCase())]=r):(cn(i.set)&&(a||(a={}),a[i.set]=r),null!==r&&f.push(n,i)));for(o=0,s=f.length;o<s;o+=2)n=f[o],i=f[o+1],r=e[n],qe(i.set)&&(u||(u={}),u[n]=r),qe(i.position)&&(c||(c={}),c[n]=r),qe(i.offset)&&(l||(l={}),l[n]=r);return{raw:e,normal:a,set:u,position:c,offset:l}},updateRelativeAttributes:function(t,e,n,r){var i,o;r||(r={});var s=e.raw||{},a=e.normal||{},u=e.set,c=e.position,l=e.offset;for(i in u){o=u[i];var h=this.getAttributeDefinition(i).set.call(this,o,n.clone(),t,s);an(h)?Ie(a,h):void 0!==h&&(a[i]=h)}if(t instanceof HTMLElement)this.setNodeAttributes(t,a);else{var f,d,p,g=a.transform,v=ue.transformStringToMatrix(g),m=j(v.e,v.f);if(g&&(a=tn(a,"transform"),v.e=v.f=0),c||l){var y=this.getNodeScale(t,r.scalableNode);f=y.sx,d=y.sy}var b=!1;for(i in c)o=c[i],(p=this.getAttributeDefinition(i).position.call(this,o,n.clone(),t,s))&&(m.offset(j(p).scale(f,d)),b||(b=!0));this.setNodeAttributes(t,a);var x=!1;if(l){var w=this.getNodeBoundingRect(t);if(w.width>0&&w.height>0){var _=ue.transformRect(w,v).scale(1/f,1/d);for(i in l)o=l[i],(p=this.getAttributeDefinition(i).offset.call(this,o,_,t,s))&&(m.offset(j(p).scale(f,d)),x||(x=!0))}}(void 0!==g||b||x)&&(m.round(1),v.e=m.x,v.f=m.y,t.setAttribute("transform",ue.matrixToTransformString(v)))}},getNodeScale:function(t,e){var n,r;if(e&&e.contains(t)){var i=e.scale();n=1/i.sx,r=1/i.sy}else n=1,r=1;return{sx:n,sy:r}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(t){var e=this.metrics;if(!e)return{};var n=ue.ensureId(t),r=e[n];return r||(r=e[n]={}),r},getNodeData:function(t){var e=this.nodeCache(t);return e.data||(e.data={}),e.data},getNodeBoundingRect:function(t){var e=this.nodeCache(t);return void 0===e.boundingRect&&(e.boundingRect=ue(t).getBBox()),new Q(e.boundingRect)},getNodeMatrix:function(t){var e=this.nodeCache(t);if(void 0===e.magnetMatrix){var n=this.rotatableNode||this.el;e.magnetMatrix=ue(t).getTransformToElement(n)}return ue.createSVGMatrix(e.magnetMatrix)},getNodeShape:function(t){var e=this.nodeCache(t);return void 0===e.geometryShape&&(e.geometryShape=ue(t).toGeometryShape()),e.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,e,n,r){var i,o,s,a,u={},c=[];for(var l in t)if(t.hasOwnProperty(l)&&(s=t[l],He(s))){var h=n[l]=this.findBySelector(l,e,r);for(i=0,o=h.length;i<o;i++){var f=h[i];a=ue.ensureId(f);var d=r&&r[l]===f,p=u[a];if(p){p.array||(c.push(a),p.array=!0,p.attributes=[p.attributes],p.selectedLength=[p.selectedLength]);var g=p.attributes,v=p.selectedLength;if(d)g.unshift(s),v.unshift(-1);else{var m=je(v,o);g.splice(m,0,s),v.splice(m,0,o)}}else u[a]={attributes:s,selectedLength:d?-1:o,node:f,array:!1}}}for(i=0,o=c.length;i<o;i++)(s=u[a=c[i]]).attributes=sn({},...s.attributes.reverse());return u},getEventTarget:function(t,e={}){const{target:n,type:r,clientX:i=0,clientY:o=0}=t;return e.fromPoint||"touchmove"===r||"touchend"===r?document.elementFromPoint(i,o):n},updateDOMSubtreeAttributes:function(t,e,n){n||(n={}),n.rootBBox||(n.rootBBox=Q()),n.selectors||(n.selectors=this.selectors);var r,i,o,s,a,u,c={},l={},h=[],f=[],d=n.roAttributes,p=this.findNodesAttributes(d||e,t,c,n.selectors),g=d?this.findNodesAttributes(e,t,c,n.selectors):p;for(var v in p)if(o=(s=p[v]).attributes,i=s.node,(a=this.processNodeAttributes(i,o)).set||a.position||a.offset){var m,y=g[v]&&g[v].attributes,b=y&&void 0===o.ref?y.ref:o.ref;if(b){if(!(m=(c[b]||this.findBySelector(b,t,n.selectors))[0]))throw new Error('dia.CellView: "'+b+'" reference does not exist.')}else m=null;if(r={node:i,refNode:m,processedAttributes:a,allAttributes:y},m){var x=f.findIndex((function(t){return t.refNode===i}));x>-1?f.splice(x,0,r):f.push(r)}else h.push(r)}else this.setNodeAttributes(i,a.normal);h.push(...f);for(var w=0,_=h.length;w<_;w++){r=h[w],i=r.node,m=r.refNode;var A=ue(n.rotatableNode),k=m?ue.ensureId(m):"",S=!!A&&!!m&&A.contains(m),E=l[k];if(!E){var P=S?A:t;E=l[k]=m?ue(m).getBBox({target:P}):n.rootBBox}d?(a=this.processNodeAttributes(i,r.allAttributes),this.mergeProcessedAttributes(a,r.processedAttributes)):a=r.processedAttributes;var C=E;S&&!A.contains(i)&&(u||(u=ue.transformStringToMatrix(A.attr("transform"))),C=ue.transformRect(E,u)),this.updateRelativeAttributes(i,a,C,n)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),Ie(t.set,e.set),Ie(t.position,e.position),Ie(t.offset,e.offset);var n=t.normal&&t.normal.transform;void 0!==n&&e.normal&&(e.normal.transform=n),t.normal=e.normal},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(t){var e=this._toolsView;return!(!e||t&&e.getName()!==t)},addTools:function(t){return this.removeTools(),t&&(this._toolsView=t,t.configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},updateTools:function(t){var e=this._toolsView;return e&&e.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){Fr.remove(this)},updateHighlighters:function(t=!1){Fr.update(this,null,t)},transformHighlighters:function(){Fr.transform(this)},pointerdblclick:function(t,e,n){this.notify("cell:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){this.notify("cell:pointerclick",t,e,n)},contextmenu:function(t,e,n){this.notify("cell:contextmenu",t,e,n)},pointerdown:function(t,e,n){const{model:r}=this,{graph:i}=r;i&&(r.startBatch("pointer"),this.eventData(t,{graph:i})),this.notify("cell:pointerdown",t,e,n)},pointermove:function(t,e,n){this.notify("cell:pointermove",t,e,n)},pointerup:function(t,e,n){const{graph:r}=this.eventData(t);this.notify("cell:pointerup",t,e,n),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,n,r){this.notify("cell:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){this.notify(e,t,n,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(t){const{paper:e}=this;e.isAsync()&&e.dumpView(this);const n=this.getEventTarget(t,{fromPoint:!0}),r=e.findView(n);r!==this&&(this.mouseleave(t),r&&r.mouseenter(t))},setInteractivity:function(t){this.options.interactive=t}},{Highlighting:zr,addPresentationAttributes:function(t){return sn({},Qe(this.prototype,"presentationAttributes"),t,(function(t,e){if(t&&e)return"string"==typeof t&&(t=[t]),"string"==typeof e&&(e=[e]),Array.isArray(t)&&Array.isArray(e)?Ve(t.concat(e)):void 0}))}}),Gr={UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",TOOLS:"TOOLS",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},qr=Ur.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=Ur.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){Ur.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[Gr.UPDATE],position:[Gr.TRANSLATE,Gr.TOOLS],size:[Gr.RESIZE,Gr.PORTS,Gr.TOOLS],angle:[Gr.ROTATE,Gr.TOOLS],markup:[Gr.RENDER],ports:[Gr.PORTS]},initFlag:[Gr.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(t,e){const{useCSSSelectors:n}=he;this.hasFlag(t,Gr.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(t,Gr.RENDER))this.render(),this.updateTools(e),this.updateHighlighters(!0),r=!0,t=this.removeFlag(t,[Gr.RENDER,Gr.UPDATE,Gr.RESIZE,Gr.TRANSLATE,Gr.ROTATE,Gr.PORTS,Gr.TOOLS]);else{let i=!1;this.hasFlag(t,Gr.RESIZE)&&(this.resize(e),i=!0,t=this.removeFlag(t,[Gr.RESIZE,Gr.UPDATE])),this.hasFlag(t,Gr.UPDATE)&&(this.update(this.model,null,e),t=this.removeFlag(t,Gr.UPDATE),i=!0,n&&(t=this.removeFlag(t,Gr.PORTS))),this.hasFlag(t,Gr.TRANSLATE)&&(this.translate(),t=this.removeFlag(t,Gr.TRANSLATE),r=!0),this.hasFlag(t,Gr.ROTATE)&&(this.rotate(),t=this.removeFlag(t,Gr.ROTATE),r=!0),this.hasFlag(t,Gr.PORTS)&&(this._renderPorts(),i=!0,t=this.removeFlag(t,Gr.PORTS)),i&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(t,Gr.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,Gr.TOOLS)),t},_initializePorts:function(){},update:function(t,e){this.cleanNodesCache();const{useCSSSelectors:n}=he;n&&this._removePorts();var r=this.model,i=r.attr();this.updateDOMSubtreeAttributes(this.el,i,{rootBBox:new Q(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===i?null:e}),n&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.ElementView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el),n=this.selectors=e.selectors;this.rotatableNode=ue(n[this.rotatableSelector])||null,this.scalableNode=ue(n[this.scalableSelector])||null,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=this.vel;e.append(ue(t)),this.rotatableNode=e.findOne(".rotatable"),this.scalableNode=e.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),he.useCSSSelectors||this._renderPorts(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),e=this.getRotateString();e&&(t+=" "+e),this.vel.attr("transform",t)},getTranslateString:function(){var t=this.model.attributes.position;return"translate("+t.x+","+t.y+")"},getRotateString:function(){var t=this.model.attributes,e=t.angle;if(!e)return null;var n=t.size;return"rotate("+e+","+n.width/2+","+n.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var e=this.model,n=e.angle(),r=e.size(),i=this.scalableNode,o=!1;i.node.getElementsByTagName("path").length>0&&(o=!0);var s=i.getBBox({recursive:o}),a=r.width/(s.width||1),u=r.height/(s.height||1);i.attr("transform","scale("+a+","+u+")");var c=this.rotatableNode,l=c&&c.attr("transform");if(l){c.attr("transform",l+" rotate("+-n+","+r.width/2+","+r.height/2+")");var h=i.getBBox({target:this.paper.cells});e.set("position",{x:h.x,y:h.y},Ie({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t={}){const e=t.model||this.model,n=(t.paper||this.paper).model,r=t.initialZIndices={},i=e.getEmbeddedCells({deep:!0}),o=n.getConnectedLinks(e,{deep:!0,includeEnclosed:!0});[e,...i,...o].forEach((t=>r[t.id]=t.attributes.z)),e.startBatch("to-front"),e.toFront({deep:!0,ui:!0});const s=n.getElements().reduce(((t,e)=>Math.max(t,e.attributes.z||0)),0);o.forEach((t=>{t.attributes.z<=s&&t.set("z",s+1,{ui:!0})})),e.stopBatch("to-front");const a=e.parent();a?(n.getCell(a).unembed(e,{ui:!0}),t.initialParentId=a):t.initialParentId=null},processEmbedding:function(t={},e,n,r){const i=t.model||this.model,o=t.paper||this.paper,s=o.model,{findParentBy:a,frontParentOnly:u,validateEmbedding:c}=o.options;let l;l=qe(a)?We(a.call(s,this,e,n,r)):"pointer"===a?We(s.findModelsFromPoint({x:n,y:r})):s.findModelsUnderElement(i,{searchBy:a}),l=l.filter((t=>t instanceof or&&i.id!==t.id&&!t.isEmbeddedIn(i))),u&&(l=l.slice(-1));let h=null;const f=t.candidateEmbedView;for(let t=l.length-1;t>=0;t--){const e=l[t];if(f&&f.model.id==e.id){h=f;break}{const t=e.findView(o);if(!qe(c)||c.call(o,this,t)){h=t;break}}}h&&h!=f&&(this.clearEmbedding(t),t.candidateEmbedView=h.highlight(h.findProxyNode(null,"container"),{embedding:!0})),!h&&f&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var e=t.candidateEmbedView;e&&(e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t={}){const e=t.candidateEmbedView,n=t.model||this.model,r=t.paper||this.paper;if(e)e.model.embed(n,{ui:!0}),e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null;else{const{validateUnembedding:e}=r.options,{initialParentId:n}=t;if(n&&"function"==typeof e&&!e.call(r,this))return void this._disallowUnembed(t)}r.model.getConnectedLinks(n,{deep:!0}).forEach((t=>{t.reparent({ui:!0})}))},_disallowUnembed:function(t){const{model:e,whenNotAllowed:n="revert"}=t,r=e||this.model,i=(t.paper||this.paper).model;switch(n){case"remove":r.remove({ui:!0});break;case"revert":{const{initialParentId:e,initialPosition:n,initialZIndices:o}=t;if(n){const{x:t,y:e}=n;r.position(t,e,{deep:!0,ui:!0})}o&&Object.keys(o).forEach((t=>{const e=i.getCell(t);e&&e.set("z",o[t],{ui:!0})}));const s=i.getCell(e);s&&s.embed(r,{ui:!0});break}}},getDelegatedView:function(){for(var t=this,e=t.model,n=t.paper;t&&!e.isLink();){if(!e.isEmbedded()||t.can("stopDelegation"))return t;e=e.getParentCell(),t=n.findViewByModel(e)}return null},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const e=this.findAttribute("port",t);if(e){const t=this.findPortNode(e,n);if(t)return t}else{const[t]=this.findBySelector(n);if(t)return t}}return t},notifyPointerdown(t,e,n){Ur.prototype.pointerdown.call(this,t,e,n),this.notify("element:pointerdown",t,e,n)},notifyPointermove(t,e,n){Ur.prototype.pointermove.call(this,t,e,n),this.notify("element:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("element:pointerup",t,e,n),Ur.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){Ur.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){Ur.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,e,n)},contextmenu:function(t,e,n){Ur.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,e,n)},pointerdown:function(t,e,n){this.isPropagationStopped(t)||(this.notifyPointerdown(t,e,n),this.dragStart(t,e,n))},pointermove:function(t,e,n){var r=this.eventData(t);switch(r.action){case"magnet":this.dragMagnet(t,e,n);break;case"move":(r.delegatedView||this).drag(t,e,n);default:this.notifyPointermove(t,e,n)}this.eventData(t,r)},pointerup:function(t,e,n){var r=this.eventData(t);switch(r.action){case"magnet":this.dragMagnetEnd(t,e,n);break;case"move":(r.delegatedView||this).dragEnd(t,e,n);default:this.notifyPointerup(t,e,n)}var i=r.targetMagnet;i&&this.magnetpointerclick(t,i,e,n),this.checkMouseleave(t)},mouseover:function(t){Ur.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){Ur.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){Ur.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){Ur.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,e,n,r){Ur.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,e,n,r)},onmagnet:function(t,e,n){this.dragMagnetStart(t,e,n)},magnetpointerdblclick:function(t,e,n,r){this.notify("element:magnet:pointerdblclick",t,e,n,r)},magnetcontextmenu:function(t,e,n,r){this.notify("element:magnet:contextmenu",t,e,n,r)},dragStart:function(t,e,n){var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(t,{action:"move",delegatedView:r});const i=r.model.position();r.eventData(t,{initialPosition:i,pointerOffset:i.difference(e,n),restrictedArea:this.paper.getRestrictedArea(r,e,n)})},dragMagnetStart:function(t,e,n){if(this.can("addLinkFromMagnet")){var r=t.currentTarget,i=this.paper;this.eventData(t,{targetMagnet:r}),t.stopPropagation(),i.options.validateMagnet(this,r,t)?(i.options.magnetThreshold<=0&&this.dragLinkStart(t,r,e,n),this.eventData(t,{action:"magnet"}),this.stopPropagation(t)):this.pointerdown(t,e,n),i.delegateDragEvents(this,t.data)}},drag:function(t,e,n){var r=this.paper,i=r.options.gridSize,o=this.model,s=this.eventData(t),{pointerOffset:a,restrictedArea:u,embedding:c}=s,l=m(e+a.x,i),h=m(n+a.y,i);o.position(l,h,{restrictedArea:u,deep:!0,ui:!0}),r.options.embeddingMode&&(c||(this.prepareEmbedding(s),c=!0),this.processEmbedding(s,t,e,n)),this.eventData(t,{embedding:c})},dragMagnet:function(t,e,n){this.dragLink(t,e,n)},dragEnd:function(t,e,n){var r=this.eventData(t);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(t,e,n){this.dragLinkEnd(t,e,n)},magnetpointerclick:function(t,e,n,r){var i=this.paper;i.eventData(t).mousemoved>i.options.clickThreshold||this.notify("element:magnet:pointerclick",t,e,n,r)}},{Flags:Gr});Ie(qr.prototype,Dr);const Hr={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return this._tests[t]=e},test:function(t){var e=this._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var n=this._results[t];if(void 0!==n)return n;try{n=e()}catch(t){n=!1}return this._results[t]=n,n}},Wr=jr.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}}),$r=(Wr.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'}),qr.extend({presentationAttributes:qr.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var t=qr.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"SCALE")&&(this.resize(),t=this.removeFlag(t,"SCALE")),t}}),Wr.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'}),Wr.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'}),Wr.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'}),Wr.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),Wr.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'}),Wr.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'}),Wr.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'}).define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}}),Hr.test("svgforeignobject")),Xr=(Wr.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',$r?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),Wr.prototype.initialize.apply(this,arguments)},updateSize:function(t,e){this.attr({".fobj":Ie({},e),div:{style:Ie({},e)}})},updateContent:function(t,e){var n,r;$r?this.attr({".content":{html:(n=e,r=le(le.parseHTML("<div>"+n+"</div>",null,!1)),r.find("*").each((function(){var t=this;le.each(t.attributes,(function(){var e=this.name,n=this.value;(e.startsWith("on")||n.startsWith("javascript:")||n.startsWith("data:")||n.startsWith("vbscript:"))&&le(t).removeAttr(e)}))})),r.html())}}):this.attr({".content":{text:e}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}}),qr.extend({presentationAttributes:$r?qr.prototype.presentationAttributes:qr.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var t=qr.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"CONTENT")&&(this.updateContent(this.model),t=this.removeFlag(t,"CONTENT")),t},update:function(t,e){var n=this.model;if($r)qr.prototype.update.call(this,n,e);else{var r=tn(e||n.get("attrs"),".content");qr.prototype.update.call(this,n,r),e&&!Ke(e,".content")||this.updateContent(n,e)}},updateContent:function(t,e){var n=sn({},(e||t.get("attrs"))[".content"]);n=tn(n,"text");var r=Ce(t.get("content"),t.get("size"),n,{svgDocument:this.paper.svg}),i=ye({},".content",n,"/");i[".content"].text=r,qr.prototype.update.call(this,t,i)}}),or.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,e,n){return void 0===t?Fe(this.get("source")):t instanceof or?((r=Fe(e)||{}).id=t.id,i=n,this.set("source",r,i)):He(t)?(r=t,i=e,this.set("source",r,i)):((r=Fe(e)||{}).x=t.x,r.y=t.y,i=n,this.set("source",r,i));var r,i},target:function(t,e,n){return void 0===t?Fe(this.get("target")):t instanceof or?((r=Fe(e)||{}).id=t.id,i=n,this.set("target",r,i)):He(t)?(r=t,i=e,this.set("target",r,i)):((r=Fe(e)||{}).x=t.x,r.y=t.y,i=n,this.set("target",r,i));var r,i},router:function(t,e,n){if(void 0===t){var r=this.get("router");return r?"object"==typeof r?Fe(r):r:this.get("manhattan")?{name:"orthogonal"}:null}var i="object"==typeof t||"function"==typeof t,o=i?t:{name:t,args:e},s=i?e:n;return this.set("router",o,s)},connector:function(t,e,n){if(void 0===t){var r=this.get("connector");return r?"object"==typeof r?Fe(r):r:this.get("smooth")?{name:"smooth"}:null}var i="object"==typeof t||"function"==typeof t,o=i?t:{name:t,args:e},s=i?e:n;return this.set("connector",o,s)},label:function(t,e,n){var r=this.labels();return(t=isFinite(t)&&null!==t?0|t:0)<0&&(t=r.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,n)},labels:function(t,e){return 0===arguments.length?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,e))},hasLabels:function(){const{labels:t}=this.attributes;return Array.isArray(t)&&t.length>0},insertLabel:function(t,e,n){if(!e)throw new Error("dia.Link: no label provided");var r=this.labels(),i=r.length;return(t=isFinite(t)&&null!==t?0|t:i)<0&&(t=i+t+1),r.splice(t,0,e),this.labels(r,n)},appendLabel:function(t,e){return this.insertLabel(-1,t,e)},removeLabel:function(t,e){var n=this.labels();return t=isFinite(t)&&null!==t?0|t:-1,n.splice(t,1),this.labels(n,e)},vertex:function(t,e,n){var r=this.vertices();if((t=isFinite(t)&&null!==t?0|t:0)<0&&(t=r.length+t),arguments.length<=1)return this.prop(["vertices",t]);var i=this._normalizeVertex(e);return this.prop(["vertices",t],i,n)},vertices:function(t,e){if(0===arguments.length)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var n=[],r=0;r<t.length;r++){var i=t[r],o=this._normalizeVertex(i);n.push(o)}return this.set("vertices",n,e)},insertVertex:function(t,e,n){if(!e)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),i=r.length;(t=isFinite(t)&&null!==t?0|t:i)<0&&(t=i+t+1);var o=this._normalizeVertex(e);return r.splice(t,0,o),this.vertices(r,n)},removeVertex:function(t,e){var n=this.vertices();return t=isFinite(t)&&null!==t?0|t:-1,n.splice(t,1),this.vertices(n,e)},_normalizeVertex:function(t){return He(t)?t:{x:t.x,y:t.y}},translate:function(t,e,n){return(n=n||{}).translateBy=n.translateBy||this.id,n.tx=t,n.ty=e,this.applyToPoints((function(n){return{x:(n.x||0)+t,y:(n.y||0)+e}}),n)},scale:function(t,e,n,r){return this.applyToPoints((function(r){return j(r).scale(t,e,n).toJSON()}),r)},applyToPoints:function(t,e){if(!qe(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},{source:r,target:i}=this.attributes;r.id||(n.source=t(r)),i.id||(n.target=t(i));var o=this.vertices();return o.length>0&&(n.vertices=o.map(t)),this.set(n,e)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new j(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new j(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const t=[this.getSourcePoint(),...this.vertices().map(j),this.getTargetPoint()];return new ut(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var e;if(this.graph){var n=this.getSourceElement(),r=this.getTargetElement(),i=this.getParentCell();n&&r&&(e=n===r||n.isEmbeddedIn(r)?r:r.isEmbeddedIn(n)?n:this.graph.getCommonAncestor(n,r)),!i||e&&e.id===i.id||i.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var{source:e,target:n}=this.attributes,r=e.id,i=n.id;if(!r||!i)return!1;var o=r===i;if(!o&&t.deep&&this.graph){var s=this.getSourceCell(),a=this.getTargetCell();o=s.isEmbeddedIn(a)||a.isEmbeddedIn(s)}return o},getSourceCell:function(){const{graph:t,attributes:e}=this;var n=e.source;return n&&n.id&&t&&t.getCell(n.id)||null},getSourceElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){const{graph:t,attributes:e}=this;var n=e.target;return n&&n.id&&t&&t.getCell(n.id)||null},getTargetElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter((function(t){return!!t}));t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=cn(t)||un(t)?t:t.id,n=this.getRelationshipAncestor();return!!n&&(n.id===e||n.isEmbeddedIn(e))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},e={};return e.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,e.position=t.position,e.attrs=t.attrs,e.size=t.size,e}},{endsEqual:function(t,e){var n=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&n}})),Yr=(jr.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),jr.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}));jr.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),jr.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),jr.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),jr.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),jr.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),jr.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),jr.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),jr.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),jr.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),jr.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,e){if(void 0===t)return this.attr("body/lateralArea");var n={lateralArea:t},r=Ee(t)?{refCy:t,refRy:t,cy:null,ry:null}:{refCy:null,refRy:null,cy:t,ry:t};return this.attr({body:n,top:r},e)}},{attributes:{lateralArea:{set:function(t,e){var n=Ee(t);n&&(t=parseFloat(t)/100);var r=e.x,i=e.y,o=e.width,s=e.height,a=o/2,u=n?s*t:t,c=ue.KAPPA,l=c*a,h=c*(n?s*t:t),f=r+o/2,d=r+o,p=i+u,g=p-u,v=i+s-u,m=i+s;return{d:["M",r,p,"L",r,v,"C",r,v+h,f-l,m,f,m,"C",f+l,m,d,v+h,d,v,"L",d,p,"C",d,p-h,f+l,g,f,g,"C",f-l,g,r,p-h,r,p,"Z"].join(" ")}}}}});var Jr=Hr.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}};jr.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Jr]},{attributes:{text:{set:function(t,e,n,r){if(!(n instanceof HTMLElement)){var i=r.style||{},o={text:t,width:-5,height:"100%"},s=Ie({textVerticalAnchor:"middle"},i);return ir.textWrap.set.call(this,o,e,n,s),{fill:i.color||null}}n.textContent=t},position:function(t,e,n){if(n instanceof SVGElement)return e.center()}}}});const Zr=Xr.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),Kr=(Xr.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),Xr.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),function(t,e,n){return t}),Qr=function(t,e,n){var r,i,o,s=e.side||"bottom",a=Te(e.padding||40),u=n.sourceBBox,c=n.targetBBox,l=u.center(),h=c.center();switch(s){case"bottom":o=1,r="y",i="height";break;case"top":o=-1,r="y",i="height";break;case"left":o=-1,r="x",i="width";break;case"right":o=1,r="x",i="width";break;default:throw new Error("Router: invalid side")}return l[r]+=o*(u[i]/2+a[s]),h[r]+=o*(c[i]/2+a[s]),o*(l[r]-h[r])>0?h[r]=l[r]:l[r]=h[r],[l].concat(t,h)};var ti={N:"S",S:"N",E:"W",W:"E"},ei={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function ni(t,e,n){var r=new j(t.x,e.y);return n.containsPoint(r)&&(r=new j(e.x,t.y)),r}function ri(t,e){return t["W"===e||"E"===e?"width":"height"]}function ii(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function oi(t){return new Q(t.x,t.y,0,0)}function si(t){var e=Te(t.padding||t.elementPadding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function ai(t,e){return t.sourceBBox.clone().moveAndExpand(si(e))}function ui(t,e){return t.targetBBox.clone().moveAndExpand(si(e))}function ci(t,e,n){var r=new j(t.x,e.y),i=new j(e.x,t.y),o=ii(t,r),s=ii(t,i),a=ti[n],u=o===n||o!==a&&(s===a||s!==n)?r:i;return{points:[u],direction:ii(u,e)}}function li(t,e,n){var r=ni(t,e,n);return{points:[r],direction:ii(r,e)}}function hi(t,e,n,r){var i,o={},s=[new j(t.x,e.y),new j(e.x,t.y)],a=s.filter((function(t){return!n.containsPoint(t)})),u=a.filter((function(e){return ii(e,t)!==r}));if(u.length>0)i=(i=u.filter((function(e){return ii(t,e)===r})).pop())||u[0],o.points=[i],o.direction=ii(i,e);else{i=Je(s,a)[0];var c=new j(e).move(i,-ri(n,r)/2),l=ni(c,t,n);o.points=[l,c],o.direction=ii(c,e)}return o}function fi(t,e,n,r){var i=li(e,t,r),o=i.points[0];if(n.containsPoint(o)){var s=(i=li(t,e,n)).points[0];if(r.containsPoint(s)){var a=new j(t).move(s,-ri(n,ii(t,s))/2),u=new j(e).move(o,-ri(r,ii(e,o))/2),c=new rt(a,u).midpoint(),l=li(t,c,n),h=ci(c,e,l.direction);i.points=[l.points[0],h.points[0]],i.direction=h.direction}}return i}function di(t,e,n,r,i){var o,s,a,u={},c=n.union(r).inflate(1),l=c.center().distance(e)>c.center().distance(t),h=l?e:t,f=l?t:e;return i?(o=j.fromPolar(c.width+c.height,ei[i],h),o=c.pointNearestToPoint(o).move(o,-1)):o=c.pointNearestToPoint(h).move(h,1),s=ni(o,f,c),o.round().equals(s.round())?(s=j.fromPolar(c.width+c.height,b(o.theta(h))+Math.PI/2,f),a=ni(o,s=c.pointNearestToPoint(s).move(f,1).round(),c),u.points=l?[s,a,o]:[o,a,s]):u.points=l?[s,o]:[o,s],u.direction=ii(l?o:s,e),u}function pi(t,e,n){var r,i=ai(n,e),o=ui(n,e),s=function(t,e){return t.sourceAnchor?t.sourceAnchor:ai(t,e).center()}(n,e),a=function(t,e){return t.targetAnchor?t.targetAnchor:ui(t,e).center()}(n,e);i=i.union(oi(s)),o=o.union(oi(a)),(t=We(t).map(j)).unshift(s),t.push(a);for(var u=[],c=0,l=t.length-1;c<l;c++){var h=null,f=t[c],d=t[c+1],p=!!ii(f,d);if(0===c)c+1===l?i.intersect(o.clone().inflate(1))?h=di(f,d,i,o):p||(h=fi(f,d,i,o)):i.containsPoint(d)?h=di(f,d,i,oi(d).moveAndExpand(si(e))):p||(h=li(f,d,i));else if(c+1===l){var g=p&&ii(d,f)===r;o.containsPoint(f)||g?h=di(f,d,oi(f).moveAndExpand(si(e)),o,r):p||(h=hi(f,d,o,r))}else p||(h=ci(f,d,r));h?(Array.prototype.push.apply(u,h.points),r=h.direction):r=ii(f,d),c+1<l&&u.push(d)}return u}var gi={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,e=this.cost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:-t,offsetY:0,cost:e},{offsetX:0,offsetY:t,cost:e},{offsetX:0,offsetY:-t,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},isPointObstacle:null,fallbackRouter:function(t,e,n){if(!qe(pi))throw new Error("Manhattan requires the orthogonal router as default fallback.");return pi(t,Ie({},gi,e),n)},fallbackRoute:function(t,e,n){return null},draggingRoute:null};function vi(t){this.map={},this.options=t,this.mapGridSize=100}function mi(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function yi(t,e){return e&&e.paddingBox?t.sourceBBox.clone().moveAndExpand(e.paddingBox):t.sourceBBox.clone()}function bi(t,e){return e&&e.paddingBox?t.targetBBox.clone().moveAndExpand(e.paddingBox):t.targetBBox.clone()}function xi(t,e){return t.sourceAnchor?t.sourceAnchor:yi(t,e).center()}function wi(t,e,n,r,i){var o=360/n,s=t.theta(function(t,e,n,r){var i=r.step,o=e.x-t.x,s=e.y-t.y,a=o/n.x*i,u=s/n.y*i;return new j(t.x+a,t.y+u)}(t,e,r,i)),a=v(s+o/2);return o*Math.floor(a/o)}function _i(t,e){var n=Math.abs(t-e);return n>180?360-n:n}function Ai(t,e){if(!t)return e;var n=Math.abs(t),r=Math.round(n/e);return r?e+(n-r*e)/r:n}function ki(t,e){return t.round(e)}function Si(t,e,n){return ki(function(t,e){var n=e.source,r=m(t.x-n.x,e.x)+n.x,i=m(t.y-n.y,e.y)+n.y;return new j(r,i)}(t.clone(),e),n)}function Ei(t){return t.clone().toString()}function Pi(t){return new j(0===t.x?0:Math.abs(t.x)/t.x,0===t.y?0:Math.abs(t.y)/t.y)}function Ci(t,e,n,r,i,o,s){for(var a,u=[],c=Pi(i.difference(n)),l=Ei(n),h=t[l];h;){var f=Pi((a=e[l]).difference(h));f.equals(c)||(u.unshift(a),c=f),h=t[l=Ei(h)]}var d=e[l];return Pi(d.difference(r)).equals(c)||u.unshift(d),u}function Ti(t,e){for(var n=1/0,r=0,i=e.length;r<i;r++){var o=t.manhattanDistance(e[r]);o<n&&(n=o)}return n}function Ni(t,e,n,r,i){var o=i.precision,s=i.directionMap,a=t.difference(e.center()),u=an(s)?Object.keys(s):[],c=We(n),l=u.reduce((function(n,i){if(c.includes(i)){for(var u,l=s[i],h=new j(t.x+l.x*(Math.abs(a.x)+e.width),t.y+l.y*(Math.abs(a.y)+e.height)),f=new rt(t,h).intersect(e)||[],d=f.length,p=null,g=0;g<d;g++){var v=f[g],m=t.squaredDistance(v);(void 0===u||m>u)&&(u=m,p=v)}if(p){var y=Si(p,r,o);e.containsPoint(y)&&(y=Si(y.offset(l.x*r.x,l.y*r.y),r,o)),n.push(y)}}return n}),[]);return e.containsPoint(t)||l.push(Si(t,r,o)),l}function Li(t,e,n,r){var i,o,s=r.precision;i=ki(t instanceof Q?xi(this,r).clone():t.clone(),s),o=ki(e instanceof Q?function(t,e){return t.targetAnchor?t.targetAnchor:bi(t,e).center()}(this,r).clone():e.clone(),s);var a,u,c,l,h,f,d,p=(a=r.step,c=o,{source:(u=i).clone(),x:Ai(c.x-u.x,a),y:Ai(c.y-u.y,a)});if(f=t instanceof Q?Ni(l=i,t,r.startDirections,p,r):[l=i],e instanceof Q?(h=o,d=Ni(o,e,r.endDirections,p,r)):d=[h=o],f=f.filter((t=>!n(t))),d=d.filter((t=>!n(t))),f.length>0&&d.length>0){for(var g=new mi,v={},m={},y={},b=0,x=f.length;b<x;b++){var w=f[b],_=Ei(w);g.add(_,Ti(w,d)),v[_]=w,y[_]=0}var A,k,S=r.previousDirectionAngle,E=void 0===S,P=r.directions;!function(t,e,n){var r=n.step;We(n.directions).forEach((function(t){t.gridOffsetX=t.offsetX/r*e.x,t.gridOffsetY=t.offsetY/r*e.y}))}(0,p,r);for(var C=P.length,T=We(d).reduce((function(t,e){var n=Ei(e);return t.push(n),t}),[]),N=r.maximumLoops;!g.isEmpty()&&N>0;){var L,M=g.pop(),O=v[M],I=m[M],R=y[M],B=void 0===I,D=O.equals(l);L=B?E?D?null:wi(l,O,C,p,r):S:wi(I,O,C,p,r);var j=f.length===d.length;if(j)for(var V=0;V<f.length;V++)if(!f[V].equals(d[V])){j=!1;break}if((!B||!j)&&T.indexOf(M)>=0)return r.previousDirectionAngle=L,Ci(m,v,O,l,h);for(b=0;b<C;b++){var F=(A=P[b]).angle;if(k=_i(L,F),E&&D||!(k>r.maxAllowedDirectionChange)){var z=Si(O.clone().offset(A.gridOffsetX,A.gridOffsetY),p,s),U=Ei(z);if(!g.isClose(U)&&!n(z)){if(T.indexOf(U)>=0&&!z.equals(h)&&_i(F,wi(z,h,C,p,r))>r.maxAllowedDirectionChange)continue;var G=R+A.cost+(D?0:r.penalties[k]);(!g.isOpen(U)||G<y[U])&&(v[U]=z,m[U]=O,y[U]=G,g.add(U,G+Ti(z,d)))}}}N--}}return r.fallbackRoute.call(this,l,h,r)}vi.prototype.build=function(t,e){var n=this.options,r=We(n.excludeEnds).reduce((function(n,r){var i=e.get(r);if(i){var o=t.getCell(i.id);o&&n.push(o)}return n}),[]),i=[],o=t.getCell(e.get("source").id);o&&(i=Ze(i,o.getAncestors().map((function(t){return t.id}))));var s=t.getCell(e.get("target").id);s&&(i=Ze(i,s.getAncestors().map((function(t){return t.id}))));var a=this.mapGridSize;return t.getElements().reduce((function(t,e){var o=We(n.excludeTypes).includes(e.get("type")),s=r.find((function(t){return t.id===e.id})),u=i.includes(e.id);if(!(o||s||u))for(var c=e.getBBox().moveAndExpand(n.paddingBox),l=c.origin().snapToGrid(a),h=c.corner().snapToGrid(a),f=l.x;f<=h.x;f+=a)for(var d=l.y;d<=h.y;d+=a){var p=f+"@"+d;t[p]=t[p]||[],t[p].push(c)}return t}),this.map),this},vi.prototype.isPointAccessible=function(t){var e=t.clone().snapToGrid(this.mapGridSize).toString();return We(this.map[e]).every((function(e){return!e.containsPoint(t)}))},mi.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var n=je(this.items,t,function(t){return this.values[t]}.bind(this));this.items.splice(n,0,t)},mi.prototype.remove=function(t){this.hash[t]=this.CLOSE},mi.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},mi.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},mi.prototype.isEmpty=function(){return 0===this.items.length},mi.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};const Mi=function(t,e,n){return function(t,e,n){!function(t){if(t.directions=Qe(t,"directions"),t.penalties=Qe(t,"penalties"),t.paddingBox=Qe(t,"paddingBox"),t.padding=Qe(t,"padding"),t.padding){var e=Te(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}We(t.directions).forEach((function(t){var e=new j(0,0),n=new j(t.offsetX,t.offsetY);t.angle=v(e.theta(n))}))}(e),n.options.perpendicular=!!e.perpendicular;var r=yi(n,e),i=bi(n,e),o=xi(n,e);let s;if("function"==typeof e.isPointObstacle)s=e.isPointObstacle;else{const t=new vi(e);t.build(n.paper.model,n.model),s=e=>!t.isPointAccessible(e)}for(var a,u,c=We(t).map(j),l=[],h=o,f=0,d=c.length;f<=d;f++){var p=null;if(u=a||r,!(a=c[f])&&(a=i,(!n.model.get("source").id||!n.model.get("target").id)&&qe(e.draggingRoute))){var g=u===r?o:u,m=a.origin();p=e.draggingRoute.call(n,g,m,e)}if(null===(p=p||Li.call(n,u,a,s,e)))return e.fallbackRouter(t,e,n);var y=p[0];y&&y.equals(h)&&p.shift(),h=p[p.length-1]||h,Array.prototype.push.apply(l,p)}return l}(t,Ie({},gi,e),n)};var Oi={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,e=this.cost(),n=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:t,offsetY:t,cost:n},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:t,cost:n},{offsetX:-t,offsetY:0,cost:e},{offsetX:-t,offsetY:-t,cost:n},{offsetX:0,offsetY:-t,cost:e},{offsetX:t,offsetY:-t,cost:n}]},fallbackRoute:function(t,e,n){var r=t.theta(e),i=[],o={x:e.x,y:t.y},s={x:t.x,y:e.y};if(r%180>90){var a=o;o=s,s=a}var u=r%90<45?o:s,c=new rt(t,u),l=90*Math.ceil(r/90),h=j.fromPolar(c.squaredLength(),b(l+135),u),f=new rt(e,h),d=c.intersection(f),p=d||e,g=d?p:t,m=360/n.directions.length,y=g.theta(e),x=v(y+m/2),w=m*Math.floor(x/m);return n.previousDirectionAngle=w,p&&i.push(p.round()),i.push(e),i}};const Ii=function(t,e,n){if(!qe(Mi))throw new Error("Metro requires the manhattan router.");return Mi(t,Ie({},Oi,e),n)};var Ri=["arc","gap","cubic"],Bi=["smooth"],Di=1/3,ji=2/3;function Vi(t,e,n){var r=[].concat(t,n,e);return r.reduce((function(t,e,n){var i=r[n+1];return null!=i&&(t[n]=it(e,i)),t}),[])}function Fi(t,e){return it(t,e).squaredLength()}function zi(t,e,n,r){var i,o=new vt;return i=vt.createSegment("M",t[0].start),o.appendSegment(i),We(t).forEach((function(s,a){if(s.isJump){var u,c,l,h;if("arc"===n){u=-90,c=s.start.difference(s.end);var f=Number(c.x<0||0===c.x&&c.y<0);f&&(u+=180);var d,p=s.midpoint(),g=new rt(p,s.end).rotate(p,u);l=(d=new rt(s.start,p)).pointAt(2/3).rotate(s.start,u),h=g.pointAt(1/3).rotate(g.end,-u),i=vt.createSegment("C",l,h,g.end),o.appendSegment(i),d=new rt(p,s.end),l=g.pointAt(1/3).rotate(g.end,u),h=d.pointAt(1/3).rotate(s.end,-u),i=vt.createSegment("C",l,h,s.end),o.appendSegment(i)}else if("gap"===n)i=vt.createSegment("M",s.end),o.appendSegment(i);else if("cubic"===n){u=s.start.theta(s.end);var v=.6*e,m=1.35*e;c=s.start.difference(s.end),(f=Number(c.x<0||0===c.x&&c.y<0))&&(m*=-1),l=j(s.start.x+v,s.start.y+m).rotate(s.start,u),h=j(s.end.x-v,s.end.y+m).rotate(s.end,u),i=vt.createSegment("C",l,h,s.end),o.appendSegment(i)}}else{var y=t[a+1];0==r||!y||y.isJump?(i=vt.createSegment("L",s.end),o.appendSegment(i)):function(t,e,n,r,i){var o,s=n.distance(r)/2,a=n.distance(i)/2,u=-Math.min(t,s),c=-Math.min(t,a),l=n.clone().move(r,u).round(),h=n.clone().move(i,c).round(),f=new j(Di*l.x+ji*n.x,ji*n.y+Di*l.y),d=new j(Di*h.x+ji*n.x,ji*n.y+Di*h.y);o=vt.createSegment("L",l),e.appendSegment(o),o=vt.createSegment("C",f,d,h),e.appendSegment(o)}(r,o,s.end,s.start,y.end)}})),o}const Ui=function(t,e,n,r){!function(t){var e=t.paper,n=e._jumpOverUpdateList;if(null==n){n=e._jumpOverUpdateList=[];var r=e.model;r.on("batch:stop",(function(){this.hasActiveBatch()||function(t){for(var e=t._jumpOverUpdateList,n=0;n<e.length;n++){const t=e[n],r=t.getFlag(t.constructor.Flags.CONNECTOR);t.requestUpdate(r)}}(e)})),r.on("reset",(function(){n=e._jumpOverUpdateList=[]}))}n.indexOf(t)<0&&(n.push(t),t.listenToOnce(t.model,"change:connector remove",(function(){n.splice(n.indexOf(t),1)})))}(this);var i=r.raw,o=r.size||5,s=r.jump&&(""+r.jump).toLowerCase(),a=r.radius||0,u=r.ignoreConnectors||Bi;-1===Ri.indexOf(s)&&(s=Ri[0]);var c=this.paper,l=c.model.getLinks();if(1===l.length)return zi(Vi(t,e,n),o,s,a);var h=this.model,f=l.indexOf(h),d=c.options.defaultConnector||{},p=l.filter((function(t,e){var n=t.get("connector")||d;return!(We(u).includes(n.name)||e>f&&"jumpover"===n.name)})),g=p.map((function(t){return c.findViewByModel(t)})),v=Vi(t,e,n),m=g.map((function(t){return null==t?[]:t===this?v:Vi(t.sourcePoint,t.targetPoint,t.route)}),this),y=v.reduce((function(t,e){var n=p.reduce((function(t,n,r){if(n!==h){var i=function(t,e){return We(e).reduce((function(e,n){var r=t.intersection(n);return r&&e.push(r),e}),[])}(e,m[r]);t.push.apply(t,i)}return t}),[]).sort((function(t,n){return Fi(e.start,t)-Fi(e.start,n)}));return n.length>0?t.push.apply(t,function(t,e,n){return e.reduce((function(r,i,o){if(!0===i.skip)return r;var s=r.pop()||t,a=V(i).move(s.start,-n),u=V(i).move(s.start,+n),c=e[o+1];if(null!=c){var l=u.distance(c);l<=n&&(u=c.move(s.start,l),c.skip=!0)}else if(a.distance(s.end)<2*n+1)return r.push(s),r;if(u.distance(s.start)<2*n+1)return r.push(s),r;var h=it(a,u);return h.isJump=!0,r.push(it(s.start,a),h,it(u,s.end)),r}),[])}(e,n,o)):t.push(e),t}),[]),b=zi(y,o,s,a);return i?b:b.serialize()},Gi=function(t,e,n,r){var i=r&&r.raw,o=[t].concat(n).concat([e]),s=new ut(o),a=new vt(s);return i?a:a.serialize()},qi=function(t,e,n,r){r||(r={});var i,o=r.radius||10,s=r.raw,a=new vt;i=vt.createSegment("M",t),a.appendSegment(i);for(var u,c,l,h,f,d,p,g,v,m,y,b=1/3,x=2/3,w=0,_=n.length;w<_;w++)u=new j(n[w]),c=n[w-1]||t,l=n[w+1]||e,h=f||u.distance(c)/2,f=u.distance(l)/2,d=-Math.min(o,h),p=-Math.min(o,f),g=u.clone().move(c,d).round(),v=u.clone().move(l,p).round(),m=new j(b*g.x+x*u.x,x*u.y+b*g.y),y=new j(b*v.x+x*u.x,x*u.y+b*v.y),i=vt.createSegment("L",g),a.appendSegment(i),i=vt.createSegment("C",m,y,v),a.appendSegment(i);return i=vt.createSegment("L",e),a.appendSegment(i),s?a:a.serialize()},Hi=function(t,e,n,r){var i,o=r&&r.raw;if(n&&0!==n.length){var s=[t].concat(n).concat([e]),a=pt.throughPoints(s);i=new vt(a)}else{var u;if(i=new vt,u=vt.createSegment("M",t),i.appendSegment(u),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)){var c=(t.x+e.x)/2;u=vt.createSegment("C",c,t.y,c,e.y,e.x,e.y),i.appendSegment(u)}else{var l=(t.y+e.y)/2;u=vt.createSegment("C",t.x,l,e.x,l,e.x,e.y),i.appendSegment(u)}}return o?i:i.serialize()},Wi={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},$i={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Xi=function(t,e,n=[],r={},i){const o=Boolean(r.raw),{direction:s=Wi.AUTO,precision:a=3}=r,u={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new j(r.sourceTangent):null,targetTangent:r.targetTangent?new j(r.targetTangent):null};"string"==typeof r.sourceDirection?u.sourceDirection=r.sourceDirection:"number"==typeof r.sourceDirection?u.sourceDirection=new j(1,0).rotate(null,r.sourceDirection):u.sourceDirection=r.sourceDirection?new j(r.sourceDirection).normalize():null,"string"==typeof r.targetDirection?u.targetDirection=r.targetDirection:"number"==typeof r.targetDirection?u.targetDirection=new j(1,0).rotate(null,r.targetDirection):u.targetDirection=r.targetDirection?new j(r.targetDirection).normalize():null;const c=[t,...n.map((t=>new j(t))),e];let l,h;if(u.sourceTangent)l=u.sourceTangent;else{const t=function(t,e,n,r){if(r.sourceDirection)switch(r.sourceDirection){case $i.UP:return new j(0,-1);case $i.DOWN:return new j(0,1);case $i.LEFT:return new j(-1,0);case $i.RIGHT:return new j(1,0);case $i.AUTO:return Yi(t,e);case $i.CLOSEST_POINT:return Zi(0,e);case $i.OUTWARDS:return Qi(t,e);default:return r.sourceDirection}switch(n){case Wi.HORIZONTAL:return function(t,e,n){const{sourceBBox:r}=t;let i;return i=r.width&&r.height?r.sideNearestToPoint(e[0]):r.x>e[1].x?"right":"left",new j("left"===i?-1:1,0)}(t,e);case Wi.VERTICAL:return function(t,e,n){const{sourceBBox:r}=t;let i;return i=r.width&&r.height?r.sideNearestToPoint(e[0]):r.y>e[1].y?"bottom":"top",new j(0,"top"===i?-1:1)}(t,e);case Wi.CLOSEST_POINT:return Zi(0,e);case Wi.OUTWARDS:return Qi(t,e);case Wi.AUTO:default:return Yi(t,e)}}(i,c,s,u),e=c[0].distance(c[1])*u.coeff,n=no(t,c[1].difference(c[0]).normalize());if(n>Math.PI/4){const r=e+(n-Math.PI/4)*u.angleTangentCoefficient;l=t.clone().scale(r,r)}else l=t.clone().scale(e,e)}if(u.targetTangent)h=u.targetTangent;else{const t=function(t,e,n,r){if(r.targetDirection)switch(r.targetDirection){case $i.UP:return new j(0,-1);case $i.DOWN:return new j(0,1);case $i.LEFT:return new j(-1,0);case $i.RIGHT:return new j(0,1);case $i.AUTO:return Ji(t,e);case $i.CLOSEST_POINT:return Ki(0,e);case $i.OUTWARDS:return to(t,e);default:return r.targetDirection}switch(n){case Wi.HORIZONTAL:return function(t,e,n){const{targetBBox:r}=t;let i;return i=r.width&&r.height?r.sideNearestToPoint(e[e.length-1]):r.x>e[e.length-2].x?"left":"right",new j("left"===i?-1:1,0)}(t,e);case Wi.VERTICAL:return function(t,e,n){const{targetBBox:r}=t;let i;return i=r.width&&r.height?r.sideNearestToPoint(e[e.length-1]):r.y>e[e.length-2].y?"top":"bottom",new j(0,"top"===i?-1:1)}(t,e);case Wi.CLOSEST_POINT:return Ki(0,e);case Wi.OUTWARDS:return to(t,e);case Wi.AUTO:default:return Ji(t,e)}}(i,c,s,u),e=c.length-1,n=c[e-1].distance(c[e])*u.coeff,r=no(t,c[e-1].difference(c[e]).normalize());if(r>Math.PI/4){const e=n+(r-Math.PI/4)*u.angleTangentCoefficient;h=t.clone().scale(e,e)}else h=t.clone().scale(n,n)}const f=function(t,e,n,r){const{tau:i,coeff:o}=r,s=[],a=[],u=[],c=t.length-1;for(let e=0;e<c;e++)s[e]=t[e].distance(t[e+1]);a[0]=e,a[c]=n;for(let e=1;e<c;e++){let n,r;n=1===e?t[e-1].clone().offset(a[e-1].x,a[e-1].y):t[e-1].clone(),r=e===c-1?t[e+1].clone().offset(a[e+1].x,a[e+1].y):t[e+1].clone();const i=n.difference(t[e]).normalize(),u=r.difference(t[e]).normalize(),l=no(i,u);let h,f=(Math.PI-l)/2;const d=ro(i,u);let p;p=ro(t[e].difference(t[e+1]),t[e].difference(t[e-1])),d<0&&(f=-f),l<Math.PI/2&&(f<0&&p<0||f>0&&p>0)&&(f-=Math.PI),h=u.clone(),eo(h,f);const g=h.clone(),v=h.clone(),m=s[e-1]*o,y=s[e]*o;g.scale(m,m),v.scale(y,y),a[e]=[g,v]}for(let e=0;e<c;e++){let n,r;n=0===e?t[e+1].difference(a[e].x/i,a[e].y/i):t[e+1].difference(a[e][1].x/i,a[e][1].y/i),r=e===c-1?t[e].clone().offset(a[e+1].x/i,a[e+1].y/i):t[e].difference(a[e+1][0].x/i,a[e+1][0].y/i),u[e]=[n,t[e],t[e+1],r]}return u}(c,l,h,u),d=f.map((t=>function(t,e){const{tau:n}=e,r=new j;r.x=t[1].x+(t[2].x-t[0].x)/(6*n),r.y=t[1].y+(t[2].y-t[0].y)/(6*n);const i=new j;return i.x=t[2].x+(t[3].x-t[1].x)/(6*n),i.y=t[2].y+(t[3].y-t[1].y)/(6*n),new pt(t[1],r,i,t[2])}(t,u))),p=new vt(d).round(a);return o?p:p.serialize()};function Yi(t,e,n){const{sourceBBox:r}=t;let i;switch(i=r.width&&r.height?r.sideNearestToPoint(e[0]):r.sideNearestToPoint(e[1]),i){case"top":return new j(0,-1);case"bottom":return new j(0,1);case"right":return new j(1,0);case"left":return new j(-1,0)}}function Ji(t,e,n){const{targetBBox:r}=t;let i;switch(i=r.width&&r.height?r.sideNearestToPoint(e[e.length-1]):r.sideNearestToPoint(e[e.length-2]),i){case"top":return new j(0,-1);case"bottom":return new j(0,1);case"right":return new j(1,0);case"left":return new j(-1,0)}}function Zi(t,e,n){return e[1].difference(e[0]).normalize()}function Ki(t,e,n){const r=e.length-1;return e[r-1].difference(e[r]).normalize()}function Qi(t,e,n){const{sourceBBox:r}=t,i=r.center();return e[0].difference(i).normalize()}function to(t,e,n){const{targetBBox:r}=t,i=r.center();return e[e.length-1].difference(i).normalize()}function eo(t,e){const n=Math.cos(e),r=Math.sin(e),i=n*t.x-r*t.y,o=r*t.x+n*t.y;t.x=i,t.y=o}function no(t,e){let n=t.dot(e)/(t.magnitude()*e.magnitude());return n<-1&&(n=-1),n>1&&(n=1),Math.acos(n)}function ro(t,e){return t.x*e.y-t.y*e.x}Xi.Directions=Wi,Xi.TangentDirections=$i;const io={RENDER:"RENDER",UPDATE:"UPDATE",TOOLS:"TOOLS",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},oo=Ur.extend({className:function(){var t=Ur.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){Ur.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[io.RENDER],attrs:[io.UPDATE],router:[io.UPDATE],connector:[io.CONNECTOR],smooth:[io.UPDATE],manhattan:[io.UPDATE],toolMarkup:[io.LEGACY_TOOLS],labels:[io.LABELS],labelMarkup:[io.LABELS],vertices:[io.VERTICES,io.UPDATE],vertexMarkup:[io.VERTICES],source:[io.SOURCE,io.UPDATE],target:[io.TARGET,io.UPDATE]},initFlag:[io.RENDER,io.SOURCE,io.TARGET,io.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(t,e){if(e||(e={}),this.hasFlag(t,io.SOURCE)){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,io.SOURCE)}if(this.hasFlag(t,io.TARGET)){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,io.TARGET)}const{paper:n,sourceView:r,targetView:i}=this;if(n&&(r&&!n.isViewMounted(r)||i&&!n.isViewMounted(i)))return t;if(this.hasFlag(t,io.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(e),this.removeFlag(t,[io.RENDER,io.UPDATE,io.VERTICES,io.LABELS,io.TOOLS,io.LEGACY_TOOLS,io.CONNECTOR]);let o=!1;this.hasFlag(t,io.VERTICES)&&(this.renderVertexMarkers(),t=this.removeFlag(t,io.VERTICES));const{model:s}=this,{attributes:a}=s;let u=this.hasFlag(t,io.LABELS),c=this.hasFlag(t,io.LEGACY_TOOLS);u&&(this.onLabelsChange(s,a.labels,e),t=this.removeFlag(t,io.LABELS),o=!0),c&&(this.renderTools(),t=this.removeFlag(t,io.LEGACY_TOOLS));const l=this.hasFlag(t,io.UPDATE),h=this.hasFlag(t,io.CONNECTOR);return(l||h)&&(l?e.translateBy&&s.isRelationshipEmbeddedIn(e.translateBy)?this.translate(e.tx,e.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(e),t=this.removeFlag(t,[io.UPDATE,io.TOOLS,io.CONNECTOR]),u=!1,c=!1,o=!0),u&&this.updateLabelPositions(),c&&this.updateToolsPosition(),o&&this.updateHighlighters(),this.hasFlag(t,io.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,io.TOOLS)),t},requestConnectionUpdate:function(t){this.requestUpdate(this.getFlag(io.UPDATE),t)},isLabelsRenderRequired:function(t={}){const e=this.model.previous("labels");if(!e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var n=t.propertyPathArray||[],r=n.length;if(r>1&&e[n[1]]){if(2===r)return"markup"in Object(t.propertyValue);if("markup"!==n[2])return!1}}return!0},onLabelsChange:function(t,e,n){this.isLabelsRenderRequired(n)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.LinkView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el);this.selectors=e.selectors,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=ue(t);Array.isArray(e)||(e=[e]);for(var n=this._V,r=0,i=e.length;r<i;r++){var o=e[r],s=o.attr("class");s&&(s=de(s),n[le.camelCase(s)]=o)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if("string"==typeof t)return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var e=ue(t),n=document.createDocumentFragment();if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r].node;n.appendChild(o)}else n.appendChild(e.node);return{fragment:n,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var e,n=t.fragment;if(!(t.fragment instanceof DocumentFragment&&t.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var r=n.childNodes;return(e=r.length>1||"G"!==r[0].nodeName.toUpperCase()?ue("g").append(n):ue(r[0])).addClass("label"),{node:e.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,e=t.labels,n=this._labelCache={},r=this._labelSelectors={},i=this.model,o=i.attributes.labels||[],s=o.length;if(0===s)return e&&e.remove(),this;e?e.empty():(e=t.labels=ue("g").addClass("labels"),this.options.labelsLayer&&(e.addClass(fe(Qe(this,"className"))),e.attr("model-id",i.id)));for(var a=0;a<s;a++){var u,c,l=o[a],h=this._normalizeLabelMarkup(this._getLabelMarkup(l.markup));if(h)u=h.node,c=h.selectors;else{var f=i._builtins.defaultLabel,d=this._normalizeLabelMarkup(this._getLabelMarkup(f.markup)),p=i._getDefaultLabel(),g=this._normalizeLabelMarkup(this._getLabelMarkup(p.markup))||d;u=g.node,c=g.selectors}u.setAttribute("label-idx",a),e.append(u),n[a]=u;var v=this.selector;if(c[v])throw new Error("dia.LinkView: ambiguous label root selector.");c[v]=u,r[a]=c}return e.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:t,paper:e,model:n,_V:r,options:i}=this,{labels:o}=r;if(!o||!n.hasLabels())return;const{node:s}=o;i.labelsLayer?e.getLayerView(i.labelsLayer).insertSortedNode(s,n.get("z")):s.parentNode!==t&&t.appendChild(s)},unmountLabels:function(){const{options:t,_V:e}=this;if(!e)return;const{labels:n}=e;n&&t.labelsLayer&&n.remove()},onMount:function(){this.mountLabels()},unmount:function(){Ur.prototype.unmount.apply(this,arguments),this.unmountLabels()},findLabelNode:function(t,e){const n=this._labelCache[t];if(!n)return null;const r=this._labelSelectors[t],[i=null]=this.findBySelector(e,n,r);return i},_mergeLabelAttrs:function(t,e,n,r){if(null===e)return null;if(void 0===e){if(null===n)return null;if(void 0===n){if(t)return;return r}return t?n:sn({},r,n)}return t?sn({},n,e):sn({},r,n,e)},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model,e=t.get("labels")||[],n=this.can("labelMove"),r=t._builtins.defaultLabel.attrs,i=t._getDefaultLabel(),o=i.markup,s=i.attrs,a=0,u=e.length;a<u;a++){var c=this._labelCache[a];c.setAttribute("cursor",n?"move":"default");var l=this._labelSelectors[a],h=e[a],f=h.markup,d=h.attrs,p=this._mergeLabelAttrs(f||o,d,s,r);this.updateDOMSubtreeAttributes(c,p,{rootBBox:new Q(h.size),selectors:l})}return this},renderTools:function(){if(!this._V.linkTools)return this;var t,e=le(this._V.linkTools.node).empty(),n=Oe(this.model.get("toolMarkup")||this.model.toolMarkup),r=ue(n());return e.append(r.node),this._toolCache=r,this.options.doubleLinkTools&&(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(n=Oe(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),t=ue(n())):t=r.clone(),e.append(t.node),this._tool2Cache=t),this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=le(this._V.markerVertices.node).empty(),e=Oe(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach((function(n,r){t.append(ue(e(Ie({idx:r},n))).node)})),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=le(this._V.markerArrowheads.node);t.empty();var e=Oe(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=ue(e({end:"source"})),this._V.targetArrowhead=ue(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(t){const e=this.model,n=e.vertices(),r=[this.sourceAnchor,...n,this.targetAnchor],i=r.length,o=new ut(r);o.simplify({threshold:.001});const s=o.points.map((t=>t.toJSON())),a=s.length;return i===a?0:(e.vertices(s.slice(1,a-1),t),i-a)},updateDefaultConnectionPath:function(){var t=this._V;t.connection&&t.connection.attr("d",this.getSerializedConnection()),t.connectionWrap&&t.connectionWrap.attr("d",this.getSerializedConnection()),t.markerSource&&t.markerTarget&&this._translateAndAutoOrientArrows(t.markerSource,t.markerTarget)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new j(this.sourceAnchor);case"target":return new j(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new j(this.sourcePoint);case"target":return new j(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var e=this.sourceView;if(!e)break;return this.sourceMagnet||e.el;case"target":var n=this.targetView;if(!n)break;return this.targetMagnet||n.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(t=0,e=0){const{route:n,path:r}=this;if(!n||!r)return;const i=new ut(n);i.translate(t,e),this.route=i.points,this._translateConnectionPoints(t,e),r.translate(t,e),this.updateDOM()},updateDOM(){const{el:t,model:e,selectors:n}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(t,e.attr(),{selectors:n}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:t}=this,e=t.vertices(),n=this.findAnchors(e),r=this.sourceAnchor=n.source,i=this.targetAnchor=n.target,o=this.findRoute(e);this.route=o;var s=this.findConnectionPoints(o,r,i);this.sourcePoint=s.source,this.targetPoint=s.target},updatePath:function(){const{route:t,sourcePoint:e,targetPoint:n}=this,r=this.findMarkerPoints(t,e,n),i=this.findPath(t,r.source||e,r.target||n);this.path=i},findMarkerPoints:function(t,e,n){var r,i,o=t[0],s=t[t.length-1],a=this._markerCache;return this._V.markerSource&&(a.sourceBBox=a.sourceBBox||this._V.markerSource.getBBox(),r=j(e).move(o||n,a.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(a.targetBBox=a.targetBBox||this._V.markerTarget.getBBox(),i=j(n).move(s||e,a.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),a.sourcePoint=r||e.clone(),a.targetPoint=i||n.clone(),{source:r,target:i}},findAnchorsOrdered:function(t,e,n,r){var i,o,s,a,u=this.model,c=u.get(t),l=u.get(n),h=this.getEndView(t),f=this.getEndView(n),d=this.getEndMagnet(t),p=this.getEndMagnet(n);h?(s=e?new j(e):f?p:new j(l),i=this.getAnchor(c.anchor,h,d,s,t)):i=new j(c),f?(a=new j(r||i),o=this.getAnchor(l.anchor,f,p,a,n)):o=new j(l);var g={};return g[t]=i,g[n]=o,g},findAnchors:function(t){var e=this.model,n=t[0],r=t[t.length-1];return e.target().priority&&!e.source().priority?this.findAnchorsOrdered("target",r,"source",n):this.findAnchorsOrdered("source",n,"target",r)},findConnectionPoints:function(t,e,n){var r,i,o,s,a=t[0],u=t[t.length-1],c=this.model,l=c.get("source"),h=c.get("target"),f=this.sourceView,d=this.targetView,p=this.paper.options;if(f&&!f.isNodeConnection(this.sourceMagnet)){r=this.sourceMagnet||f.el;var g=l.connectionPoint||p.defaultConnectionPoint,v=new rt(a||n,e);o=this.getConnectionPoint(g,f,r,v,"source")}else o=e;if(d&&!d.isNodeConnection(this.targetMagnet)){i=this.targetMagnet||d.el;var m=h.connectionPoint||p.defaultConnectionPoint,y=new rt(u||e,n);s=this.getConnectionPoint(m,d,i,y,"target")}else s=n;return{source:o,target:s}},getAnchor:function(t,e,n,r,i){var o,s=e.isNodeConnection(n),a=this.paper.options;if(t||(t=s?a.defaultLinkAnchor:a.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:a.defaultAnchor),!t)throw new Error("Anchor required.");if("function"==typeof t)o=t;else{var u=t.name;if("function"!=typeof(o=a[s?"linkAnchorNamespace":"anchorNamespace"][u]))throw new Error("Unknown anchor: "+u)}var c=o.call(this,e,n,r,t.args||{},i,this);return c?c.round(this.decimalsRounding):new j},getConnectionPoint:function(t,e,n,r,i){var o,s,a=r.end,u=this.paper.options;if("function"==typeof u.linkConnectionPoint){var c=n===e.el?void 0:n;if(o=u.linkConnectionPoint(this,e,c,r.start,i))return o}if(!t)return a;if("function"==typeof t)s=t;else{var l=t.name;if("function"!=typeof(s=u.connectionPointNamespace[l]))throw new Error("Unknown connection point: "+l)}return(o=s.call(this,r,e,n,t.args||{},i,this))?o.round(this.decimalsRounding):a},_translateConnectionPoints:function(t,e){var n=this._markerCache;n.sourcePoint.offset(t,e),n.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e),this.sourceAnchor.offset(t,e),this.targetAnchor.offset(t,e)},_normalizeLabelPosition:function(t){return"number"==typeof t?{distance:t,offset:null,angle:0,args:null}:t},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var t=this.model,e=t.get("labels")||[];if(!e.length)return this;for(var n=t._builtins.defaultLabel.position,r=t._getDefaultLabel(),i=this._normalizeLabelPosition(r.position),o=sn({},n,i),s=0,a=e.length;s<a;s++){var u=this._labelCache[s];if(u){var c=e[s],l=this._normalizeLabelPosition(c.position),h=sn({},o,l),f=this._getLabelTransformationMatrix(h);u.setAttribute("transform",ue.matrixToTransformString(f)),this._cleanLabelMatrices(s)}}return this},_cleanLabelMatrices:function(t){const{metrics:e,_labelSelectors:n}=this,r=n[t];if(r)for(let t in r){const{id:n}=r[t];n&&n in e&&delete e[n].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,n=this.getConnectionLength();if(!Number.isNaN(n)){n<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var r=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+t),this.options.doubleLinkTools&&n>=this.options.longLinkLength){var i=this.options.doubleLinkToolsOffset||e;r=this.getPointAtLength(n-i),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+t),this._tool2Cache.attr("visibility","visible")}else this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===le.css(this._V.markerArrowheads.node,"display"))return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(t){const{model:e,paper:n}=this,r=`${t}View`,i=e.get(t),o=i&&i.id;if(!o)return this[r]=null,this.updateEndMagnet(t),!0;const s=n.getModelById(o);if(!s)throw new Error("LinkView: invalid "+t+" cell.");const a=s.findView(n);return!!a&&(this[r]=a,this.updateEndMagnet(t),!0)},updateEndMagnet:function(t){const e=`${t}Magnet`,n=this.getEndView(t);if(n){let r=n.getMagnetFromLinkEnd(this.model.get(t));r===n.el&&(r=null),this[e]=r}else this[e]=null},_translateAndAutoOrientArrows:function(t,e){var n=We(this.route);t&&t.translateAndAutoOrient(this.sourcePoint,n[0]||this.targetPoint,this.paper.cells),e&&e.translateAndAutoOrient(this.targetPoint,n[n.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionAngle:function(t){return(this.model.label(t).position||{}).angle||0},_getLabelPositionArgs:function(t){return(this.model.label(t).position||{}).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(t,e){return null===t?null:void 0===t?null===e?null:e:sn({},e,t)},addLabel:function(t,e,n,r){var i,o,s,a=0;"number"!=typeof t?(i=t.x,o=t.y,"number"==typeof e?(a=e,s=n):s=e):(i=t,o=e,"number"==typeof n?(a=n,s=r):s=n);var u=this._getDefaultLabelPositionArgs(),c=s,l=this._mergeLabelPositionArgs(c,u),h={position:this.getLabelPosition(i,o,a,l)};return this.model.insertLabel(-1,h,s),-1},addVertex:function(t,e,n){var r="number"!=typeof t,i=r?t.x:t,o=r?t.y:e,s=r?e:n,a={x:i,y:o},u=this.getVertexIndex(i,o);return this.model.insertVertex(u,a,s),u},sendToken:function(t,e,n){var r,i,o;an(e)?(r=e.duration,i="reverse"===e.direction,o=e.connection):(r=e,i=!1,o=null);var s={dur:(r=r||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};i&&(s.keyPoints="1;0",s.keyTimes="0;1");var a,u=ue(t);if("string"==typeof o)a=this.findBySelector(o,this.el,this.selectors)[0];else{var c=this._V;a=c.connection?c.connection.node:this.el.querySelector("path")}if(!(a instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");u.appendTo(this.paper.cells).animateAlongPath(s,a),setTimeout(function(t,e){return function(){t.remove(),"function"==typeof e&&e()}}(u,n),r)},findRoute:function(t){t||(t=[]);var e=this.paper.options.routerNamespace||o,n=this.model.router(),r=this.paper.options.defaultRouter;if(!n){if(!r)return t.map(j);n=r}var i=qe(n)?n:e[n.name];if(!qe(i))throw new Error('dia.LinkView: unknown router: "'+n.name+'".');var s=n.args||{};return i.call(this,t,s,this)||t.map(j)},findPath:function(t,e,n){var r=this.paper.options.connectorNamespace||s,i=this.model.connector(),o=this.paper.options.defaultConnector;i||(i=o||{});var a=qe(i)?i:r[i.name];if(!qe(a))throw new Error('dia.LinkView: unknown connector: "'+i.name+'".');var u=Fe(i.args||{});u.raw=!0;var c=a.call(this,e,n,t,u,this);return"string"==typeof c&&(c=new vt(ue.normalizePathData(c))),c},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("data"))return e.data;var n=t.serialize();return e.data=n,n},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("segmentSubdivisions"))return e.segmentSubdivisions;var n=t.getSegmentSubdivisions();return e.segmentSubdivisions=n,n},getConnectionLength:function(){var t=this.path;if(!t)return 0;var e=this.metrics;if(e.hasOwnProperty("length"))return e.length;var n=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return e.length=n,n},getPointAtLength:function(t){var e=this.path;return e?e.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var e=this.path;return e?(Ee(t)&&(t=parseFloat(t)/100),e.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var e=this.path;return e?e.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var e=this.path;return e?e.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var e=this.path;return e?e.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var e=this.path;return e?e.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var e=this.path;return e?e.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,e,n,r){var i,o={},s=0;"number"==typeof n?(s=n,i=r):i=n,i&&(o.args=i);var a,u,c=!(i&&i.absoluteDistance),l=i&&i.absoluteDistance&&i.reverseDistance,h=i&&i.absoluteOffset,f=this.path,d={segmentSubdivisions:this.getConnectionSubdivisions()},p=new j(t,e),g=f.closestPointT(p,d),v=f.lengthAtT(g,d);if(c&&(v=v/this.getConnectionLength()||0),l&&(v=-1*(this.getConnectionLength()-v)||1),o.distance=v,h||(a=f.tangentAtT(g)),a)u=a.pointOffset(p);else{var m=f.pointAtT(g),y=p.difference(m);u={x:y.x,y:y.y}}return o.offset=u,o.angle=s,o},_getLabelTransformationMatrix:function(t){var e,n=0,r={};if("number"==typeof t)e=t;else{if("number"!=typeof t.distance)throw new Error("dia.LinkView: invalid label position distance.");r=t.args||{},e=t.distance,n=t.angle||0}var i=e>0&&e<=1,o=0,s={x:0,y:0};if(t.offset){var a=t.offset;"number"==typeof a&&(o=a),a.x&&(s.x=a.x),a.y&&(s.y=a.y)}var u,c=0!==s.x||0!==s.y||0===o,l=r.keepGradient,h=r.ensureLegibility,f=this.path,d={segmentSubdivisions:this.getConnectionSubdivisions()},p=i?e*this.getConnectionLength():e,g=f.tangentAtLength(p,d),m=n;if(g){if(c)(u=g.start).offset(s);else{var y=g.clone();y.rotate(g.start,-90),y.setLength(o),u=y.end}l&&(m=g.angle()+n,h&&(m=v((m+90)%180-90)))}else u=f.start,c&&u.offset(s);return ue.createSVGMatrix().translate(u.x,u.y).rotate(m)},getLabelCoordinates:function(t){var e=this._getLabelTransformationMatrix(t);return new j(e.e,e.f)},getVertexIndex:function(t,e){for(var n=this.model.vertices(),r=this.getClosestPointLength(new j(t,e)),i=0,o=n.length;i<o;i++){var s=n[i];if(r<this.getClosestPointLength(s))break}return i},notifyPointerdown(t,e,n){Ur.prototype.pointerdown.call(this,t,e,n),this.notify("link:pointerdown",t,e,n)},notifyPointermove(t,e,n){Ur.prototype.pointermove.call(this,t,e,n),this.notify("link:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("link:pointerup",t,e,n),Ur.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){Ur.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){Ur.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,e,n)},contextmenu:function(t,e,n){Ur.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,e,n)},pointerdown:function(t,e,n){switch(this.notifyPointerdown(t,e,n),t.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(t,e,n);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(t,e,n);case"marker-arrowhead":return void this.dragArrowheadStart(t,e,n);case"connection":case"connection-wrap":return void this.dragConnectionStart(t,e,n);case"marker-source":case"marker-target":return}this.dragStart(t,e,n)},pointermove:function(t,e,n){var r=this._dragData;switch(r&&this.eventData(t,r),this.eventData(t).action){case"vertex-move":this.dragVertex(t,e,n);break;case"label-move":this.dragLabel(t,e,n);break;case"arrowhead-move":this.dragArrowhead(t,e,n);break;case"move":this.drag(t,e,n)}r&&Ie(r,this.eventData(t)),this.notifyPointermove(t,e,n)},pointerup:function(t,e,n){var r=this._dragData;switch(r&&(this.eventData(t,r),this._dragData=null),this.eventData(t).action){case"vertex-move":this.dragVertexEnd(t,e,n);break;case"label-move":this.dragLabelEnd(t,e,n);break;case"arrowhead-move":this.dragArrowheadEnd(t,e,n);break;case"move":this.dragEnd(t,e,n)}this.notifyPointerup(t,e,n),this.checkMouseleave(t)},mouseover:function(t){Ur.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){Ur.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){Ur.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){Ur.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,e,n,r){Ur.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){var i=ue(t.target).findParentByClass("link-tool",this.el);if(i){if(t.stopPropagation(),this.can("useLinkTools")){if("remove"===e)return void this.model.remove({ui:!0});this.notify(e,t,n,r)}this.notifyPointerdown(t,n,r),this.paper.delegateDragEvents(this,t.data)}else Ur.prototype.onevent.apply(this,arguments)},onlabel:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragLabelStart(t,e,n),this.eventData(t).stopPropagation&&t.stopPropagation()},dragConnectionStart:function(t,e,n){if(this.can("vertexAdd")){var r=this.addVertex({x:e,y:n},{ui:!0});this.eventData(t,{action:"vertex-move",vertexIdx:r})}},dragLabelStart:function(t,e,n){if(this.can("labelMove")){var r=t.currentTarget,i=parseInt(r.getAttribute("label-idx"),10),o=this._getLabelPositionAngle(i),s=this._getLabelPositionArgs(i),a=this._getDefaultLabelPositionArgs(),u=this._mergeLabelPositionArgs(s,a);this.eventData(t,{action:"label-move",labelIdx:i,positionAngle:o,positionArgs:u,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragVertexStart:function(t,e,n){if(this.can("vertexMove")){var r=t.target,i=parseInt(r.getAttribute("idx"),10);this.eventData(t,{action:"vertex-move",vertexIdx:i})}},dragVertexRemoveStart:function(t,e,n){if(this.can("vertexRemove")){var r=t.target,i=parseInt(r.getAttribute("idx"),10);this.model.removeVertex(i)}},dragArrowheadStart:function(t,e,n){if(this.can("arrowheadMove")){var r=t.target.getAttribute("end"),i=this.startArrowheadMove(r,{ignoreBackwardsCompatibility:!0});this.eventData(t,i)}},dragStart:function(t,e,n){this.can("linkMove")&&this.eventData(t,{action:"move",dx:e,dy:n})},dragLabel:function(t,e,n){var r=this.eventData(t),i={position:this.getLabelPosition(e,n,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete i.position.offset,this.model.label(r.labelIdx,i)},dragVertex:function(t,e,n){var r=this.eventData(t);this.model.vertex(r.vertexIdx,{x:e,y:n},{ui:!0})},dragArrowhead:function(t,e,n){this.paper.options.snapLinks?this._snapArrowhead(t,e,n):this._connectArrowhead(this.getEventTarget(t),e,n,this.eventData(t))},drag:function(t,e,n){var r=this.eventData(t);this.model.translate(e-r.dx,n-r.dy,{ui:!0}),this.eventData(t,{dx:e,dy:n})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(t,e,n){var r=this.eventData(t),i=this.paper;i.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,e,n),i.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,t)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(t){"remove"===t.whenNotAllowed?this.model.remove({ui:!0}):this.model.set(t.arrowhead,t.initialEnd,{ui:!0})},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,e){var n=t.arrowhead,r=t.initialEnd,i=this.model.prop(n);if(i&&!Xr.endsEqual(r,i)){var o=this.paper;r.id&&this.notify("link:disconnect",e,o.findViewByModel(r.id),t.initialMagnet,n),i.id&&this.notify("link:connect",e,o.findViewByModel(i.id),t.magnetUnderPointer,n)}},_snapArrowhead:function(t,e,n){const{paper:r}=this,{snapLinks:i,connectionStrategy:o}=r.options,s=this.eventData(t);var a=i.radius||50,u=r.findViewsInArea({x:e-a,y:n-a,width:2*a,height:2*a}),c=s.closestView||null,l=s.closestMagnet||null,h=s.magnetProxy||null;s.closestView=s.closestMagnet=s.magnetProxy=null;var f,d=Number.MAX_VALUE,p=new j(e,n);u.forEach((function(t){const e=[];"false"!==t.el.getAttribute("magnet")&&e.push({bbox:t.model.getBBox(),magnet:t.el}),t.$("[magnet]").toArray().forEach((n=>{e.push({bbox:t.getNodeBBox(n),magnet:n})})),e.forEach((e=>{const{magnet:n,bbox:i}=e,o=i.center().squaredDistance(p);o<d&&(l===n||r.options.validateConnection.apply(r,s.validateConnectionArgs(t,t.el===n?null:n)))&&(d=o,s.closestView=t,s.closestMagnet=n)}))}),this);var g=null,v=s.closestView,m=s.closestMagnet;m&&(g=s.magnetProxy=v.findProxyNode(m,"highlighter"));var y=s.arrowhead,b=l!==m;if(c&&b&&c.unhighlight(h,{connecting:!0,snapping:!0}),v){const{prevEnd:t,prevX:r,prevY:i}=s;if(s.prevX=e,s.prevY=n,!b&&("function"!=typeof o||r===e&&i===n))return;if(f=v.getLinkEnd(m,e,n,this.model,y),!b&&Ge(t,f))return;s.prevEnd=f,b&&v.highlight(g,{connecting:!0,snapping:!0})}else f={x:e,y:n};this.model.set(y,f||{x:e,y:n},{ui:!0}),c&&this.notify("link:snap:disconnect",t,c,l,y),v&&this.notify("link:snap:connect",t,v,m,y)},_snapArrowheadEnd:function(t){var e=t.closestView,n=t.closestMagnet;e&&n&&(e.unhighlight(t.magnetProxy,{connecting:!0,snapping:!0}),t.magnetUnderPointer=e.findMagnet(n)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,e,n,r){const{paper:i,model:o}=this;if(r.eventTarget!==t){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const e=r.viewUnderPointer=i.findView(t);if(e){const n=r.magnetUnderPointer=e.findMagnet(t),o=r.magnetProxy=e.findProxyNode(n,"highlighter");n&&this.paper.options.validateConnection.apply(i,r.validateConnectionArgs(e,n))?o&&e.highlight(o,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=t,o.set(r.arrowhead,{x:e,y:n},{ui:!0})},_connectArrowheadEnd:function(t={},e,n){const{model:r}=this,{viewUnderPointer:i,magnetUnderPointer:o,magnetProxy:s,arrowhead:a}=t;if(!o||!s||!i)return;i.unhighlight(s,{connecting:!0});const u=i.getLinkEnd(o,e,n,r,a);r.set(a,u,{ui:!0})},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var e=this.el.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){null!==t.z&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var e,n=[];n[4]=t,n[5]=this;var r=0,i=0;"source"===t?(r=2,e="target"):(i=2,e="source");var o=this.model.get(e);if(o.id){var s=n[r]=this.paper.findViewByModel(o.id),a=s.getMagnetFromLinkEnd(o);a===s.el&&(a=void 0),n[r+1]=a}return function(t,e){return n[i]=t,n[i+1]=t.el===e?void 0:e,n}},_markAvailableMagnets:function(t){function e(t,e){var n=t.paper;return n.options.validateConnection.apply(n,this.validateConnectionArgs(t,e))}var n=this.paper,r=n.model.getCells();t.marked={};for(var i=0,o=r.length;i<o;i++){var s=r[i].findView(n);if(s){var a=Array.prototype.slice.call(s.el.querySelectorAll("[magnet]"));"false"!==s.el.getAttribute("magnet")&&a.push(s.el);var u=a.filter(e.bind(t,s));if(u.length>0){for(var c=0,l=u.length;c<l;c++)s.highlight(u[c],{magnetAvailability:!0});s.highlight(null,{elementAvailability:!0}),t.marked[s.model.id]=u}}}},_unmarkAvailableMagnets:function(t){for(var e,n,r=Object.keys(t.marked),i=0,o=r.length;i<o;i++){e=r[i],n=t.marked[e];var s=this.paper.findViewByModel(e);if(s){for(var a=0,u=n.length;a<u;a++)s.unhighlight(n[a],{magnetAvailability:!0});s.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,e){e||(e={});var n={action:"arrowhead-move",arrowhead:t,whenNotAllowed:e.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:Fe(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(n),!0!==e.ignoreBackwardsCompatibility&&(this._dragData=n),n},onRemove:function(){Ur.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:io});Object.defineProperty(oo.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var e=this.model.source();return new Q(e.x,e.y)}var n=this.sourceMagnet;return t.isNodeConnection(n)?new Q(this.sourceAnchor):t.getNodeBBox(n||t.el)}}),Object.defineProperty(oo.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var e=this.model.target();return new Q(e.x,e.y)}var n=this.targetMagnet;return t.isNodeConnection(n)?new Q(this.targetAnchor):t.getNodeBBox(n||t.el)}});const so={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},ao=yn.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return fe(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(t,e){this.el.insertBefore(t,this.insertPivot(e))},insertNode:function(t){const{el:e}=this;t.parentNode!==e&&e.appendChild(t)},insertPivot:function(t){const{el:e,pivotNodes:n}=this;(t=+t)||(t=0);let r=n[t];if(r)return r;r=n[t]=document.createComment("z-index:"+(t+1));let i=-1/0;for(let e in n)e=+e,e<t&&e>i&&(i=e);if(i!==-1/0){const t=n[i];e.insertBefore(r,t.nextSibling)}else e.insertBefore(r,e.firstChild);return r},removePivots:function(){const{el:t,pivotNodes:e}=this;for(let n in e)t.removeChild(e[n]);this.pivotNodes={}}}),uo=yn.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(t){var e=(t=Ie(this.options,t)).tools;if(!Array.isArray(e))return this;var n=t.relatedView;if(!(n instanceof Ur))return this;for(var r=this.tools=[],i=0,o=e.length;i<o;i++){var s=e[i];s instanceof bn&&(s.configure(n,this),this.vel.append(s.el),r.push(s))}return this.isRendered=!1,n.requestUpdate(n.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(t){t||(t={});var e=this.tools;if(!e)return this;for(var n=this.isRendered,r=0,i=e.length;r<i;r++){var o=e[r];n?t.tool!==o.cid&&o.isVisible()&&o.update():o.render()}return n||(this.mount(),this.blurTool(),this.isRendered=!0),this},focusTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,r=e.length;n<r;n++){var i=e[n];t===i?i.show():i.hide()}return this},blurTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,r=e.length;n<r;n++){var i=e[n];i===t||i.isVisible()||(i.show(),i.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var t=this.tools;if(!t)return this;for(var e=0,n=t.length;e<n;e++)t[e].remove();this.tools=null},mount:function(){const{options:t,el:e}=this,{relatedView:n,layer:r=so.TOOLS,z:i}=t;return n&&(r?n.paper.getLayerView(r).insertSortedNode(e,i):n.el.appendChild(e)),this}});var co=n(96315);const lo={tagName:"circle",attributes:{r:7,fill:"black","fill-opacity":.3,stroke:"black","stroke-width":2,cursor:"move"}},ho=Pn.extend(ce.merge({},lo)),fo=En.extend(ce.merge({},lo)),po=Cn.extend({update(){return this.relatedView.isShortWire()?(this.options.distance=this.options.distanceShort||this.options.distance,this.options.secondary&&this.hide()):this.options.distance=this.options.distanceLong||this.options.distance,Cn.prototype.update.apply(this,arguments)}}),go=po.extend({name:"remove",children:Tn.prototype.children,options:Tn.prototype.options}),vo=po.extend({name:"monitor",children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#001DFF",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"m -2.5,-0.5 a 2,2 0 1 0 4,0 2,2 0 1 0 -4,0 M 1,1 3,3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{action(t){this.notify("link:monitor")}}}),mo={wire:{stroke:"#4B4F6A",x1:0,y1:0,x2:void 0,y2:0},port:{magnet:void 0,r:7,stroke:"black",fill:"white",strokeWidth:2,strokeOpacity:.5},bits:{ref:"port",fill:"black",fontSize:"7pt"},iolabel:{textVerticalAnchor:"middle",fill:"black",fontSize:"8pt"},decor:{stroke:"black",fill:"transparent"}},yo=Wr.define("Gate",{propagation:1,label:"",size:{width:80,height:30},inputSignals:{},outputSignals:{},attrs:{".":{magnet:!1},body:{stroke:"black",strokeWidth:2},text:{fontSize:"8pt",fill:"black"},label:{refX:.5,refDy:3,textAnchor:"middle"}},ports:{groups:{in:{position:"left",attrs:ce.merge({},mo,{wire:{x2:-25},port:{magnet:"passive",refX:-25},bits:{refDx:1,refY:-3,textAnchor:"start"},iolabel:{refX:5,textAnchor:"start"}})},out:{position:"right",attrs:ce.merge({},mo,{wire:{x2:25},port:{magnet:!0,refX:25},bits:{refX:-1,refY:-3,textAnchor:"end"},iolabel:{refX:-5,textAnchor:"end"}})}}},z:1},{operation:()=>({}),initialize(){const t=this.get("ports");t.items&&this._preprocessPorts(t.items),Wr.prototype.initialize.apply(this,arguments),this.prepare(),this.bindAttrToProp("label/text","label"),this._unsupportedPropChanges.length>0&&this.on(this._unsupportedPropChanges.map((t=>"change:"+t)).join(" "),((t,e,n)=>{if(n.init)return;const r=ce.intersection(Object.keys(this.changed),this._unsupportedPropChanges);r.forEach((t=>{this.set(t,this.previous(t),{init:!0})})),console.warn('Beta property change support: "'+r+'" changes on '+this.get("type")+" are (currently) not supported.")}))},prepare(){},bindAttrToProp(t,e){this.attr(t,this.get(e)),this.on("change:"+e,((e,n)=>this.attr(t,n)))},_changeOutputSignals(t){ce.chain(this.graph.getConnectedLinks(this,{outbound:!0})).groupBy((t=>t.get("source").port)).forEach(((e,n)=>e.forEach((e=>e.set("signal",t[n]))))).value()},_setInput(t,e){const n=ce.clone(this.get("inputSignals"));n[e]=t,this.set("inputSignals",n)},_clearInput(t){const e=this.getPort(t).bits;this._setInput(co.Vector3vl.xes(e),t)},_preprocessPorts(t){this._resetPortsSignals(t);for(const e of t){if(e.attrs={},e.attrs.bits={text:this._getBitsText(e.bits)},e.labelled){const t={text:"portlabel"in e?e.portlabel:e.id};!1===e.polarity&&(t["text-decoration"]="overline"),e.decor&&(console.assert("in"==e.group),t.refX=10),e.attrs.iolabel=t}e.decor&&(e.attrs.decor={d:e.decor})}},_setPortsBits(t){const e=ce.cloneDeep(this.get("ports")),n=[];for(const r in t){const i=t[r],o=e.items.find((function(t){return t.id&&t.id===r}));o.bits=i,o.attrs.bits.text=this._getBitsText(i),n.push(o)}this._resetPortsSignals(n),this.set("ports",e),this.graph.getConnectedLinks(this,{outbound:!0}).filter((e=>e.get("source").port in t)).forEach((t=>t._changeSource(t.get("source")))),this.graph.getConnectedLinks(this,{inbound:!0}).filter((e=>e.get("target").port in t)).forEach((t=>t._changeTarget(t.get("target"))))},_getBitsText:t=>t>1?t:"",_resetPortValue:t=>co.Vector3vl.xes(t.bits),_resetPortsSignals(t){const e={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const n of t)console.assert(n.bits>=0),e[n.dir][n.id]=this._resetPortValue(n);this.set("inputSignals",e.in),this.set("outputSignals",e.out)},_removePortsSignals(t){const e={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const n of t)delete e[n.dir][n.id];this.set("inputSignals",e.in),this.set("outputSignals",e.out)},addPort(t){this.addPorts([t])},addPorts(t){this._preprocessPorts(t),Wr.prototype.addPorts.apply(this,arguments)},removePort(t,e){this.removePorts([t])},removePorts(t,e){this._removePortsSignals(t),Wr.prototype.removePorts.apply(this,arguments)},_getStackedPosition:t=>function(e,n){const r=t.side||"left",i=t.step||16,o=t.offset||12,s="left"==r?n.topLeft().x:"right"==r?n.topRight().x:void 0,a="top"==r?n.topLeft().y:"bottom"==r?n.bottomRight().y:void 0;return void 0!==s?ce.map(e,(function(t,e){return e+=t.idxOffset||0,j({x:s,y:e*i+o})})):ce.map(e,(function(t,e){return e+=t.idxOffset||0,j({x:e*i+o,y:a})}))},getLayoutSize(){return this.size()},setLayoutPosition(t){this.set("position",{x:t.x,y:t.y})},portMarkup:[{tagName:"line",className:"wire",selector:"wire"},{tagName:"circle",className:"port",selector:"port"},{tagName:"text",className:"bits",selector:"bits"},{tagName:"text",className:"iolabel",selector:"iolabel"},{tagName:"path",className:"decor",selector:"decor"}],markup:[{tagName:"text",className:"label",selector:"label"}],getGateParams(t){return ce.cloneDeep(ce.pick(this.attributes,this._gateParams.concat(t?this._gateLayoutParams:[])))},_gateParams:["label","type","propagation","source_positions"],_gateLayoutParams:["position"],_unsupportedPropChanges:[],_operationHelpers:[],_presentationParams:[]}),bo=qr.extend({attrs:{signal:{high:{port:{stroke:"#03c03c"}},low:{port:{stroke:"#fc7c68"}},def:{port:{stroke:"#779ecb"}},undef:{port:{stroke:"#999"}}}},presentationAttributes:qr.addPresentationAttributes({inputSignals:"SIGNAL",outputSignals:"SIGNAL2"}),stopprop(t){t.stopPropagation()},confirmUpdate(t){this.hasFlag(t,"SIGNAL")&&this._updatePortSignals("in"),this.hasFlag(t,"SIGNAL2")&&this._updatePortSignals("out"),qr.prototype.confirmUpdate.apply(this,arguments)},_updatePortSignals(t){const e="in"===t?this.model.get("inputSignals"):"out"===t?this.model.get("outputSignals"):ce.merge({},this.model.get("inputSignals"),this.model.get("outputSignals"));for(const t in e){const n=e[t],r=this.attrs.signal[n.isDefined?n.isHigh?"high":n.isLow?"low":"def":"undef"];this._applyPortAttrs(t,r)}},_applyAttrs(t){for(const e in t){const n=this.selectors[e];this.setNodeAttributes(n,t[e])}},_applyPortAttrs(t,e){if(t in this._portElementsCache)for(const n in e){const r=this._portElementsCache[t].portSelectors[n];this.setNodeAttributes(r,e[n])}},_updatePorts(){qr.prototype._updatePorts.apply(this,arguments),this._updatePortSignals()}}),xo=Zr.define("Wire",{attrs:{line:{class:"connection",targetMarker:null},wrapper:{stroke:"red"}},signal:co.Vector3vl.xes(1),bits:1,warning:!1,z:0},{initialize(){Zr.prototype.initialize.apply(this,arguments),this.has("netname")&&this.label(0,{markup:[{tagName:"text",selector:"label"}],attrs:{label:{text:this.get("netname"),fill:"black",fontSize:"8pt"}},position:{distance:.5}})},onAdd(){this._changeSource(this.get("source")),this._was_added=!0},remove(){const t=this.get("target"),e=this.graph.getCell(t.id);e&&"port"in t&&e._clearInput(t.port),Zr.prototype.remove.apply(this,arguments)},_propagateSignal(t,e){const n=this.getTargetElement();n&&(this.get("warning")?n._clearInput(t.port):n._setInput(e,t.port))},_changeSignal(t){this._propagateSignal(this.get("target"),t)},_changeSource(t){const e=this.getSourceElement();e&&"port"in t?(this.set("bits",e.getPort(t.port).bits),this._checkConnection(),this.set("signal",e.get("outputSignals")[t.port])):this.set("signal",co.Vector3vl.xes(this.get("bits")))},_changeTarget(t){if(this._checkConnection(),"port"in t&&this._propagateSignal(t,this.get("signal")),!this.hasChanged("target"))return;const e=this.previous("target"),n=this.graph.getCell(e.id);n&&"port"in e&&n._clearInput(e.port)},_checkConnection(){const t=this.get("target"),e=this.graph.getCell(t.id);this.set("warning",e&&e.getPort(t.port).bits!==this.get("bits")||!1,{silent:!this._was_added})},getWireParams(t){const e={from:{id:this.get("source").id,port:this.get("source").port},to:{id:this.get("target").id,port:this.get("target").port}};return this.has("netname")&&(e.name=this.get("netname")),t&&this.has("vertices")&&this.get("vertices").length>0&&(e.vertices=ce.cloneDeep(this.get("vertices"))),e},getWirePath(){const t=[];for(let e=this.graph.get("subcircuit");null!=e;e=e.graph.get("subcircuit")){if(!e.has("label"))return null;t.push(e.get("label"))}return t.reverse()}}),wo=oo.extend({initFlag:oo.prototype.initFlag.concat(["INIT"]),longWireLength:400,attrs:{signal:{high:{line:{stroke:"#03c03c"}},low:{line:{stroke:"#fc7c68"}},def:{line:{stroke:"#779ecb"}},undef:{line:{stroke:"#999"}}},bits:{bus:{line:{"stroke-width":"4px"}},single:{line:{"stroke-width":"2px"}}},warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}},_wireToolsView:"undefined"!=typeof window?new uo({tools:[new An({focusOpacity:.5}),new ho,new fo,new go({distanceShort:"75%",distanceLong:"50"}),new go({distance:"-50",secondary:!0}),new vo({distanceShort:"25%",distanceLong:"30"}),new vo({distance:"-30",secondary:!0})]}):null,presentationAttributes:oo.addPresentationAttributes({signal:"SIGNAL",bits:"BITS",warning:"WARNING"}),initialize(){oo.prototype.initialize.apply(this,arguments),this.prevModels={source:null,target:null}},confirmUpdate(t){oo.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"SIGNAL")&&this._updateSignal(),this.hasFlag(t,"BITS")&&this._updateBits(),this.hasFlag(t,"WARNING")&&this._updateWarning()},isShortWire(){return this.getConnectionLength()<this.longWireLength},_updateSignal(){const t=this.model.get("signal"),e=this.attrs.signal[t.isDefined?t.isHigh?"high":t.isLow?"low":"def":"undef"];this._applyAttrs(e)},_updateBits(){const t=this.model.get("bits"),e=this.attrs.bits[t>1?"bus":"single"];this._applyAttrs(e)},_updateWarning(){const t=this.model.get("warning"),e=this.attrs.warning[t?"warn":"none"];this._applyAttrs(e)},_applyAttrs(t){for(const e in t){const n=this.selectors[e];this.setNodeAttributes(n,t[e])}},update(){oo.prototype.update.apply(this,arguments),this._updateSignal(),this._updateBits(),this._updateWarning()},onRemove(){oo.prototype.onRemove.apply(this,arguments),this._removeTooltip()},mouseenter(t){oo.prototype.mouseenter.apply(this,arguments),this.addTools(this._wireToolsView),this._addTooltip({x:t.clientX+5,y:t.clientY+5})},mouseleave(t){oo.prototype.mouseleave.apply(this,arguments),this.removeTools(),this._removeTooltip()},_addTooltip(t){1!=this.model.get("bits")&&(this.wire_hover||(this.wire_hover=$('<div class="wire_hover">').css("left",t.x).css("top",t.y).appendTo($(document.body)),this._generateTextForTooltip(),this.listenTo(this.model,"change:signal",this._generateTextForTooltip)))},_removeTooltip(){this.wire_hover&&(this.wire_hover.remove(),this.wire_hover=null,this.stopListening(this.model,"change:signal",this._generateTextForTooltip))},_generateTextForTooltip(){if(!this.wire_hover)return;const t=this.model.get("signal"),e=this.model.graph._display3vl,n=["Hex: "+e.show("hex",t)+"<br>","Dec: "+e.show("dec",t)+"<br>","Oct: "+e.show("oct",t)+"<br>","Bin: "+e.show("bin",t)].join("");this.wire_hover.html(n)},onEndModelChange(t,e,n){"object"==typeof e&&null!=e&&e==this.prevModels[t]&&Object.keys(e.changed).length>0&&!("position"in e.changed)||(oo.prototype.onEndModelChange.apply(this,arguments),this.prevModels[t]=e)}}),_o=yo.define("Box",{attrs:{body:{refWidth:1,refHeight:1},tooltip:{refX:0,refY:-30,height:30}}},{initialize(){yo.prototype.initialize.apply(this,arguments),this.on("change:size",((t,e)=>{e.width>this.tooltipMinWidth?this.attr("tooltip",{refWidth:1,width:null}):this.attr("tooltip",{refWidth:null,width:this.tooltipMinWidth})})),this.trigger("change:size",this,this.prop("size"))},markup:yo.prototype.markup.concat([{tagName:"rect",className:"body",selector:"body"}]),markupZoom:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"a",className:"zoom",textContent:"",style:{cursor:"pointer"}}]}]}],tooltipMinWidth:20,decorClock:"M"+[[0,-6],[6,0],[0,6]].map((t=>t.join(" "))).join(" L")}),Ao=bo.extend({_autoResizeBox:!1,render(){bo.prototype.render.apply(this,arguments),this._autoResizeBox&&!this.model.get("box_resized")&&(this.model.set("box_resized",!0),this.model.prop("size/width",this._calculateBoxWidth()))},_calculateBoxWidth(){const t=Array.from(this.el.querySelectorAll("[port-group=in] > text.iolabel")),e=Array.from(this.el.querySelectorAll("[port-group=out] > text.iolabel")),n=Math.max(...t.map((t=>t.getBBox().width))),r=Math.max(...e.map((t=>t.getBBox().width))),i=t=>t==-1/0?-5:t;return i(n)+i(r)+25}}),ko=_o.define("NumBase",{numbase:"hex",bits:1},{initialize(){_o.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this.graph._display3vl.usableDisplays(this.numbaseType,this.get("bits")).includes(this.get("numbase"))||this.set("numbase","hex")}))},tooltipMinWidth:70,markupTooltip:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"select",className:"numbase"}]}]}],_gateParams:_o.prototype._gateParams.concat(["numbase"])}),So=Ao.extend({presentationAttributes:Ao.addPresentationAttributes({bits:"BITS",numbase:"NUMBASE"}),_autoResizeBox:!0,events:{"click select.numbase":"stopprop","mousedown select.numbase":"stopprop","touchstart select.numbase":"stopprop","change select.numbase":"_changeNumbase"},_changeNumbase(t){this.model.set("numbase",t.target.value||"bin")},_calculateBoxWidth(){const t=document.createElementNS("http://www.w3.org/2000/svg","text");le(t).text(Array(this.model.get("bits")).fill("0").join("")).attr("class","numvalue").appendTo(this.$el);const e=t.getBBox().width+20;return t.remove(),e},confirmUpdate(t){Ao.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"BITS")||this.hasFlag(t,"RENDER"))&&this._makeNumBaseSelector(),this.hasFlag(t,"NUMBASE")&&this._updateNumBaseSelector()},_makeNumBaseSelector(){this.$("select.numbase").empty();const t=this.model.get("numbase"),e=this.model.graph._display3vl;for(const n of e.usableDisplays(this.model.numbaseType,this.model.get("bits")))le("<option>").attr("value",n).prop("selected",n==t).text(n).appendTo(this.$("select.numbase"))},_updateNumBaseSelector(){this.$("select.numbase").val(this.model.get("numbase"))}}),Eo=ko.define("IO",{bits:1,net:"",propagation:0,mode:-1,attrs:{ioname:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontWeight:"bold",fontSize:"10pt"}}},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:this._portDirection,group:this._portDirection,dir:this._portDirection,bits:t}],ko.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{const n={};n[this._portDirection]=e,this._setPortsBits(n),0!=this.get("mode")&&this._checkMode()})),this.bindAttrToProp("text.ioname/text","net")},onAdd(){this._checkMode()},_checkMode(){const t=this.graph&&this.graph.has("subcircuit"),e=this.get("bits"),n=t?0:1==e?1:2;return this.set("mode",n),this.set("box_resized",!1),this.set("markup",0==n?this.markupInSubcircuit:1==n?this.markupSingle:this.markupBus),n},_setPortsBits(t){if(ko.prototype._setPortsBits.apply(this,arguments),0!=this.get("mode"))return;const e=this.graph.get("subcircuit");console.assert(null!=e);const n={};n[this.get("net")]=t[this._portDirection],e._setPortsBits(n)},markupSingle:ko.prototype.markup,markupBus:ko.prototype.markup.concat(ko.prototype.markupTooltip),markupInSubcircuit:ko.prototype.markup.concat([{tagName:"text",className:"ioname",selector:"ioname"}]),_gateParams:ko.prototype._gateParams.concat(["bits","net","order"])}),Po=So.extend({_calculateBoxWidth(){switch(this.model.get("mode")){case 0:const t=this.selectors.ioname;return"none"!==t.getAttribute("display")?t.getBBox().width+10:20;case 1:return 30;case 2:return So.prototype._calculateBoxWidth.call(this)}}}),Co=Eo.define("Input",{attrs:{btnface:{stroke:"black",strokeWidth:2,refX:.2,refY:.2,refHeight:.6,refWidth:.6,cursor:"pointer"},"foreignObject.valinput":{refX:.5,refY:.5,refWidth:-10,refHeight:-10,xAlignment:"middle",yAlignment:"middle"}}},{isInput:!0,_portDirection:"out",_resetPortValue(t){if("out"==t.id&&"out"==t.dir){const t=this.get("bits");return 1==this.get("mode")?co.Vector3vl.zeros(t):co.Vector3vl.xes(t)}return Eo.prototype._resetPortValue.call(this,t)},_checkMode(){Eo.prototype._checkMode.call(this),this._resetPortsSignals([this.get("ports").items[0]])},setInput(t){this._setInput(t),this.trigger("userChange",this)},toggleInput(){this.setInput(this.get("outputSignals").out.not())},_setInput(t){if(t.bits!=this.get("bits"))throw new Error("setInput: wrong number of bits");this.set("outputSignals",{out:t})},markupSingle:Eo.prototype.markupSingle.concat([{tagName:"rect",className:"btnface",selector:"btnface"}]),markupBus:Eo.prototype.markupBus.concat([{tagName:"foreignObject",className:"valinput",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"text"}}]}]}]),numbaseType:"read"}),To=Po.extend({attrs:ce.merge({button:{high:{btnface:{fill:"black"}},low:{btnface:{fill:"white"}}}},Po.prototype.attrs),confirmUpdate(t){Po.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"SIGNAL2")||this.hasFlag(t,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateButton();break;case 2:this._updateNumEntry()}},_updateButton(){const t=this.model.get("outputSignals").out,e=this.attrs.button[t.isHigh?"high":"low"];this._applyAttrs(e)},_updateNumEntry(){const t=this.model.graph._display3vl;this.$("input").val(t.show(this.model.get("numbase"),this.model.get("outputSignals").out)),this.$("input").removeClass("invalid")},render(){Po.prototype.render.apply(this,arguments),this._updateView()},events:ce.merge({"click .btnface":"_onButton","mousedown .btnface":"stopprop","touchstart .btnface":"stopprop","click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_onNumEntry"},So.prototype.events),_onButton(){this.model.toggleInput()},_onNumEntry(t){const e=this.model.get("numbase"),n=this.model.get("bits"),r=this.model.graph._display3vl;if(r.validate(e,t.target.value,n)){const i=r.read(e,t.target.value,n);this.model.setInput(i)}else this.$("input").addClass("invalid")}}),No=Co,Lo=To,Mo=Co,Oo=To,Io=Eo.define("Output",{attrs:{led:{refX:.5,refY:.5,refR:.35},value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{isOutput:!0,_portDirection:"in",getOutput(){return this.get("inputSignals").in},markupSingle:Eo.prototype.markupSingle.concat([{tagName:"circle",className:"led",selector:"led"}]),markupBus:Eo.prototype.markupBus.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),numbaseType:"show"}),Ro=Po.extend({attrs:ce.merge({lamp:{high:{led:{fill:"#03c03c"}},low:{led:{fill:"#fc7c68"}},undef:{led:{fill:"#bfc5c6"}}}},Po.prototype.attrs),confirmUpdate(t){Po.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"SIGNAL")||this.hasFlag(t,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateLamp();break;case 2:this._updateNumDisplay()}},_updateLamp(){const t=this.model.get("inputSignals").in,e=this.attrs.lamp[t.isHigh?"high":t.isLow?"low":"undef"];this._applyAttrs(e)},_updateNumDisplay(){const t=this.model.graph._display3vl;this.$("text.value tspan").text(t.show(this.model.get("numbase"),this.model.get("inputSignals").in))},render(){Po.prototype.render.apply(this,arguments),this._updateView()}}),Bo=Io,Do=Ro,jo=Io,Vo=Ro,Fo=ko.define("Constant",{constant:"0",propagation:0,attrs:{value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{initialize(){const t=this.get("constant").length;this.set("bits",t),this.get("ports").items=[{id:"out",group:"out",dir:"out",bits:t}],ko.prototype.initialize.apply(this,arguments),this.on("change:constant",((t,e)=>{const n=e.length;this._setPortsBits({out:n}),this.set("bits",n),this.set("constantCache",co.Vector3vl.fromBin(e,n))}))},prepare(){const t=this.get("constant"),e=t.length;this.set("constantCache",co.Vector3vl.fromBin(t,e))},operation(){return{out:this.get("constantCache")}},markup:ko.prototype.markup.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),_gateParams:ko.prototype._gateParams.concat(["constant"]),numbaseType:"show"}),zo=So.extend({presentationAttributes:So.addPresentationAttributes({constantCache:"CONSTANT"}),confirmUpdate(t){So.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"CONSTANT")||this.hasFlag(t,"NUMBASE"))&&this._showText()},_showText(){const t=this.model.graph._display3vl;this.$("text.value tspan").text(t.show(this.model.get("numbase"),this.model.get("constantCache")))},update(){So.prototype.update.apply(this,arguments),this._showText()}}),Uo=_o.define("Clock",{propagation:100,ports:{items:[{id:"out",group:"out",dir:"out",bits:1}]},size:{width:30,height:30}},{_resetPortValue:t=>"out"==t.id&&"out"==t.dir?co.Vector3vl.zero:_o.prototype._resetPortValue(t),operation(){return{out:this.get("outputSignals").out.not(),_clock_hack:!0}},tooltipMinWidth:55,markup:_o.prototype.markup.concat([{tagName:"path",className:"decor",attributes:{d:"M7.5 7.5 L7.5 22.5 L15 22.5 L15 7.5 L22.5 7.5 L22.5 22.5",stroke:"black"}},{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"number",min:1,step:1}}]}]}]),_unsupportedPropChanges:_o.prototype._unsupportedPropChanges.concat(["bits"])}),Go=Ao.extend({presentationAttributes:Ao.addPresentationAttributes({propagation:"SIGNAL"}),events:{"click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_changePropagation","input input":"_changePropagation"},render(t){Ao.prototype.render.apply(this,arguments),this.updatePropagation()},confirmUpdate(t){Ao.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"SIGNAL")&&this.updatePropagation()},_changePropagation(t){const e=t.target.value,n=String(e)==String(Number(e));n&&this.model.set("propagation",Number(e)||1),this.$("input").toggleClass("invalid",!n)},updatePropagation(){this.$("input").val(this.model.get("propagation"))}}),qo="M19 0v32h16c9 0 16-7 16-16S44 0 35 0H20z",Ho="M14.3 0l1.6 2s4.5 5.6 4.5 14s-4.5 14-4.5 14l-1.6 2H28c3.8 0 16.6-.5 25-16h0A28 28 0 0028 0H16.8z",Wo="M18-2v36l2-1 32-17h0L20-1z",$o={tagName:"path",selector:"xor_arc",attributes:{fill:"#000",d:"M6.8-1.2 10 2.7S14.2 8 14.2 16S10 29.3 10 29.3l-3.2 3.9H10l1.7-2.4s4.8-6 4.8-14.8c0-8.9-4.8-14.8-4.8-14.8l-1.7-2.4z"}},Xo={tagName:"circle",className:"body",selector:"neg_bubble",attributes:{stroke:"#000","stroke-width":"2px",cx:56,cy:16,r:4}};function Yo(t=[]){return{tagName:"g",selector:"body",children:[{tagName:"path",className:"body gate",selector:"gate"}].concat(t)}}const Jo=yo.define("GateSVG",{bits:1,size:{width:60,height:32},ports:{groups:{in:{position:{name:"left",args:{dx:30}},attrs:{wire:{x2:-50},port:{refX:-50}},z:-1},out:{position:{name:"right",args:{dx:-30}},attrs:{wire:{x2:50},port:{refX:50}},z:-1}}}},{markup:yo.prototype.markup.concat([Yo()]),_gateParams:yo.prototype._gateParams.concat(["bits"])}),Zo=Jo.define("Gate11",{},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t},{id:"out",group:"out",dir:"out",bits:t}],Jo.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this._setPortsBits({in:e,out:e})}))}}),Ko=Jo.define("GateX1",{inputs:2,attrs:{gate:{"vector-effect":"non-scaling-stroke"},xor_arc:{"vector-effect":"non-scaling-stroke"},neg_bubble:{"vector-effect":"non-scaling-stroke"}}},{initialize(){const t=this.get("bits"),e=this.get("inputs"),n=[];for(let r=1;r<=e;r++)n.push({id:"in"+r,group:"in",dir:"in",bits:t});n.push({id:"out",group:"out",dir:"out",bits:t}),this.get("ports").items=n;const r=e/2;this.set("size",{width:60*r,height:32*r}),this.attr("body/transform","translate(-4, 0) scale("+r+")"),this.prop("ports/groups/in/position/args/dx",30*r),this.prop("ports/groups/in/attrs/wire/x2",-30*r-20),this.prop("ports/groups/in/attrs/port/refX",-30*r-20),this.prop("ports/groups/out/position/args/dx",-30*r),this.prop("ports/groups/out/attrs/wire/x2",30*r+20),this.prop("ports/groups/out/attrs/port/refX",30*r+20),Jo.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{const n=this.get("inputs"),r={out:e};for(let t=1;t<=n;t++)r["in"+t]=e;this._setPortsBits(r)}))},operation(t){let e=t.in1;for(let n=2;n<=this.get("inputs");n++)e=this.binoperation(e,t["in"+n]);return{out:this.finoperation(e)}},finoperation:t=>t,_gateParams:Jo.prototype._gateParams.concat(["inputs"]),_unsupportedPropChanges:Jo.prototype._unsupportedPropChanges.concat(["inputs"]),_operationHelpers:Jo.prototype._operationHelpers.concat(["binoperation","finoperation"])}),Qo=Jo.define("GateReduce",{},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t},{id:"out",group:"out",dir:"out",bits:1}],Jo.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this._setPortsBits({in:e})}))}}),ts=Zo.define("Repeater",{attrs:{gate:{d:Wo}}},{operation:t=>({out:t.in})}),es=bo,ns=Zo.define("Not",{attrs:{gate:{d:Wo}}},{operation:t=>({out:t.in.not()}),markup:yo.prototype.markup.concat([Yo([Xo])])}),rs=bo,is=Ko.define("Or",{attrs:{gate:{d:Ho}}},{binoperation:(t,e)=>t.or(e)}),os=bo,ss=Ko.define("And",{attrs:{gate:{d:qo}}},{binoperation:(t,e)=>t.and(e)}),as=bo,us=Ko.define("Nor",{attrs:{gate:{d:Ho}}},{binoperation:(t,e)=>t.or(e),finoperation:t=>t.not(),markup:yo.prototype.markup.concat([Yo([Xo])])}),cs=bo,ls=Ko.define("Nand",{attrs:{gate:{d:qo}}},{binoperation:(t,e)=>t.and(e),finoperation:t=>t.not(),markup:yo.prototype.markup.concat([Yo([Xo])])}),hs=bo,fs=Ko.define("Xor",{attrs:{gate:{d:Ho}}},{binoperation:(t,e)=>t.xor(e),markup:yo.prototype.markup.concat([Yo([$o])])}),ds=bo,ps=Ko.define("Xnor",{attrs:{gate:{d:Ho}}},{binoperation:(t,e)=>t.xor(e),finoperation:t=>t.not(),markup:yo.prototype.markup.concat([Yo([$o,Xo])])}),gs=bo,vs=Qo.define("OrReduce",{attrs:{gate:{d:Ho}}},{operation:t=>({out:t.in.reduceOr()})}),ms=bo,ys=Qo.define("NorReduce",{attrs:{gate:{d:Ho}}},{operation:t=>({out:t.in.reduceNor()}),markup:Qo.prototype.markup.concat([Xo])}),bs=bo,xs=Qo.define("AndReduce",{attrs:{gate:{d:qo}}},{operation:t=>({out:t.in.reduceAnd()})}),ws=bo,_s=Qo.define("NandReduce",{attrs:{gate:{d:qo}}},{operation:t=>({out:t.in.reduceNand()}),markup:yo.prototype.markup.concat([Yo([Xo])])}),As=bo,ks=Qo.define("XorReduce",{attrs:{gate:{d:Ho}}},{operation:t=>({out:t.in.reduceXor()}),markup:yo.prototype.markup.concat([Yo([$o])])}),Ss=bo,Es=Qo.define("XnorReduce",{attrs:{gate:{d:Ho}}},{operation:t=>({out:t.in.reduceXnor()}),markup:yo.prototype.markup.concat([Yo([$o,Xo])])}),Ps=bo;function Cs(t){return t<=Number.MAX_SAFE_INTEGER&&t>=-Number.MAX_SAFE_INTEGER}const Ts=yo.define("Arith",{size:{width:40,height:40},attrs:{body:{refR:.5,refCx:.5,refCy:.5},oper:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontSize:"12pt"}},ports:{groups:{in:{position:{name:"left",args:{dx:10}},attrs:{wire:{x2:-35},port:{refX:-35}},z:-1},out:{position:{name:"right",args:{dx:-10}},attrs:{wire:{x2:35},port:{refX:35}},z:-1}}}},{markup:yo.prototype.markup.concat([{tagName:"circle",className:"body",selector:"body"},{tagName:"text",className:"oper",selector:"oper"}]),_gateParams:yo.prototype._gateParams.concat(["bits","signed"]),_unsupportedPropChanges:yo.prototype._unsupportedPropChanges.concat(["signed"])}),Ns=Ts.define("Arith11",{bits:{in:1,out:1},signed:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:t.out}],Ts.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this._setPortsBits(e)}))},operation(t){const e=this.get("bits");return t.in.isFullyDefined?{out:co.Vector3vl.fromNumber(this.arithop(t.in.toBigInt(this.get("signed"))),e.out)}:{out:co.Vector3vl.xes(e.out)}},_operationHelpers:Ts.prototype._operationHelpers.concat(["arithop"])}),Ls=Ts.define("Arith21",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1}},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:t.in1},{id:"in2",group:"in",dir:"in",bits:t.in2},{id:"out",group:"out",dir:"out",bits:t.out}],Ts.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this._setPortsBits(e)}))},operation(t){const e=this.get("bits"),n=this.get("signed");return t.in1.isFullyDefined&&t.in2.isFullyDefined?{out:co.Vector3vl.fromNumber(this.arithop(t.in1.toBigInt(n.in1&&n.in2),t.in2.toBigInt(n.in1&&n.in2)),e.out)}:{out:co.Vector3vl.xes(e.out)}},_operationHelpers:Ts.prototype._operationHelpers.concat(["arithop"])});function Ms(t,e,n,r,i,o,s){const a=t.get(t.bits-1),u=co.Vector3vl.make(Math.max(0,r-n),s?0:i?a:-1),c=t.concat(u);return(e<0?co.Vector3vl.make(-e,s?0:-1).concat(c):c.slice(e).concat(co.Vector3vl.make(e,s?0:o?c.get(c.bits-1):-1))).slice(0,r)}const Os=Ts.define("Shift",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1,out:!1},fillx:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:t.in1},{id:"in2",group:"in",dir:"in",bits:t.in2},{id:"out",group:"out",dir:"out",bits:t.out}],Ts.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this._setPortsBits(e)}))},operation(t){const e=this.get("bits"),n=this.get("signed"),r=this.get("fillx");if(!t.in2.isFullyDefined)return{out:co.Vector3vl.xes(e.out)};const i=t.in2.toNumber(n.in2)*this.shiftdir;return{out:Ms(t.in1,i,e.in1,e.out,n.in1,n.out,r)}},_gateParams:Ts.prototype._gateParams.concat(["fillx"]),_unsupportedPropChanges:Ts.prototype._unsupportedPropChanges.concat(["fillx"]),_operationHelpers:Ts.prototype._operationHelpers.concat(["shiftdir"])}),Is=Ts.define("BaseCompare",{bits:{in1:1,in2:1},signed:{in1:!1,in2:!1}},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:t.in1},{id:"in2",group:"in",dir:"in",bits:t.in2},{id:"out",group:"out",dir:"out",bits:1}],Ts.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this._setPortsBits(e)}))}}),Rs=Is.define("Compare",{},{operation(t){this.get("bits");const e=this.get("signed");return t.in1.isFullyDefined&&t.in2.isFullyDefined?{out:co.Vector3vl.fromBool(this.arithcomp(t.in1.toBigInt(e.in1&&e.in2),t.in2.toBigInt(e.in1&&e.in2)))}:{out:co.Vector3vl.xes(1)}},_operationHelpers:Is.prototype._operationHelpers.concat(["arithcomp"])}),Bs=Is.define("EqCompare",{},{operation(t){const e=this.get("bits"),n=this.get("signed"),r=e.in1>=e.in2?t.in1:t.in1.concat(co.Vector3vl.make(e.in2-e.in1,n.in1&&n.in2?t.in1.msb:-1)),i=e.in2>=e.in1?t.in2:t.in2.concat(co.Vector3vl.make(e.in1-e.in2,n.in1&&n.in2?t.in2.msb:-1));return{out:this.bincomp(r,i)}},_operationHelpers:Is.prototype._operationHelpers.concat(["bincomp"])}),Ds=Ns.define("Negation",{attrs:{oper:{text:"-"}}},{arithop:t=>-t}),js=bo,Vs=Ns.define("UnaryPlus",{attrs:{oper:{text:"+"}}},{arithop:t=>t}),Fs=bo,zs=Ls.define("Addition",{attrs:{oper:{text:"+"}}},{arithop:(t,e)=>t+e}),Us=bo,Gs=Ls.define("Subtraction",{attrs:{oper:{text:"-"}}},{arithop:(t,e)=>t-e}),qs=bo,Hs=Ls.define("Multiplication",{attrs:{oper:{text:""}}},{arithop:(t,e)=>t*e}),Ws=bo,$s=Ls.define("Division",{attrs:{oper:{text:""}}},{arithop:(t,e)=>0n==e?t:t/e}),Xs=bo,Ys=Ls.define("Modulo",{attrs:{oper:{text:"%"}}},{arithop:(t,e)=>0n==e?t:t%e}),Js=bo,Zs=Ls.define("Power",{attrs:{oper:{text:"^"}}},{arithop:(t,e)=>e>=0n?t**e:1n==t?1n:-1n==t?e%2n?-1n:1n:0n}),Ks=bo,Qs=Os.define("ShiftLeft",{attrs:{oper:{text:""}}},{shiftdir:-1}),ta=bo,ea=Os.define("ShiftRight",{attrs:{oper:{text:""}}},{shiftdir:1}),na=bo,ra=Rs.define("Lt",{attrs:{oper:{text:"<"}}},{arithcomp:(t,e)=>t<e}),ia=bo,oa=Rs.define("Le",{attrs:{oper:{text:""}}},{arithcomp:(t,e)=>t<=e}),sa=bo,aa=Rs.define("Gt",{attrs:{oper:{text:">"}}},{arithcomp:(t,e)=>t>e}),ua=bo,ca=Rs.define("Ge",{attrs:{oper:{text:""}}},{arithcomp:(t,e)=>t>=e}),la=bo,ha=Bs.define("Eq",{attrs:{oper:{text:"="}}},{bincomp:(t,e)=>t.xnor(e).reduceAnd()}),fa=bo,da=Bs.define("Ne",{attrs:{oper:{text:""}}},{bincomp:(t,e)=>t.xor(e).reduceOr()}),pa=bo,ga=Ts.define("OpConst",{leftOp:!1,constant:0},{initialize(){Ts.prototype.initialize.apply(this,arguments);let t=this.get("constant");("string"==typeof t||t instanceof String)&&(t=BigInt(t),Cs(t)&&(t=Number(t)),this.set("constant",t));const e=()=>{const t=30+10*String(this.get("constant")).length;this.prop("size",{width:t,height:t}),this.attr("oper/text",this.get("leftOp")?this.get("constant")+this.operSymbol:this.operSymbol+this.get("constant"))};e(),this.on("change:bits",((t,e)=>{this._setPortsBits(e)})),this.on("change:constant",(()=>e())),this.on("change:leftOp",(()=>e()))},getGateParams(){const t=Ts.prototype.getGateParams.apply(this,arguments);return"bigint"==typeof t.constant&&(Cs(t.constant)?t.constant=Number(t.constant):t.constant=String(t.constant)),t},_gateParams:Ts.prototype._gateParams.concat(["leftOp","constant"])}),va=ga.define("ArithConst",{bits:{in:1,out:1},signed:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:t.out}],ga.prototype.initialize.apply(this,arguments)},operation(t){const e=this.get("bits"),n=this.get("signed"),r=this.get("constant");return t.in.isFullyDefined?this.get("leftOp")?{out:co.Vector3vl.fromNumber(this.arithop(BigInt(r),t.in.toBigInt(n.in)),e.out)}:{out:co.Vector3vl.fromNumber(this.arithop(t.in.toBigInt(n.in),BigInt(r)),e.out)}:{out:co.Vector3vl.xes(e.out)}},_operationHelpers:ga.prototype._operationHelpers.concat(["arithop"])}),ma=ga.define("ShiftConst",{bits:{in:1,out:1},signed:{in:!1,out:!1},fillx:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:t.out}],ga.prototype.initialize.apply(this,arguments)},operation(t){const e=this.get("bits"),n=this.get("signed"),r=this.get("fillx"),i=this.get("constant");if(this.get("leftOp")){if(!t.in.isFullyDefined)return{out:co.Vector3vl.xes(e.out)};const o=t.in.toNumber(n.in),s=co.Vector3vl.fromNumber(i);return{out:Ms(s,o*this.shiftdir,s.bits,e.out,i<0,n.out,r)}}return console.assert(Cs(i)),{out:Ms(t.in,Number(i)*this.shiftdir,e.in,e.out,n.in,n.out,r)}},_gateParams:ga.prototype._gateParams.concat(["fillx"]),_operationHelpers:ga.prototype._operationHelpers.concat(["shiftdir"])}),ya=ga.define("BaseCompareConst",{bits:{in:1},signed:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:1}],ga.prototype.initialize.apply(this,arguments)}}),ba=ya.define("CompareConst",{},{operation(t){this.get("bits");const e=this.get("signed"),n=this.get("constant");return t.in.isFullyDefined?this.get("leftOp")?{out:co.Vector3vl.fromBool(this.arithcomp(BigInt(n),t.in.toBigInt(e.in)))}:{out:co.Vector3vl.fromBool(this.arithcomp(t.in.toBigInt(e.in),BigInt(n)))}:{out:co.Vector3vl.x}},_operationHelpers:ya.prototype._operationHelpers.concat(["arithcomp"])}),xa=ya.define("EqCompareConst",{},{operation(t){const e=this.get("bits"),n=(this.get("signed"),this.get("constant"));return this.get("leftOp")?{out:this.bincomp(co.Vector3vl.fromNumber(n,e.in),t.in)}:{out:this.bincomp(t.in,co.Vector3vl.fromNumber(n,e.in))}},_operationHelpers:ya.prototype._operationHelpers.concat(["bincomp"])}),wa=va.define("AdditionConst",{},{operSymbol:"+",arithop:(t,e)=>t+e}),_a=bo,Aa=va.define("SubtractionConst",{},{operSymbol:"-",arithop:(t,e)=>t-e}),ka=bo,Sa=va.define("MultiplicationConst",{},{operSymbol:"",arithop:(t,e)=>t*e}),Ea=bo,Pa=va.define("DivisionConst",{},{operSymbol:"",arithop:(t,e)=>0n==e?t:t/e}),Ca=bo,Ta=va.define("ModuloConst",{},{operSymbol:"%",arithop:(t,e)=>0n==e?t:t%e}),Na=bo,La=va.define("PowerConst",{},{operSymbol:"^",arithop:(t,e)=>e>=0n?t**e:1n==t?1n:-1n==t?e%2n?-1n:1n:0n}),Ma=bo,Oa=ma.define("ShiftLeftConst",{},{operSymbol:"",shiftdir:-1}),Ia=bo,Ra=ma.define("ShiftRightConst",{},{operSymbol:"",shiftdir:1}),Ba=bo,Da=ba.define("LtConst",{},{operSymbol:"<",arithcomp:(t,e)=>t<e}),ja=bo,Va=ba.define("LeConst",{},{operSymbol:"",arithcomp:(t,e)=>t<=e}),Fa=bo,za=ba.define("GtConst",{},{operSymbol:">",arithcomp:(t,e)=>t>e}),Ua=bo,Ga=ba.define("GeConst",{},{operSymbol:"",arithcomp:(t,e)=>t>=e}),qa=bo,Ha=xa.define("EqConst",{},{operSymbol:"=",bincomp:(t,e)=>t.xnor(e).reduceAnd()}),Wa=bo,$a=xa.define("NeConst",{},{operSymbol:"",bincomp:(t,e)=>t.xor(e).reduceOr()}),Xa=bo,Ya=_o.define("BitExtend",{extend:{input:1,output:1},propagation:0,attrs:{value:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){const t=this.get("extend");console.assert(t.input<=t.output),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.input},{id:"out",group:"out",dir:"out",bits:t.output}],_o.prototype.initialize.apply(this,arguments),this.on("change:extend",((t,e)=>{this._setPortsBits({in:e.input,out:e.output})}))},operation(t){const e=this.get("extend");return{out:t.in.concat(co.Vector3vl.make(e.output-e.input,this._extBit(t.in)))}},markup:_o.prototype.markup.concat([{tagName:"text",className:"value",selector:"value"}]),_gateParams:_o.prototype._gateParams.concat(["extend"]),_operationHelpers:_o.prototype._operationHelpers.concat(["_extBit"])}),Ja=Ao.extend({_autoResizeBox:!0,_calculateBoxWidth(){return this.el.querySelector("text.value").getBBox().width+10}}),Za=Ya.define("ZeroExtend",{attrs:{value:{text:"zero-extend"}}},{_extBit:t=>-1}),Ka=Ja,Qa=Ya.define("SignExtend",{attrs:{value:{text:"sign-extend"}}},{_extBit:t=>t.get(t.bits-1)}),tu=Ja,eu=_o.define("BusSlice",{slice:{first:0,count:1,total:2},propagation:0,size:{width:40,height:24}},{initialize(){const t=this.get("slice"),e=1==t.count?t.first:t.first+"-"+(t.first+t.count-1);this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.total},{id:"out",group:"out",dir:"out",bits:t.count,portlabel:e,labelled:!0}],_o.prototype.initialize.apply(this,arguments),this.on("change:slice",((t,e)=>{this._setPortsBits({in:e.total,out:e.count})}))},operation(t){const e=this.get("slice");return{out:t.in.slice(e.first,e.first+e.count)}},_gateParams:_o.prototype._gateParams.concat(["slice"])}),nu=Ao.extend({_autoResizeBox:!0}),ru=_o.define("BusRegroup",{groups:[1],propagation:0,size:{width:40,height:void 0}},{initialize(){var t=0;const e=[],n=this.get("groups");this.get("size").height=16*n.length+8;for(const[r,i]of n.entries()){const n=t+(i>1?"-"+(t+i-1):"");t+=i,e.push({id:this.group_dir+r,group:this.group_dir,dir:this.group_dir,bits:i,portlabel:n,labelled:!0})}this.set("bits",t);const r="out"==this.group_dir?"in":"out";e.push({id:r,group:r,dir:r,bits:t}),this.get("ports").items=e,_o.prototype.initialize.apply(this,arguments)},_gateParams:_o.prototype._gateParams.concat(["groups"]),_unsupportedPropChanges:_o.prototype._unsupportedPropChanges.concat(["groups"])}),iu=Ao.extend({_autoResizeBox:!0}),ou=ru.define("BusGroup",{},{group_dir:"in",operation(t){const e=[];for(const n of this.get("groups").keys())e.push(t["in"+n]);return{out:co.Vector3vl.concat(...e)}}}),su=iu,au=ru.define("BusUngroup",{},{group_dir:"out",operation(t){const e={};let n=0;for(const[r,i]of this.get("groups").entries())e["out"+r]=t.in.slice(n,n+i),n+=i;return e}}),uu=iu,cu={cells:function(t){return function(){var e=Array.from(arguments),n=e.length,r=n>0&&e[0]||[],i=n>1&&e[n-1]||{};return Array.isArray(r)||(i instanceof or?r=e:r instanceof or&&(e.length>1&&e.pop(),r=e)),i instanceof or&&(i={}),t.call(this,r,i)}}},lu=vn.Collection.extend({initialize:function(t,e){e.cellNamespace?this.cellNamespace=e.cellNamespace:this.cellNamespace="undefined"!=typeof joint&&Ke(joint,"shapes")?joint.shapes:null,this.graph=e.graph},model:function(t,e){var n=e.collection,r=n.cellNamespace,i=new("link"===t.type?Xr:ve(r,t.type,".")||jr)(t,e);return e.dry||(i.graph=n.graph),i},comparator:function(t){return t.get("z")||0}}),hu=vn.Model.extend({initialize:function(t,e){var n=new lu([],{model:(e=e||{}).cellModel,cellNamespace:e.cellNamespace,graph:this});vn.Model.prototype.set.call(this,"cells",n),n.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},n.on("add",this._restructureOnAdd,this),n.on("remove",this._restructureOnRemove,this),n.on("reset",this._restructureOnReset,this),n.on("change:source",this._restructureOnChangeSource,this),n.on("change:target",this._restructureOnChangeTarget,this),n.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var{source:e,target:n}=t.attributes;e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var{source:e,target:n}=t.attributes;e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],n.id&&this._in[n.id]&&this._in[n.id][t.id]&&delete this._in[n.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var n=t.attributes.source;n.id&&((this._out[n.id]||(this._out[n.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var n=t.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=vn.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,n){var r;return"object"==typeof t?(r=t,n=e):(r={})[t]=e,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,n),r=tn(r,"cells")),vn.Model.prototype.set.call(this,r,n)},clear:function(t){t=Ie({},t,{clear:!0});var e=this.get("cells");if(0===e.length)return this;this.startBatch("clear",t);var n=e.sortBy((function(t){return t.isLink()?1:2}));do{n.shift().remove(t)}while(n.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t,e){var n;if(t instanceof vn.Model?(n=t.attributes,t.graph||e&&e.dry||(t.graph=this)):n=t,!cn(n.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,e){return Array.isArray(t)?this.addCells(t,e):(t instanceof vn.Model?t.has("z")||t.set("z",this.maxZIndex()+1):void 0===t.z&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,e),e||{}),this)},addCells:function(t,e){return 0===t.length||(t=Xe(t),e.maxPosition=e.position=t.length-1,this.startBatch("add",e),t.forEach((function(t){this.addCell(t,e),e.position--}),this),this.stopBatch("add",e)),this},resetCells:function(t,e){var n=We(t).map((function(t){return this._prepareCell(t,e)}),this);return this.get("cells").reset(n,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),De(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,n){(n=n||{}).clear||(n.disconnectLinks?this.disconnectLinks(t,n):this.removeLinks(t,n)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter((t=>t.isElement()))},getLinks:function(){return this.get("cells").filter((t=>t.isLink()))},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){var n=(e=e||{}).indirect,r=e.inbound,i=e.outbound;void 0===r&&void 0===i&&(r=i=!0);var o=[],s={};function a(t,e){if(nn(t.getOutboundEdges(e.id),function(e,c){if(!s[c]){var l=t.getCell(c);o.push(l),s[c]=!0,n&&(r&&u(t,l),i&&a(t,l))}}.bind(t)),n&&e.isLink()){var c=e.getTargetCell();c&&c.isLink()&&(s[c.id]||(o.push(c),a(t,c)))}}function u(t,e){if(nn(t.getInboundEdges(e.id),function(e,c){if(!s[c]){var l=t.getCell(c);o.push(l),s[c]=!0,n&&(r&&u(t,l),i&&a(t,l))}}.bind(t)),n&&e.isLink()){var c=e.getSourceCell();c&&c.isLink()&&(s[c.id]||(o.push(c),u(t,c)))}}if(i&&a(this,t),r&&u(this,t),e.deep){var c=t.getEmbeddedCells({deep:!0}),l={};c.forEach((function(t){t.isElement()&&(l[t.id]=!0)})),c.forEach((function(t){t.isLink()||(i&&nn(this.getOutboundEdges(t.id),function(t,n){if(!s[n]){var r=this.getCell(n),{source:i,target:a}=r.attributes,u=i.id,c=a.id;if(!e.includeEnclosed&&u&&l[u]&&c&&l[c])return;o.push(this.getCell(n)),s[n]=!0}}.bind(this)),r&&nn(this.getInboundEdges(t.id),function(t,n){if(!s[n]){var r=this.getCell(n),{source:i,target:a}=r.attributes,u=i.id,c=a.id;if(!e.includeEnclosed&&u&&l[u]&&c&&l[c])return;o.push(this.getCell(n)),s[n]=!0}}.bind(this)))}),this)}return o},getNeighbors:function(t,e){e||(e={});var n=e.inbound,r=e.outbound;void 0===n&&void 0===r&&(n=r=!0);var i=this.getConnectedLinks(t,e).reduce(function(i,o){var{source:s,target:a}=o.attributes,u=o.hasLoop(e);if(n&&Ke(s,"id")&&!i[s.id]){var c=this.getCell(s.id);c.isElement()&&(!u&&(!c||c===t||e.deep&&c.isEmbeddedIn(t))||(i[s.id]=c))}if(r&&Ke(a,"id")&&!i[a.id]){var l=this.getCell(a.id);l.isElement()&&(!u&&(!l||l===t||e.deep&&l.isEmbeddedIn(t))||(i[a.id]=l))}return i}.bind(this),{});if(t.isLink()){if(n){var o=t.getSourceCell();o&&o.isElement()&&!i[o.id]&&(i[o.id]=o)}if(r){var s=t.getTargetCell();s&&s.isElement()&&!i[s.id]&&(i[s.id]=s)}}return We(i)},getCommonAncestor:function(){var t=Array.from(arguments).map((function(t){for(var e=[],n=t.get("parent");n;)e.push(n),n=this.getCell(n).get("parent");return e}),this);t=t.sort((function(t,e){return t.length-e.length}));var e=We(t.shift()).find((function(e){return t.every((function(t){return t.includes(e)}))}));return this.getCell(e)},getSuccessors:function(t,e){e=e||{};var n=[];return this.search(t,(function(e){e!==t&&n.push(e)}),Ie({},e,{outbound:!0})),n},cloneCells:Ln,cloneSubgraph:function(t,e){var n=this.getSubgraph(t,e);return this.cloneCells(n)},getSubgraph:function(t,e){e=e||{};var n=[],r={},i=[],o=[];return We(t).forEach((function(t){r[t.id]||(n.push(t),r[t.id]=t,t.isLink()?o.push(t):i.push(t)),e.deep&&t.getEmbeddedCells({deep:!0}).forEach((function(t){r[t.id]||(n.push(t),r[t.id]=t,t.isLink()?o.push(t):i.push(t))}))})),o.forEach((function(t){var{source:e,target:o}=t.attributes;if(e.id&&!r[e.id]){var s=this.getCell(e.id);n.push(s),r[s.id]=s,i.push(s)}if(o.id&&!r[o.id]){var a=this.getCell(o.id);n.push(this.getCell(o.id)),r[a.id]=a,i.push(a)}}),this),i.forEach((function(t){this.getConnectedLinks(t,e).forEach((function(t){var{source:e,target:i}=t.attributes;!r[t.id]&&e.id&&r[e.id]&&i.id&&r[i.id]&&(n.push(t),r[t.id]=t)}))}),this),n},getPredecessors:function(t,e){e=e||{};var n=[];return this.search(t,(function(e){e!==t&&n.push(e)}),Ie({},e,{inbound:!0})),n},search:function(t,e,n){(n=n||{}).breadthFirst?this.bfs(t,e,n):this.dfs(t,e,n)},bfs:function(t,e,n={}){const r={},i={},o=[];for(o.push(t),i[t.id]=0;o.length>0;){var s=o.shift();if(r[s.id])continue;if(r[s.id]=!0,!1===e.call(this,s,i[s.id]))continue;const t=this.getNeighbors(s,n);for(let e=0,n=t.length;e<n;e++){const n=t[e];i[n.id]=i[s.id]+1,o.push(n)}}},dfs:function(t,e,n={}){const r={},i={},o=[];for(o.push(t),i[t.id]=0;o.length>0;){const t=o.pop();if(r[t.id])continue;if(r[t.id]=!0,!1===e.call(this,t,i[t.id]))continue;const s=this.getNeighbors(t,n),a=o.length;for(let e=0,n=s.length;e<n;e++){const n=s[e];i[n.id]=i[t.id]+1,o.splice(a,0,n)}}},getSources:function(){var t=[];return nn(this._nodes,function(e,n){this._in[n]&&!Ue(this._in[n])||t.push(this.getCell(n))}.bind(this)),t},getSinks:function(){var t=[];return nn(this._nodes,function(e,n){this._out[n]&&!Ue(this._out[n])||t.push(this.getCell(n))}.bind(this)),t},isSource:function(t){return!this._in[t.id]||Ue(this._in[t.id])},isSink:function(t){return!this._out[t.id]||Ue(this._out[t.id])},isSuccessor:function(t,e){var n=!1;return this.search(t,(function(r){if(r===e&&r!==t)return n=!0,!1}),{outbound:!0}),n},isPredecessor:function(t,e){var n=!1;return this.search(t,(function(r){if(r===e&&r!==t)return n=!0,!1}),{inbound:!0}),n},isNeighbor:function(t,e,n){var r=(n=n||{}).inbound,i=n.outbound;void 0===r&&void 0===i&&(r=i=!0);var o=!1;return this.getConnectedLinks(t,n).forEach((function(t){var{source:n,target:s}=t.attributes;return r&&Ke(n,"id")&&n.id===e.id||i&&Ke(s,"id")&&s.id===e.id?(o=!0,!1):void 0})),o},disconnectLinks:function(t,e){this.getConnectedLinks(t).forEach((function(n){n.set(n.attributes.source.id===t.id?"source":"target",{x:0,y:0},e)}))},removeLinks:function(t,e){De(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return this.getElements().filter((e=>e.getBBox({rotate:!0}).containsPoint(t)))},findModelsInArea:function(t,e={}){const n=new Q(t),{strict:r=!1}=e,i=r?"containsRect":"intersect";return this.getElements().filter((t=>n[i](t.getBBox({rotate:!0}))))},findModelsUnderElement:function(t,e={}){const{searchBy:n="bbox"}=e,r=t.getBBox().rotateAroundCenter(t.angle());return("bbox"===n?this.findModelsInArea(r):this.findModelsFromPoint(r[n]())).filter((e=>t.id!==e.id&&!e.isEmbeddedIn(t)))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,e={}){const{rotate:n=!0}=e;return We(t).reduce((function(t,e){const r=e.getBBox({rotate:n});return r?t?t.union(r):r:t}),null)},translate:function(t,e,n){var r=this.getCells().filter((function(t){return!t.isEmbedded()}));return De(r,"translate",t,e,n),this},resize:function(t,e,n){return this.resizeCells(t,e,this.getCells(),n)},resizeCells:function(t,e,n,r){var i=this.getCellsBBox(n);if(i){var o=Math.max(t/i.width,0),s=Math.max(e/i.height,0);De(n,"scale",o,s,i.origin(),r)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",Ie({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",Ie({},e,{batchName:t}))},hasActiveBatch:function(t){const e=this._batches;let n;return n=0===arguments.length?Object.keys(e):Array.isArray(t)?t:[t],n.some((t=>e[t]>0))}},{validations:{multiLinks:function(t,e){var{source:n,target:r}=e.attributes;if(n.id&&r.id){var i=e.getSourceCell();if(i&&t.getConnectedLinks(i,{outbound:!0}).filter((function(t){var{source:e,target:i}=t.attributes;return e&&e.id===n.id&&(!e.port||e.port===n.port)&&i&&i.id===r.id&&(!i.port||i.port===r.port)})).length>1)return!1}return!0},linkPinning:function(t,e){var{source:n,target:r}=e.attributes;return n.id&&r.id}}});!function(t,e,n){if(cn(n)){if(!cu[n])throw new Error('Unknown wrapper: "'+n+'"');n=cu[n]}if(!qe(n))throw new Error("Wrapper must be a function.");We(["resetCells","addCells","removeCells"]).forEach((function(e){t[e]=n(t[e])}))}(hu.prototype,0,cu.cells);const fu=_o.define("Subcircuit",{propagation:0,warning:!1,attrs:{wrapper:{refWidth:1,refHeight:1,stroke:"red",strokeWidth:10},type:{refX:.5,refY:-10,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){this.bindAttrToProp("text.type/text","celltype");const t=this.get("graph");console.assert(t instanceof hu),t.set("subcircuit",this);const e=t.getCells().filter((t=>t instanceof Eo)),n=e.filter((t=>t instanceof Co)),r=e.filter((t=>t instanceof Io));function i(t,e){return t.has("order")||e.has("order")?t.get("order")-e.get("order"):t.get("net").localeCompare(e.get("net"))}n.sort(i),r.sort(i);const o={width:80,height:16*Math.max(n.length,r.length)+8},s=[],a={};for(const[t,e]of n.entries())s.push({id:e.get("net"),group:"in",dir:"in",bits:e.get("bits"),labelled:!0});for(const[t,e]of r.entries())s.push({id:e.get("net"),group:"out",dir:"out",bits:e.get("bits"),labelled:!0});for(const t of e)a[t.get("net")]=t.get("id");this.set("size",o),this.set("circuitIOmap",a),this.get("ports").items=s,this.set("warning",t._warnings>0),_o.prototype.initialize.apply(this,arguments)},_resetPortValue(t){const e=this.get("circuitIOmap"),n=this.get("graph");return"in"==t.dir?n.getCell(e[t.id]).get("outputSignals").out:"out"==t.dir?n.getCell(e[t.id]).get("inputSignals").in:_o.prototype._resetPortValue.call(this,t)},getLayoutSize(){const t=this.size();return t.height+=10,t},setLayoutPosition(t){this.set("position",{x:t.x,y:t.y+10})},getPortsPositions(){const t=_o.prototype.getPortsPositions.apply(this,arguments),e={};for(const n in t)e[n]={...t[n]},e[n].y=e[n].y+10;return e},markup:[{tagName:"rect",selector:"wrapper"}].concat(_o.prototype.markup,[{tagName:"text",className:"type",selector:"type"}],_o.prototype.markupZoom),_gateParams:_o.prototype._gateParams.concat(["celltype"]),_unsupportedPropChanges:_o.prototype._unsupportedPropChanges.concat(["celltype"])}),du=Ao.extend({attrs:ce.merge({},Ao.prototype.attrs,{warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}}),_autoResizeBox:!0,presentationAttributes:Ao.addPresentationAttributes({warning:"WARNING"}),confirmUpdate(t){Ao.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"WARNING")&&this._updateWarning()},_updateWarning(){const t=this.model.get("warning"),e=this.attrs.warning[t?"warn":"none"];this._applyAttrs(e)},update(){Ao.prototype.update.apply(this,arguments),this._updateWarning()},events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"zoomInCircuit"},zoomInCircuit(t){return t.stopPropagation(),this.paper.trigger("open:subcircuit",this.model),!1}}),pu=yo.define("GenMux",{bits:{in:1,sel:1},size:{width:40,height:void 0},ports:{groups:{in2:{position:{name:"top",args:{y:5}},attrs:ce.merge({},mo,{wire:{x2:0,y2:-25},port:{magnet:"passive",refY:-25},bits:{refDx:-5,refDy:2,textAnchor:"start"}}),z:-1}}},attrs:{label:{refDy:8}}},{initialize(){const t=this.get("bits"),e=[{id:"sel",group:"in2",dir:"in",bits:t.sel},{id:"out",group:"out",dir:"out",bits:t.in}],n=this.muxInputs(t.sel);this.get("size").height=16*n.length+8;const r="M"+[[2,0],[5,5],[10,-5]].map((t=>t.join(" "))).join(" L");for(const[i,o]of n.entries()){const n={id:"in"+i,group:"in",dir:"in",bits:t.in,decor:r};o&&(n.portlabel=String(o),n.labelled=!0),e.push(n)}this.get("ports").items=e,yo.prototype.initialize.apply(this,arguments);const i=t=>this.attr(["body","points"],[[0,-5],[t.width,5],[t.width,t.height-5],[0,t.height+5]].map((t=>t.join(","))).join(" "));i(this.get("size")),this.on("change:size",((t,e)=>i(e)))},operation(t){const e=this.muxInput(t.sel);return void 0===e?{out:co.Vector3vl.xes(this.get("bits").in)}:{out:t["in"+e]}},getLayoutSize(){const t=this.size();return t.height+=30,t},setLayoutPosition(t){this.set("position",{x:t.x,y:t.y+20})},getPortsPositions(){const t=yo.prototype.getPortsPositions.apply(this,arguments),e={};for(const n in t)e[n]={...t[n]},e[n].y=e[n].y+20;return e},markup:yo.prototype.markup.concat([{tagName:"polygon",className:"body",selector:"body"}]),_gateParams:yo.prototype._gateParams.concat(["bits"]),_unsupportedPropChanges:yo.prototype._unsupportedPropChanges.concat(["bits"]),_operationHelpers:yo.prototype._operationHelpers.concat(["muxInput"])}),gu=bo.extend({initialize(){this.ins=this.model.muxInputs(this.model.get("bits").sel),bo.prototype.initialize.apply(this,arguments)},confirmUpdate(t){bo.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"SIGNAL")&&this._updateMux(this.model.get("inputSignals"))},render(){bo.prototype.render.apply(this,arguments),this._updateMux(this.model.get("inputSignals"))},_updateMux(t){const e=this.model.muxInput(t.sel);for(const t of this.ins.keys())this.$("[port=in"+t+"] path.decor").css("visibility",e==t?"visible":"hidden")}}),vu=pu.define("Mux",{},{muxInputs:t=>Array(1<<t),muxInput:t=>t.isFullyDefined?t.toBigInt().toString():void 0}),mu=gu,yu=pu.define("Mux1Hot",{attrs:{info:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",text:"1Hot",transform:"rotate(90)"}}},{markup:pu.prototype.markup.concat([{tagName:"text",className:"info",selector:"info"}]),muxInputs:t=>Array(t+1),muxInput:t=>{const e=t.toArray();return t.isFullyDefined&&e.filter((t=>1==t)).length<=1?String(e.indexOf(1)+1):void 0}}),bu=gu,xu=pu.define("MuxSparse",{inputs:void 0,default_input:!1},{initialize(){const t=this.get("inputs");for(let e=0;e<t.length;e++)"bigint"!=typeof t[e]&&(t[e]=BigInt(t[e]));pu.prototype.initialize.apply(this,arguments)},muxInputs(t){return this.get("default_input")?["*"].concat(this.get("inputs")):this.get("inputs")},muxInput(t){const e=this.get("default_input");if(!t.isFullyDefined)return;const n=this.get("inputs").indexOf(t.toBigInt());return n<0?e?0:void 0:e?n+1:n},_gateParams:pu.prototype._gateParams.concat(["inputs","default_input"]),_unsupportedPropChanges:pu.prototype._unsupportedPropChanges.concat(["inputs","default_input"])}),wu=gu,_u=_o.define("Dff",{bits:1,initial:"x",size:{width:80,height:void 0},ports:{groups:{in:{position:_o.prototype._getStackedPosition({side:"left"})},out:{position:_o.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const t=this.get("bits"),e=(this.get("initial"),this.get("polarity")||{}),n=[];this.get("no_data")||n.push({id:"in",group:"in",dir:"in",bits:t,portlabel:"D",labelled:!0}),n.push({id:"out",group:"out",dir:"out",bits:t,portlabel:"Q",labelled:!0}),"arst"in e&&!this.get("arst_value")&&this.set("arst_value",Array(t).fill("0").join("")),"srst"in e&&!this.get("srst_value")&&this.set("srst_value",Array(t).fill("0").join(""));let r=1;"aload"in e&&(r+=2,n.push({id:"ain",group:"in",dir:"in",bits:t,portlabel:"AD",labelled:!0}),n.push({id:"aload",group:"in",dir:"in",bits:1,polarity:e.aload,labelled:!0})),"clock"in e&&(r++,n.push({id:"clk",group:"in",dir:"in",bits:1,polarity:e.clock,decor:_o.prototype.decorClock,labelled:!0})),"set"in e&&(r++,n.push({id:"set",group:"in",dir:"in",bits:t,polarity:e.set,portlabel:"S",labelled:!0})),"clr"in e&&(r++,n.push({id:"clr",group:"in",dir:"in",bits:t,polarity:e.clr,portlabel:"R",labelled:!0})),"srst"in e&&(r++,n.push({id:"srst",group:"in",dir:"in",bits:1,polarity:e.srst,labelled:!0})),"arst"in e&&(r++,n.push({id:"arst",group:"in",dir:"in",bits:1,polarity:e.arst,labelled:!0})),"enable"in e&&(r++,n.push({id:"en",group:"in",dir:"in",bits:1,polarity:e.enable,labelled:!0})),this.get("size").height=16*r+8,this.get("ports").items=n,this.last_clk=0,_o.prototype.initialize.apply(this,arguments)},_resetPortValue(t){return"out"==t.id&&"out"==t.dir?co.Vector3vl.fromBin(this.get("initial"),t.bits):_o.prototype._resetPortValue.call(this,t)},operation(t){const e=this.get("polarity"),n=t=>e[t]?1:-1;let r,i,o;const s=t=>({out:i?t.and(o).or(i):t});if("clock"in e&&(r=this.last_clk,this.last_clk=t.clk.get(0)),"arst"in e&&t.arst.get(0)==n("arst"))return{out:co.Vector3vl.fromBin(this.get("arst_value"),this.get("bits"))};if("aload"in e&&t.aload.get(0)==n("aload"))return{out:t.ain};if("set"in e&&(i=e.set?t.set:t.set.not(),o=e.set?t.set.not():t.set),"clr"in e){i=i||co.Vector3vl.zeros(this.get("bits"));const n=e.clr?t.clr.not():t.clr;o=o?n.and(o):n}return"enable"in e&&t.en.get(0)!=n("enable")&&this.get("enable_srst")?s(this.get("outputSignals").out):!("clock"in e)||t.clk.get(0)==n("clock")&&r==-n("clock")?"srst"in e&&t.srst.get(0)==n("srst")?s(co.Vector3vl.fromBin(this.get("srst_value"),this.get("bits"))):"enable"in e&&t.en.get(0)!=n("enable")&&!this.get("enable_srst")||this.get("no_data")?s(this.get("outputSignals").out):s(t.in):s(this.get("outputSignals").out)},_gateParams:_o.prototype._gateParams.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"]),_unsupportedPropChanges:_o.prototype._unsupportedPropChanges.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"])}),Au=Ao.extend({_autoResizeBox:!0}),ku=_o.define("Memory",{bits:1,abits:1,rdports:[],wrports:[],words:void 0,offset:0,attrs:{portsplit:{stroke:"black"}},ports:{groups:{in:{position:_o.prototype._getStackedPosition({side:"left"})},out:{position:_o.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const t=this.get("bits"),e=this.get("abits");this.get("rdports"),this.get("wrports");let n=0,r=0;const i=[],o=[];for(const[s,a]of this._memrdports())i.push({id:s+"addr",group:"in",dir:"in",bits:e,portlabel:"addr",labelled:!0},{id:s+"data",group:"out",dir:"out",bits:t,portlabel:"data",labelled:!0,args:{idxOffset:r}}),n+=1,"srst_polarity"in a&&(n++,r++,i.push({id:s+"srst",group:"in",dir:"in",bits:1,portlabel:"srst",polarity:a.srst_polarity,labelled:!0})),"arst_polarity"in a&&(n++,r++,i.push({id:s+"arst",group:"in",dir:"in",bits:1,portlabel:"arst",polarity:a.arst_polarity,labelled:!0})),"enable_polarity"in a&&(n++,r++,i.push({id:s+"en",group:"in",dir:"in",bits:1,portlabel:"en",polarity:a.enable_polarity,labelled:!0})),"clock_polarity"in a&&(n++,r++,i.push({id:s+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:a.clock_polarity,decor:_o.prototype.decorClock,labelled:!0})),o.push(n);for(const[r,s]of this._memwrports())n+=2,i.push({id:r+"data",group:"in",dir:"in",bits:t,portlabel:"data",labelled:!0},{id:r+"addr",group:"in",dir:"in",bits:e,portlabel:"addr",labelled:!0}),"enable_polarity"in s&&(n++,i.push({id:r+"en",group:"in",dir:"in",bits:s.no_bit_enable?1:t,portlabel:"en",polarity:s.enable_polarity,labelled:!0})),"clock_polarity"in s&&(n++,i.push({id:r+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:s.clock_polarity,decor:_o.prototype.decorClock,labelled:!0})),o.push(n);o.pop(),this.get("size").height=16*n+8,this.get("ports").items=i,_o.prototype.initialize.apply(this,arguments),this.removeProp("memdata"),this.on("change:size",((t,e)=>{const n=[];for(const t of o)n.push([[0,16*t+4],[e.width,16*t+4]].map((t=>t.join(" "))).join(" L "));this.attr("path.portsplit/d","M "+n.join(" M "))}))},_resetPortValue(t){if("out"==t.dir){const e=/^rd([0-9]+)data$/.exec(t.id),n=e?this.get("rdports")[e[1]]:{};if("init_value"in n)return co.Vector3vl.fromBin(n.init_value,t.bits)}return _o.prototype._resetPortValue.call(this,t)},prepare(){const t=this.get("bits");var e=this.get("words");const n=this.get("memdata");e||(e=1<<abits,this.prop("words",e,{init:!0})),this.memdata=n?co.Mem3vl.fromJSON(t,n):new co.Mem3vl(t,e),console.assert(this.memdata.words==e),this.last_clk={};for(const[t,e]of this._memports())"clock_polarity"in e&&(this.last_clk[t+"clk"]=0)},operation(t){const e=this.get("bits"),n={},r=(t,e)=>t[e+"_polarity"]?1:-1,i=(e,n)=>!("enable_polarity"in n&&!t[e+"en"].toArray().some((t=>t==r(n,"enable")))),o=(e,n)=>{const i=e+"clk";return!("clock_polarity"in n)||t[i].get(0)==r(n,"clock")&&this.last_clk[i]==-r(n,"clock")},s=t=>t>=0&&t<this.get("words"),a=(r,i)=>{const o=this._calcaddr(t[r+"addr"]);s(o)?n[r+"data"]=this.memdata.get(o):n[r+"data"]=co.Vector3vl.xes(e)},u=(e,n,r,i)=>{if(n.no_bit_enable||!("enable_polarity"in n))return i;const o=n.enable_polarity?t[e+"en"]:t[e+"en"].not();return i.and(o).or(r.and(o.not()))},c=(r,i)=>{a(r);for(const[s,a]of this.get("wrports").entries()){const c="wr"+s,l=(t,e)=>"boolean"==typeof t?t:t[e];"transparent"in i&&l(i.transparent,s)&&o(c,a)&&t[r+"addr"]==t[c+"addr"]&&(n[r+"data"]=u(c,a,n[r+"data"],t[c+"data"])),"collision"in i&&l(i.collision,s)&&o(c,a)&&t[r+"addr"]==t[c+"addr"]&&(n[r+"data"]=u(c,a,n[r+"data"],co.Vector3vl.xes(e)))}},l=(e,n)=>{const r=this._calcaddr(t[e+"addr"]);if(s(r)){const i=this.memdata.get(r),o=u(e,n,i,t[e+"data"]),s=!i.eq(o);this.memdata.set(r,o),s&&this.trigger("memChange",r,o)}},h=(i,o)=>{t[i+"srst"].get(0)==r(o,"srst")&&(n[i+"data"]="srst_value"in o?co.Vector3vl.fromBin(o.srst_value,e):co.Vector3vl.zeros(e))},f=(i,o)=>{t[i+"arst"].get(0)==r(o,"arst")&&(n[i+"data"]="arst_value"in o?co.Vector3vl.fromBin(o.arst_value,e):co.Vector3vl.zeros(e))},d=(e,n)=>{if("clock_polarity"in n){const n=e+"clk";this.last_clk[n]=t[n].get(0)}};for(const[t,e]of this._memrdports())n[t+"data"]=this.get("outputSignals")[t+"data"],"clock_polarity"in e&&i(t,e)&&o(t,e)&&c(t,e);for(const[t,e]of this._memwrports())i(t,e)&&o(t,e)&&l(t,e);for(const[t,e]of this._memrdports())!("clock_polarity"in e)&&i(t,e)&&a(t);for(const[t,e]of this._memrdports())"srst_polarity"in e&&(i(t,e)||!("enable_srst"in e))&&o(t,e)&&h(t,e),"arst_polarity"in e&&f(t,e);for(const[t,e]of this._memrdports())d(t,e);for(const[t,e]of this._memwrports())d(t,e);return n},_calcaddr(t){return t.isFullyDefined?t.toNumber()-this.get("offset"):-1},*_memrdports(){for(const[t,e]of this.get("rdports").entries())yield["rd"+t,e]},*_memwrports(){for(const[t,e]of this.get("wrports").entries())yield["wr"+t,e]},*_memports(){yield*this._memrdports(),yield*this._memwrports()},markup:_o.prototype.markup.concat([{tagName:"path",className:"portsplit",selector:"portsplit"}],_o.prototype.markupZoom),getGateParams(){const t=_o.prototype.getGateParams.apply(this,arguments);return t.memdata=this.memdata.toJSON(),t},_gateParams:_o.prototype._gateParams.concat(["bits","abits","rdports","wrports","words","offset"]),_unsupportedPropChanges:_o.prototype._unsupportedPropChanges.concat(["bits","abits","rdports","wrports","words","offset"]),_operationHelpers:_o.prototype._operationHelpers.concat(["_memrdports","_memwrports","_memports","_calcaddr"])}),Su=Ao.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(t){t.stopPropagation();const e=this.model,n=e.graph._display3vl,r=le("<div>",{title:"Memory contents: "+e.get("label")}).appendTo("html > body");r.append(le('<div class="btn-toolbar" role="toolbar"><div class="btn-group mr-2" role="group"><button name="prev" type="button" class="btn btn-secondary" title="Previous page"></button><button name="next" type="button" class="btn btn-secondary" title="Next page"></button></div><div class="input-group">'+function(t,e,n){return'<select name="base">'+t.usableDisplays("read",e).map((t=>'<option value="'+t+'"'+("hex"==t?' selected="selected"':"")+">"+t+"</option>")).join("")+"</select>"}(n,e.get("bits"))+'</div></div><table class="memeditor"></table>'));const i=e.get("words"),o=e.memdata,s=Math.ceil(e.get("abits")/4);let a,u=0;const c=()=>r.find("select[name=base]").val(),l=t=>{const e=Math.floor((t-u)/a),n=t-u-e*a;return r.find("table tr:nth-child("+(e+1)+") td:nth-child("+(n+2)+") input")},h=t=>{for(const[n,r]of e._memrdports())l(e._calcaddr(t[n+"addr"])).removeClass("isread");for(const[n,r]of e._memwrports())l(e._calcaddr(t[n+"addr"])).removeClass("iswrite")},f=t=>{for(const[n,r]of e._memrdports())l(e._calcaddr(t[n+"addr"])).addClass("isread");for(const[n,r]of e._memwrports())l(e._calcaddr(t[n+"addr"])).addClass("iswrite")},d=()=>{const t=c();r.find("button[name=prev]").prop("disabled",u<=0),r.find("button[name=next]").prop("disabled",u+8*a>=i);let o=r.find("table tr:first-child");const l=e.memdata;for(let e=0;e<8&&!(u+e*a>=i);e++,o=o.next()){const r=(u+e*a).toString(16);let c=o.find("td:first-child");c.text("0".repeat(s-r.length)+r),c=c.next();for(let r=0;r<a&&!(u+e*a+r>=i);r++,c=c.next())c.find("input").val(n.show(t,l.get(u+e*a+r))).removeClass("invalid")}f(e.get("inputSignals"))},p=()=>{const t=c(),o=n.pattern(t),s=n.size(t,e.get("bits"));a=Math.min(i,16,Math.ceil(32/s)),u=Math.max(0,Math.min(i-8*a,u));const l=r.find("table");l.empty();for(let t=0;t<8&&!(u+t*a>=i);t++){const e=le("<tr>");le("<td>").appendTo(e);for(let n=0;n<a&&!(u+t*a+n>=i);n++){const t=le("<td>");le('<input type="text">').attr("size",s).attr("maxlength",s).attr("pattern",o).appendTo(t),t.appendTo(e)}e.appendTo(l)}d()};p(),r.find("select[name=base]").on("change",p),r.find("button[name=prev]").on("click",(()=>{h(e.get("inputSignals")),u=Math.max(0,u-8*a),d()})),r.find("button[name=next]").on("click",(()=>{h(e.get("inputSignals")),u=Math.min(i-8*a,u+8*a),d()})),r.on("change","input",(t=>{const r=c(),i=le(t.target),s=i.closest("td").index()-1,l=i.closest("tr").index(),h=u+l*a+s,f=e.get("bits");if(n.validate(r,t.target.value,f)){const s=n.read(r,t.target.value,f);o.set(h,s),e.trigger("manualMemChange",e,h,s),i.removeClass("invalid")}else i.addClass("invalid")}));const g=(t,e)=>{if(t<u||t>u+8*a)return;const r=c(),i=l(t).val(n.show(r,o.get(t))).removeClass("invalid").removeClass("flash");setTimeout((()=>{i.addClass("flash")}),10)},v=(t,n)=>{h(e.previous("inputSignals")),f(n)};return e.on("memChange",g),e.on("change:inputSignals",v),this.paper.trigger("open:memorycontent",r,(()=>{r.remove(),e.off("memChange",g),e.off("change:inputSignals",v)})),!1}}),Eu={exportElement:function(t){return t.size()},exportLink:function(t){var e=t.get("labelSize")||{};return{minLen:t.get("minLen")||1,weight:t.get("weight")||1,labelpos:t.get("labelPosition")||"c",labeloffset:t.get("labelOffset")||0,width:e.width||0,height:e.height||0}},importElement:function(t,e,n){var r=this.getCell(e),i=n.node(e);t.setPosition?t.setPosition(r,i):r.set("position",{x:i.x-i.width/2,y:i.y-i.height/2})},importLink:function(t,e,n){const r=this.getCell(e.name),i=n.edge(e),o=i.points||[],s=new ut(o);if(t.setVertices||t.setLinkVertices)if(qe(t.setVertices))t.setVertices(r,o);else{s.simplify({threshold:.001});const t=s.points.map((t=>t.toJSON())),e=t.length;r.set("vertices",t.slice(1,e-1))}if(t.setLabels&&"x"in i&&"y"in i){const e={x:i.x,y:i.y};if(qe(t.setLabels))t.setLabels(r,e,o);else{const t=s.closestPointLength(e),n=s.pointAtLength(t),i=t/s.length(),o=new j(e).difference(n).toJSON();r.label(0,{position:{distance:i,offset:o}})}}},layout:function(t,e){var n;n=t instanceof hu?t:(new hu).resetCells(t,{dry:!0,sort:!1}),t=null;const r=(e=Re(e||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink})).dagre||("undefined"!=typeof dagre?dagre:void 0);if(void 0===r)throw new Error('The the "dagre" utility is a mandatory dependency.');var i=Eu.toGraphLib(n,{graphlib:e.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:e.exportElement,setEdgeLabel:e.exportLink,setEdgeName:function(t){return t.id}}),o={},s=e.marginX||0,a=e.marginY||0;if(e.rankDir&&(o.rankdir=e.rankDir),e.align&&(o.align=e.align),e.nodeSep&&(o.nodesep=e.nodeSep),e.edgeSep&&(o.edgesep=e.edgeSep),e.rankSep&&(o.ranksep=e.rankSep),e.ranker&&(o.ranker=e.ranker),s&&(o.marginx=s),a&&(o.marginy=a),i.setGraph(o),r.layout(i,{debugTiming:!!e.debugTiming}),n.startBatch("layout"),Eu.fromGraphLib(i,{importNode:this.importElement.bind(n,e),importEdge:this.importLink.bind(n,e)}),e.resizeClusters){var u=i.nodes().filter((function(t){return i.children(t).length>0})).map(n.getCell.bind(n)).sort((function(t,e){return e.getAncestors().length-t.getAncestors().length}));De(u,"fitEmbeds",{padding:e.clusterPadding})}n.stopBatch("layout");var c=i.graph();return new Q(s,a,Math.abs(c.width-2*s),Math.abs(c.height-2*a))},fromGraphLib:function(t,e){var n=(e=e||{}).importNode||ln,r=e.importEdge||ln,i=this instanceof hu?this:new hu;return t.nodes().forEach((function(r){n.call(i,r,t,i,e)})),t.edges().forEach((function(n){r.call(i,n,t,i,e)})),i},toGraphLib:function(t,e){const n=(e=e||{}).graphlib||("undefined"!=typeof graphlib?graphlib:void 0);if(void 0===n)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var r=en(e,"directed","compound","multigraph"),i=new n.Graph(r),o=e.setNodeLabel||ln,s=e.setEdgeLabel||ln,a=e.setEdgeName||ln,u=t.get("cells"),c=0,l=u.length;c<l;c++){var h=u.at(c);if(h.isLink()){var f=h.get("source"),d=h.get("target");if(!f.id||!d.id)break;i.setEdge(f.id,d.id,s(h),a(h))}else if(i.setNode(h.id,o(h)),i.isCompound()&&h.has("parent")){var p=h.get("parent");u.has(p)&&i.setParent(h.id,p)}}return i}};hu.prototype.toGraphLib=function(t){return Eu.toGraphLib(this,t)},hu.prototype.fromGraphLib=function(t,e){return Eu.fromGraphLib.call(this,t,e)};const Pu=Fr.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(t,e){const{options:n}=this,{useFirstSubpath:r}=n;let i;try{const t=ue(e);if(i=t.convertToPathData().trim(),"PATH"===t.tagName()&&r){const t=i.search(/.M/i)+1;t>0&&(i=i.substr(0,t))}}catch(r){const o=t.getNodeBoundingRect(e);i=ue.rectToPath(Ie({},n,o.toJSON()))}return i},highlightConnection(t){this.vel.attr("d",t.getSerializedConnection())},highlightNode(t,e){const{vel:n,options:r}=this,{padding:i,layer:o}=r;let s=t.getNodeMatrix(e);if(i){o||e!==t.el||n.remove();let r=t.getNodeBoundingRect(e);const a=r.x+r.width/2,u=r.y+r.height/2;r=ue.transformRect(r,s);const c=Math.max(r.width,1),l=Math.max(r.height,1),h=(c+i)/c,f=(l+i)/l,d=ue.createSVGMatrix({a:h,b:0,c:0,d:f,e:a-h*a,f:u-f*u});s=s.multiply(d)}n.attr({d:this.getPathData(t,e),transform:ue.matrixToTransformString(s)})},highlight(t,e){const{vel:n,options:r}=this;n.attr(r.attrs),t.isNodeConnection(e)?this.highlightConnection(t):this.highlightNode(t,e)}}),Cu=20,Tu=Fr.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:Cu,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(t,e){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:n,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:i}=this,o=e.tagName();if(!ue.isSVGGraphicsElement(e)||i.includes(o))return e.remove(),!1;if(r.includes(o)){const n=t.vel.findOne(`#${e.id}`);if(n){const{node:r}=n;let i=t.getNodeBoundingRect(r);t.model.isElement()&&(i=ue.transformRect(i,t.getNodeMatrix(r)));const o=ue("rect",i.toJSON()),{x:s,y:a}=i.center(),{angle:u,cx:c=s,cy:l=a}=n.rotate();u&&o.rotate(u,c,l),e.parent().append(o)}return e.remove(),!1}return n.forEach((t=>{"fill"===t&&"none"===e.attr("fill")||e.removeAttr(t)})),!0},transformMaskRoot(t,e){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:n}=this;n.forEach((t=>{e.removeAttr(t)}))},getMaskShape(t,e){const{options:n,MASK_REPLACE_TAGS:r}=this,{deep:i}=n,o=e.tagName();let s;if("G"===o){if(!i)return null;s=e.clone(),function(t,e){const n=t.children();for(;n.length>0;){const t=n.shift();e(t)&&n.push(...t.children())}}(s,(e=>this.transformMaskChild(t,e)))}else{if(r.includes(o))return null;s=e.clone()}return this.transformMaskRoot(t,s),s},getMaskId(){return`highlight-mask-${this.cid}`},getMask(t,e){const{VISIBLE:n,INVISIBLE:r,options:i}=this,{padding:o,attrs:s}=i,a="stroke-width"in s?s["stroke-width"]:1,u="none"!==e.attr("fill");let c=parseFloat(e.attr("stroke-width"));isNaN(c)&&(c=1);const l=c+2*o,h=l+2*a;let f=this.getMaskShape(t,e);if(!f){const n=t.getNodeBoundingRect(e.node);n.inflate(n.width?0:.5,n.height?0:.5),f=ue("rect",n.toJSON())}return f.attr(s),ue("mask",{id:this.getMaskId()}).append([f.clone().attr({fill:u?n:"none",stroke:n,"stroke-width":h}),f.clone().attr({fill:u?r:"none",stroke:r,"stroke-width":l})])},removeMask(t){const e=t.svg.getElementById(this.getMaskId());e&&t.defs.removeChild(e)},addMask(t,e){t.defs.appendChild(e.node)},highlight(t,e){const{options:n,vel:r}=this,{padding:i,attrs:o,maskClip:s=Cu,layer:a}=n,u="stroke"in o?o.stroke:"#000000";a||e!==t.el||r.remove();const c=t.getNodeBoundingRect(e).inflate(i+s),l=this.getMask(t,ue(e));this.addMask(t.paper,l),r.attr(c.toJSON()),r.attr({transform:ue.matrixToTransformString(t.getNodeMatrix(e)),mask:`url(#${l.id})`,fill:u})},unhighlight(t){this.removeMask(t.paper)}}),Nu=Fr.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:fe("highlight-opacity"),highlight:function(t,e){ue(e).addClass(this.opacityClassName)},unhighlight:function(t,e){ue(e).removeClass(this.opacityClassName)}}),Lu=fe("highlighted"),Mu=Fr.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:Lu},highlight:function(t,e){ue(e).addClass(this.options.className)},unhighlight:function(t,e){ue(e).removeClass(this.options.className)}},{className:Lu});function Ou(t,e,n,r){var i="ratio"in r?r.ratio:.5;return t.getPointAtRatio(i)}function Iu(t,e,n,r){var i="length"in r?r.length:20;return t.getPointAtLength(i)}function Ru(t){return function(e,n,r,i){if(r instanceof Element){var o,s=this.paper.findView(r);if(s)if(s.isNodeConnection(r)){var a="fixedAt"in i?i.fixedAt:"50%";o=Bu(s,a)}else o=s.getNodeBBox(r).center();else o=new j;return t.call(this,e,n,o,i)}return t.apply(this,arguments)}}function Bu(t,e){var n=parseFloat(e);return Ee(e)?t.getPointAtRatio(n/100):t.getPointAtLength(n)}const Du=Ru((function(t,e,n,r){var i=1e6,o=t.getConnection(),s=t.getConnectionSubdivisions(),a=new rt(n.clone().offset(0,i),n.clone().offset(0,-i)),u=new rt(n.clone().offset(i,0),n.clone().offset(-i,0)),c=a.intersect(o,{segmentSubdivisions:s}),l=u.intersect(o,{segmentSubdivisions:s}),h=[];return c&&Array.prototype.push.apply(h,c),l&&Array.prototype.push.apply(h,l),h.length>0?n.chooseClosest(h):"fallbackAt"in r?Bu(t,r.fallbackAt):ju(t,e,n,r)})),ju=Ru((function(t,e,n,r){return t.getClosestPoint(n)||new j}));function Vu(t,e,n){if(He(n)){const{x:r,y:i}=n;if(isFinite(i)){const n=new rt(e,t),{start:r,end:o}=n.parallel(i);e=r,t=o}n=r}if(!isFinite(n))return t;var r=t.distance(e);return 0===n&&r>0?t:t.move(e,-Math.min(n,r-1))}function Fu(t){var e=t.getAttribute("stroke-width");return null===e?0:parseFloat(e)||0}function zu(t,e,n,r){var i=e.getNodeBBox(n);r.stroke&&i.inflate(Fu(n)/2);var o=t.intersect(i);return Vu(o?t.start.chooseClosest(o):t.end,t.start,r.offset)}const Uu=function(t,e,n,r){let{offset:i,alignOffset:o,align:s}=r;return s&&function(t,e,n=0){let r,i,o,s;const{start:a,end:u}=t;switch(e){case"left":r="x",i=u,o=a,s=-1;break;case"right":r="x",i=a,o=u,s=1;break;case"top":r="y",i=u,o=a,s=-1;break;case"bottom":r="y",i=a,o=u,s=1;break;default:return}a[r]<u[r]?i[r]=o[r]:o[r]=i[r],isFinite(n)&&(i[r]+=s*n,o[r]+=s*n)}(t,s,o),Vu(t.end,t.start,i)},Gu=zu,qu=function(t,e,n,r){var i=e.model.angle();if(0===i)return zu(t,e,n,r);var o=e.getNodeUnrotatedBBox(n);r.stroke&&o.inflate(Fu(n)/2);var s=o.center(),a=t.clone().rotate(s,i),u=a.setLength(1e6).intersect(o);return Vu(u?a.start.chooseClosest(u).rotate(s,-i):t.end,t.start,r.offset)},Hu=function(t,e,n,r){var i,o,s=r.selector,a=t.end;if(i="string"==typeof s?e.findBySelector(s)[0]:Array.isArray(s)?ve(n,s):function(t){if(!t)return null;var e=t;do{var n=e.tagName;if("string"!=typeof n)return null;if("G"===(n=n.toUpperCase()))e=e.firstElementChild;else{if("TITLE"!==n)break;e=e.nextElementSibling}}while(e);return e}(n),!ue.isSVGGraphicsElement(i)){if(i===n||!ue.isSVGGraphicsElement(n))return a;i=n}var u,c=e.getNodeShape(i),l=e.getNodeMatrix(i),h=e.getRootTranslateMatrix(),f=e.getRootRotateMatrix(),d=h.multiply(f).multiply(l),p=d.inverse(),g=ue.transformLine(t,p),v=g.start.clone(),m=e.getNodeData(i);if(!1===r.insideout&&(m.shapeBBox||(m.shapeBBox=c.bbox()),m.shapeBBox.containsPoint(v)))return a;if(c instanceof vt){var y=r.precision||2;m.segmentSubdivisons||(m.segmentSubdivisons=c.getSegmentSubdivisions({precision:y})),u={precision:y,segmentSubdivisions:m.segmentSubdivisons}}!0===r.extrapolate&&g.setLength(1e6),(o=g.intersect(c,u))?ue.isArray(o)&&(o=v.chooseClosest(o)):!0===r.sticky&&(o=c instanceof Q?c.pointNearestToPoint(v):c instanceof G?c.intersectionWithLineFromCenterToPoint(v):c.closestPoint(v,u));var b=o?ue.transformPoint(o,d):a,x=r.offset||0;return r.stroke&&(x+=Fu(i)/2),Vu(b,t.start,x)};function Wu(t){return function(e,n,r,i){var o=!!i.rotate,s=o?e.getNodeUnrotatedBBox(n):e.getNodeBBox(n),a=s[t](),u=i.dx;if(u){var c=Ee(u);u=parseFloat(u),isFinite(u)&&(c&&(u/=100,u*=s.width),a.x+=u)}var l=i.dy;if(l){var h=Ee(l);l=parseFloat(l),isFinite(l)&&(h&&(l/=100,l*=s.height),a.y+=l)}return o?a.rotate(e.model.getBBox().center(),-e.model.angle()):a}}const $u=Wu("center"),Xu=Wu("topMiddle"),Yu=Wu("bottomMiddle"),Ju=Wu("leftMiddle"),Zu=Wu("rightMiddle"),Ku=Wu("origin"),Qu=Wu("topRight"),tc=Wu("bottomLeft"),ec=Wu("corner"),nc=Ru((function(t,e,n,r){var i=t.model.angle(),o=t.getNodeBBox(e),s=o.center(),a=o.origin(),u=o.corner(),c=r.padding;if(isFinite(c)||(c=0),a.y+c<=n.y&&n.y<=u.y-c){var l=n.y-s.y;s.x+=0===i||180===i?0:1*l/Math.tan(b(i)),s.y+=l}else if(a.x+c<=n.x&&n.x<=u.x-c){var h=n.x-s.x;s.y+=90===i||270===i?0:h*Math.tan(b(i)),s.x+=h}return s})),rc=Ru((function(t,e,n,r){var i,o,s,a=!!r.rotate;a?(i=t.getNodeUnrotatedBBox(e),s=t.model.getBBox().center(),o=t.model.angle()):i=t.getNodeBBox(e);var u,c=r.padding;switch(isFinite(c)&&i.inflate(c),a&&n.rotate(s,o),i.sideNearestToPoint(n)){case"left":u=i.leftMiddle();break;case"right":u=i.rightMiddle();break;case"top":u=i.topMiddle();break;case"bottom":u=i.bottomMiddle()}return a?u.rotate(s,-o):u})),ic=function(t,e,n,r,i){return t.model.getPointFromConnectedLink(this.model,i).offset(r.dx,r.dy)},oc={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},sc=9007199254740991,ac=Ur.Highlighting,uc={[ac.DEFAULT]:{name:"stroke",options:{padding:3}},[ac.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[ac.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},cc=[{name:so.BACK},{name:so.CELLS},{name:so.LABELS},{name:so.FRONT},{name:so.TOOLS}],lc=yn.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:qr,linkView:oo,snapLabels:!1,snapLinks:!1,labelsLayer:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:uc,preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new Xr,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(t,e,n){return"passive"!==e.getAttribute("magnet")},validateConnection:function(t,e,n,r,i,o){return("target"===i?n:t)instanceof qr},embeddingMode:!1,validateEmbedding:function(t,e){return!0},validateUnembedding:function(t){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:oc.EXACT,frozen:!1,onViewUpdate:function(t,e,n,r,i){e&(t.FLAG_INSERT|t.FLAG_REMOVE)||r.mounting||r.isolate||i.requestConnectedLinksUpdate(t,n,r)},onViewPostponed:function(t,e,n){return n.forcePostponedViewUpdate(t,e)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:a,anchorNamespace:l,linkAnchorNamespace:u,connectionPointNamespace:c},events:{dblclick:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","mousedown .joint-cell [event]":"onevent","touchstart .joint-cell [event]":"onevent","mousedown .joint-cell [magnet]":"onmagnet","touchstart .joint-cell [magnet]":"onmagnet","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],MIN_SCALE:1e-6,init:function(){const{options:t,el:e}=this;t.cellViewNamespace||(t.cellViewNamespace="undefined"!=typeof joint&&Ke(joint,"shapes")?joint.shapes:null);const n=this.model=t.model||new hu;this._layers={},this.setGrid(t.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this.$document=le(e.ownerDocument),this.resetViews(n.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(t,e,n){var r=n.position;this.isAsync()||!un(r)?this.renderView(t,n):(n.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(t,n),0===r&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,e,n){const r=this.findViewByModel(t);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,n)},onCellChange:function(t,e){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===oc.APPROX){const n=this.findViewByModel(t);n&&this.requestViewUpdate(n,n.FLAG_INSERT,n.UPDATE_PRIORITY,e)}},onGraphReset:function(t,e){this.resetLayers(),this.resetViews(t.models,e)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var e=t&&t.batchName,n=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(e)&&!n.hasActiveBatch(r)&&this.updateViews(t)}var i=this.SORT_DELAYING_BATCHES;i.includes(e)&&!n.hasActiveBatch(i)&&this.sortViews()}},cloneOptions:function(){const{options:t}=this,{defaultConnector:e,defaultRouter:n,defaultConnectionPoint:r,defaultAnchor:i,defaultLinkAnchor:o,origin:s,highlighting:a,cellViewNamespace:u,interactive:c}=t;!u&&"undefined"!=typeof joint&&Ke(joint,"shapes")&&(t.cellViewNamespace=joint.shapes),qe(e)||(t.defaultConnector=ze(e)),qe(n)||(t.defaultRouter=ze(n)),qe(r)||(t.defaultConnectionPoint=ze(r)),qe(i)||(t.defaultAnchor=ze(i)),qe(o)||(t.defaultLinkAnchor=ze(o)),He(c)&&(t.interactive=Ie({},c)),He(a)&&(t.highlighting=Be({},a,uc)),t.origin=Ie({},s)},children:function(){var t=ue.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:fe("paper-background"),selector:"background"},{namespaceURI:t.xhtml,tagName:"div",className:fe("paper-grid"),selector:"grid"},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:fe("layers"),selector:"layers"}]}]},hasLayerView(t){return t in this._layers},getLayerView(t){const{_layers:e}=this;if(t in e)return e[t];throw new Error(`dia.Paper: Unknown layer "${t}"`)},getLayerNode(t){return this.getLayerView(t).el},render:function(){this.renderChildren();const{childNodes:t,options:e}=this,{svg:n,defs:r,layers:i,background:o,grid:s}=t;return this.svg=n,this.defs=r,this.layers=i,this.$background=le(o),this.$grid=le(s),this.renderLayers(),ue.ensureId(n),e.background&&this.drawBackground(e.background),e.drawGrid&&this.drawGrid(),this},renderLayers:function(t=cc){this.removeLayers(),t.forEach((({name:t,sorted:e})=>{const n=new ao({name:t});this.layers.appendChild(n.el),this._layers[t]=n}));const e=this.getLayerView(so.CELLS),n=this.getLayerView(so.TOOLS),r=this.getLayerView(so.LABELS);this.tools=n.el,this.cells=this.viewport=e.el,e.vel.addClass(fe("viewport")),r.vel.addClass(fe("viewport"))},removeLayers:function(){const{_layers:t}=this;Object.keys(t,(e=>{t[e].remove(),delete t[e]}))},resetLayers:function(){const{_layers:t}=this;Object.keys(t,(e=>{t[e].removePivots()}))},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(t){var e=this.layers;if(void 0===t){var n=e.getAttribute("transform");return(this._viewportTransformString||null)===n?t=this._viewportMatrix:(t=e.getCTM(),this._viewportMatrix=t,this._viewportTransformString=n),ue.createSVGMatrix(t)}t=ue.createSVGMatrix(t);var r=ue.matrixToTransformString(t);return e.setAttribute("transform",r),this._viewportMatrix=t,this._viewportTransformString=e.getAttribute("transform"),this},clientMatrix:function(){return ue.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,e,n){if(t instanceof Ur)for(var r=t.model,i=this.model.getConnectedLinks(r),o=0,s=i.length;o<s;o++){var a=i[o],u=this.findViewByModel(a);if(u){var c=["UPDATE"];a.getTargetCell()===r&&c.push("TARGET"),a.getSourceCell()===r&&c.push("SOURCE");var l=Math.max(e+1,u.UPDATE_PRIORITY);this.scheduleViewUpdate(u,u.getFlag(c),l,n)}}},forcePostponedViewUpdate:function(t,e){if(!(t&&t instanceof Ur))return!1;var n=t.model;if(n.isElement())return!1;if(0==(e&t.getFlag(["SOURCE","TARGET"]))){var r=0,i=this.findViewByModel(n.getSourceCell());i&&!this.isViewMounted(i)&&(r=this.dumpView(i),t.updateEndMagnet("source"));var o=0,s=this.findViewByModel(n.getTargetCell());if(s&&!this.isViewMounted(s)&&(o=this.dumpView(s),t.updateEndMagnet("target")),0===r&&0===o)return!this.dumpView(t)}return!1},requestViewUpdate:function(t,e,n,r){r||(r={}),this.scheduleViewUpdate(t,e,n,r);var i=this.isAsync();if(!(this.isFrozen()||i&&!1!==r.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var o=this.updateViews(r);i&&this.notifyAfterRender(o,r)}},scheduleViewUpdate:function(t,e,n,r){const{_updates:i,options:o}=this,{FLAG_REMOVE:s,FLAG_INSERT:a,UPDATE_PRIORITY:u,cid:c}=t;let l=i.priorities[n];if(l||(l=i.priorities[n]={}),n>u)for(let t=n-1;t>=u;t--){const e=i.priorities[t];e&&c in e&&(l[c]|=e[c],delete e[c])}let h=l[c]||0;if((h&e)===e)return;h||i.count++,e&s&&h&a?l[c]^=a:e&a&&h&s&&(l[c]^=s),l[c]|=e;const f=o.onViewUpdate;"function"==typeof f&&f.call(this,t,e,n,r||{},this)},dumpViewUpdate:function(t){if(!t)return 0;var e=this._updates,n=t.cid,r=e.priorities[t.UPDATE_PRIORITY],i=this.registerMountedView(t)|r[n];return delete r[n],i},dumpView:function(t,e){var n=this.dumpViewUpdate(t);return n?this.updateView(t,n,e):0},updateView:function(t,e,n){if(!t)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:i,model:o}=t;if(t instanceof Ur){if(e&r)return this.removeView(o),0;e&i&&(this.insertView(t),e^=i)}return e?t.confirmUpdate(e,n||{}):0},requireView:function(t,e){var n=this.findViewByModel(t);return n?(this.dumpView(n,e),n):null},registerUnmountedView:function(t){var e=t.cid,n=this._updates;if(e in n.unmounted)return 0;var r=n.unmounted[e]|=t.FLAG_INSERT;return n.unmountedCids.push(e),delete n.mounted[e],r},registerMountedView:function(t){var e=t.cid,n=this._updates;if(e in n.mounted)return 0;n.mounted[e]=!0,n.mountedCids.push(e);var r=n.unmounted[e]||0;return delete n.unmounted[e],r},isViewMounted:function(t){return!!t&&t.cid in this._updates.mounted},dumpViews:function(t){var e=Re({},t,{viewport:null});this.checkViewport(e),this.updateViews(e)},updateViews:function(t){let e;this.notifyBeforeRender(t);let n=0,r=0,i=sc;do{r++,e=this.updateViewsBatch(t),n+=e.updated,i=Math.min(e.priority,i)}while(!e.empty);const o={updated:n,batches:r,priority:i};return this.notifyAfterRender(o,t),o},hasScheduledUpdates:function(){const t=this._updates.priorities,e=Object.keys(t);let n=e.length;for(;n>0&&n--;)for(let r in t[e[n]])return!0;return!1},updateViewsAsync:function(t,e){t||(t={}),e||(e={processed:0,priority:sc});var n=this._updates,r=n.id;if(r){Ae(r),0===e.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);var i=this.updateViewsBatch(t),o=Re({},t,{mountBatchSize:1e3-i.mounted,unmountBatchSize:1e3-i.unmounted}),s=this.checkViewport(o),a=s.unmounted,u=s.mounted,c=e.processed,l=n.count;i.updated>0&&(c+=i.updated+i.unmounted,i.processed=c,e.priority=Math.min(i.priority,e.priority),i.empty&&0===u?(i.unmounted+=a,i.mounted+=u,i.priority=e.priority,this.notifyAfterRender(i,t),e.processed=0,e.priority=sc,n.count=0):e.processed=c);var h=t.progress;if(l&&"function"==typeof h&&h.call(this,i.empty,c,l,i,this),n.id!==r)return}n.id=_e(this.updateViewsAsync,this,t,e)},notifyBeforeRender:function(t={}){let e=t.beforeRender;"function"!=typeof e&&(e=this.options.beforeRender,"function"!=typeof e)||e.call(this,t,this)},notifyAfterRender:function(t,e={}){let n=e.afterRender;"function"!=typeof n&&(n=this.options.afterRender),"function"==typeof n&&n.call(this,t,e,this),this.trigger("render:done",t,e)},updateViewsBatch:function(t){t||(t={});var e=t.batchSize||1/0,n=this._updates,r=0,i=0,o=0,s=0,a=sc,u=!0,c=this.options,l=n.priorities,h="viewport"in t?t.viewport:c.viewport;"function"!=typeof h&&(h=null);var f=c.onViewPostponed;"function"!=typeof f&&(f=null);var d=Object.keys(l);t:for(var p=0,g=d.length;p<g;p++){var v=+d[p],m=l[v];for(var y in m){if(r>=e){u=!1;break t}var b=mn[y];if(b){var x=m[y];if(0==(x&b.FLAG_REMOVE)){var w=y in n.unmounted;if(b.DETACHABLE&&h&&!h.call(this,b,!w,this)){w||(this.registerUnmountedView(b),b.unmount()),n.unmounted[y]|=x,delete m[y],o++;continue}w&&(x|=b.FLAG_INSERT,s++),x|=this.registerMountedView(b)}var _=this.updateView(b,x,t);_>0&&(m[y]=_,!f||!f.call(this,b,_,this)||m[y])?(i++,u=!1):(a>v&&(a=v),r++,delete m[y])}else delete m[y]}}return{priority:a,updated:r,postponed:i,unmounted:o,mounted:s,empty:u}},getUnmountedViews:function(){const t=this._updates,e=Object.keys(t.unmounted),n=e.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=mn[e[i]];return r},getMountedViews:function(){const t=this._updates,e=Object.keys(t.mounted),n=e.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=mn[e[i]];return r},checkUnmountedViews:function(t,e){e||(e={});var n=0;"function"!=typeof t&&(t=null);for(var r=("mountBatchSize"in e?e.mountBatchSize:1/0),i=this._updates,o=i.unmountedCids,s=i.unmounted,a=0,u=Math.min(o.length,r);a<u;a++){var c=o[a];if(c in s){var l=mn[c];if(l)if(l.DETACHABLE&&t&&!t.call(this,l,!1,this))o.push(c);else{n++;var h=this.registerMountedView(l);h&&this.scheduleViewUpdate(l,h,l.UPDATE_PRIORITY,{mounting:!0})}}}return o.splice(0,a),n},checkMountedViews:function(t,e){e||(e={});var n=0;if("function"!=typeof t)return n;for(var r=("unmountBatchSize"in e?e.unmountBatchSize:1/0),i=this._updates,o=i.mountedCids,s=i.mounted,a=0,u=Math.min(o.length,r);a<u;a++){var c=o[a];if(c in s){var l=mn[c];l&&(l.DETACHABLE&&!t.call(this,l,!0,this)?(n++,this.registerUnmountedView(l)&&l.unmount()):o.push(c))}}return o.splice(0,a),n},checkViewport:function(t){var e=Re({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),n="viewport"in e?e.viewport:this.options.viewport,r=this.checkMountedViews(n,e);if(r>0){var i=this._updates.unmountedCids;e.mountBatchSize=Math.min(i.length-r,e.mountBatchSize)}return{mounted:this.checkUnmountedViews(n,e),unmounted:r}},freeze:function(t){t||(t={});var e=this._updates,n=t.key,r=this.options.frozen,i=e.freezeKey;if(n&&n!==i){if(r&&i)return;e.freezeKey=n,e.keyFrozen=r}this.options.frozen=!0;var o=e.id;e.id=null,this.isAsync()&&o&&Ae(o)},unfreeze:function(t){t||(t={});var e=this._updates,n=t.key,r=e.freezeKey;n&&r&&n!==r||(e.freezeKey=null,n&&n===r&&e.keyFrozen||(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=e.keyFrozen=!1,e.sort&&(this.sortViews(),e.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===oc.EXACT},onRemove:function(){this.freeze(),this.removeLayers(),this.removeViews()},getComputedSize:function(){var t=this.options,e=t.width,n=t.height;return un(e)||(e=this.el.clientWidth),un(n)||(n=this.el.clientHeight),{width:e,height:n}},setDimensions:function(t,e){const{options:n}=this,{width:r,height:i}=n;let o=void 0===t?r:t,s=void 0===e?i:e;if(r===o&&i===s)return;n.width=o,n.height=s,this._setDimensions();const a=this.getComputedSize();this.trigger("resize",a.width,a.height)},_setDimensions:function(){const{options:t}=this;let e=t.width,n=t.height;un(e)&&(e=Math.round(e)),un(n)&&(n=Math.round(n)),this.$el.css({width:null===e?"":e,height:null===n?"":n})},setOrigin:function(t,e){return this.translate(t||0,e||0)},fitToContent:function(t,e,n,r){r=an(t)?t:Ie({gridWidth:t,gridHeight:e,padding:n},r);const{x:i,y:o,width:s,height:a}=this.getFitToContentArea(r),{sx:u,sy:c}=this.scale();return this.setOrigin(-i*u,-o*c),this.setDimensions(s*u,a*c),new Q(i,o,s,a)},getFitToContentArea:function(t={}){const e=t.gridWidth||1,n=t.gridHeight||1,r=Te(t.padding||0),i=Math.max(t.minWidth||0,e),o=Math.max(t.minHeight||0,n),s=t.maxWidth||Number.MAX_VALUE,a=t.maxHeight||Number.MAX_VALUE,u=t.allowNewOrigin,c="contentArea"in t?new Q(t.contentArea):this.getContentArea(t),{sx:l,sy:h}=this.scale();c.x*=l,c.y*=h,c.width*=l,c.height*=h;let f=Math.ceil((c.width+c.x)/e),d=Math.ceil((c.height+c.y)/n);t.allowNegativeBottomRight||(f=Math.max(f,1),d=Math.max(d,1)),f*=e,d*=n;let p=0;("negative"===u&&c.x<0||"positive"===u&&c.x>=0||"any"===u)&&(p=Math.ceil(-c.x/e)*e,p+=r.left,f+=p);let g=0;return("negative"===u&&c.y<0||"positive"===u&&c.y>=0||"any"===u)&&(g=Math.ceil(-c.y/n)*n,g+=r.top,d+=g),f+=r.right,d+=r.bottom,f=Math.max(f,i),d=Math.max(d,o),f=Math.min(f,s),d=Math.min(d,a),new Q(-p/l,-g/h,f/l,d/h)},scaleContentToFit:function(t){var e,n;if(t||(t={}),"contentArea"in t){var r=t.contentArea;e=this.localToPaperRect(r),n=new j(r)}else e=this.getContentBBox(t),n=this.paperToLocalPoint(e);if(e.width&&e.height){Re(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var i,o=Te(t.padding),s=t.minScaleX||t.minScale,a=t.maxScaleX||t.maxScale,u=t.minScaleY||t.minScale,c=t.maxScaleY||t.maxScale;if(t.fittingBBox)i=t.fittingBBox;else{var l=this.translate(),h=this.getComputedSize();i={x:l.tx,y:l.ty,width:h.width,height:h.height}}i=new Q(i).moveAndExpand({x:o.left,y:o.top,width:-o.left-o.right,height:-o.top-o.bottom});var f=this.scale(),d=i.width/e.width*f.sx,p=i.height/e.height*f.sy;if(t.preserveAspectRatio&&(d=p=Math.min(d,p)),t.scaleGrid){var g=t.scaleGrid;d=g*Math.floor(d/g),p=g*Math.floor(p/g)}d=Math.min(a,Math.max(s,d)),p=Math.min(c,Math.max(u,p));var v=this.options.origin,m=i.x-n.x*d-v.x,y=i.y-n.y*p-v.y;this.scale(d,p),this.translate(m,y)}},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new Q:ue(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...t){const{restrictTranslate:e}=this.options;let n;return n=qe(e)?e.apply(this,t):!0===e?this.getArea():e?new Q(e):null,n},createViewForModel:function(t){const{options:e}=this;var n,r,i=e.cellViewNamespace,o=t.get("type")+"View",s=ve(i,o,".");return t.isLink()?(n=e.linkView,r=oo):(n=e.elementView,r=qr),new(n.prototype instanceof vn.View?s||n:n.call(this,t)||s||r)({model:t,interactive:e.interactive,labelsLayer:!0===e.labelsLayer?so.LABELS:e.labelsLayer})},removeView:function(t){const{id:e}=t,{_views:n,_updates:r}=this,i=n[e];if(i){var{cid:o}=i;const{mounted:t,unmounted:s}=r;i.remove(),delete n[e],delete t[o],delete s[o]}return i},renderView:function(t,e){const{id:n}=t,r=this._views;let i,o,s=!0;return n in r&&(i=r[n],i.model===t?(o=i.FLAG_INSERT,s=!1):this.removeView(t)),s&&(i=r[n]=this.createViewForModel(t),i.paper=this,o=this.registerUnmountedView(i)|i.getFlag(Qe(i,"initFlag"))),this.requestViewUpdate(i,o,i.UPDATE_PRIORITY,e),i},onImageDragStart:function(){return!1},resetViews:function(t,e){e||(e={}),t||(t=[]),this._resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var n=0,r=t.length;n<r;n++)this.renderView(t[n],e);this.unfreeze({key:"reset"}),this.sortViews()},removeViews:function(){De(this._views,"remove"),this._views={}},sortViews:function(){this.isExactSorting()&&(this.isFrozen()?this._updates.sort=!0:this.sortViewsExact())},sortViewsExact:function(){var t,e,n,r=le(this.cells).children("[model-id]"),i=this.model.get("cells");t=function(t,e){var n=i.get(t.getAttribute("model-id")),r=i.get(e.getAttribute("model-id")),o=n.attributes.z||0,s=r.attributes.z||0;return o===s?0:o<s?-1:1},e=le(r),n=e.map((function(){var t=this.parentNode,e=t.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(t===this)throw new Error("You can't sort elements if any one is a descendant of another.");t.insertBefore(this,e),t.removeChild(e)}})),Array.prototype.sort.call(e,t).each((function(t){n[t].call(this)}))},insertView:function(t){const e=this.getLayerView(so.CELLS),{el:n,model:r}=t;this.options.sorting===oc.APPROX?e.insertSortedNode(n,r.get("z")):e.insertNode(n),t.onMount()},scale:function(t,e,n,r){if(void 0===t)return ue.matrixToScale(this.matrix());void 0===e&&(e=t),void 0===n&&(n=0,r=0);var i=this.translate();if(n||r||i.tx||i.ty){var o=i.tx-n*(t-1),s=i.ty-r*(e-1);this.translate(o,s)}t=Math.max(t||0,this.MIN_SCALE),e=Math.max(e||0,this.MIN_SCALE);var a=this.matrix();return a.a=t,a.d=e,this.matrix(a),this.trigger("scale",t,e,n,r),this},rotate:function(t,e,n){if(void 0===t)return ue.matrixToRotate(this.matrix());if(void 0===e){var r=this.cells.getBBox();e=r.width/2,n=r.height/2}var i=this.matrix().translate(e,n).rotate(t).translate(-e,-n);return this.matrix(i),this},translate:function(t,e){if(void 0===t)return ue.matrixToTranslate(this.matrix());const{options:n}=this,{origin:r,drawGrid:i}=n;t||(t=0),e||(e=0);const o=this.matrix();if(o.e===t&&o.f===e)return this;o.e=t,o.f=e,this.matrix(o);const{tx:s,ty:a}=this.translate();return r.x=s,r.y=a,this.trigger("translate",s,a),i&&this.drawGrid(),this},findView:function(t){var e=cn(t)?this.cells.querySelector(t):t instanceof le?t[0]:t,n=this.findAttribute("model-id",e);if(n)return this._views[n]},findViewByModel:function(t){var e=cn(t)||un(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(t){return t=new j(t),this.model.getElements().map(this.findViewByModel,this).filter((function(e){return e&&e.vel.getBBox({target:this.cells}).containsPoint(t)}),this)},findViewsInArea:function(t,e){e=Re(e||{},{strict:!1}),t=new Q(t);var n=this.model.getElements().map(this.findViewByModel,this),r=e.strict?"containsRect":"intersect";return n.filter((function(e){return e&&t[r](e.vel.getBBox({target:this.cells}))}),this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t,...e){"string"==typeof t&&this.trigger("tools:event",t,...e)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var n=new j(t,e);return ue.transformPoint(n,this.matrix())},localToPaperRect:function(t,e,n,r){var i=new Q(t,e,n,r);return ue.transformRect(i,this.matrix())},paperToLocalPoint:function(t,e){var n=new j(t,e);return ue.transformPoint(n,this.matrix().inverse())},paperToLocalRect:function(t,e,n,r){var i=new Q(t,e,n,r);return ue.transformRect(i,this.matrix().inverse())},localToClientPoint:function(t,e){var n=new j(t,e);return ue.transformPoint(n,this.clientMatrix())},localToClientRect:function(t,e,n,r){var i=new Q(t,e,n,r);return ue.transformRect(i,this.clientMatrix())},clientToLocalPoint:function(t,e){var n=new j(t,e);return ue.transformPoint(n,this.clientMatrix().inverse())},clientToLocalRect:function(t,e,n,r){var i=new Q(t,e,n,r);return ue.transformRect(i,this.clientMatrix().inverse())},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,n,r){return this.localToPaperRect(t,e,n,r).offset(this.pageOffset())},pageToLocalPoint:function(t,e){var n=new j(t,e).difference(this.pageOffset());return this.paperToLocalPoint(n)},pageToLocalRect:function(t,e,n,r){var i=this.pageOffset(),o=new Q(t,e,n,r);return o.x-=i.x,o.y-=i.y,this.paperToLocalRect(o)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new j(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof oo))throw new Error("Must provide a linkView.");var e=t.model,n=this.options,r=this.model,i=r.constructor.validations;return!(!n.multiLinks&&!i.multiLinks.call(this,r,e)||!n.linkPinning&&!i.linkPinning.call(this,r,e)||"function"==typeof n.allowLink&&!n.allowLink.call(this,t,this))},getDefaultLink:function(t,e){return qe(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t={}){let{highlighter:e,type:n}=t;const{highlighting:r,highlighterNamespace:i}=this.options;if(void 0===e){if(!r)return!1;if(n&&(e=r[n],!1===e))return!1;e||(e=r.default)}if(!e)return!1;cn(e)&&(e={name:e});const o=e.name,s=i[o];if(!s)throw new Error('Unknown highlighter ("'+o+'")');if("function"!=typeof s.highlight)throw new Error('Highlighter ("'+o+'") is missing required highlight() method');if("function"!=typeof s.unhighlight)throw new Error('Highlighter ("'+o+'") is missing required unhighlight() method');return{highlighter:s,options:e.options||{},name:o}},onCellHighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:i,options:o}=r;i.highlight(t,e,o)},onCellUnhighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:i,options:o}=r;i.unhighlight(t,e,o)},pointerdblclick:function(t){t.preventDefault(),t=we(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.pointerdblclick(t,n.x,n.y):this.trigger("blank:pointerdblclick",t,n.x,n.y)}},pointerclick:function(t){if(this.eventData(t).mousemoved<=this.options.clickThreshold){t=we(t);var e=this.findView(t.target);if(this.guard(t,e))return;var n=this.snapToGrid(t.clientX,t.clientY);e?e.pointerclick(t,n.x,n.y):this.trigger("blank:pointerclick",t,n.x,n.y)}},contextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),t=we(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.contextmenu(t,n.x,n.y):this.trigger("blank:contextmenu",t,n.x,n.y)}},pointerdown:function(t){t=we(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?(t.preventDefault(),e.pointerdown(t,n.x,n.y)):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,n.x,n.y)),this.delegateDragEvents(e,t.data)}},pointermove:function(t){var e=this.eventData(t);if(e.mousemoved||(e.mousemoved=0),!(++e.mousemoved<=this.options.moveThreshold)){t=we(t);var n=this.snapToGrid(t.clientX,t.clientY),r=e.sourceView;r?r.pointermove(t,n.x,n.y):this.trigger("blank:pointermove",t,n.x,n.y),this.eventData(t,e)}},pointerup:function(t){this.undelegateDocumentEvents();var e=we(t),n=this.snapToGrid(e.clientX,e.clientY),r=this.eventData(t).sourceView;r?r.pointerup(e,n.x,n.y):this.trigger("blank:pointerup",e,n.x,n.y),e.isPropagationStopped()||this.pointerclick(le.Event(t,{type:"click",data:t.data})),t.stopImmediatePropagation(),this.delegateEvents()},mouseover:function(t){t=we(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=we(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=we(t);const{target:e,relatedTarget:n,currentTarget:r}=t,i=this.findView(e);if(this.guard(t,i))return;const o=this.findView(n);if(i){if(o===i)return;if(i.mouseenter(t),this.el.contains(n))return}o||r===this.el&&this.trigger("paper:mouseenter",t)},mouseleave:function(t){t=we(t);const{target:e,relatedTarget:n,currentTarget:r}=t,i=this.findView(e);if(this.guard(t,i))return;const o=this.findView(n);if(i){if(o===i)return;if(i.mouseleave(t),this.el.contains(n))return}o||r===this.el&&this.trigger("paper:mouseleave",t)},mousewheel:function(t){t=we(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=t.originalEvent,r=this.snapToGrid(n.clientX,n.clientY),i=Math.max(-1,Math.min(1,n.wheelDelta));e?e.mousewheel(t,r.x,r.y,i):this.trigger("blank:mousewheel",t,r.x,r.y,i)}},onevent:function(t){var e=t.currentTarget,n=e.getAttribute("event");if(n){var r=this.findView(e);if(r){if(t=we(t),this.guard(t,r))return;var i=this.snapToGrid(t.clientX,t.clientY);r.onevent(t,n,i.x,i.y)}}},magnetEvent:function(t,e){var n=t.currentTarget;if(n.getAttribute("magnet")){var r=this.findView(n);if(r){if(t=we(t),this.guard(t,r))return;var i=this.snapToGrid(t.clientX,t.clientY);e.call(this,r,t,n,i.x,i.y)}}},onmagnet:function(t){this.magnetEvent(t,(function(t,e,n,r,i){t.onmagnet(e,r,i)}))},magnetpointerdblclick:function(t){this.magnetEvent(t,(function(t,e,n,r,i){t.magnetpointerdblclick(e,n,r,i)}))},magnetcontextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),this.magnetEvent(t,(function(t,e,n,r,i){t.magnetcontextmenu(e,n,r,i)}))},onlabel:function(t){var e=t.currentTarget,n=this.findView(e);if(n){if(t=we(t),this.guard(t,n))return;var r=this.snapToGrid(t.clientX,t.clientY);n.onlabel(t,r.x,r.y)}},getPointerArgs(t){const e=we(t),{x:n,y:r}=this.snapToGrid(e.clientX,e.clientY);return[e,n,r]},delegateDragEvents:function(t,e){e||(e={}),this.eventData({data:e},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,e),this.undelegateEvents()},guard:function(t,e){return"mousedown"===t.type&&2===t.button||!(!this.options.guard||!this.options.guard(t,e))||(t.data&&void 0!==t.data.guarded?t.data.guarded:!(e&&e.model&&e.model instanceof or||this.svg===t.target||this.el===t.target||le.contains(this.svg,t.target)))},setGridSize:function(t){return this.options.gridSize=t,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:ue("svg",{width:"100%",height:"100%"},ue("defs")),patterns:{},add:function(t,e){ue(this.root.node.childNodes[0]).append(e),this.patterns[t]=e,this.root.append(ue("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}))},get:function(t){return this.patterns[t]},exist:function(t){return void 0!==this.patterns[t]}}),this._gridCache},setGrid:function(t){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(t)?t:[t||{}]).forEach((function(t){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(t))}),this),this},_resolveDrawGridOption:function(t){var e=this.constructor.gridPatterns;if(cn(t)&&Array.isArray(e[t]))return e[t].map((function(t){return Ie({},t)}));var n=t||{args:[{}]},r=Array.isArray(n),i=n.name;if(r||i||n.markup||(i="dot"),i&&Array.isArray(e[i])){var o=e[i].map((function(t){return Ie({},t)})),s=Array.isArray(n.args)?n.args:[n.args||{}];Re(s[0],tn(t,"args"));for(var a=0;a<s.length;a++)o[a]&&Ie(o[a],s[a]);return o}return r?n:[n]},drawGrid:function(t){var e=this.options.gridSize;if(e<=1)return this.clearGrid();var n=Array.isArray(t)?t:[t],r=this.matrix(),i=this._getGridRefs();this._gridSettings.forEach((function(t,o){var s="pattern_"+o,a=sn(t,n[o],{sx:r.a||1,sy:r.d||1,ox:r.e||0,oy:r.f||0});a.width=e*(r.a||1)*(a.scaleFactor||1),a.height=e*(r.d||1)*(a.scaleFactor||1),i.exist(s)||i.add(s,ue("pattern",{id:s,patternUnits:"userSpaceOnUse"},ue(a.markup)));var u=i.get(s);qe(a.update)&&a.update(u.node.childNodes[0],a);var c=a.ox%a.width;c<0&&(c+=a.width);var l=a.oy%a.height;l<0&&(l+=a.height),u.attr({x:c,y:l,width:a.width,height:a.height})}));var o=(new XMLSerializer).serializeToString(i.root.node);return o="url(data:image/svg+xml;base64,"+btoa(o)+")",this.$grid.css("backgroundImage",o),this},updateBackgroundImage:function(t){var e=(t=t||{}).position||"center",n=t.size||"auto auto",r=this.scale(),i=this.translate();an(e)&&(e=i.tx+r.sx*(e.x||0)+"px "+(i.ty+r.sy*(e.y||0))+"px"),an(n)&&(n=(n=new Q(n).scale(r.sx,r.sy)).width+"px "+n.height+"px"),this.$background.css({backgroundSize:n,backgroundPosition:e})},drawBackgroundImage:function(t,e){if(t instanceof HTMLImageElement){if(this._background&&this._background.id===e.id){var n,r=(e=e||{}).size,i=e.repeat||"no-repeat",o=e.opacity||1,s=Math.abs(e.quality)||1,a=this.constructor.backgroundPatterns[rn(i)];if(qe(a)){t.width*=s,t.height*=s;var u=a(t,e);if(!(u instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");n=u.toDataURL("image/png"),i="repeat",an(r)?(r.width*=u.width/t.width,r.height*=u.height/t.height):void 0===r&&(e.size={width:u.width/s,height:u.height/s})}else n=t.src,void 0===r&&(e.size={width:t.width,height:t.height});this.$background.css({opacity:o,backgroundRepeat:i,backgroundImage:"url("+n+")"}),this.updateBackgroundImage(e)}}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(t=t||{},this.updateBackgroundColor(t.color),t.image){t=this._background=ze(t),xe(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,De(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!an(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,n=t.name;if(e||(e=n+this.svg.id+ge(JSON.stringify(t))),!this.isDefined(e)){var r=Me,i=r[n]&&r[n](t.args||{});if(!i)throw new Error("Non-existing filter "+n);var o=Ie({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},t.attrs,{id:e});ue(i,o).appendTo(this.defs)}return e},defineGradient:function(t){if(!an(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{type:r,id:i=r+e.id+ge(JSON.stringify(t)),stops:o,attrs:s={}}=t;if(this.isDefined(i))return i;const a=We(o).map((({offset:t,color:e,opacity:n})=>ue("stop").attr({offset:t,"stop-color":e,"stop-opacity":Number.isFinite(n)?n:1}))),u=ue(r,s,a);return u.id=i,u.appendTo(n),i},definePattern:function(t){if(!an(t))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+ge(JSON.stringify(t)),markup:i,attrs:o={}}=t;if(!i)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const s=ue("pattern",{patternUnits:"userSpaceOnUse"});if(s.id=r,s.attr(o),"string"==typeof i)s.append(ue(i));else{const{fragment:t}=pe(i);s.append(t)}return s.appendTo(n),r},defineMarker:function(t){if(!an(t))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+ge(JSON.stringify(t)),markup:i,attrs:o={},markerUnits:s="userSpaceOnUse"}=t;if(this.isDefined(r))return r;const a=ue("marker",{orient:"auto",overflow:"visible",markerUnits:s});if(a.id=r,a.attr(o),i)if("string"==typeof i)a.append(ue(i));else{const{fragment:t}=pe(i);a.append(t)}else{const{type:e="path"}=t,n=ue(e,tn(t,"type","id","markup","attrs","markerUnits"));a.append(n)}return a.appendTo(n),r}},{sorting:oc,Layers:so,backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=2*r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(t,0,0,n,r),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(t,0,0,n,r),e},flipX:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(2*n,0),i.scale(-1,1),i.drawImage(t,0,0,n,r),e},flipY:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n,e.height=2*r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(0,2*r),i.scale(1,-1),i.drawImage(t,0,0,n,r),e},watermark:function(t,e){e=e||{};var n=t.width,r=t.height,i=document.createElement("canvas");i.width=3*n,i.height=3*r;for(var o=i.getContext("2d"),s=un(e.watermarkAngle)?-e.watermarkAngle:-20,a=b(s),u=i.width/4,c=i.height/4,l=0;l<4;l++)for(var h=0;h<4;h++)(l+h)%2>0&&(o.setTransform(1,0,0,1,(2*l-1)*u,(2*h-1)*c),o.rotate(a),o.drawImage(t,-n/2,-r/2,n,r));return i}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){ue(t).attr({width:e.thickness*e.sx,height:e.thickness*e.sy,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){var n=e.sx<=1?e.thickness*e.sx:e.thickness;ue(t).attr({width:n,height:n,fill:e.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,o=e.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",ue(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,o=e.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",ue(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,o=e.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",ue(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}]}});var hc=n(70681),fc=n(28282);const dc=_o.define("FSM",{bits:{in:1,out:1},polarity:{clock:!0},init_state:0,states:1,trans_table:[],size:{width:80,height:56},ports:{groups:{in:{position:_o.prototype._getStackedPosition({side:"left"})},out:{position:_o.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const t=this.get("bits"),e=this.get("polarity"),n=this.get("init_state"),r=this.get("states");this.get("trans_table"),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in,labelled:!0},{id:"clk",group:"in",dir:"in",bits:1,polarity:e.clock,decor:_o.prototype.decorClock,labelled:!0},{id:"arst",group:"in",dir:"in",bits:1,polarity:e.arst,labelled:!0},{id:"out",group:"out",dir:"out",bits:t.out,labelled:!0}],_o.prototype.initialize.apply(this,arguments);const i=this.get("current_state");this.fsmgraph=new hu;const o=[];for(let t=0;t<r;t++){const e=new Yr({stateNo:t,id:"state"+t,isInit:t==n});e.attr("label/text",String(t)),e.resize(100,50),t==n&&e.attr("body/strokeWidth",3),t==i&&e.attr("body/class","current_state"),e.addTo(this.fsmgraph),o.push(e)}for(const[t,e]of this.transitions)for(const n of e){const e=new Zr({id:n.id,ctrlIn:n.ctrlIn,ctrlOut:n.ctrlOut});e.appendLabel({attrs:{text:{text:e.get("ctrlIn").toBin()+"/"+e.get("ctrlOut").toBin()}}}),e.source({id:"state"+t}),e.target({id:"state"+n.stateOut}),e.addTo(this.fsmgraph)}this.listenTo(this,"change:current_state",((t,e)=>{const n=t.previous("current_state");this.fsmgraph.getCell("state"+n).removeAttr("body/class"),this.fsmgraph.getCell("state"+e).attr("body/class","current_state")})),this.listenTo(this,"change:next_trans",((t,e)=>{const n=t.previous("next_trans");if(n){const t=this.fsmgraph.getCell(n);t.removeAttr("line/class"),t.removeAttr("line/targetMarker/class")}e&&this.fsmgraph.getCell(e).attr({line:{class:"next_trans",targetMarker:{class:"next_trans"}}})}))},prepare(){const t=this.get("bits");this.transitions=new Map;var e=0;for(const n of this.get("trans_table"))this.transitions.has(n.state_in)||this.transitions.set(n.state_in,[]),this.transitions.get(n.state_in).push({id:"tr"+e,stateOut:n.state_out,ctrlIn:co.Vector3vl.fromBin(n.ctrl_in,t.in),ctrlOut:co.Vector3vl.fromBin(n.ctrl_out,t.out)}),e++;var n=this.get("current_state");void 0===n&&(n=this.get("init_state"),this.set("current_state",n)),this.last_clk=0},operation(t){const e=this.get("bits"),n=this.get("polarity"),r=()=>{const e=this.transitions.get(this.get("current_state"))||[];for(const n of e){const e=n.ctrlIn,r=e.xmask();if(t.in.or(r).eq(e.or(r)))return n}},i=t=>n[t]?1:-1;if(t.arst.get(0)==i("arst"))this.set("current_state",this.get("init_state"));else{const e=this.last_clk;if(t.clk.get(0)==i("clock")&&e==-i("clock")){const t=r();this.set("current_state",t?t.stateOut:this.get("init_state"))}}this.last_clk=t.clk.get(0);const o=r();return o?this.set("next_trans",o.id):this.set("next_trans",void 0),{out:(()=>{const n=this.transitions.get(this.get("current_state"))||[],r=t.in.xmask(),i=[];for(const e of n){const n=e.ctrlIn,o=n.xmask().or(r);t.in.or(o).eq(n.or(o))&&i.push(e.ctrlOut)}const o=co.Vector3vl.xes(e.out);if(0==i.length)return o;for(;i.length>1;){const t=i.pop(),e=i[0].xnor(t).or(o);i[0]=i[0].and(e).or(o.and(e.xmask()))}return i[0]})()}},markup:_o.prototype.markup.concat(_o.prototype.markupZoom),_gateParams:_o.prototype._gateParams.concat(["bits","polarity","states","init_state","trans_table"]),_unsupportedPropChanges:_o.prototype._unsupportedPropChanges.concat(["bits","polarity","states","init_state","trans_table"]),_presentationParams:_o.prototype._presentationParams.concat(["current_state","next_trans"])}),pc=Ao.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(t){t.stopPropagation();const e=le("<div>",{title:"FSM: "+this.model.get("label")}).appendTo("html > body"),n=le("<div>").appendTo(e),r=this.model.fsmgraph,i=new lc({el:n,model:r});return r.resetCells(r.getCells()),r.get("laid_out")||(Eu.layout(r,{dagre:hc,graphlib:fc}),r.set("laid_out",!0)),i.listenTo(r,"change:position",(t=>{i.fitToContent({padding:30,allowNewOrigin:"any"})})),i.fitToContent({padding:30,allowNewOrigin:"any"}),this.paper.trigger("open:fsm",e,(()=>{i.remove(),e.remove()})),!1}});var gc=n(21187);const vc=new Set(["Subcircuit","Input","Output","Button","Lamp","NumEntry","NumDisplay"]);class mc{constructor(t,e){this.source=t,this.target=e}}class yc{constructor(t,e,n,r,i,o){this.id=t,this.graph=e,this.special=vc.has(n.type),this.isSubcircuit="Subcircuit"==n.type,this.isOutput="Output"==n.type;const s=h[n.type].prototype;this.operation=s.operation;for(const t of s._operationHelpers)this[t]=s[t];this.links=new Set,this._links_to=Object.create(null),this._params=n,this._params.inputSignals=Object.create(null),this._params.outputSignals=Object.create(null),this._presentationParams=s._presentationParams,this._presentationParamChanged=Object.create(null),this._monitors=Object.create(null),this._ports=Object.create(null);for(const t of r)this._ports[t.id]=t,this._monitors[t.id]=new Set,"in"==t.dir&&(this._params.inputSignals[t.id]=co.Vector3vl.fromClonable(i[t.id])),"out"==t.dir&&(this._params.outputSignals[t.id]=co.Vector3vl.fromClonable(o[t.id]),this._links_to[t.id]=new Set);s.prepare.call(this)}get(t){return this._params[t]}set(t,e){this._params[t]=e,this._presentationParams.includes(t)&&xc._markPresentationParam(this,t)}addLinkTo(t,e){this._links_to[t].add(e)}removeLinkTo(t,e){this._links_to[t].delete(e)}addLink(t){this.links.add(t)}removeLink(t){this.links.delete(t)}targets(t){return this._links_to[t]}getPort(t){return this._ports[t]}getPorts(){return Object.values(this._ports)}trigger(t,...e){postMessage({type:"gateTrigger",args:[this.graph.id,this.id,t,e]})}monitor(t,e){this._monitors[t].add(e)}unmonitor(t,e){this._monitors[t].delete(Number(e))}getMonitors(t){return this._monitors[t]}}class bc{constructor(t){this.id=t,this._gates={},this._links={},this._observed=!1,this._subcircuit=null}addLink(t,e,n){this._links[t]=new mc(e,n),this._gates[e.id].addLinkTo(e.port,n),this._gates[e.id].addLink(t),this._gates[n.id].addLink(t)}addGate(t,e,n,r,i){this._gates[t]=new yc(t,this,e,n,r,i)}removeLink(t){const e=this._links[t];this._gates[e.source.id].removeLinkTo(e.source.port,e.target),this._gates[e.source.id].removeLink(t),this._gates[e.target.id].removeLink(t),delete this._links[t]}removeGate(t){for(const e of this._gates[t].links)this.removeLink(e);this._gates[t].graph=null,delete this._gates[t]}getGate(t){return this._gates[t]}getLink(t){return this._links[t]}getGates(){return Object.values(this._gates)}observe(){this._observed=!0}unobserve(){this._observed=!1}get observed(){return this._observed}setSubcircuit(t){this._subcircuit=t}get subcircuit(){return this._subcircuit}}const xc=new class{constructor(){this._interval=10,this._graphs=Object.create(null),this._monitors=Object.create(null),this._monitorChecks=Object.create(null),this._alarms=Object.create(null),this._alarmQueue=new Map,this._queue=new Map,this._pq=new gc,this._toUpdate=new Map,this._toUpdateParam=new Map,this._tick=0,this._sender=setInterval((()=>{this._sendUpdates()}),25),this._updater=null}interval(t){this._interval=t}updateGates(t,e){const n=this._updateGates();e&&this._sendUpdates(),this._postMonitors(),this._sendAck(t,n)}_updateGates(){if(this._pq.peek()==this._tick)return this._updateGatesNext();{const t=0|this._tick;return this._tick=t+1|0,0}}updateGatesNext(t,e){const n=this._updateGatesNext();e&&this._sendUpdates(),this._postMonitors(),this._sendAck(t,n)}_updateGatesNext(){const t=0|this._pq.poll();console.assert(t>=this._tick),this._tick=t;const e=this._queue.get(t);let n=0;for(;e.size;){const[t,r]=e.entries().next().value;if(e.delete(t),t.special)continue;if(!t.graph)continue;const i=t.operation(r);"_clock_hack"in i&&(delete i._clock_hack,this._enqueue(t)),this._setGateOutputSignals(t,i),n++}return this._queue.delete(t),this._tick=t+1|0,n}ping(t,e){e&&this._sendUpdates(),this._sendAck(t)}start(){this._stop(),this._updater=setInterval((()=>{this._updateGates(),this._postMonitors()}),this._interval)}startFast(){this._stop(),this._updater=setInterval((()=>{const t=Date.now();for(;Date.now()-t<10&&this._hasPendingEvents()&&this._updater;)this._updateGatesNext(),this._postMonitors()}),10)}stop(t,e){this._stop(),e&&this._sendUpdates(),this._sendAck(t)}_stop(){this._updater&&(clearInterval(this._updater),this._updater=null)}addGraph(t){console.assert(!(t in this._graphs)),this._graphs[t]=new bc(t)}addLink(t,e,n,r){const i=this._graphs[t];i.addLink(e,n,r);const o=i.getGate(n.id),s=i.getGate(r.id),a=o.get("outputSignals")[n.port];this._setGateInputSignal(s,r.port,a)}addGate(t,e,n,r,i,o){const s=this._graphs[t];s.addGate(e,n,r,i,o),this._enqueue(s.getGate(e))}addSubcircuit(t,e,n,r){const i=this._graphs[t].getGate(e),o=this._graphs[n];i.set("subgraph",o),i.set("circuitIOmap",r),o.setSubcircuit(i);for(const[t,e]of Object.entries(r)){const n=o.getGate(e);"in"==i.getPort(t).dir&&this._setGateOutputSignal(n,"out",i.get("inputSignals")[t]),"out"==i.getPort(t).dir&&this._setGateOutputSignal(i,t,n.get("inputSignals").in)}}removeLink(t,e){const n=this._graphs[t],r=n.getLink(e);n.removeLink(e);const i=n.getGate(r.target.id),o=co.Vector3vl.xes(i.getPort(r.target.port).bits);this._setGateInputSignal(i,r.target.port,o)}removeGate(t,e){this._graphs[t].removeGate(e)}observeGraph(t){const e=this._graphs[t];e.observe();for(const t of e.getGates())for(const e of t.getPorts())"out"==e.dir&&this._markUpdate(t,e.id)}unobserveGraph(t){this._graphs[t].unobserve()}changeInput(t,e,n){const r=this._graphs[t].getGate(e);this._setGateOutputSignals(r,{out:co.Vector3vl.fromClonable(n)})}changeParam(t,e,n,r){this._graphs[t].getGate(e).set(n,r)}manualMemChange(t,e,n,r){const i=this._graphs[t].getGate(e);i.memdata.set(n,co.Vector3vl.fromClonable(r)),this._enqueue(i)}monitor(t,e,n,r,{triggerValues:i,stopOnTrigger:o,oneShot:s,synchronous:a}){if(null!=i)for(const t of i.keys())i[t]=co.Vector3vl.fromClonable(i[t]);const u=this._graphs[t].getGate(e);this._monitors[r]={gate:u,port:n,triggerValues:i,stopOnTrigger:o,oneShot:s,synchronous:a},u.monitor(n,r),null==i&&postMessage({type:"monitorValue",args:[r,this._tick,u.get("outputSignals")[n]]})}unmonitor(t){const e=this._monitors[t];null!=e&&(e.gate.unmonitor(e.port,t),delete this._monitors[t],delete this._monitorChecks[t])}alarm(t,e,{stopOnAlarm:n,synchronous:r}){t<=this._tick||(this._alarms[e]={tick:t,stopOnAlarm:n,synchronous:r},this._alarmQueue.has(t)||this._alarmQueue.set(t,new Set),this._alarmQueue.get(t).add(e),this._pq.add(t-1),this._queue.has(t-1)||this._queue.set(t-1,new Map))}unalarm(t){const e=this._alarms[t];if(null==e)return;const n=e.tick;this._alarmQueue.get(n).delete(t),0==this._alarmQueue.get(n).size&&this._alarmQueue.delete(n),delete this._alarms[t]}_enqueue(t){const e=this._tick+t.get("propagation")|0;(()=>{const t=this._queue.get(e);if(void 0!==t)return t;const n=new Map;return this._queue.set(e,n),this._pq.add(e),n})().set(t,Object.assign({},t.get("inputSignals")))}_postMonitors(){for(const[t,e]of Object.entries(this._monitorChecks)){const{triggerValues:n,stopOnTrigger:r,oneShot:i,synchronous:o}=this._monitors[t];let s=!0;n&&(s=n.some((t=>e.eq(t)))),s&&(i&&this.unmonitor(t),o&&this._sendUpdates(),postMessage({type:"monitorValue",args:[t,this._tick,e,r,i]}),r&&this._stop())}if(this._monitorChecks=Object.create(null),this._alarmQueue.get(this._tick)){for(const t of this._alarmQueue.get(this._tick)){const{stopOnAlarm:e,synchronous:n}=this._alarms[t];n&&this._sendUpdates(),delete this._alarms[t],postMessage({type:"alarmReached",args:[t,this._tick,e]}),e&&this._stop()}this._alarmQueue.delete(this._tick)}}_setGateOutputSignals(t,e){for(const[n,r]of Object.entries(e))this._setGateOutputSignal(t,n,r)}_setGateOutputSignal(t,e,n){const r=t.get("outputSignals"),i=r[e];if(n.eq(i))return;r[e]=n,this._markUpdate(t,e);for(const r of t.targets(e)){const e=t.graph.getGate(r.id);this._setGateInputSignal(e,r.port,n)}const o=t.getMonitors(e);for(const t of o)this._monitorChecks[t]=n}_setGateInputSignal(t,e,n){const r=t.get("inputSignals"),i=r[e];if(!n.eq(i))if(r[e]=n,t.isSubcircuit){const r=t.get("subgraph");if(!r)return;const i=t.get("circuitIOmap"),o=r.getGate(i[e]);if(!o)return;this._setGateOutputSignals(o,{out:n})}else if(t.isOutput){const e=t.graph.subcircuit;if(!e)return;const r=t.get("net");this._setGateOutputSignal(e,r,n)}else this._enqueue(t)}_markUpdate(t,e){t.graph.observed&&(()=>{const e=this._toUpdate.get(t);if(void 0!==e)return e;const n=new Set;return this._toUpdate.set(t,n),n})().add(e)}_markPresentationParam(t,e){t.graph.observed&&(()=>{const e=this._toUpdateParam.get(t);if(void 0!==e)return e;const n=new Set;return this._toUpdateParam.set(t,n),n})().add(e)}_sendUpdates(){const t=[];for(const[e,n]of this._toUpdate){const r=e.get("outputSignals"),i={};for(const t of n)i[t]=r[t];t.push([e.graph.id,e.id,i])}this._toUpdate=new Map;const e=this._hasPendingEvents();if(postMessage({type:"update",args:[this._tick,e,t]}),this._toUpdateParam.size>0){for(const[t,e]of this._toUpdateParam)for(const n of e)postMessage({type:"gateSet",args:[t.graph.id,t.id,n,t.get(n)]});this._toUpdateParam=new Map}}_sendAck(t,e){postMessage({type:"ack",args:[t,e]})}_hasPendingEvents(){return this._queue.size>0}};self.onmessage=t=>{const e=t.data;"arg"in e?xc[e.type](e.arg):"args"in e?xc[e.type].apply(xc,e.args):xc[e.type]()}})()})();
//# sourceMappingURL=859.bundle.js.map